2024-05-21 00:58:20,819 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=43, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:58:21,464 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:58:21,436 INFO Node <naming_service_metadata/nacos3:7848> term 45 start preVote.

2024-05-21 00:58:21,436 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,411 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 00:58:21,425 INFO Node <naming_persistent_service/nacos3:7848> term 46 start preVote.

2024-05-21 00:58:21,410 INFO Node <naming_instance_metadata/nacos3:7848> term 43 start preVote.

2024-05-21 00:58:20,877 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:20,870 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499751901s. [closed=[], open=[[remote_addr=nacos2/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-21 00:58:21,551 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:21,488 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 00:58:21,508 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:58:21,560 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,602 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:21,772 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,773 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,776 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,709 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:21,815 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,816 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:21,847 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:21,717 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:21,890 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:21,763 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=43, lastLogIncluded=0, lastLogIndex=43, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=1, type=Follower] is going to quit

2024-05-21 00:58:21,764 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:21,894 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_41.

2024-05-21 00:58:21,916 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_40.

2024-05-21 00:58:21,925 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 41, cost 0 ms.

2024-05-21 00:58:21,900 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:58:21,901 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:58:21,979 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 42 to 42, cost 0 ms.

2024-05-21 00:58:21,901 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=44, currTerm=43, granted=true, requestLastLogId=LogId [index=42, term=43], lastLogId=LogId [index=42, term=43].

2024-05-21 00:58:21,912 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:58:21,912 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:22,046 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:21,913 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=43, lastLogIncluded=0, lastLogIndex=43, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=2, type=Follower] is going to quit

2024-05-21 00:58:22,049 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=44, currTerm=43, granted=true, requestLastLogId=LogId [index=43, term=43], lastLogId=LogId [index=43, term=43].

2024-05-21 00:58:22,051 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:21,914 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=43, lastLogIncluded=0, lastLogIndex=43, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=1, type=Follower] already destroyed, ignore error code: 1010

2024-05-21 00:58:22,089 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_44.

2024-05-21 00:58:22,001 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,133 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,021 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:22,131 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,235 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,236 INFO Peer nacos1:7848 is connected.

2024-05-21 00:58:22,137 INFO Peer nacos1:7848 is connected.

2024-05-21 00:58:22,139 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:22,174 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 45 to 45, cost 1 ms.

2024-05-21 00:58:22,343 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=43, granted=true.

2024-05-21 00:58:22,236 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,320 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:22,328 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=46, currTerm=45, because the leader nacos1:7848's lease is still valid.

2024-05-21 00:58:22,343 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=44, currTerm=43.

2024-05-21 00:58:22,344 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:58:22,365 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:58:22,346 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=43.

2024-05-21 00:58:22,358 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,360 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=46, currTerm=45, because the leader nacos1:7848's lease is still valid.

2024-05-21 00:58:22,365 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=46, granted=true.

2024-05-21 00:58:22,391 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=46.

2024-05-21 00:58:22,368 INFO Peer nacos2:7848 is connected.

2024-05-21 00:58:22,369 INFO Peer nacos1:7848 is connected.

2024-05-21 00:58:22,370 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:58:22,372 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_41.

2024-05-21 00:58:22,372 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=44, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 00:58:22,412 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,414 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 42, cost 0 ms.

2024-05-21 00:58:22,388 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=45, granted=false.

2024-05-21 00:58:22,393 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,428 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:58:22,412 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=44, currTerm=44, granted=true, requestLastLogId=LogId [index=43, term=43], lastLogId=LogId [index=43, term=43].

2024-05-21 00:58:22,423 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=47, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 00:58:22,423 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=44, votedFor=nacos3:7848, cost time=53 ms

2024-05-21 00:58:22,438 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:58:22,444 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:58:22,444 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=44, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 00:58:22,445 INFO Peer nacos2:7848 is connected.

2024-05-21 00:58:22,446 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:58:22,456 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:58:22,448 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:58:22,469 INFO Peer nacos2:7848 is connected.

2024-05-21 00:58:22,449 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=45, granted=true.

2024-05-21 00:58:22,488 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=45.

2024-05-21 00:58:22,488 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=44, currTerm=44.

2024-05-21 00:58:22,491 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:58:22,498 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:58:22,513 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:58:22,520 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=46, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 00:58:22,522 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=46, currTerm=46.

2024-05-21 00:58:22,520 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,550 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 00:58:22,559 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 00:58:22,560 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 00:58:22,566 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:58:22,576 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=47, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:58:22,578 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 00:58:22,579 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:58:22,585 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=43, currTerm=44.

2024-05-21 00:58:22,588 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 00:58:22,595 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:58:22,623 INFO onLeaderStart: term=47.

2024-05-21 00:59:24,641 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=47, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:59:24,672 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:59:24,667 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=6, type=Follower] is going to quit

2024-05-21 00:59:24,683 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=5, type=Follower] is going to quit

2024-05-21 00:59:24,790 INFO Node <naming_persistent_service_v2/nacos3:7848> term 44 start preVote.

2024-05-21 00:59:24,790 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:59:24,817 INFO Node <naming_instance_metadata/nacos3:7848> term 44 start preVote.

2024-05-21 00:59:24,821 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:59:24,872 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:24,933 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=45, currTerm=44, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:59:24,937 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=45, currTerm=44, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:59:25,043 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=47, currTerm=46, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:59:25,051 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,114 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 00:59:25,121 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=44, granted=true.

2024-05-21 00:59:25,128 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=44.

2024-05-21 00:59:25,128 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:59:25,130 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 00:59:25,138 INFO Connection disconnected: /172.25.0.3:44542

2024-05-21 00:59:25,181 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 00:59:25,188 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 00:59:25,196 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 00:59:25,234 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=45, votedFor=nacos3:7848, cost time=102 ms

2024-05-21 00:59:25,296 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=44, granted=true.

2024-05-21 00:59:25,296 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=44.

2024-05-21 00:59:25,297 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:59:25,305 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=45, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 00:59:25,345 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=48, currTerm=47.

2024-05-21 00:59:25,366 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 00:59:25,367 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 00:59:25,370 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=45, currTerm=45.

2024-05-21 00:59:25,378 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 00:59:25,378 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=48, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 00:59:25,391 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=45, currTerm=45, granted=true, requestLastLogId=LogId [index=43, term=44], lastLogId=LogId [index=43, term=44].

2024-05-21 00:59:25,401 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 00:59:25,417 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:59:25,427 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:59:25,438 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=45, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:59:25,454 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=48, votedFor=nacos2:7848, cost time=49 ms

2024-05-21 00:59:25,464 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=47, currTerm=46.

2024-05-21 00:59:25,469 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 00:59:25,471 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,475 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 00:59:25,483 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=47, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 00:59:25,493 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:59:25,497 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=47, votedFor=nacos1:7848, cost time=12 ms

2024-05-21 00:59:25,503 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,552 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=48, currTerm=48, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:59:25,563 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:59:25,619 INFO onLeaderStart: term=45.

2024-05-21 01:00:36,865 INFO Node <naming_persistent_service/nacos3:7848> term 48 start preVote.

2024-05-21 01:00:36,937 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:36,896 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:00:36,871 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:36,911 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=45, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:36,889 INFO Node <naming_instance_metadata/nacos3:7848> term 45 start preVote.

2024-05-21 01:00:36,867 INFO Node <naming_service_metadata/nacos3:7848> term 47 start preVote.

2024-05-21 01:00:37,011 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=4, type=Follower] is going to quit

2024-05-21 01:00:37,014 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:37,045 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=3, type=Follower] is going to quit

2024-05-21 01:00:37,102 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 01:00:37,131 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=45, term=45], lastLogId=LogId [index=45, term=45].

2024-05-21 01:00:37,137 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=45, term=45], lastLogId=LogId [index=45, term=45].

2024-05-21 01:00:37,187 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=47, granted=true.

2024-05-21 01:00:37,191 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=47.

2024-05-21 01:00:37,195 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:37,248 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=45, term=45], lastLogId=LogId [index=45, term=45].

2024-05-21 01:00:37,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=48, votedFor=nacos3:7848, cost time=51 ms

2024-05-21 01:00:37,253 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=48, granted=true.

2024-05-21 01:00:37,264 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=48.

2024-05-21 01:00:37,260 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=48, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,270 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:37,279 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=48, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,292 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=45, granted=true.

2024-05-21 01:00:37,296 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=45.

2024-05-21 01:00:37,298 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:37,299 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:37,311 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=49, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 01:00:37,314 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=49, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:00:37,324 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=46, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 01:00:37,334 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=46, currTerm=46.

2024-05-21 01:00:37,412 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=46, currTerm=45.

2024-05-21 01:00:37,459 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:37,483 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=48, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:37,460 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=46, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-21 01:00:37,492 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:00:37,495 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=49, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:37,501 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:00:37,506 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:37,506 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:37,514 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=46, votedFor=nacos1:7848, cost time=22 ms

2024-05-21 01:00:37,566 INFO onLeaderStart: term=48.

2024-05-21 01:00:37,573 INFO onLeaderStart: term=49.

2024-05-21 01:00:37,668 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:00:37,707 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:00:37,739 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:00:53,985 INFO Node <naming_persistent_service_v2/nacos3:7848> term 46 start preVote.

2024-05-21 01:00:54,051 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=48, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:54,032 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=49, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:54,338 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:54,310 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 01:00:54,157 INFO Node <naming_instance_metadata/nacos3:7848> term 46 start preVote.

2024-05-21 01:00:54,133 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:00:54,125 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:54,402 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:54,359 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=7, type=Follower] is going to quit

2024-05-21 01:00:54,501 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:54,393 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:54,612 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=46, term=46], lastLogId=LogId [index=46, term=46].

2024-05-21 01:00:54,655 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=46, granted=false.

2024-05-21 01:00:54,673 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=47, currTerm=46, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:00:54,675 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:00:54,763 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=46, granted=true.

2024-05-21 01:00:54,770 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:00:54,753 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=47, currTerm=46.

2024-05-21 01:00:54,777 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=46, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:00:54,770 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=46.

2024-05-21 01:00:54,794 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,774 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:00:54,828 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=49, term=49], lastLogId=LogId [index=49, term=49].

2024-05-21 01:00:54,834 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=49, currTerm=48.

2024-05-21 01:00:54,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=47, votedFor=0.0.0.0:0, cost time=68 ms

2024-05-21 01:00:54,868 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=47, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 01:00:54,870 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=46, currTerm=47.

2024-05-21 01:00:54,873 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=49, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 01:00:54,876 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=47, votedFor=nacos3:7848, cost time=53 ms

2024-05-21 01:00:54,878 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=49.

2024-05-21 01:00:54,869 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,881 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,855 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,898 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=49, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 01:00:54,898 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=47, currTerm=47.

2024-05-21 01:00:54,903 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=49, currTerm=49.

2024-05-21 01:00:54,913 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,918 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=47, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:54,914 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=50, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 01:00:54,921 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:00:54,933 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,929 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,948 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:54,958 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=50, votedFor=nacos1:7848, cost time=25 ms

2024-05-21 01:00:55,031 INFO onLeaderStart: term=47.

2024-05-21 01:00:55,057 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:11,675 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=47, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:01:11,810 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:01:11,723 INFO Node <naming_service_metadata/nacos3:7848> term 49 start preVote.

2024-05-21 01:01:11,827 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:01:11,808 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:01:11,869 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:01:11,768 INFO Node <naming_persistent_service/nacos3:7848> term 50 start preVote.

2024-05-21 01:01:11,787 INFO Node <naming_persistent_service_v2/nacos3:7848> term 47 start preVote.

2024-05-21 01:01:11,878 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=5, type=Follower] is going to quit

2024-05-21 01:01:12,104 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=6, type=Follower] is going to quit

2024-05-21 01:01:12,209 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=50, currTerm=49, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:01:12,222 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=50, currTerm=49, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:01:12,225 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:01:12,230 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 01:01:12,238 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:01:12,250 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=50, term=50], lastLogId=LogId [index=50, term=50].

2024-05-21 01:01:12,528 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=51, currTerm=50.

2024-05-21 01:01:12,524 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=48, currTerm=47.

2024-05-21 01:01:12,543 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=47, granted=true.

2024-05-21 01:01:12,547 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=49.

2024-05-21 01:01:12,547 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=47.

2024-05-21 01:01:12,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:01:12,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=48, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 01:01:12,559 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=48, currTerm=48.

2024-05-21 01:01:12,576 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=50, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 01:01:12,577 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=47, currTerm=48.

2024-05-21 01:01:12,565 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=48, currTerm=48.

2024-05-21 01:01:12,566 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=51, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 01:01:12,585 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=50, currTerm=51.

2024-05-21 01:01:12,588 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=50, currTerm=51.

2024-05-21 01:01:12,573 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,569 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,578 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=49, currTerm=50.

2024-05-21 01:01:12,610 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=49, currTerm=50.

2024-05-21 01:01:12,636 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=51, votedFor=nacos2:7848, cost time=45 ms

2024-05-21 01:01:12,636 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=48, votedFor=nacos2:7848, cost time=56 ms

2024-05-21 01:01:12,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=48, votedFor=nacos3:7848, cost time=58 ms

2024-05-21 01:01:12,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=50, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 01:01:12,639 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,646 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:01:12,649 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:18:19,062 INFO Node <naming_instance_metadata/nacos3:7848> term 48 start preVote.

2024-05-21 01:18:19,070 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:18:19,071 INFO Node <naming_persistent_service/nacos3:7848> term 51 start preVote.

2024-05-21 01:18:19,072 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:18:19,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:19,067 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:19,063 INFO Node <naming_persistent_service_v2/nacos3:7848> term 48 start preVote.

2024-05-21 01:18:19,069 INFO Node <naming_service_metadata/nacos3:7848> term 50 start preVote.

2024-05-21 01:18:19,478 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=49, currTerm=48, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:18:19,600 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=51, currTerm=50, because the leader nacos1:7848's lease is still valid.

2024-05-21 01:18:19,602 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=52, currTerm=51, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:18:19,688 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=51, granted=false.

2024-05-21 01:18:19,604 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:18:19,664 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=48, granted=true.

2024-05-21 01:18:19,693 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=48.

2024-05-21 01:18:19,694 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,669 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=50, granted=true.

2024-05-21 01:18:19,691 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=48, granted=true.

2024-05-21 01:18:19,703 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=48.

2024-05-21 01:18:19,694 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=51, granted=true.

2024-05-21 01:18:19,702 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=50.

2024-05-21 01:18:19,712 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=51.

2024-05-21 01:18:19,716 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,709 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=48, currTerm=49.

2024-05-21 01:18:19,718 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,725 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=49, currTerm=49.

2024-05-21 01:18:19,724 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=49, votedFor=nacos3:7848, cost time=27 ms

2024-05-21 01:18:19,732 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:19,742 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=52, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 01:18:19,797 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=49, currTerm=49.

2024-05-21 01:18:19,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=49, votedFor=nacos3:7848, cost time=80 ms

2024-05-21 01:18:19,814 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=51, votedFor=nacos3:7848, cost time=79 ms

2024-05-21 01:18:19,814 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=49, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:19,815 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:19,816 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=51, currTerm=51.

2024-05-21 01:18:19,819 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:19,820 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:18:19,828 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:19,848 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=52, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:19,852 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:18:19,855 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:19,876 INFO onLeaderStart: term=49.

2024-05-21 01:18:19,890 INFO onLeaderStart: term=52.

2024-05-21 01:18:19,915 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:19,970 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:18:19,964 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:43,643 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:43,641 INFO Node <naming_persistent_service_v2/nacos3:7848> term 49 start preVote.

2024-05-21 01:18:43,680 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=49, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:43,689 INFO Node <naming_service_metadata/nacos3:7848> term 51 start preVote.

2024-05-21 01:18:43,689 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:43,666 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=52, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:43,927 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=9, type=Follower] is going to quit

2024-05-21 01:18:43,781 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:43,800 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 01:18:43,929 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:43,965 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=10, type=Follower] is going to quit

2024-05-21 01:18:43,965 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 01:18:44,063 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:18:44,107 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=52, term=52], lastLogId=LogId [index=52, term=52].

2024-05-21 01:18:44,176 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:18:44,197 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=49, granted=true.

2024-05-21 01:18:44,205 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=49.

2024-05-21 01:18:44,258 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=51, granted=true.

2024-05-21 01:18:44,259 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=51.

2024-05-21 01:18:44,285 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,336 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=50, currTerm=49.

2024-05-21 01:18:44,423 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,428 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=53, currTerm=52.

2024-05-21 01:18:44,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=52, votedFor=nacos3:7848, cost time=195 ms

2024-05-21 01:18:44,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=50, votedFor=nacos3:7848, cost time=245 ms

2024-05-21 01:18:44,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=50, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 01:18:44,461 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=51, currTerm=52.

2024-05-21 01:18:44,463 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=49], lastLogId=LogId [index=49, term=49].

2024-05-21 01:18:44,470 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=53, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 01:18:44,469 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=52, currTerm=52, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:18:44,471 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:44,483 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=50, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 01:18:44,487 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=50.

2024-05-21 01:18:44,498 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=53, votedFor=nacos2:7848, cost time=24 ms

2024-05-21 01:18:44,507 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,566 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:44,567 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=50, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:44,585 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:18:44,594 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:44,652 INFO onLeaderStart: term=50.

2024-05-21 01:18:44,660 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=52, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:44,663 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:18:44,666 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:44,668 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:44,674 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:44,703 INFO onLeaderStart: term=52.

2024-05-21 01:35:32,079 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=50, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:32,113 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=52, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:32,095 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:35:32,151 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:32,177 INFO Node <naming_persistent_service/nacos3:7848> term 53 start preVote.

2024-05-21 01:35:32,208 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=5, type=Follower] is going to quit

2024-05-21 01:35:32,161 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:32,165 INFO Node <naming_instance_metadata/nacos3:7848> term 50 start preVote.

2024-05-21 01:35:32,272 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=6, type=Follower] is going to quit

2024-05-21 01:35:32,230 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:35:32,244 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:35:32,286 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:35:32,588 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=50, granted=true.

2024-05-21 01:35:32,608 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=50.

2024-05-21 01:35:32,591 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=53, granted=true.

2024-05-21 01:35:32,613 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=53.

2024-05-21 01:35:32,614 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:32,618 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:32,678 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=51, votedFor=nacos3:7848, cost time=60 ms

2024-05-21 01:35:32,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=54, votedFor=nacos3:7848, cost time=59 ms

2024-05-21 01:35:32,722 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=54, currTerm=54, granted=true, requestLastLogId=LogId [index=53, term=53], lastLogId=LogId [index=53, term=53].

2024-05-21 01:35:32,722 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:35:32,748 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=50, term=50], lastLogId=LogId [index=50, term=50].

2024-05-21 01:35:32,788 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=51, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:32,793 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:32,921 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=54, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:32,923 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:32,924 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:32,937 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,950 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=51, currTerm=51, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:32,926 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:32,950 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,939 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,933 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,973 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=52.

2024-05-21 01:35:32,974 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:33,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=51, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 01:35:32,989 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:35:33,027 INFO onLeaderStart: term=51.

2024-05-21 01:35:33,025 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=51, currTerm=51.

2024-05-21 01:35:33,044 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=53, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 01:35:33,049 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=51, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 01:35:33,052 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=51, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 01:35:33,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=53, votedFor=nacos1:7848, cost time=15 ms

2024-05-21 01:35:33,068 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:33,093 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:33,095 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:35:33,112 INFO onLeaderStart: term=54.

2024-05-21 01:35:33,121 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:49,146 INFO Node <naming_persistent_service_v2/nacos3:7848> term 51 start preVote.

2024-05-21 01:35:49,148 INFO Node <naming_service_metadata/nacos3:7848> term 53 start preVote.

2024-05-21 01:35:49,150 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=54, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:49,210 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:35:49,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:35:49,236 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=51, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:49,243 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:35:49,244 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:49,240 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=13, type=Follower] is going to quit

2024-05-21 01:35:49,268 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:49,331 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:35:49,711 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:35:49,331 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=12, type=Follower] is going to quit

2024-05-21 01:35:49,577 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=53, granted=true.

2024-05-21 01:35:49,737 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=53.

2024-05-21 01:35:49,747 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=53, currTerm=54.

2024-05-21 01:35:49,736 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=52, currTerm=51, because the leader nacos1:7848's lease is still valid.

2024-05-21 01:35:49,750 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=54, currTerm=54, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:35:49,774 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=51, granted=true.

2024-05-21 01:35:49,788 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=51.

2024-05-21 01:35:49,790 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:49,834 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=52, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 01:35:49,837 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:35:49,836 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=54, votedFor=nacos3:7848, cost time=47 ms

2024-05-21 01:35:49,846 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=54, currTerm=54.

2024-05-21 01:35:49,836 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=54, term=54], lastLogId=LogId [index=54, term=54].

2024-05-21 01:35:49,834 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:35:49,853 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:35:49,854 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=52, currTerm=51.

2024-05-21 01:35:49,856 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=54, term=54], lastLogId=LogId [index=54, term=54].

2024-05-21 01:35:49,898 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=52, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 01:35:49,899 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,901 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,909 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=52, currTerm=52, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:35:49,898 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,930 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,936 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=54.

2024-05-21 01:35:49,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=52, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 01:35:49,949 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=52, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:49,978 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=55, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 01:35:49,991 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=55.

2024-05-21 01:35:49,982 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:50,000 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=54, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:50,003 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:50,014 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=55, votedFor=nacos2:7848, cost time=20 ms

2024-05-21 01:35:50,017 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:50,025 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:50,036 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:50,073 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:50,093 INFO onLeaderStart: term=52.

2024-05-21 01:35:50,100 INFO onLeaderStart: term=54.

2024-05-21 01:36:09,403 INFO Node <naming_persistent_service/nacos3:7848> term 55 start preVote.

2024-05-21 01:36:09,539 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=52, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:36:09,539 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=54, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:36:09,539 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:36:09,535 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:36:09,611 INFO Node <naming_instance_metadata/nacos3:7848> term 52 start preVote.

2024-05-21 01:36:09,605 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:36:09,627 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:36:09,637 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=8, type=Follower] is going to quit

2024-05-21 01:36:09,646 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 01:36:09,697 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=7, type=Follower] is going to quit

2024-05-21 01:36:09,723 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 01:36:10,063 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=52, term=52], lastLogId=LogId [index=52, term=52].

2024-05-21 01:36:10,101 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=55, granted=true.

2024-05-21 01:36:10,102 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=55.

2024-05-21 01:36:10,105 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,107 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,129 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,142 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,146 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,155 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,152 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,179 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=52.

2024-05-21 01:36:10,161 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,291 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=52, granted=true.

2024-05-21 01:36:10,300 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=52.

2024-05-21 01:36:10,294 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=56, votedFor=nacos3:7848, cost time=182 ms

2024-05-21 01:36:10,297 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=53, votedFor=0.0.0.0:0, cost time=106 ms

2024-05-21 01:36:10,308 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=53.

2024-05-21 01:36:10,318 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,354 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=56, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:36:10,358 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=53, votedFor=nacos1:7848, cost time=32 ms

2024-05-21 01:36:10,358 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=53, votedFor=nacos3:7848, cost time=44 ms

2024-05-21 01:36:10,360 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=53, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=52], lastLogId=LogId [index=52, term=52].

2024-05-21 01:36:10,359 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:36:10,372 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:36:10,379 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=53, term=54], lastLogId=LogId [index=53, term=54].

2024-05-21 01:36:10,380 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=53, term=54], lastLogId=LogId [index=53, term=54].

2024-05-21 01:36:10,384 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,421 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:36:10,429 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=52, currTerm=53.

2024-05-21 01:36:10,439 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,449 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:36:10,478 INFO onLeaderStart: term=56.

2024-05-21 01:36:10,516 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=54.

2024-05-21 01:36:10,520 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:36:10,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=55, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 01:36:10,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=55, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 01:52:54,144 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=56, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:52:54,211 INFO Node <naming_instance_metadata/nacos3:7848> term 53 start preVote.

2024-05-21 01:52:54,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:52:54,239 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=15, type=Follower] is going to quit

2024-05-21 01:52:54,233 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:52:54,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:52:54,225 INFO Node <naming_persistent_service_v2/nacos3:7848> term 53 start preVote.

2024-05-21 01:52:54,218 INFO Node <naming_service_metadata/nacos3:7848> term 55 start preVote.

2024-05-21 01:52:54,211 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:52:54,295 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=14, type=Follower] is going to quit

2024-05-21 01:52:54,376 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 01:52:54,386 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 01:52:54,402 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 01:52:54,491 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=53, granted=true.

2024-05-21 01:52:54,496 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=53.

2024-05-21 01:52:54,499 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:52:54,510 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=56, currTerm=55.

2024-05-21 01:52:54,575 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=56, votedFor=0.0.0.0:0, cost time=62 ms

2024-05-21 01:52:54,580 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=53, granted=true.

2024-05-21 01:52:54,581 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=53.

2024-05-21 01:52:54,588 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:52:54,580 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=57, currTerm=56.

2024-05-21 01:52:54,624 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=56, votedFor=nacos1:7848, cost time=47 ms

2024-05-21 01:52:54,628 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=55, currTerm=56.

2024-05-21 01:52:54,631 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=54, votedFor=nacos3:7848, cost time=42 ms

2024-05-21 01:52:54,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=57, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 01:52:54,645 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:52:54,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=54, votedFor=nacos3:7848, cost time=138 ms

2024-05-21 01:52:54,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=57, votedFor=nacos1:7848, cost time=19 ms

2024-05-21 01:52:54,783 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:52:54,864 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:52:54,877 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=54, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:52:54,901 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:52:54,917 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:52:54,956 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=54, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:52:54,963 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:52:54,974 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:52:54,969 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:52:54,996 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:52:54,987 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:52:55,029 INFO onLeaderStart: term=54.

2024-05-21 01:52:55,029 INFO onLeaderStart: term=54.

2024-05-21 01:52:55,068 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:54:01,600 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=54, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:54:01,749 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:54:01,691 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=54, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:54:01,696 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:54:01,698 INFO Node <naming_persistent_service/nacos3:7848> term 57 start preVote.

2024-05-21 01:54:01,704 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:54:01,815 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 01:54:01,642 INFO Node <naming_service_metadata/nacos3:7848> term 56 start preVote.

2024-05-21 01:54:01,750 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=9, type=Follower] is going to quit

2024-05-21 01:54:01,862 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 01:54:01,848 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:54:01,968 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=10, type=Follower] is going to quit

2024-05-21 01:54:02,237 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=56, granted=true.

2024-05-21 01:54:02,243 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=56.

2024-05-21 01:54:02,243 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=54, term=54], lastLogId=LogId [index=54, term=54].

2024-05-21 01:54:02,258 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:54:02,278 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=58, currTerm=57, because the leader nacos1:7848's lease is still valid.

2024-05-21 01:54:02,345 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=57, granted=true.

2024-05-21 01:54:02,355 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=57, votedFor=nacos3:7848, cost time=92 ms

2024-05-21 01:54:02,375 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=57.

2024-05-21 01:54:02,389 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:54:02,378 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=54, term=54], lastLogId=LogId [index=54, term=54].

2024-05-21 01:54:02,379 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 01:54:02,453 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=54.

2024-05-21 01:54:02,648 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=58, votedFor=nacos3:7848, cost time=147 ms

2024-05-21 01:54:02,661 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=57, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:54:02,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=55, votedFor=0.0.0.0:0, cost time=190 ms

2024-05-21 01:54:02,672 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=55, currTerm=54, granted=true, requestLastLogId=LogId [index=53, term=54], lastLogId=LogId [index=53, term=54].

2024-05-21 01:54:02,692 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:54:02,707 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:54:02,692 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,679 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=55.

2024-05-21 01:54:02,717 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=58, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:54:02,720 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:54:02,693 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,722 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:54:02,729 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:54:02,735 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=55, votedFor=nacos1:7848, cost time=19 ms

2024-05-21 01:54:02,740 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:54:02,737 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,744 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:54:02,765 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=54.

2024-05-21 01:54:02,771 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,784 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=55, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 01:54:02,807 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:54:02,810 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=55, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 01:54:02,818 INFO onLeaderStart: term=58.

2024-05-21 01:54:02,830 INFO onLeaderStart: term=57.

2024-05-21 02:00:31,204 INFO Node <naming_persistent_service_v2/nacos3:7848> term 55 start preVote.

2024-05-21 02:00:31,398 INFO Node <naming_instance_metadata/nacos3:7848> term 55 start preVote.

2024-05-21 02:00:31,193 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:00:31,535 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=57, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:00:31,541 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:00:31,533 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=58, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:00:31,572 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:00:31,573 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=16, type=Follower] is going to quit

2024-05-21 02:00:31,590 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=17, type=Follower] is going to quit

2024-05-21 02:00:31,584 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=14, type=Follower] is going to quit

2024-05-21 02:00:31,609 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:31,617 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:31,578 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:00:31,611 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=15, type=Follower] is going to quit

2024-05-21 02:00:31,621 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:00:31,615 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:00:31,648 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=55, granted=true.

2024-05-21 02:00:31,688 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=55.

2024-05-21 02:00:31,662 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:31,663 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:00:31,691 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:31,743 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=56, votedFor=nacos3:7848, cost time=42 ms

2024-05-21 02:00:31,751 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:00:31,769 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:00:31,780 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=58, term=58], lastLogId=LogId [index=58, term=58].

2024-05-21 02:00:31,784 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:31,822 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=55, granted=true.

2024-05-21 02:00:31,830 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=55.

2024-05-21 02:00:31,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:00:31,857 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=56, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 02:00:31,926 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=58, currTerm=57.

2024-05-21 02:00:31,941 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=59, currTerm=58.

2024-05-21 02:00:31,958 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=56, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:00:31,951 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=56, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:00:31,971 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=58, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 02:00:31,972 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:00:31,977 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=59, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 02:00:31,966 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:00:31,982 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=58, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 02:00:31,990 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:00:31,990 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:00:32,011 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=59, votedFor=nacos2:7848, cost time=28 ms

2024-05-21 02:00:32,032 INFO onLeaderStart: term=56.

2024-05-21 02:00:32,036 INFO onLeaderStart: term=56.

2024-05-21 02:00:32,696 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:32,717 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=58, currTerm=58, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:00:32,844 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 02:00:32,858 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 02:00:32,868 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:00:32,896 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:16:46,478 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:16:46,467 INFO Node <naming_service_metadata/nacos3:7848> term 58 start preVote.

2024-05-21 02:16:46,466 INFO Node <naming_persistent_service/nacos3:7848> term 59 start preVote.

2024-05-21 02:16:46,471 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=56, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:16:46,469 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=56, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:16:46,468 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:16:46,639 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:16:46,815 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=12, type=Follower] is going to quit

2024-05-21 02:16:46,730 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:16:46,802 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=14, type=Follower] is going to quit

2024-05-21 02:16:46,832 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=13, type=Follower] is going to quit

2024-05-21 02:16:46,833 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=15, type=Follower] is going to quit

2024-05-21 02:16:47,116 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 02:16:47,122 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,125 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=59, currTerm=58, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:16:47,129 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 02:16:47,132 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,169 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=58, granted=true.

2024-05-21 02:16:47,175 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=58.

2024-05-21 02:16:47,178 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:16:47,197 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=59, granted=true.

2024-05-21 02:16:47,201 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=59.

2024-05-21 02:16:47,203 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:16:47,252 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=59, votedFor=nacos3:7848, cost time=46 ms

2024-05-21 02:16:47,255 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=57, currTerm=56.

2024-05-21 02:16:47,263 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=60, votedFor=nacos3:7848, cost time=59 ms

2024-05-21 02:16:47,278 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=57, currTerm=56.

2024-05-21 02:16:47,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=57, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-21 02:16:47,306 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=57, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-21 02:16:47,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=57, votedFor=nacos2:7848, cost time=24 ms

2024-05-21 02:16:47,330 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 02:16:47,339 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=57, votedFor=nacos2:7848, cost time=24 ms

2024-05-21 02:16:47,380 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,369 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,429 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,447 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,449 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,454 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,468 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=59, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:16:47,471 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:16:47,472 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=60, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:16:47,481 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:16:47,483 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:16:47,504 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:16:47,543 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:16:47,547 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=59, currTerm=59.

2024-05-21 02:16:47,565 INFO onLeaderStart: term=59.

2024-05-21 02:16:47,576 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:16:47,597 INFO onLeaderStart: term=60.

2024-05-21 02:33:05,653 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=59, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:05,614 INFO Node <naming_instance_metadata/nacos3:7848> term 57 start preVote.

2024-05-21 02:33:05,583 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=60, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:05,741 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:05,615 INFO Node <naming_persistent_service_v2/nacos3:7848> term 57 start preVote.

2024-05-21 02:33:05,742 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 02:33:05,829 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=17, type=Follower] is going to quit

2024-05-21 02:33:05,833 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:33:05,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:33:05,793 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:05,830 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=19, type=Follower] is going to quit

2024-05-21 02:33:05,887 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=18, type=Follower] is going to quit

2024-05-21 02:33:06,117 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=58, currTerm=57, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:33:06,118 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=58, term=59], lastLogId=LogId [index=58, term=59].

2024-05-21 02:33:06,131 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:33:06,205 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=61, currTerm=60, granted=true, requestLastLogId=LogId [index=60, term=60], lastLogId=LogId [index=60, term=60].

2024-05-21 02:33:06,255 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,297 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=57, granted=true.

2024-05-21 02:33:06,305 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=57.

2024-05-21 02:33:06,457 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,464 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=57, granted=true.

2024-05-21 02:33:06,482 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=57.

2024-05-21 02:33:06,484 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:06,486 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=61, currTerm=60.

2024-05-21 02:33:06,495 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=60, currTerm=59.

2024-05-21 02:33:06,488 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=58, currTerm=58.

2024-05-21 02:33:06,512 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:06,507 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:06,479 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,517 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=58, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 02:33:06,522 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=61, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 02:33:06,528 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=58, currTerm=58.

2024-05-21 02:33:06,533 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=60, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 02:33:06,542 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=61, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 02:33:06,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=58, votedFor=nacos3:7848, cost time=45 ms

2024-05-21 02:33:06,566 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=60, votedFor=nacos1:7848, cost time=26 ms

2024-05-21 02:33:06,570 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,604 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:29,828 INFO Node <naming_persistent_service_v2/nacos3:7848> term 58 start preVote.

2024-05-21 02:33:29,871 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:29,856 INFO Node <naming_persistent_service/nacos3:7848> term 61 start preVote.

2024-05-21 02:33:29,870 INFO Node <naming_instance_metadata/nacos3:7848> term 58 start preVote.

2024-05-21 02:33:29,852 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:29,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:29,874 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:29,850 INFO Node <naming_service_metadata/nacos3:7848> term 60 start preVote.

2024-05-21 02:33:30,221 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=58, granted=true.

2024-05-21 02:33:30,225 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=58.

2024-05-21 02:33:30,275 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=61, granted=true.

2024-05-21 02:33:30,280 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=61.

2024-05-21 02:33:30,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:30,331 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=59, votedFor=nacos3:7848, cost time=57 ms

2024-05-21 02:33:30,339 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=58, currTerm=59.

2024-05-21 02:33:30,357 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=62, votedFor=nacos3:7848, cost time=63 ms

2024-05-21 02:33:30,431 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=58, granted=true.

2024-05-21 02:33:30,434 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=58.

2024-05-21 02:33:30,441 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:30,543 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 02:33:30,559 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=59, votedFor=nacos3:7848, cost time=115 ms

2024-05-21 02:33:30,571 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=59, currTerm=59, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:33:30,572 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=60, granted=true.

2024-05-21 02:33:30,580 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=60.

2024-05-21 02:33:30,584 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:30,592 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:30,604 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 02:33:30,607 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:30,622 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:30,629 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=59, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:30,642 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=62, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:30,649 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:30,649 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:30,646 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 02:33:30,667 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:33:30,671 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=59, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:30,669 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:33:30,691 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 02:33:30,685 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:30,685 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:30,736 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:30,757 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:33:30,761 INFO onLeaderStart: term=59.

2024-05-21 02:33:30,761 INFO onLeaderStart: term=62.

2024-05-21 02:33:30,768 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:30,762 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=61, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:30,793 INFO onLeaderStart: term=59.

2024-05-21 02:33:30,795 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:30,818 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:33:30,823 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:30,836 INFO onLeaderStart: term=61.

2024-05-21 02:50:08,455 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=59, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:50:08,521 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=62, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:50:08,530 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=61, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:50:08,525 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=59, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:50:09,004 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 02:50:09,017 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=18, type=Follower] is going to quit

2024-05-21 02:50:08,628 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=15, type=Follower] is going to quit

2024-05-21 02:50:09,020 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:50:09,020 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:50:09,018 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:50:09,015 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:50:09,004 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=20, type=Follower] is going to quit

2024-05-21 02:50:09,044 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=17, type=Follower] is going to quit

2024-05-21 02:50:09,053 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=21, type=Follower] is going to quit

2024-05-21 02:50:09,046 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=14, type=Follower] is going to quit

2024-05-21 02:50:09,044 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 02:50:09,079 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=62, term=62], lastLogId=LogId [index=62, term=62].

2024-05-21 02:50:09,080 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 02:50:09,081 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=58, term=59], lastLogId=LogId [index=58, term=59].

2024-05-21 02:50:09,099 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 02:50:09,083 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=59, term=59], lastLogId=LogId [index=59, term=59].

2024-05-21 02:50:09,105 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 02:50:09,108 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=62, currTerm=61.

2024-05-21 02:50:09,146 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=58, term=59], lastLogId=LogId [index=58, term=59].

2024-05-21 02:50:09,168 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=60, currTerm=59.

2024-05-21 02:50:09,175 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:50:09,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=62, votedFor=0.0.0.0:0, cost time=58 ms

2024-05-21 02:50:09,179 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:50:09,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=60, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 02:50:09,217 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=60, currTerm=59.

2024-05-21 02:50:09,231 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=62, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 02:50:09,231 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=63, currTerm=62.

2024-05-21 02:50:09,246 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=60, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 02:50:09,251 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=60, currTerm=60.

2024-05-21 02:50:09,257 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=60, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 02:50:09,270 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=63, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 02:50:09,260 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:50:09,277 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=60, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 02:50:09,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=63, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 02:50:09,348 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:50:09,391 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:25,988 INFO Node <naming_persistent_service/nacos3:7848> term 63 start preVote.

2024-05-21 03:01:25,946 INFO Node <naming_persistent_service_v2/nacos3:7848> term 60 start preVote.

2024-05-21 03:01:25,988 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:25,988 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:01:25,983 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:25,955 INFO Node <naming_service_metadata/nacos3:7848> term 62 start preVote.

2024-05-21 03:01:25,955 INFO Node <naming_instance_metadata/nacos3:7848> term 60 start preVote.

2024-05-21 03:01:25,957 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:26,330 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,342 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=63, granted=true.

2024-05-21 03:01:26,360 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=63.

2024-05-21 03:01:26,380 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,412 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=60, granted=true.

2024-05-21 03:01:26,428 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=60.

2024-05-21 03:01:26,411 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=62, granted=true.

2024-05-21 03:01:26,436 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=62.

2024-05-21 03:01:26,457 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:01:26,429 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:01:26,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=61, votedFor=nacos3:7848, cost time=54 ms

2024-05-21 03:01:26,499 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=60], lastLogId=LogId [index=60, term=60].

2024-05-21 03:01:26,504 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=60, granted=true.

2024-05-21 03:01:26,510 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=60.

2024-05-21 03:01:26,515 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=63, votedFor=nacos3:7848, cost time=64 ms

2024-05-21 03:01:26,515 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:01:26,512 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=64, votedFor=nacos3:7848, cost time=99 ms

2024-05-21 03:01:26,524 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=63, currTerm=64.

2024-05-21 03:01:26,518 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:01:26,528 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=64.

2024-05-21 03:01:26,529 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:01:26,528 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 03:01:26,630 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 03:01:26,529 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=63, currTerm=63, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:01:26,640 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=61, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:01:26,655 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:01:26,680 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=63, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:01:26,690 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:01:26,683 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:01:26,715 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:01:26,716 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:01:26,716 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:01:26,748 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 03:01:26,724 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=61, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:01:26,753 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:01:26,753 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=64, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:01:26,758 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:01:26,766 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:01:26,769 INFO onLeaderStart: term=61.

2024-05-21 03:01:26,771 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:01:26,776 INFO onLeaderStart: term=63.

2024-05-21 03:01:26,778 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:01:26,779 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:01:26,797 INFO onLeaderStart: term=61.

2024-05-21 03:01:26,797 INFO onLeaderStart: term=64.

2024-05-21 03:17:41,507 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=61, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:17:41,438 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=61, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:17:41,503 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=64, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:17:41,492 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=63, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:17:41,616 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=21, type=Follower] is going to quit

2024-05-21 03:17:41,648 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 03:17:41,643 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:17:41,705 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:17:41,732 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:17:41,722 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 03:17:41,751 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=22, type=Follower] is going to quit

2024-05-21 03:17:41,622 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:17:41,748 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=20, type=Follower] is going to quit

2024-05-21 03:17:41,759 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=23, type=Follower] is going to quit

2024-05-21 03:17:41,752 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=17, type=Follower] is going to quit

2024-05-21 03:17:41,787 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower] is going to quit

2024-05-21 03:17:42,148 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 03:17:42,265 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 03:17:42,272 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 03:17:42,489 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:42,480 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:42,585 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=62, currTerm=61.

2024-05-21 03:17:42,481 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:42,480 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:42,629 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 03:17:42,632 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=64, term=64], lastLogId=LogId [index=64, term=64].

2024-05-21 03:17:42,637 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=62, term=63], lastLogId=LogId [index=62, term=63].

2024-05-21 03:17:42,665 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=64, term=64], lastLogId=LogId [index=64, term=64].

2024-05-21 03:17:42,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=62, votedFor=0.0.0.0:0, cost time=72 ms

2024-05-21 03:17:42,678 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:42,702 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=62, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 03:17:42,714 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=62, currTerm=61.

2024-05-21 03:17:42,741 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=62, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 03:17:42,744 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:17:42,774 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=62, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 03:17:42,778 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=65, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 03:17:42,787 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=63.

2024-05-21 03:17:42,805 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=65, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 03:17:42,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=64, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 03:17:42,829 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=64, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 03:17:42,837 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=62, currTerm=62.

2024-05-21 03:17:42,839 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:30,370 INFO Node <naming_persistent_service_v2/nacos3:7848> term 62 start preVote.

2024-05-21 03:33:30,420 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:33:30,405 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,381 INFO Node <naming_instance_metadata/nacos3:7848> term 62 start preVote.

2024-05-21 03:33:30,386 INFO Node <naming_persistent_service/nacos3:7848> term 65 start preVote.

2024-05-21 03:33:30,385 INFO Node <naming_service_metadata/nacos3:7848> term 64 start preVote.

2024-05-21 03:33:30,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,432 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,831 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=65, currTerm=64, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:30,841 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=65, currTerm=64, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:30,880 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=63, currTerm=62, because the leader nacos1:7848's lease is still valid.

2024-05-21 03:33:30,890 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=63, currTerm=62, because the leader nacos1:7848's lease is still valid.

2024-05-21 03:33:31,003 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=63, currTerm=62, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:31,062 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=62, granted=true.

2024-05-21 03:33:31,074 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=62.

2024-05-21 03:33:31,014 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=66, currTerm=65, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:31,080 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,083 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=64, granted=true.

2024-05-21 03:33:31,086 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,087 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=64.

2024-05-21 03:33:31,096 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=65, granted=true.

2024-05-21 03:33:31,109 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=65.

2024-05-21 03:33:31,097 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,108 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=62, granted=false.

2024-05-21 03:33:31,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,114 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,116 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=62, granted=true.

2024-05-21 03:33:31,144 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=62.

2024-05-21 03:33:31,146 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=63, currTerm=63.

2024-05-21 03:33:31,149 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,149 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=65, votedFor=nacos3:7848, cost time=51 ms

2024-05-21 03:33:31,154 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,157 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=63, votedFor=nacos3:7848, cost time=63 ms

2024-05-21 03:33:31,163 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=63, currTerm=63.

2024-05-21 03:33:31,163 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=65, currTerm=65.

2024-05-21 03:33:31,178 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=63, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 03:33:31,178 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=66, votedFor=nacos3:7848, cost time=51 ms

2024-05-21 03:33:31,200 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=65, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:33:31,213 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=66, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:33:31,217 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:33:31,217 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:33:31,226 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:33:31,230 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:33:31,241 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:33:31,267 INFO onLeaderStart: term=65.

2024-05-21 03:33:31,291 INFO onLeaderStart: term=66.

2024-05-21 03:33:31,309 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 03:33:31,353 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:34:36,364 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=65, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:34:36,367 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=66, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:34:36,425 INFO Node <naming_persistent_service_v2/nacos3:7848> term 63 start preVote.

2024-05-21 03:34:36,430 INFO Node <naming_instance_metadata/nacos3:7848> term 63 start preVote.

2024-05-21 03:34:36,438 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:34:36,431 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:34:36,571 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=24, type=Follower] is going to quit

2024-05-21 03:34:36,459 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:34:36,533 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:34:36,553 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=25, type=Follower] is going to quit

2024-05-21 03:34:36,605 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 03:34:36,613 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=26, type=Follower] is going to quit

2024-05-21 03:34:36,793 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=62, term=63], lastLogId=LogId [index=62, term=63].

2024-05-21 03:34:36,799 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=66, term=66], lastLogId=LogId [index=66, term=66].

2024-05-21 03:34:36,886 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=63, granted=true.

2024-05-21 03:34:36,894 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=67, currTerm=66.

2024-05-21 03:34:36,900 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=63.

2024-05-21 03:34:36,968 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=64, currTerm=63, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:34:37,001 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=63, granted=true.

2024-05-21 03:34:37,006 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=63.

2024-05-21 03:34:37,010 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=67, votedFor=0.0.0.0:0, cost time=106 ms

2024-05-21 03:34:37,012 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=64, votedFor=nacos3:7848, cost time=97 ms

2024-05-21 03:34:37,018 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:34:37,011 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:37,009 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:37,040 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=63, currTerm=64.

2024-05-21 03:34:37,052 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=64.

2024-05-21 03:34:37,059 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=67, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 03:34:37,061 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=64, votedFor=nacos3:7848, cost time=37 ms

2024-05-21 03:34:37,068 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:34:37,107 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=64, currTerm=64.

2024-05-21 03:34:37,116 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:37,156 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=64, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:34:37,160 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:34:37,188 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:34:37,197 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=64, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:34:37,220 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:34:37,231 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:34:37,240 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:34:37,240 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:34:37,280 INFO onLeaderStart: term=64.

2024-05-21 03:34:37,291 INFO onLeaderStart: term=64.

2024-05-21 03:34:39,017 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:41,768 INFO Node <naming_service_metadata/nacos3:7848> term 65 start preVote.

2024-05-21 03:34:41,782 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=65, granted=true.

2024-05-21 03:34:41,783 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=65.

2024-05-21 03:34:41,783 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:34:41,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=66, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 03:34:41,799 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=66, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:34:41,801 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:34:41,801 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:34:41,804 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:34:41,813 INFO onLeaderStart: term=66.

2024-05-21 03:50:56,379 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=66, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:50:56,390 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=64, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:50:56,399 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=64, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:50:56,406 INFO Node <naming_persistent_service/nacos3:7848> term 67 start preVote.

2024-05-21 03:50:56,409 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:50:56,535 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=18, type=Follower] is going to quit

2024-05-21 03:50:56,562 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower] is going to quit

2024-05-21 03:50:56,480 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:50:56,491 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:50:56,502 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:50:56,522 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 03:50:56,604 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=21, type=Follower] is going to quit

2024-05-21 03:50:56,612 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 03:50:56,637 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=25, type=Follower] is going to quit

2024-05-21 03:50:56,771 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=64], lastLogId=LogId [index=63, term=64].

2024-05-21 03:50:56,788 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 03:50:56,993 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=64, term=64], lastLogId=LogId [index=64, term=64].

2024-05-21 03:50:57,043 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=68, currTerm=67, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:50:57,078 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=68, currTerm=67, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:50:57,051 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 03:50:57,080 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=67, granted=true.

2024-05-21 03:50:57,084 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=67.

2024-05-21 03:50:57,058 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:50:57,084 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 03:50:57,117 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,062 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,060 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,097 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:50:57,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=68, votedFor=nacos3:7848, cost time=50 ms

2024-05-21 03:50:57,141 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=65, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 03:50:57,142 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:50:57,144 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,161 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=65, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 03:50:57,218 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=67, currTerm=66.

2024-05-21 03:50:57,219 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,244 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=68, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:50:57,245 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=67, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 03:50:57,251 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:50:57,255 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:50:57,257 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:50:57,264 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:50:57,273 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=67, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 03:50:57,278 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=65, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 03:50:57,296 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=65, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 03:50:57,352 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,403 INFO onLeaderStart: term=68.

2024-05-21 04:02:32,085 INFO Node <naming_instance_metadata/nacos3:7848> term 65 start preVote.

2024-05-21 04:02:32,183 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:02:32,141 INFO Node <naming_service_metadata/nacos3:7848> term 67 start preVote.

2024-05-21 04:02:32,092 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:02:32,343 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=68, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:02:32,482 INFO Node <naming_persistent_service_v2/nacos3:7848> term 65 start preVote.

2024-05-21 04:02:32,650 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=64, term=65], lastLogId=LogId [index=64, term=65].

2024-05-21 04:02:32,642 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:02:32,656 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:02:32,671 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:32,640 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=27, type=Follower] is going to quit

2024-05-21 04:02:32,697 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=28, type=Follower] is going to quit

2024-05-21 04:02:32,707 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:32,710 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:32,703 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:32,728 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:32,854 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=65, granted=true.

2024-05-21 04:02:32,860 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=65.

2024-05-21 04:02:32,859 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=65, granted=true.

2024-05-21 04:02:32,865 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=65.

2024-05-21 04:02:32,866 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=67, granted=true.

2024-05-21 04:02:32,876 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=67.

2024-05-21 04:02:32,867 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=66, currTerm=66.

2024-05-21 04:02:32,881 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:02:32,922 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=68.

2024-05-21 04:02:32,959 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=68, votedFor=nacos3:7848, cost time=76 ms

2024-05-21 04:02:32,961 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=66, votedFor=nacos3:7848, cost time=93 ms

2024-05-21 04:02:32,968 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=69, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-21 04:02:32,973 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:32,972 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=65, currTerm=66.

2024-05-21 04:02:32,977 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:32,977 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,984 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,978 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=66, currTerm=66.

2024-05-21 04:02:32,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=66, votedFor=nacos3:7848, cost time=49 ms

2024-05-21 04:02:32,992 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=68, currTerm=68.

2024-05-21 04:02:32,992 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=65, currTerm=66.

2024-05-21 04:02:32,996 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=69, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 04:02:33,003 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,065 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=68, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:02:33,071 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:02:33,074 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:02:33,111 INFO onLeaderStart: term=68.

2024-05-21 04:02:33,118 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:02:33,141 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,164 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=66, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:02:33,165 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:02:33,167 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:02:33,186 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:02:33,199 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:02:33,215 INFO onLeaderStart: term=66.

2024-05-21 04:18:47,648 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=66, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:18:47,694 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:18:47,659 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=68, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:18:47,748 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:18:47,689 INFO Node <naming_persistent_service/nacos3:7848> term 69 start preVote.

2024-05-21 04:18:47,795 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:18:47,761 INFO Node <naming_instance_metadata/nacos3:7848> term 66 start preVote.

2024-05-21 04:18:47,815 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:18:47,816 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=20, type=Follower] is going to quit

2024-05-21 04:18:47,818 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 04:18:47,844 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=27, type=Follower] is going to quit

2024-05-21 04:18:47,844 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=21, type=Follower] is going to quit

2024-05-21 04:18:47,991 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=70, currTerm=69, because the leader nacos1:7848's lease is still valid.

2024-05-21 04:18:47,992 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 04:18:48,005 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=66, term=66], lastLogId=LogId [index=66, term=66].

2024-05-21 04:18:48,009 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=69, granted=true.

2024-05-21 04:18:48,154 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=69.

2024-05-21 04:18:48,011 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:18:48,161 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:18:48,152 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=66, granted=true.

2024-05-21 04:18:48,164 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:18:48,166 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,171 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=66.

2024-05-21 04:18:48,195 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,189 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,194 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,179 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,212 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=70, votedFor=nacos3:7848, cost time=50 ms

2024-05-21 04:18:48,218 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:18:48,245 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=67, votedFor=nacos3:7848, cost time=40 ms

2024-05-21 04:18:48,249 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=66, currTerm=67.

2024-05-21 04:18:48,258 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:18:48,305 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=70, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:18:48,301 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,319 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:18:48,330 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=67, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:18:48,356 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:18:48,370 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:18:48,370 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:18:48,404 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=67, currTerm=66.

2024-05-21 04:18:48,397 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=69, currTerm=68.

2024-05-21 04:18:48,430 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=69, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 04:18:48,434 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,444 INFO onLeaderStart: term=70.

2024-05-21 04:18:48,443 INFO onLeaderStart: term=67.

2024-05-21 04:18:48,450 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:18:48,463 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=67, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-21 04:18:48,466 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=69, votedFor=nacos2:7848, cost time=31 ms

2024-05-21 04:18:48,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=67, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 04:18:48,503 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:19:04,180 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=67, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:19:04,216 INFO Node <naming_service_metadata/nacos3:7848> term 69 start preVote.

2024-05-21 04:19:04,225 INFO Node <naming_persistent_service_v2/nacos3:7848> term 67 start preVote.

2024-05-21 04:19:04,228 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=70, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:19:04,256 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:19:04,319 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:19:04,326 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=24, type=Follower] is going to quit

2024-05-21 04:19:04,323 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=30, type=Follower] is going to quit

2024-05-21 04:19:04,342 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=29, type=Follower] is going to quit

2024-05-21 04:19:04,356 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:19:04,365 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 04:19:04,369 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:19:04,370 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 04:19:04,467 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:19:04,617 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=69, granted=true.

2024-05-21 04:19:04,621 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=69.

2024-05-21 04:19:04,624 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:19:04,637 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=67, granted=true.

2024-05-21 04:19:04,646 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=67.

2024-05-21 04:19:04,658 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:19:04,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=68, votedFor=nacos3:7848, cost time=35 ms

2024-05-21 04:19:04,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=70, votedFor=nacos3:7848, cost time=54 ms

2024-05-21 04:19:04,810 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 04:19:04,821 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:19:04,840 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:19:04,856 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 04:19:04,859 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 04:19:04,925 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=68, currTerm=67.

2024-05-21 04:19:04,931 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 04:19:04,948 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:19:04,948 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=71, votedFor=0.0.0.0:0, cost time=86 ms

2024-05-21 04:19:04,958 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=70, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:19:04,959 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=68, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:19:04,967 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:19:04,968 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:19:04,972 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:19:04,977 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=68, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-21 04:19:04,974 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:19:04,990 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,010 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:19:05,017 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=68, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 04:19:05,022 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=71, votedFor=nacos2:7848, cost time=27 ms

2024-05-21 04:19:05,022 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,022 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:19:05,070 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,077 INFO onLeaderStart: term=70.

2024-05-21 04:19:05,092 INFO onLeaderStart: term=68.

2024-05-21 04:35:57,834 INFO Node <naming_instance_metadata/nacos3:7848> term 68 start preVote.

2024-05-21 04:35:57,839 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:35:57,838 INFO Node <naming_persistent_service/nacos3:7848> term 71 start preVote.

2024-05-21 04:35:57,762 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=68, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:35:57,836 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:35:57,862 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=70, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:35:57,895 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:35:57,929 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=29, type=Follower] is going to quit

2024-05-21 04:35:58,069 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=22, type=Follower] is going to quit

2024-05-21 04:35:58,072 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=23, type=Follower] is going to quit

2024-05-21 04:35:57,960 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:35:58,147 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 04:35:58,361 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,370 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,407 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=71, granted=true.

2024-05-21 04:35:58,542 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=71.

2024-05-21 04:35:58,536 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:35:58,560 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=71, currTerm=72.

2024-05-21 04:35:58,554 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,570 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=68.

2024-05-21 04:35:58,565 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 04:35:58,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=69, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-21 04:35:58,594 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,645 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=68.

2024-05-21 04:35:58,640 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,680 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=72, votedFor=nacos3:7848, cost time=63 ms

2024-05-21 04:35:58,658 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=70], lastLogId=LogId [index=69, term=70].

2024-05-21 04:35:58,695 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=69, votedFor=nacos1:7848, cost time=15 ms

2024-05-21 04:35:58,722 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,724 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=69, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-21 04:35:58,729 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,736 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=69, votedFor=nacos1:7848, cost time=9 ms

2024-05-21 04:35:58,740 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=68, currTerm=69.

2024-05-21 04:35:58,743 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=68, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:35:58,748 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=68, currTerm=69.

2024-05-21 04:35:58,779 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=72, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:35:58,785 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:35:58,797 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:35:58,818 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:35:58,844 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,845 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 04:35:58,870 INFO onLeaderStart: term=72.

2024-05-21 04:35:58,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=71, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 04:35:58,880 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,906 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=71, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 04:35:58,901 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:18,242 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=72, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:52:18,274 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:52:18,316 INFO Node <naming_instance_metadata/nacos3:7848> term 69 start preVote.

2024-05-21 04:52:18,360 INFO Node <naming_persistent_service_v2/nacos3:7848> term 69 start preVote.

2024-05-21 04:52:18,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:52:18,312 INFO Node <naming_service_metadata/nacos3:7848> term 71 start preVote.

2024-05-21 04:52:18,326 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:52:18,407 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:52:18,466 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=31, type=Follower] is going to quit

2024-05-21 04:52:18,517 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=69], lastLogId=LogId [index=68, term=69].

2024-05-21 04:52:18,528 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=69, granted=true.

2024-05-21 04:52:18,568 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=69.

2024-05-21 04:52:18,573 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=32, type=Follower] is going to quit

2024-05-21 04:52:18,586 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 04:52:18,576 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=69, currTerm=70.

2024-05-21 04:52:18,621 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=71, granted=true.

2024-05-21 04:52:18,629 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=71.

2024-05-21 04:52:18,630 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:52:18,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=72, votedFor=nacos3:7848, cost time=36 ms

2024-05-21 04:52:18,677 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=69, granted=true.

2024-05-21 04:52:18,684 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=69.

2024-05-21 04:52:18,691 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 04:52:18,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:52:18,714 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=70, votedFor=nacos3:7848, cost time=79 ms

2024-05-21 04:52:18,720 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=70, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:52:18,900 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:18,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=70, votedFor=nacos3:7848, cost time=190 ms

2024-05-21 04:52:18,958 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:52:18,962 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=70, currTerm=70.

2024-05-21 04:52:18,953 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 04:52:18,967 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 04:52:18,750 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,027 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:52:19,027 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 04:52:19,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=73, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 04:52:19,031 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=72, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:52:19,040 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=70, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:52:19,056 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=73, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 04:52:19,062 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=73, currTerm=73.

2024-05-21 04:52:19,038 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,057 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:52:19,059 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:52:19,086 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:52:19,095 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:52:19,102 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:52:19,114 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:52:19,123 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:52:19,146 INFO onLeaderStart: term=72.

2024-05-21 04:52:19,157 INFO onLeaderStart: term=70.

2024-05-21 05:03:37,635 INFO Node <naming_instance_metadata/nacos3:7848> term 70 start preVote.

2024-05-21 05:03:37,754 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=72, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:03:37,735 INFO Node <naming_persistent_service/nacos3:7848> term 73 start preVote.

2024-05-21 05:03:37,765 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=70, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:03:37,639 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:03:37,790 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:03:37,954 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:03:37,974 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=24, type=Follower] is going to quit

2024-05-21 05:03:37,990 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=25, type=Follower] is going to quit

2024-05-21 05:03:38,001 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:03:38,007 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 05:03:38,020 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 05:03:38,318 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 05:03:38,388 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=72], lastLogId=LogId [index=71, term=72].

2024-05-21 05:03:38,397 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=70, granted=true.

2024-05-21 05:03:38,425 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=70.

2024-05-21 05:03:38,428 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:03:38,430 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:03:38,434 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 05:03:38,464 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 05:03:38,510 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=73, granted=true.

2024-05-21 05:03:38,511 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=71, votedFor=0.0.0.0:0, cost time=75 ms

2024-05-21 05:03:38,515 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=71, votedFor=nacos3:7848, cost time=79 ms

2024-05-21 05:03:38,514 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=73.

2024-05-21 05:03:38,525 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:03:38,537 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=71, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 05:03:38,539 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=71, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 05:03:38,554 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=73, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-21 05:03:38,550 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,546 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,557 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=74, votedFor=nacos3:7848, cost time=31 ms

2024-05-21 05:03:38,596 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:03:38,584 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=71, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:03:38,597 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=73, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 05:03:38,603 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:03:38,615 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:03:38,651 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:03:38,609 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,666 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:03:38,611 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,626 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=74, currTerm=74.

2024-05-21 05:03:38,673 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=74, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:03:38,680 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:03:38,682 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:03:38,698 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,723 INFO onLeaderStart: term=71.

2024-05-21 05:03:38,732 INFO onLeaderStart: term=74.

2024-05-21 05:19:56,690 INFO Node <naming_persistent_service_v2/nacos3:7848> term 71 start preVote.

2024-05-21 05:19:56,621 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=74, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:19:56,700 INFO Node <naming_service_metadata/nacos3:7848> term 73 start preVote.

2024-05-21 05:19:56,643 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=71, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:19:56,714 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:19:56,778 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:19:56,898 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=34, type=Follower] is going to quit

2024-05-21 05:19:56,904 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:19:56,911 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:19:56,874 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=25, type=Follower] is going to quit

2024-05-21 05:19:56,981 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=33, type=Follower] is going to quit

2024-05-21 05:19:57,016 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 05:19:57,208 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=71, granted=true.

2024-05-21 05:19:57,212 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=71.

2024-05-21 05:19:57,209 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=74, term=74], lastLogId=LogId [index=74, term=74].

2024-05-21 05:19:57,237 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 05:19:57,231 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,218 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=73, granted=true.

2024-05-21 05:19:57,237 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,220 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,237 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,256 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=73.

2024-05-21 05:19:57,259 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 05:19:57,271 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,284 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,331 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=72, currTerm=71.

2024-05-21 05:19:57,366 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=72, votedFor=nacos3:7848, cost time=137 ms

2024-05-21 05:19:57,368 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:19:57,377 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=75, currTerm=74.

2024-05-21 05:19:57,381 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=72, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 05:19:57,380 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=74, votedFor=nacos3:7848, cost time=41 ms

2024-05-21 05:19:57,384 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,384 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=72, currTerm=72.

2024-05-21 05:19:57,392 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=74, currTerm=74.

2024-05-21 05:19:57,395 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:19:57,399 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=74, granted=true, requestLastLogId=LogId [index=72, term=73], lastLogId=LogId [index=72, term=73].

2024-05-21 05:19:57,409 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=72, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:19:57,412 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=72, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 05:19:57,411 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=75, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 05:19:57,419 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:19:57,470 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=75, votedFor=nacos1:7848, cost time=37 ms

2024-05-21 05:19:57,484 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:19:57,494 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:19:57,498 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,516 INFO onLeaderStart: term=72.

2024-05-21 05:20:26,283 INFO Node <naming_instance_metadata/nacos3:7848> term 72 start preVote.

2024-05-21 05:20:26,351 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:20:26,280 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=72, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:20:26,246 INFO Node <naming_persistent_service/nacos3:7848> term 75 start preVote.

2024-05-21 05:20:26,287 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:20:26,284 INFO Node <naming_service_metadata/nacos3:7848> term 74 start preVote.

2024-05-21 05:20:26,285 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:20:26,488 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:20:26,441 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=28, type=Follower] is going to quit

2024-05-21 05:20:26,514 INFO Node <naming_service_metadata/nacos3:7848> term 74 start preVote.

2024-05-21 05:35:54,178 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=27, type=Follower] is going to quit

2024-05-21 05:35:54,370 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 05:35:54,410 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=72], lastLogId=LogId [index=71, term=72].

2024-05-21 05:35:54,411 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,462 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=74, granted=true.

2024-05-21 05:35:54,467 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=74.

2024-05-21 05:35:54,488 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 05:35:54,481 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,542 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=72, granted=true.

2024-05-21 05:35:54,557 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=72.

2024-05-21 05:35:54,544 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=75, granted=true.

2024-05-21 05:35:54,583 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=75.

2024-05-21 05:35:54,582 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 05:35:54,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=75, votedFor=nacos3:7848, cost time=194 ms

2024-05-21 05:35:54,733 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,739 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=74, currTerm=75.

2024-05-21 05:35:54,748 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=75, currTerm=75.

2024-05-21 05:35:54,745 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=73, votedFor=nacos3:7848, cost time=42 ms

2024-05-21 05:35:54,766 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,745 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=73, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 05:35:54,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=76, votedFor=nacos3:7848, cost time=39 ms

2024-05-21 05:35:54,782 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=76.

2024-05-21 05:35:54,760 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,769 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=72, currTerm=73.

2024-05-21 05:35:54,788 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=73.

2024-05-21 05:35:54,783 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:35:54,785 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=75, currTerm=76.

2024-05-21 05:35:54,803 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=73, votedFor=nacos2:7848, cost time=29 ms

2024-05-21 05:35:54,801 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,806 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=73, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 05:35:54,996 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=75, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:35:54,997 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=76, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:35:55,016 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:35:55,023 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:35:55,030 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=73, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:35:55,032 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:35:55,026 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:35:55,032 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:35:55,034 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:35:55,090 INFO onLeaderStart: term=73.

2024-05-21 05:35:55,092 INFO onLeaderStart: term=76.

2024-05-21 05:35:55,095 INFO onLeaderStart: term=75.

2024-05-21 05:36:46,804 INFO Node <naming_persistent_service_v2/nacos3:7848> term 73 start preVote.

2024-05-21 05:36:46,691 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=76, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:36:46,697 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=73, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:36:46,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:36:46,699 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=75, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:36:46,947 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=36, type=Follower] is going to quit

2024-05-21 05:36:46,940 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 05:36:46,964 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 05:36:46,961 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:36:46,973 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=37, type=Follower] is going to quit

2024-05-21 05:36:46,958 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:36:46,972 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=29, type=Follower] is going to quit

2024-05-21 05:36:46,968 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:36:46,983 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 05:36:47,115 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=73, granted=true.

2024-05-21 05:36:47,120 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=73.

2024-05-21 05:36:47,112 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,121 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,210 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=74, votedFor=nacos3:7848, cost time=60 ms

2024-05-21 05:36:47,285 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,293 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,332 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,358 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=73, currTerm=74.

2024-05-21 05:36:47,368 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,376 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,382 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,503 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=74, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:36:47,508 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,513 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:36:47,527 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=74, term=75], lastLogId=LogId [index=74, term=75].

2024-05-21 05:36:47,528 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=73], lastLogId=LogId [index=72, term=73].

2024-05-21 05:36:47,530 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:36:47,562 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,632 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,651 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=74, currTerm=73.

2024-05-21 05:36:47,641 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 05:36:47,648 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=75.

2024-05-21 05:36:47,673 INFO onLeaderStart: term=74.

2024-05-21 05:36:47,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=74, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 05:36:47,688 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=76, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-21 05:36:47,695 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=74, votedFor=nacos2:7848, cost time=10 ms

2024-05-21 05:36:47,698 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:36:47,710 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=20 ms

2024-05-21 05:36:49,380 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:51,800 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:52,568 INFO Node <naming_persistent_service/nacos3:7848> term 76 start preVote.

2024-05-21 05:36:52,588 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=76, granted=true.

2024-05-21 05:36:52,591 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=76.

2024-05-21 05:36:52,593 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:36:52,609 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=77, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 05:36:52,622 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=77, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:36:52,625 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:36:52,628 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:36:52,630 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:36:52,636 INFO onLeaderStart: term=77.

2024-05-21 05:53:07,642 INFO Node <naming_service_metadata/nacos3:7848> term 76 start preVote.

2024-05-21 05:53:07,728 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=77, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:53:07,666 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=74, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:53:07,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:53:07,781 INFO Node <naming_instance_metadata/nacos3:7848> term 74 start preVote.

2024-05-21 05:53:07,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:53:07,932 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:53:07,956 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:53:07,963 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=38, type=Follower] is going to quit

2024-05-21 05:53:07,988 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=39, type=Follower] is going to quit

2024-05-21 05:53:07,993 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=30, type=Follower] is going to quit

2024-05-21 05:53:07,995 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=29, type=Follower] is going to quit

2024-05-21 05:53:08,142 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=74, term=74], lastLogId=LogId [index=74, term=74].

2024-05-21 05:53:08,388 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=76, granted=true.

2024-05-21 05:53:08,392 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=76.

2024-05-21 05:53:08,404 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=75, currTerm=74.

2024-05-21 05:53:08,412 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=75, currTerm=74, because the leader nacos2:7848's lease is still valid.

2024-05-21 05:53:08,406 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,409 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=77, term=77], lastLogId=LogId [index=77, term=77].

2024-05-21 05:53:08,439 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=74, granted=true.

2024-05-21 05:53:08,453 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=74.

2024-05-21 05:53:08,455 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,472 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=77, term=77], lastLogId=LogId [index=77, term=77].

2024-05-21 05:53:08,489 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,479 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,462 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,499 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=77, votedFor=nacos3:7848, cost time=78 ms

2024-05-21 05:53:08,503 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:53:08,504 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=77, currTerm=77.

2024-05-21 05:53:08,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=75, votedFor=0.0.0.0:0, cost time=74 ms

2024-05-21 05:53:08,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=75, votedFor=nacos3:7848, cost time=31 ms

2024-05-21 05:53:08,507 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=77, currTerm=77, granted=true, requestLastLogId=LogId [index=75, term=76], lastLogId=LogId [index=75, term=76].

2024-05-21 05:53:08,511 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:53:08,515 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=77.

2024-05-21 05:53:08,521 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=75, currTerm=75.

2024-05-21 05:53:08,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=75, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 05:53:08,535 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=75, currTerm=75, granted=true, requestLastLogId=LogId [index=74, term=74], lastLogId=LogId [index=74, term=74].

2024-05-21 05:53:08,536 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=78, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 05:53:08,532 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,537 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,538 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=75, currTerm=75, granted=true, requestLastLogId=LogId [index=74, term=74], lastLogId=LogId [index=74, term=74].

2024-05-21 05:53:08,550 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=75, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:53:08,566 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=78, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 05:53:08,566 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:53:08,553 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,566 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=78, currTerm=78.

2024-05-21 05:53:08,577 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:53:08,633 INFO onLeaderStart: term=75.

2024-05-21 05:53:08,635 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:04:40,605 INFO Node <naming_persistent_service_v2/nacos3:7848> term 75 start preVote.

2024-05-21 06:04:40,789 INFO Node <naming_persistent_service/nacos3:7848> term 78 start preVote.

2024-05-21 06:04:40,772 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:04:40,889 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:04:40,860 INFO Node <naming_service_metadata/nacos3:7848> term 77 start preVote.

2024-05-21 06:04:40,731 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=75, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:04:40,861 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:04:40,916 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:04:40,919 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 06:04:40,945 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=74, lastLogIncluded=0, lastLogIndex=74, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 06:04:41,340 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:04:41,369 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=77, granted=true.

2024-05-21 06:04:41,371 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=77.

2024-05-21 06:04:41,403 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=74, term=75], lastLogId=LogId [index=74, term=75].

2024-05-21 06:04:41,406 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=79, currTerm=78, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:04:41,422 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=78, granted=true.

2024-05-21 06:04:41,423 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=78.

2024-05-21 06:04:41,430 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:04:41,453 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=78, votedFor=nacos3:7848, cost time=73 ms

2024-05-21 06:04:41,456 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=75, granted=true.

2024-05-21 06:04:41,462 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=74, term=75], lastLogId=LogId [index=74, term=75].

2024-05-21 06:04:41,465 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=77, currTerm=78.

2024-05-21 06:04:41,466 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=75.

2024-05-21 06:04:41,486 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:04:41,491 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=79, votedFor=nacos3:7848, cost time=47 ms

2024-05-21 06:04:41,486 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=75.

2024-05-21 06:04:41,481 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:04:41,512 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=78.

2024-05-21 06:04:41,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=76, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 06:04:41,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=76, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-21 06:04:41,634 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=76, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 06:04:41,670 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=76, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 06:04:41,648 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:04:41,675 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:04:41,687 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=78, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:04:41,681 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=135 ms

2024-05-21 06:04:41,713 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=76, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:04:41,728 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:04:41,697 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=79, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:04:41,733 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:04:41,735 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:04:41,728 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:04:41,759 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:04:41,764 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:04:41,759 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:04:41,774 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:04:41,817 INFO onLeaderStart: term=76.

2024-05-21 06:04:41,830 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:04:41,844 INFO onLeaderStart: term=78.

2024-05-21 06:04:41,853 INFO onLeaderStart: term=79.

2024-05-21 06:05:05,980 INFO Node <naming_instance_metadata/nacos3:7848> term 76 start preVote.

2024-05-21 06:05:06,036 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:05:06,075 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=78, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:05:06,073 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=79, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:05:06,081 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=36, type=Follower] is going to quit

2024-05-21 06:05:06,087 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=40, type=Follower] is going to quit

2024-05-21 06:05:06,078 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=76, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:05:06,084 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:05:06,097 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:05:06,089 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:05:06,093 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=41, type=Follower] is going to quit

2024-05-21 06:05:06,090 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 06:05:06,098 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=31, type=Follower] is going to quit

2024-05-21 06:05:06,111 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=32, type=Follower] is going to quit

2024-05-21 06:05:06,437 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=77, term=78], lastLogId=LogId [index=77, term=78].

2024-05-21 06:05:06,444 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=76, term=76], lastLogId=LogId [index=76, term=76].

2024-05-21 06:05:06,448 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=77, term=78], lastLogId=LogId [index=77, term=78].

2024-05-21 06:05:06,454 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=76, term=76], lastLogId=LogId [index=76, term=76].

2024-05-21 06:05:06,470 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=76, granted=true.

2024-05-21 06:05:06,473 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=76.

2024-05-21 06:05:06,474 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:05:06,541 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=79, currTerm=78.

2024-05-21 06:05:06,559 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:05:06,542 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=77, votedFor=nacos3:7848, cost time=62 ms

2024-05-21 06:05:06,570 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,571 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:05:06,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=79, votedFor=0.0.0.0:0, cost time=54 ms

2024-05-21 06:05:06,660 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=79, votedFor=nacos2:7848, cost time=44 ms

2024-05-21 06:05:06,679 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=79, currTerm=79.

2024-05-21 06:05:06,692 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,710 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=77, currTerm=76.

2024-05-21 06:05:06,726 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=77, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 06:05:06,735 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=77, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:05:06,763 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=77, votedFor=nacos1:7848, cost time=17 ms

2024-05-21 06:05:06,778 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:05:06,793 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:05:06,788 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,791 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,816 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,852 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=79.

2024-05-21 06:05:06,866 INFO onLeaderStart: term=77.

2024-05-21 06:05:06,876 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=80, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 06:05:06,894 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:05:06,895 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=80, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 06:11:28,401 INFO Node <naming_service_metadata/nacos3:7848> term 79 start preVote.

2024-05-21 06:11:28,357 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=77, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:11:28,409 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:11:28,384 INFO Node <naming_persistent_service/nacos3:7848> term 80 start preVote.

2024-05-21 06:11:28,410 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:11:28,347 INFO Node <naming_persistent_service_v2/nacos3:7848> term 77 start preVote.

2024-05-21 06:11:28,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:11:28,573 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 06:11:28,491 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:11:28,604 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=33, type=Follower] is going to quit

2024-05-21 06:11:28,895 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:11:28,979 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=78, currTerm=77, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:11:28,980 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:11:29,018 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:11:29,038 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=79, granted=true.

2024-05-21 06:11:29,047 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=79.

2024-05-21 06:11:29,043 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:11:29,054 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=80, granted=true.

2024-05-21 06:11:29,058 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=80.

2024-05-21 06:11:29,044 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=77, granted=true.

2024-05-21 06:11:29,058 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=77.

2024-05-21 06:11:29,060 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:11:29,061 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:11:29,098 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=77.

2024-05-21 06:11:29,120 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=80, votedFor=nacos3:7848, cost time=42 ms

2024-05-21 06:11:29,124 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=78, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 06:11:29,125 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=81, votedFor=nacos3:7848, cost time=53 ms

2024-05-21 06:11:29,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=78, votedFor=nacos3:7848, cost time=67 ms

2024-05-21 06:11:29,160 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:11:29,165 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=78, votedFor=nacos2:7848, cost time=39 ms

2024-05-21 06:11:29,163 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:11:29,178 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=81.

2024-05-21 06:11:29,207 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=80, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:11:29,227 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:11:29,250 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:11:29,250 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=78, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:11:29,268 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=80.

2024-05-21 06:11:29,275 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:11:29,268 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:11:29,296 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:11:29,309 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:11:29,319 INFO onLeaderStart: term=80.

2024-05-21 06:11:29,354 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:11:29,368 INFO onLeaderStart: term=78.

2024-05-21 06:11:29,370 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 06:27:44,976 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:27:45,037 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=78, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:27:44,982 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:27:44,979 INFO Node <naming_persistent_service/nacos3:7848> term 81 start preVote.

2024-05-21 06:27:44,978 INFO Node <naming_instance_metadata/nacos3:7848> term 78 start preVote.

2024-05-21 06:27:44,978 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=80, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:27:45,286 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:27:45,193 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:27:45,194 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=33, type=Follower] is going to quit

2024-05-21 06:27:45,279 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=38, type=Follower] is going to quit

2024-05-21 06:27:45,349 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 06:27:45,345 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=34, type=Follower] is going to quit

2024-05-21 06:27:45,479 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:27:45,485 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=79, currTerm=78, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:27:45,546 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=82, currTerm=81, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:27:45,555 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=78, granted=true.

2024-05-21 06:27:45,560 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=78.

2024-05-21 06:27:45,568 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:27:45,602 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=79, votedFor=nacos3:7848, cost time=36 ms

2024-05-21 06:27:45,621 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=81, granted=true.

2024-05-21 06:27:45,648 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=81.

2024-05-21 06:27:45,673 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:27:45,676 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=79, term=80], lastLogId=LogId [index=79, term=80].

2024-05-21 06:27:45,662 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:27:45,736 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=79, currTerm=78.

2024-05-21 06:27:45,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=82, votedFor=nacos3:7848, cost time=70 ms

2024-05-21 06:27:45,741 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:27:45,758 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=79, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 06:27:45,781 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=79, votedFor=nacos2:7848, cost time=20 ms

2024-05-21 06:27:45,790 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,852 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,857 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,856 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,877 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=79, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:27:45,883 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:27:45,889 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:27:45,892 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:27:45,898 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=82, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:27:45,902 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:27:45,908 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:27:45,919 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=81, currTerm=80.

2024-05-21 06:27:45,947 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=81, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 06:27:45,967 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:27:45,965 INFO onLeaderStart: term=79.

2024-05-21 06:27:45,969 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:27:45,976 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=81, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 06:27:45,981 INFO onLeaderStart: term=82.

2024-05-21 06:27:45,989 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:11,261 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=79, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:28:11,306 INFO Node <naming_persistent_service_v2/nacos3:7848> term 79 start preVote.

2024-05-21 06:28:11,340 INFO Node <naming_service_metadata/nacos3:7848> term 81 start preVote.

2024-05-21 06:28:11,358 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 06:28:11,369 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 06:28:11,343 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:28:11,316 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:28:11,352 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:28:11,361 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=82, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:28:11,417 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:28:11,423 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=42, type=Follower] is going to quit

2024-05-21 06:28:11,443 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=43, type=Follower] is going to quit

2024-05-21 06:28:11,649 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:28:11,657 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=83, currTerm=82, granted=true, requestLastLogId=LogId [index=82, term=82], lastLogId=LogId [index=82, term=82].

2024-05-21 06:28:11,886 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:11,918 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=83, currTerm=82, granted=true, requestLastLogId=LogId [index=82, term=82], lastLogId=LogId [index=82, term=82].

2024-05-21 06:28:11,910 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=82, currTerm=81, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:28:11,932 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:11,933 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:11,945 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:11,952 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=81, granted=true.

2024-05-21 06:28:11,958 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=79, granted=true.

2024-05-21 06:28:11,959 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=81.

2024-05-21 06:28:11,961 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=79.

2024-05-21 06:28:11,965 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:11,969 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=79.

2024-05-21 06:28:12,001 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=83, currTerm=82.

2024-05-21 06:28:11,967 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:28:12,183 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=83, votedFor=0.0.0.0:0, cost time=154 ms

2024-05-21 06:28:12,184 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=80, votedFor=nacos3:7848, cost time=187 ms

2024-05-21 06:28:12,186 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:12,186 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=80.

2024-05-21 06:28:12,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=82, votedFor=nacos3:7848, cost time=187 ms

2024-05-21 06:28:12,190 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=80, votedFor=0.0.0.0:0, cost time=170 ms

2024-05-21 06:28:12,195 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=83, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 06:28:12,207 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=80, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 06:28:12,209 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=80, currTerm=80, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:28:12,217 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,218 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,219 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=82, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:28:12,220 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,230 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:28:12,237 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:28:12,266 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:28:12,282 INFO onLeaderStart: term=82.

2024-05-21 06:28:12,256 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:51,667 INFO Node <naming_instance_metadata/nacos3:7848> term 80 start preVote.

2024-05-21 06:44:51,670 INFO Node <naming_persistent_service/nacos3:7848> term 83 start preVote.

2024-05-21 06:44:51,671 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:51,666 INFO Node <naming_persistent_service_v2/nacos3:7848> term 80 start preVote.

2024-05-21 06:44:51,671 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:51,673 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:51,698 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=82, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:44:51,836 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:44:51,844 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 06:44:51,864 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=41, type=Follower] is going to quit

2024-05-21 06:44:52,101 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=83, currTerm=82, granted=true, requestLastLogId=LogId [index=81, term=82], lastLogId=LogId [index=81, term=82].

2024-05-21 06:44:52,135 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=81, currTerm=80, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,150 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:44:52,151 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=84, currTerm=83, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,158 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=84, currTerm=83, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,169 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=80, granted=true.

2024-05-21 06:44:52,177 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=80.

2024-05-21 06:44:52,150 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=81, currTerm=80, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,191 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=83, currTerm=82.

2024-05-21 06:44:52,223 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=80, granted=false.

2024-05-21 06:44:52,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=81, votedFor=nacos3:7848, cost time=59 ms

2024-05-21 06:44:52,254 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=81.

2024-05-21 06:44:52,270 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=83, granted=false.

2024-05-21 06:44:52,290 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=83, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-21 06:44:52,281 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=80, currTerm=81.

2024-05-21 06:44:52,325 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=83, votedFor=nacos2:7848, cost time=31 ms

2024-05-21 06:44:52,516 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=84, currTerm=83.

2024-05-21 06:44:52,516 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=83, currTerm=83, granted=true, requestLastLogId=LogId [index=81, term=82], lastLogId=LogId [index=81, term=82].

2024-05-21 06:44:52,517 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=83, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:44:52,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=84, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 06:44:52,553 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=84, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 06:44:52,555 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:44:52,578 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=83, currTerm=84.

2024-05-21 06:44:52,557 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,591 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=80, granted=true.

2024-05-21 06:44:52,593 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=80.

2024-05-21 06:44:52,597 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:44:52,621 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=81, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 06:44:52,663 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=81.

2024-05-21 06:44:52,663 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=81, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:44:52,675 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:44:52,684 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:44:52,680 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=81, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:44:52,688 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:44:52,720 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:44:52,730 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:44:52,747 INFO onLeaderStart: term=81.

2024-05-21 06:44:52,752 INFO onLeaderStart: term=81.

2024-05-21 07:00:47,110 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=81, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:00:47,112 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=81, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:00:47,252 INFO Node <naming_persistent_service/nacos3:7848> term 84 start preVote.

2024-05-21 07:00:47,216 INFO Node <naming_service_metadata/nacos3:7848> term 83 start preVote.

2024-05-21 07:00:47,275 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:00:47,267 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:00:47,338 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:00:47,320 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:00:47,399 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 07:00:47,481 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=38, type=Follower] is going to quit

2024-05-21 07:00:47,455 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=36, type=Follower] is going to quit

2024-05-21 07:00:47,495 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=35, type=Follower] is going to quit

2024-05-21 07:00:47,694 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=84, granted=true.

2024-05-21 07:00:47,715 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=84.

2024-05-21 07:00:47,708 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 07:00:47,739 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:00:47,795 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 07:00:47,800 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 07:00:47,803 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=83, granted=true.

2024-05-21 07:00:47,803 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=85, votedFor=nacos3:7848, cost time=65 ms

2024-05-21 07:00:47,808 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=83.

2024-05-21 07:00:47,842 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:47,864 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:47,865 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=82, currTerm=81.

2024-05-21 07:00:47,901 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=85, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:00:47,966 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=85, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:00:47,915 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=82, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-21 07:00:47,868 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:00:47,959 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=84, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 07:00:47,983 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:00:47,997 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:48,018 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:48,028 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:00:48,013 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,039 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=82, votedFor=nacos2:7848, cost time=54 ms

2024-05-21 07:00:48,138 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:00:48,143 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,151 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,161 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=84, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:00:48,178 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:00:48,183 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:00:48,186 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:00:48,189 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:00:48,194 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:00:48,205 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,229 INFO onLeaderStart: term=84.

2024-05-21 07:00:48,230 INFO onLeaderStart: term=85.

2024-05-21 07:00:48,690 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:49,379 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:52,594 INFO Node <naming_persistent_service_v2/nacos3:7848> term 81 start preVote.

2024-05-21 07:00:52,621 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=81, granted=true.

2024-05-21 07:00:52,626 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=81.

2024-05-21 07:00:52,628 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:00:52,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=82, votedFor=nacos3:7848, cost time=18 ms

2024-05-21 07:00:52,663 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=82, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:00:52,664 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:00:52,669 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:00:52,672 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:00:52,679 INFO onLeaderStart: term=82.

2024-05-21 07:01:44,618 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=82, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:01:44,660 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=85, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:01:44,777 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:01:44,661 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=84, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:01:44,777 INFO Node <naming_instance_metadata/nacos3:7848> term 82 start preVote.

2024-05-21 07:01:44,828 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:01:44,881 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:01:44,852 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=38, type=Follower] is going to quit

2024-05-21 07:01:44,866 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=43, type=Follower] is going to quit

2024-05-21 07:01:45,006 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=39, type=Follower] is going to quit

2024-05-21 07:01:45,033 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=42, type=Follower] is going to quit

2024-05-21 07:01:44,838 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:01:44,966 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=46, type=Follower] is going to quit

2024-05-21 07:01:45,067 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=45, type=Follower] is going to quit

2024-05-21 07:01:45,144 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=83, currTerm=82, granted=true, requestLastLogId=LogId [index=82, term=82], lastLogId=LogId [index=82, term=82].

2024-05-21 07:01:45,198 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=83, term=84], lastLogId=LogId [index=83, term=84].

2024-05-21 07:01:45,214 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:01:45,262 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=83, currTerm=82.

2024-05-21 07:01:45,320 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=82, granted=true.

2024-05-21 07:01:45,323 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=82.

2024-05-21 07:01:45,327 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:01:45,328 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=86, currTerm=85.

2024-05-21 07:01:45,331 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=83, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-21 07:01:45,341 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=85, currTerm=84.

2024-05-21 07:01:45,361 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=83, votedFor=nacos2:7848, cost time=28 ms

2024-05-21 07:01:45,367 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=83, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=82], lastLogId=LogId [index=82, term=82].

2024-05-21 07:01:45,369 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=86, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 07:01:45,371 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=83, votedFor=nacos3:7848, cost time=40 ms

2024-05-21 07:01:45,376 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=85, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 07:01:45,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=86, votedFor=nacos2:7848, cost time=88 ms

2024-05-21 07:01:45,494 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=83, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:01:45,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=85, votedFor=nacos2:7848, cost time=66 ms

2024-05-21 07:01:45,526 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:01:45,545 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:01:45,549 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:01:45,563 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:01:45,571 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=83, currTerm=83, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:01:45,594 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:01:45,639 INFO onLeaderStart: term=83.

2024-05-21 07:01:45,662 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:28,064 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=83, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:28,191 INFO Node <naming_service_metadata/nacos3:7848> term 85 start preVote.

2024-05-21 07:05:28,198 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 07:05:28,201 INFO Node <naming_persistent_service_v2/nacos3:7848> term 83 start preVote.

2024-05-21 07:05:28,202 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:28,206 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 07:05:28,205 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:28,276 INFO Node <naming_persistent_service/nacos3:7848> term 86 start preVote.

2024-05-21 07:05:28,255 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:28,280 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:28,574 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:28,649 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=85, granted=true.

2024-05-21 07:05:28,650 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=85.

2024-05-21 07:05:28,758 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,793 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=84, currTerm=83, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:05:28,820 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=83, granted=true.

2024-05-21 07:05:28,809 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:05:28,825 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=83.

2024-05-21 07:05:28,855 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:28,831 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,876 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=86, granted=true.

2024-05-21 07:05:28,882 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=86.

2024-05-21 07:05:28,894 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=84, votedFor=nacos3:7848, cost time=34 ms

2024-05-21 07:05:28,902 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:28,902 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=86, votedFor=nacos3:7848, cost time=117 ms

2024-05-21 07:05:28,914 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=85, currTerm=86.

2024-05-21 07:05:28,898 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:28,914 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=87, votedFor=nacos3:7848, cost time=26 ms

2024-05-21 07:05:28,929 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:05:28,937 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:05:28,932 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:28,944 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:05:28,945 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:28,963 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=84, currTerm=83.

2024-05-21 07:05:29,003 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=84, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:29,008 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:05:29,008 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=86, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:29,012 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:05:29,014 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:29,029 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:29,064 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=84, votedFor=0.0.0.0:0, cost time=75 ms

2024-05-21 07:05:29,079 INFO onLeaderStart: term=86.

2024-05-21 07:05:29,082 INFO onLeaderStart: term=84.

2024-05-21 07:05:29,088 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=87, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:29,091 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:05:29,094 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:05:29,096 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:29,106 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=84, votedFor=nacos2:7848, cost time=39 ms

2024-05-21 07:05:29,108 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:29,118 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:29,152 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=84, currTerm=84.

2024-05-21 07:05:29,168 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=84, currTerm=84.

2024-05-21 07:05:29,180 INFO onLeaderStart: term=87.

2024-05-21 07:05:29,203 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=87, currTerm=87.

2024-05-21 07:05:29,222 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:45,534 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=86, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:45,590 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=84, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:45,688 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=87, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:45,773 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=44, type=Follower] is going to quit

2024-05-21 07:05:45,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:45,741 INFO Node <naming_instance_metadata/nacos3:7848> term 84 start preVote.

2024-05-21 07:05:45,776 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:45,781 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=40, type=Follower] is going to quit

2024-05-21 07:05:45,782 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:45,791 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=45, type=Follower] is going to quit

2024-05-21 07:05:45,793 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=47, type=Follower] is going to quit

2024-05-21 07:05:45,795 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:45,847 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=41, type=Follower] is going to quit

2024-05-21 07:05:45,853 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=48, type=Follower] is going to quit

2024-05-21 07:05:46,060 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=86], lastLogId=LogId [index=85, term=86].

2024-05-21 07:05:46,061 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:05:46,061 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:05:46,096 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=84, granted=true.

2024-05-21 07:05:46,099 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=84.

2024-05-21 07:05:46,102 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:46,177 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=85, currTerm=84.

2024-05-21 07:05:46,180 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=86], lastLogId=LogId [index=85, term=86].

2024-05-21 07:05:46,212 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:05:46,255 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:05:46,259 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=87.

2024-05-21 07:05:46,263 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=87, currTerm=86.

2024-05-21 07:05:46,271 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=85, votedFor=nacos3:7848, cost time=155 ms

2024-05-21 07:05:46,276 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=85, currTerm=85, granted=true, requestLastLogId=LogId [index=83, term=84], lastLogId=LogId [index=83, term=84].

2024-05-21 07:05:46,281 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:46,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=85, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-21 07:05:46,298 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,291 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,320 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=87, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-21 07:05:46,323 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=88, votedFor=0.0.0.0:0, cost time=59 ms

2024-05-21 07:05:46,321 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,328 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=85, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 07:05:46,325 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,326 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=87, votedFor=nacos2:7848, cost time=51 ms

2024-05-21 07:05:46,378 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=88, votedFor=nacos2:7848, cost time=50 ms

2024-05-21 07:05:46,393 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,390 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=85, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:46,399 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=88.

2024-05-21 07:05:46,413 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:05:46,397 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,423 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:46,398 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,432 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:46,502 INFO onLeaderStart: term=85.

2024-05-21 07:22:36,139 INFO Node <naming_persistent_service_v2/nacos3:7848> term 85 start preVote.

2024-05-21 07:22:36,160 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,208 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,181 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=85, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:22:36,156 INFO Node <naming_service_metadata/nacos3:7848> term 87 start preVote.

2024-05-21 07:22:36,329 INFO Node <naming_persistent_service/nacos3:7848> term 88 start preVote.

2024-05-21 07:22:36,382 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,440 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:22:36,448 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=41, type=Follower] is going to quit

2024-05-21 07:22:36,465 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=42, type=Follower] is going to quit

2024-05-21 07:22:36,723 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=86, currTerm=85, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,724 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=88, currTerm=87, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,740 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=88, currTerm=87, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,833 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:22:36,836 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:22:36,851 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=88, granted=true.

2024-05-21 07:22:36,866 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=87, granted=true.

2024-05-21 07:22:36,871 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=88.

2024-05-21 07:22:36,871 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=87.

2024-05-21 07:22:36,876 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,880 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,883 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=88.

2024-05-21 07:22:36,867 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=85, granted=true.

2024-05-21 07:22:36,896 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=85.

2024-05-21 07:22:36,873 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,895 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:22:36,906 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,930 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=89, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 07:22:36,933 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,938 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=89, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 07:22:36,993 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=86, currTerm=85.

2024-05-21 07:22:36,995 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=89, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 07:22:37,000 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=89, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 07:22:37,011 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=86, votedFor=nacos3:7848, cost time=71 ms

2024-05-21 07:22:37,015 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:22:37,017 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=88, votedFor=nacos3:7848, cost time=41 ms

2024-05-21 07:22:37,040 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=86, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 07:22:37,044 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=89, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:22:37,086 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=86, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:22:37,095 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:22:37,096 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:22:37,122 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:22:37,129 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:22:37,135 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=86, votedFor=nacos2:7848, cost time=67 ms

2024-05-21 07:22:37,139 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:22:37,148 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:22:37,240 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,142 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,255 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:22:37,263 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:22:37,276 INFO onLeaderStart: term=86.

2024-05-21 07:22:37,290 INFO onLeaderStart: term=89.

2024-05-21 07:38:56,366 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=89, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:38:56,412 INFO Node <naming_service_metadata/nacos3:7848> term 88 start preVote.

2024-05-21 07:38:56,406 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:38:56,368 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=86, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:38:56,394 INFO Node <naming_instance_metadata/nacos3:7848> term 86 start preVote.

2024-05-21 07:38:56,419 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:38:56,454 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:38:56,455 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=50, type=Follower] is going to quit

2024-05-21 07:38:56,505 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:38:56,477 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=43, type=Follower] is going to quit

2024-05-21 07:38:56,548 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=49, type=Follower] is going to quit

2024-05-21 07:38:56,554 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=42, type=Follower] is going to quit

2024-05-21 07:38:56,779 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=88, granted=true.

2024-05-21 07:38:56,781 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=88.

2024-05-21 07:38:56,807 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=86, granted=true.

2024-05-21 07:38:56,810 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=86.

2024-05-21 07:38:56,820 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:38:56,847 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=89, votedFor=nacos3:7848, cost time=46 ms

2024-05-21 07:38:56,850 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=89, currTerm=89, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 07:38:56,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=87, votedFor=nacos3:7848, cost time=48 ms

2024-05-21 07:38:56,908 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=87, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:38:56,911 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=89, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:38:56,920 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:38:56,920 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:38:56,935 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:38:56,951 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=88, currTerm=89.

2024-05-21 07:38:57,014 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:38:57,014 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:38:57,047 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:38:57,099 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:38:57,103 INFO onLeaderStart: term=89.

2024-05-21 07:38:57,129 INFO onLeaderStart: term=87.

2024-05-21 07:38:57,145 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 07:38:57,159 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=87, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,168 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 07:38:57,178 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 07:38:57,179 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=87, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,207 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=87, currTerm=86.

2024-05-21 07:38:57,207 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:57,195 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:38:57,214 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:57,205 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:57,224 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:57,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=87, votedFor=0.0.0.0:0, cost time=52 ms

2024-05-21 07:38:57,289 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=87, votedFor=nacos1:7848, cost time=24 ms

2024-05-21 07:38:57,305 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:38:57,318 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:57,348 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=90, currTerm=89.

2024-05-21 07:38:57,360 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=90, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-21 07:38:57,371 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=90, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 07:38:57,381 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:12,295 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=89, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:55:12,319 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=87, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:55:12,449 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:55:12,477 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:55:12,478 INFO Node <naming_persistent_service/nacos3:7848> term 90 start preVote.

2024-05-21 07:55:12,474 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:55:12,469 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:55:12,464 INFO Node <naming_persistent_service_v2/nacos3:7848> term 87 start preVote.

2024-05-21 07:55:12,470 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=43, type=Follower] is going to quit

2024-05-21 07:55:12,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=46, type=Follower] is going to quit

2024-05-21 07:55:12,538 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=44, type=Follower] is going to quit

2024-05-21 07:55:12,559 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=47, type=Follower] is going to quit

2024-05-21 07:55:12,917 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=91, currTerm=90, because the leader nacos1:7848's lease is still valid.

2024-05-21 07:55:12,928 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 07:55:12,936 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:55:12,936 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=88, currTerm=87, because the leader nacos1:7848's lease is still valid.

2024-05-21 07:55:12,939 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:55:12,941 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=87, granted=true.

2024-05-21 07:55:12,942 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:55:12,944 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=87.

2024-05-21 07:55:12,954 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 07:55:12,967 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:12,977 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=90, granted=true.

2024-05-21 07:55:12,982 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=90.

2024-05-21 07:55:12,984 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:12,986 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,009 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,046 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=88, votedFor=nacos3:7848, cost time=77 ms

2024-05-21 07:55:13,007 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,051 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=88.

2024-05-21 07:55:13,045 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,042 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,055 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,059 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=91, votedFor=nacos3:7848, cost time=44 ms

2024-05-21 07:55:13,102 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=90, currTerm=89.

2024-05-21 07:55:13,127 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=90, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 07:55:13,128 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=91, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:55:13,140 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:55:13,148 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=87.

2024-05-21 07:55:13,165 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=90, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 07:55:13,170 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=90, currTerm=90.

2024-05-21 07:55:13,181 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=88, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 07:55:13,189 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=88.

2024-05-21 07:55:13,184 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=88, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:55:13,197 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:55:13,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=88, votedFor=nacos1:7848, cost time=14 ms

2024-05-21 07:55:13,214 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,227 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:55:13,243 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:55:13,275 INFO onLeaderStart: term=88.

2024-05-21 07:55:13,284 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:55:13,292 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,298 INFO onLeaderStart: term=91.

2024-05-21 08:06:56,741 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=91, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:06:56,636 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:06:56,698 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:06:56,621 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=88, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:06:56,636 INFO Node <naming_service_metadata/nacos3:7848> term 90 start preVote.

2024-05-21 08:06:56,634 INFO Node <naming_instance_metadata/nacos3:7848> term 88 start preVote.

2024-05-21 08:06:57,134 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:06:57,043 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:06:57,072 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=52, type=Follower] is going to quit

2024-05-21 08:06:57,130 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=45, type=Follower] is going to quit

2024-05-21 08:06:57,182 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=46, type=Follower] is going to quit

2024-05-21 08:06:57,185 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=53, type=Follower] is going to quit

2024-05-21 08:06:57,231 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 08:06:57,252 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=91, currTerm=90, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:06:57,274 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=91, currTerm=90, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:06:57,281 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 08:06:57,269 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:06:57,375 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=89, currTerm=88, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:06:57,394 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=89, currTerm=88, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:06:57,419 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=90, granted=true.

2024-05-21 08:06:57,424 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=90.

2024-05-21 08:06:57,439 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,447 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=89, currTerm=88.

2024-05-21 08:06:57,509 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:06:57,517 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=88, granted=true.

2024-05-21 08:06:57,534 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=89, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 08:06:57,540 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=88.

2024-05-21 08:06:57,555 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,564 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=89, votedFor=nacos1:7848, cost time=28 ms

2024-05-21 08:06:57,577 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=91, votedFor=nacos3:7848, cost time=58 ms

2024-05-21 08:06:57,598 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=89, currTerm=89.

2024-05-21 08:06:57,600 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=89, votedFor=nacos3:7848, cost time=43 ms

2024-05-21 08:06:57,634 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,607 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,636 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=89, currTerm=89.

2024-05-21 08:06:57,637 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=91, currTerm=91.

2024-05-21 08:06:57,639 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,648 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,666 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 08:06:57,717 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:57,702 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=92, currTerm=91.

2024-05-21 08:06:57,707 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:57,723 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:57,747 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=92, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 08:06:57,738 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:57,760 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 08:06:57,768 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 08:06:57,787 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=92, votedFor=nacos1:7848, cost time=36 ms

2024-05-21 08:06:57,804 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=92.

2024-05-21 08:06:57,820 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 44, cost 58 ms.

2024-05-21 08:06:57,825 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 42 to 45, cost 1 ms.

2024-05-21 08:06:57,844 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 45 to 47, cost 17 ms.

2024-05-21 08:06:57,849 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=91, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:06:57,832 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,865 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:06:57,887 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,894 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:57,888 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:06:57,878 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,899 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:57,942 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 08:06:57,916 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,988 INFO onLeaderStart: term=91.

2024-05-21 08:06:57,991 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 43, cost 0 ms.

2024-05-21 08:20:32,850 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:20:32,857 INFO Node <naming_persistent_service_v2/nacos3:7848> term 89 start preVote.

2024-05-21 08:20:32,878 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:20:32,843 INFO Node <naming_persistent_service/nacos3:7848> term 92 start preVote.

2024-05-21 08:20:32,865 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=91, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:20:32,852 INFO Node <naming_instance_metadata/nacos3:7848> term 89 start preVote.

2024-05-21 08:20:32,955 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:20:32,956 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=49, type=Follower] is going to quit

2024-05-21 08:20:32,856 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 08:20:33,004 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=48, type=Follower] is going to quit

2024-05-21 08:20:33,162 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=89, granted=true.

2024-05-21 08:20:33,165 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=89.

2024-05-21 08:20:33,192 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,266 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=90, votedFor=nacos3:7848, cost time=85 ms

2024-05-21 08:20:33,364 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=89, currTerm=90.

2024-05-21 08:20:33,382 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=90, term=91], lastLogId=LogId [index=90, term=91].

2024-05-21 08:20:33,385 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 08:20:33,388 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=90, term=91], lastLogId=LogId [index=90, term=91].

2024-05-21 08:20:33,403 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=93, currTerm=92, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:20:33,448 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=89, granted=true.

2024-05-21 08:20:33,451 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=89.

2024-05-21 08:20:33,445 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=90, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 08:20:33,454 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=92, granted=false.

2024-05-21 08:20:33,488 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=90, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 08:20:33,546 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=92, granted=true.

2024-05-21 08:20:33,551 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:20:33,561 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=92.

2024-05-21 08:20:33,567 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:20:33,561 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,574 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=90, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:20:33,593 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=93, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 08:20:33,581 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=91.

2024-05-21 08:20:33,599 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=90, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:20:33,601 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:20:33,596 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:20:33,620 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=92, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 08:20:33,631 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:20:33,634 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:20:33,660 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:20:33,663 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 08:20:33,663 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:20:33,665 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=90, currTerm=90.

2024-05-21 08:20:33,667 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=92, votedFor=nacos2:7848, cost time=41 ms

2024-05-21 08:20:33,709 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,747 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=93, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:20:33,752 INFO onLeaderStart: term=90.

2024-05-21 08:20:33,748 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:20:33,759 INFO onLeaderStart: term=90.

2024-05-21 08:20:33,765 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:20:33,774 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:20:33,793 INFO onLeaderStart: term=93.

2024-05-21 08:21:29,736 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=90, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:21:29,729 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=90, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:21:29,763 INFO Node <naming_service_metadata/nacos3:7848> term 92 start preVote.

2024-05-21 08:21:29,776 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=93, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:21:29,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 08:21:29,899 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:21:29,907 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:21:29,939 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=54, type=Follower] is going to quit

2024-05-21 08:21:29,954 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=55, type=Follower] is going to quit

2024-05-21 08:21:29,924 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:21:29,949 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=47, type=Follower] is going to quit

2024-05-21 08:21:29,940 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=46, type=Follower] is going to quit

2024-05-21 08:21:29,971 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=45, type=Follower] is going to quit

2024-05-21 08:21:30,000 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=48, type=Follower] is going to quit

2024-05-21 08:21:30,627 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:30,803 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=92, granted=true.

2024-05-21 08:21:30,812 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:21:30,837 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=93, term=93], lastLogId=LogId [index=93, term=93].

2024-05-21 08:21:30,839 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=90, term=90], lastLogId=LogId [index=90, term=90].

2024-05-21 08:21:31,164 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:21:31,297 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=91, currTerm=90.

2024-05-21 08:21:31,150 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=93, term=93], lastLogId=LogId [index=93, term=93].

2024-05-21 08:21:31,138 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=92.

2024-05-21 08:21:31,150 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,299 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,319 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,305 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,313 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=94, currTerm=93.

2024-05-21 08:21:31,321 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=90, term=90], lastLogId=LogId [index=90, term=90].

2024-05-21 08:21:31,397 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=93, votedFor=nacos3:7848, cost time=72 ms

2024-05-21 08:21:31,398 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=91, votedFor=0.0.0.0:0, cost time=99 ms

2024-05-21 08:21:31,400 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=93, currTerm=93, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 08:21:31,402 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=94, votedFor=0.0.0.0:0, cost time=58 ms

2024-05-21 08:21:31,409 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=91, currTerm=90.

2024-05-21 08:21:31,409 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:21:31,422 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=93.

2024-05-21 08:21:31,430 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=94, votedFor=nacos1:7848, cost time=19 ms

2024-05-21 08:21:31,439 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=91, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 08:21:31,439 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=91, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 08:21:31,431 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,449 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=91, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 08:21:31,463 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:31,498 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:27,617 INFO Node <naming_persistent_service/nacos3:7848> term 94 start preVote.

2024-05-21 08:50:27,617 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:27,617 INFO Node <naming_service_metadata/nacos3:7848> term 93 start preVote.

2024-05-21 08:50:27,617 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,398 INFO Node <naming_instance_metadata/nacos3:7848> term 91 start preVote.

2024-05-21 08:50:28,399 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,413 INFO Node <naming_persistent_service_v2/nacos3:7848> term 91 start preVote.

2024-05-21 08:50:28,415 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,449 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=92, currTerm=91, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:50:28,494 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=95, currTerm=94, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:50:28,607 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=93, granted=true.

2024-05-21 08:50:28,609 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=93.

2024-05-21 08:50:28,623 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,687 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=94, votedFor=nacos3:7848, cost time=73 ms

2024-05-21 08:50:28,695 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,748 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=94, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 08:50:28,756 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=94, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:50:28,761 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:50:28,794 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=94, granted=true.

2024-05-21 08:50:28,688 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,879 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,804 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=91, granted=false.

2024-05-21 08:50:28,877 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=94.

2024-05-21 08:50:28,882 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:50:28,882 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=91, granted=true.

2024-05-21 08:50:28,895 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,896 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,940 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=95.

2024-05-21 08:50:28,926 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=91.

2024-05-21 08:50:28,942 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,945 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,954 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:50:28,959 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=95, votedFor=nacos3:7848, cost time=16 ms

2024-05-21 08:50:28,962 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=92, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 08:50:28,964 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=91, granted=true.

2024-05-21 08:50:28,967 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=92.

2024-05-21 08:50:28,967 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=91.

2024-05-21 08:50:28,974 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,975 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=92.

2024-05-21 08:50:28,982 INFO onLeaderStart: term=94.

2024-05-21 08:50:28,990 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=92, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 09:01:39,020 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=94, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:01:39,075 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:01:39,075 INFO Node <naming_persistent_service/nacos3:7848> term 95 start preVote.

2024-05-21 09:01:39,265 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:01:39,265 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=51, type=Follower] is going to quit

2024-05-21 09:01:39,343 INFO Node <naming_instance_metadata/nacos3:7848> term 92 start preVote.

2024-05-21 09:01:39,393 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:01:39,403 INFO Node <naming_persistent_service/nacos3:7848> term 95 start preVote.

2024-05-21 09:01:39,417 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,536 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,424 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,542 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,550 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 09:01:39,449 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=52, type=Follower] is going to quit

2024-05-21 09:01:39,454 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,567 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 09:01:39,567 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,510 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,576 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,545 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,550 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 09:01:39,590 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 09:01:39,629 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=93, currTerm=92, because the leader nacos2:7848's lease is still valid.

2024-05-21 09:01:39,630 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=92.

2024-05-21 09:01:39,606 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 09:01:39,606 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 09:01:39,603 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 09:01:39,601 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=96, currTerm=95.

2024-05-21 09:01:39,631 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 09:01:39,652 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 43 to 88, cost 0 ms.

2024-05-21 09:01:39,648 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 45 to 90, cost 40 ms.

2024-05-21 09:01:39,650 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 47 to 92, cost 1 ms.

2024-05-21 09:01:39,658 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=96, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 09:01:39,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=93, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 09:01:39,694 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=96, votedFor=nacos1:7848, cost time=32 ms

2024-05-21 09:01:39,709 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 44 to 89, cost 40 ms.

2024-05-21 09:01:39,718 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=95, currTerm=96.

2024-05-21 09:01:39,725 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=93, votedFor=nacos1:7848, cost time=56 ms

2024-05-21 09:01:39,731 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=95, currTerm=96.

2024-05-21 09:01:39,730 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=92, currTerm=93.

2024-05-21 09:01:39,743 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=92, currTerm=93.

2024-05-21 09:01:39,748 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=95, currTerm=96.

2024-05-21 09:01:39,754 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=95, currTerm=96.

2024-05-21 09:01:39,756 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=94.

2024-05-21 09:01:39,776 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=95, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 09:01:39,783 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=6 ms

2024-05-21 09:01:39,797 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=92, currTerm=93.

2024-05-21 09:01:39,934 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=92.

2024-05-21 09:01:39,935 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 09:01:39,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=93, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 09:01:39,958 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=93, votedFor=nacos1:7848, cost time=6 ms

2024-05-21 09:02:40,918 INFO Node <naming_instance_metadata/nacos3:7848> term 93 start preVote.

2024-05-21 09:02:41,694 INFO Node <naming_service_metadata/nacos3:7848> term 95 start preVote.

2024-05-21 09:02:41,695 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:02:40,927 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 09:02:41,689 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 09:02:41,689 INFO Node <naming_persistent_service_v2/nacos3:7848> term 93 start preVote.

2024-05-21 09:02:41,857 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=95, granted=true.

2024-05-21 09:02:41,926 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=95.

2024-05-21 09:02:41,930 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:41,975 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=96, votedFor=nacos3:7848, cost time=43 ms

2024-05-21 09:02:41,981 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 09:02:41,996 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=93, granted=true.

2024-05-21 09:02:42,006 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=94, currTerm=93, because the leader nacos1:7848's lease is still valid.

2024-05-21 09:02:42,006 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=93.

2024-05-21 09:02:42,020 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:42,008 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=93, granted=true.

2024-05-21 09:02:42,050 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=93.

2024-05-21 09:02:42,017 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:02:42,020 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=94, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 09:02:42,058 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:02:42,051 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=97, currTerm=96, because the leader nacos1:7848's lease is still valid.

2024-05-21 09:02:42,053 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:42,075 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=94, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 09:02:42,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=94, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 09:02:42,089 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=94, currTerm=94.

2024-05-21 09:02:42,090 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=96, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:02:42,094 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:02:42,092 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=94, currTerm=94.

2024-05-21 09:02:42,106 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 09:02:42,108 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=94, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:02:42,112 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:02:42,115 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=94, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:02:42,116 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 09:02:42,119 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 09:02:42,128 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 09:02:42,121 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:02:42,134 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 09:02:42,132 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 09:02:42,136 INFO onLeaderStart: term=96.

2024-05-21 09:02:42,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=97, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 09:02:42,144 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:02:42,146 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:02:42,159 INFO onLeaderStart: term=94.

2024-05-21 09:02:42,163 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:02:42,163 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=97, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 09:02:42,182 INFO onLeaderStart: term=94.

2024-05-21 10:10:33,733 INFO Node <naming_persistent_service/nacos3:7848> term 97 start preVote.

2024-05-21 10:10:33,734 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=94, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 10:10:34,081 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=50, type=Follower] is going to quit

2024-05-21 10:10:34,029 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,020 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,182 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:33,741 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 10:10:33,735 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=94, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 10:10:34,083 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,200 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=49, type=Follower] is going to quit

2024-05-21 10:10:34,190 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 10:10:34,075 INFO Node <naming_persistent_service/nacos3:7848> term 97 start preVote.

2024-05-21 10:10:33,734 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=96, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 10:10:34,527 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:34,534 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:34,208 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,243 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=47, type=Follower] is going to quit

2024-05-21 10:10:34,574 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=54, type=Follower] is going to quit

2024-05-21 10:10:34,243 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 10:10:34,250 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,490 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,490 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,490 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,529 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,636 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=97, granted=true.

2024-05-21 10:10:34,651 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=97.

2024-05-21 10:10:34,595 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 10:10:34,577 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 10:10:34,577 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,660 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,600 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=48, type=Follower] is going to quit

2024-05-21 10:10:34,676 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 10:10:34,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=98, votedFor=nacos3:7848, cost time=35 ms

2024-05-21 10:10:34,655 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 10:10:34,602 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=53, type=Follower] is going to quit

2024-05-21 10:10:34,625 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=94, term=94], lastLogId=LogId [index=94, term=94].

2024-05-21 10:10:34,683 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 92 to 96, cost 0 ms.

2024-05-21 10:10:34,712 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 89 to 93, cost 1 ms.

2024-05-21 10:10:34,685 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 10:10:34,753 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 10:10:34,824 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:34,867 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,870 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,899 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,901 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,899 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,904 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:34,899 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,905 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,912 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,915 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 90 to 94, cost 0 ms.

2024-05-21 10:10:34,905 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,920 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,921 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:34,907 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,915 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 10:10:34,918 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=94.

2024-05-21 10:10:34,976 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 10:10:34,969 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,980 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,973 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 10:10:34,973 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=95, term=96].

2024-05-21 10:10:34,977 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=98, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 10:10:34,983 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:34,996 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=95, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 10:10:35,000 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 88 to 92, cost 0 ms.

2024-05-21 10:10:34,997 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=95, term=96].

2024-05-21 10:10:35,007 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=95, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 10:10:34,999 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 10:10:35,008 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 10:10:35,017 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=95, term=96].

2024-05-21 10:10:35,019 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,018 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=98, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 10:10:35,010 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=95.

2024-05-21 10:10:35,020 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=95, currTerm=95, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 10:10:35,042 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,033 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=97, currTerm=96.

2024-05-21 10:10:35,037 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 10:10:35,054 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 10:10:35,071 INFO The channel nacos2:7848 has successfully established.

2024-05-21 10:10:35,060 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=95, votedFor=nacos2:7848, cost time=23 ms

2024-05-21 10:10:35,080 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 10:10:35,081 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 10:10:35,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=97, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-21 10:10:35,104 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 10:10:35,121 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 10:10:35,132 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=97, votedFor=nacos1:7848, cost time=17 ms

2024-05-21 10:10:35,136 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=97.

2024-05-21 10:10:35,148 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,152 INFO onLeaderStart: term=98.

2024-05-21 10:10:35,216 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:38,755 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:10:38,758 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:10:38,760 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:10:38,764 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:10:39,210 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:10:39,453 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:10:39,469 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:10:39,699 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:10:39,700 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:10:39,723 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:10:39,748 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 10:40:34,049 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:40:34,231 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:34,232 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:34,234 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:40:34,239 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 93 to 95, cost 0 ms.

2024-05-21 10:40:34,239 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:34,240 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:34,241 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:40:34,245 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 96 to 98, cost 0 ms.

2024-05-21 10:40:34,668 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:34,669 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:34,672 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:40:34,678 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 92 to 94, cost 0 ms.

2024-05-21 10:40:34,689 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:34,689 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:34,691 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:40:34,695 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 94 to 96, cost 0 ms.

2024-05-21 10:40:34,855 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:40:34,881 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:40:34,881 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:40:34,960 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:40:39,459 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:40:39,460 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 10:40:39,977 INFO Connection disconnected: /172.25.0.2:58616

2024-05-21 10:40:40,044 INFO Connection disconnected: /172.25.0.2:58610

2024-05-21 10:40:40,118 INFO Connection disconnected: /172.25.0.3:41134

2024-05-21 11:10:34,199 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 95 to 96, cost 0 ms.

2024-05-21 11:10:34,204 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 98 to 99, cost 0 ms.

2024-05-21 11:10:34,628 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 94 to 95, cost 0 ms.

2024-05-21 11:10:34,657 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 96 to 97, cost 0 ms.

2024-05-21 11:40:34,160 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 11:40:34,164 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 11:40:34,591 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 11:40:34,615 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:10:34,059 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 12:10:34,062 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 12:10:34,492 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 12:10:34,520 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:18:11,949 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=98, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:12,533 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=56, type=Follower] is going to quit

2024-05-21 12:18:12,366 INFO Node <naming_persistent_service_v2/nacos3:7848> term 95 start preVote.

2024-05-21 12:18:12,402 INFO Node <naming_instance_metadata/nacos3:7848> term 95 start preVote.

2024-05-21 12:18:12,404 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:12,404 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:12,406 INFO Node <naming_service_metadata/nacos3:7848> term 97 start preVote.

2024-05-21 12:18:12,537 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:12,546 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:12,547 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=57, type=Follower] is going to quit

2024-05-21 12:18:12,605 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,673 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,680 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 12:18:12,690 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:18:12,673 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 12:18:12,699 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,703 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 12:18:12,779 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,780 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,784 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,787 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,787 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,791 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,792 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 12:18:12,800 INFO The channel nacos1:7848 has successfully established.

2024-05-21 12:18:12,802 INFO Peer nacos1:7848 is connected.

2024-05-21 12:18:12,803 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 12:18:12,804 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 12:18:12,810 INFO The channel nacos1:7848 has successfully established.

2024-05-21 12:18:12,809 INFO The channel nacos1:7848 has successfully established.

2024-05-21 12:18:12,810 INFO Peer nacos1:7848 is connected.

2024-05-21 12:18:12,817 INFO Peer nacos1:7848 is connected.

2024-05-21 12:18:12,818 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,817 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,821 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,833 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,833 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,859 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=98, currTerm=97, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:18:12,861 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=98, currTerm=97, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:18:12,881 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=95, granted=true.

2024-05-21 12:18:12,881 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=95, granted=true.

2024-05-21 12:18:12,882 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=95.

2024-05-21 12:18:12,881 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=95.

2024-05-21 12:18:12,883 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:18:12,885 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:12,883 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:18:12,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:18:12,885 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:12,885 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=98.

2024-05-21 12:18:12,905 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=96, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 12:18:12,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=96, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 12:18:12,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=98, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 12:18:12,911 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,913 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,915 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=97, currTerm=98.

2024-05-21 12:18:12,917 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=99, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 12:18:12,919 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,919 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,915 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 12:18:12,923 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=96, currTerm=96.

2024-05-21 12:18:12,915 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 12:18:12,927 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 12:18:12,917 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=97, currTerm=98.

2024-05-21 12:18:12,947 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=99, votedFor=nacos1:7848, cost time=26 ms

2024-05-21 12:18:12,951 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=96, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:12,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 12:18:12,953 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:18:12,957 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:18:12,981 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:18:13,013 INFO onLeaderStart: term=96.

2024-05-21 12:18:58,495 INFO Node <naming_service_metadata/nacos3:7848> term 98 start preVote.

2024-05-21 12:18:58,495 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:59,279 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=96, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:59,432 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=52, type=Follower] is going to quit

2024-05-21 12:18:59,456 INFO Node <naming_instance_metadata/nacos3:7848> term 96 start preVote.

2024-05-21 12:18:59,536 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:59,285 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497348280s. [closed=[], open=[[remote_addr=nacos1/172.25.0.2:7848]]]], groupId=naming_persistent_service_v2

2024-05-21 12:18:59,287 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:18:59,456 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:59,541 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=51, type=Follower] is going to quit

2024-05-21 12:18:59,541 INFO Node <naming_persistent_service/nacos3:7848> term 99 start preVote.

2024-05-21 12:18:59,621 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=97, currTerm=96, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:18:59,541 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:59,720 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=98], lastLogId=LogId [index=97, term=98].

2024-05-21 12:18:59,748 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=99, granted=true.

2024-05-21 12:18:59,768 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=96, term=96], lastLogId=LogId [index=96, term=96].

2024-05-21 12:18:59,769 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=99.

2024-05-21 12:18:59,769 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=98, granted=true.

2024-05-21 12:18:59,771 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=98.

2024-05-21 12:18:59,771 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:59,805 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=96, granted=false.

2024-05-21 12:18:59,810 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=100, votedFor=nacos3:7848, cost time=38 ms

2024-05-21 12:18:59,812 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=100.

2024-05-21 12:18:59,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=99, votedFor=nacos3:7848, cost time=41 ms

2024-05-21 12:18:59,827 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=96, term=96], lastLogId=LogId [index=96, term=96].

2024-05-21 12:18:59,835 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:59,855 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=99.

2024-05-21 12:18:59,857 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,863 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=96, term=96], lastLogId=LogId [index=96, term=96].

2024-05-21 12:18:59,867 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 12:18:59,866 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:59,910 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=97, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 12:18:59,919 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 12:18:59,921 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:18:59,931 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=97, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 12:18:59,934 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=97, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 12:18:59,960 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=97, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 12:18:59,962 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=99, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:59,962 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=96, currTerm=97.

2024-05-21 12:18:59,968 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:18:59,973 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:19:00,004 INFO onLeaderStart: term=99.

2024-05-21 12:19:10,496 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499762458s. [closed=[], open=[[remote_addr=nacos2/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-21 12:19:17,338 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=100, term=100], lastLogId=LogId [index=100, term=100].

2024-05-21 12:19:17,354 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=100.

2024-05-21 12:19:17,355 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:19:17,365 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=101, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 12:19:17,373 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=101, votedFor=nacos1:7848, cost time=6 ms

2024-05-21 12:19:17,632 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=97], lastLogId=LogId [index=96, term=97].

2024-05-21 12:19:17,646 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:19:17,647 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:19:17,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=98, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 12:19:17,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=6 ms

2024-05-21 12:19:17,801 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 12:19:17,813 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:19:17,815 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:19:17,824 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=98, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:19:17,831 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=98, votedFor=nacos2:7848, cost time=7 ms

2024-05-21 12:34:51,713 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=99, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:34:52,537 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=56, type=Follower] is going to quit

2024-05-21 12:34:52,549 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=57, type=Follower] is going to quit

2024-05-21 12:34:52,452 INFO Node <naming_persistent_service/nacos3:7848> term 101 start preVote.

2024-05-21 12:34:52,452 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:34:52,452 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:34:52,574 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:34:52,452 INFO Node <naming_instance_metadata/nacos3:7848> term 98 start preVote.

2024-05-21 12:34:52,452 INFO Node <naming_persistent_service_v2/nacos3:7848> term 98 start preVote.

2024-05-21 12:34:52,452 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:34:52,688 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 12:34:52,760 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:34:52,812 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=101, granted=true.

2024-05-21 12:34:52,813 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=101.

2024-05-21 12:34:52,852 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:34:52,864 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=102, votedFor=nacos3:7848, cost time=29 ms

2024-05-21 12:34:52,865 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=102.

2024-05-21 12:34:52,867 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=101, currTerm=102.

2024-05-21 12:34:52,888 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=99.

2024-05-21 12:34:52,893 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:34:52,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=100, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:34:52,901 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=100.

2024-05-21 12:34:52,919 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=100, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 12:34:52,930 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=98, granted=false.

2024-05-21 12:34:52,951 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,965 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=98, granted=true.

2024-05-21 12:34:52,968 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=98.

2024-05-21 12:34:52,970 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:34:52,967 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=98, granted=true.

2024-05-21 12:34:52,971 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=98.

2024-05-21 12:34:52,982 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=99, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 12:34:52,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=99, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 12:34:53,026 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=99, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:34:53,029 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:34:53,028 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=99.

2024-05-21 12:34:53,088 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:34:53,090 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=99, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:34:53,091 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:34:53,043 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:34:53,044 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=102, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:34:53,093 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:34:53,093 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:34:53,095 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:34:53,096 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:34:53,101 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 12:34:53,104 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:34:53,112 INFO onLeaderStart: term=99.

2024-05-21 12:34:53,119 INFO onLeaderStart: term=99.

2024-05-21 12:34:53,123 INFO onLeaderStart: term=102.

2024-05-21 12:35:31,057 INFO Node <naming_service_metadata/nacos3:7848> term 100 start preVote.

2024-05-21 12:35:31,803 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=99, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:35:31,800 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=99, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:35:31,803 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=102, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:35:31,845 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:35:31,058 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:35:31,841 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=51, type=Follower] is going to quit

2024-05-21 12:35:31,841 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:35:31,844 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=54, type=Follower] is going to quit

2024-05-21 12:35:31,846 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:35:31,846 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=59, type=Follower] is going to quit

2024-05-21 12:35:32,016 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=58, type=Follower] is going to quit

2024-05-21 12:35:31,950 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=50, type=Follower] is going to quit

2024-05-21 12:35:31,984 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=100, granted=true.

2024-05-21 12:35:32,120 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=100.

2024-05-21 12:35:31,994 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=53, type=Follower] is going to quit

2024-05-21 12:35:32,121 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:35:32,121 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,123 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:35:32,115 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,119 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 12:35:32,128 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 12:35:32,119 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:35:32,131 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:35:32,119 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,134 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=99.

2024-05-21 12:35:32,120 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,121 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:35:32,139 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=101.

2024-05-21 12:35:32,133 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,142 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=101, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:35:32,144 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,154 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=100, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 12:35:32,158 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=99.

2024-05-21 12:35:32,158 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=103, currTerm=102.

2024-05-21 12:35:32,168 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=101, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 12:35:32,170 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=100, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:35:32,173 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=103, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 12:35:32,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=100, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 12:35:32,186 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=103, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 12:35:32,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=100, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 12:35:32,190 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=100.

2024-05-21 12:35:32,201 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=103, currTerm=103.

2024-05-21 12:35:32,201 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,203 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,217 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,227 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,241 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 12:35:32,242 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,243 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:57,255 INFO Node <naming_instance_metadata/nacos3:7848> term 100 start preVote.

2024-05-21 12:51:58,038 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:51:58,038 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:51:58,038 INFO Node <naming_service_metadata/nacos3:7848> term 101 start preVote.

2024-05-21 12:51:57,897 INFO Node <naming_persistent_service/nacos3:7848> term 103 start preVote.

2024-05-21 12:51:57,255 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:51:58,306 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=101, currTerm=100, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:51:58,320 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 12:51:58,464 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:58,473 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:58,481 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:51:58,482 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,485 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,492 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 12:51:58,492 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 12:51:58,499 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 12:51:58,511 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 1 ms.

2024-05-21 12:51:58,544 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:51:58,710 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=104, currTerm=103, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:51:58,715 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=100.

2024-05-21 12:51:58,742 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 12:51:58,741 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=103, granted=false.

2024-05-21 12:51:58,749 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=104, currTerm=103, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:51:58,746 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=101.

2024-05-21 12:51:58,746 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:51:58,750 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=103.

2024-05-21 12:51:58,750 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:51:58,751 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=103, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:51:58,757 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=101, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 12:51:58,758 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=100, currTerm=101.

2024-05-21 12:51:58,759 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=100, currTerm=101.

2024-05-21 12:51:58,761 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=104, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:51:58,764 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,765 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=102, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 12:51:58,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=104, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 12:51:58,782 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 12:51:58,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=101, votedFor=nacos1:7848, cost time=31 ms

2024-05-21 12:51:58,796 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=103, currTerm=104.

2024-05-21 12:51:58,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=102, votedFor=nacos2:7848, cost time=31 ms

2024-05-21 12:51:58,867 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 63 ms.

2024-05-21 12:51:58,867 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=101, currTerm=102.

2024-05-21 12:51:58,874 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=101, currTerm=102.

2024-05-21 13:08:25,257 INFO Node <naming_persistent_service_v2/nacos3:7848> term 100 start preVote.

2024-05-21 13:08:25,258 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,257 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:08:25,649 INFO Node <naming_persistent_service/nacos3:7848> term 104 start preVote.

2024-05-21 13:08:25,257 INFO Node <naming_service_metadata/nacos3:7848> term 102 start preVote.

2024-05-21 13:08:25,649 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,257 INFO Node <naming_instance_metadata/nacos3:7848> term 101 start preVote.

2024-05-21 13:08:25,257 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,636 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 13:08:25,658 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:08:25,703 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 13:08:25,713 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=101, currTerm=100, because the leader nacos1:7848's lease is still valid.

2024-05-21 13:08:25,761 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=101, currTerm=100.

2024-05-21 13:08:25,762 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=100, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 13:08:25,785 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=103, currTerm=102.

2024-05-21 13:08:25,787 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 13:08:25,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=103, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 13:08:25,794 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=104, granted=true.

2024-05-21 13:08:25,858 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=104.

2024-05-21 13:08:25,799 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 13:08:25,848 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=101, votedFor=0.0.0.0:0, cost time=86 ms

2024-05-21 13:08:25,848 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=103, votedFor=nacos1:7848, cost time=39 ms

2024-05-21 13:08:25,858 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=101, granted=true.

2024-05-21 13:08:25,860 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,860 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=105, currTerm=105, granted=true, requestLastLogId=LogId [index=104, term=104], lastLogId=LogId [index=104, term=104].

2024-05-21 13:08:25,873 INFO The channel nacos1:7848 has successfully established.

2024-05-21 13:08:25,881 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=101.

2024-05-21 13:08:25,885 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=101, votedFor=nacos2:7848, cost time=10 ms

2024-05-21 13:08:25,878 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=102, currTerm=103.

2024-05-21 13:08:25,901 INFO Peer nacos1:7848 is connected.

2024-05-21 13:08:25,883 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:08:25,905 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=100, currTerm=101.

2024-05-21 13:08:25,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,904 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=102.

2024-05-21 13:08:25,908 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=102, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 13:08:25,906 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=102, currTerm=103.

2024-05-21 13:08:25,907 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=100, currTerm=101.

2024-05-21 13:08:25,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=102, votedFor=nacos3:7848, cost time=9 ms

2024-05-21 13:08:25,936 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=101, currTerm=102.

2024-05-21 13:08:25,940 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:08:25,941 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=105, votedFor=nacos3:7848, cost time=27 ms

2024-05-21 13:08:25,944 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=105, currTerm=105.

2024-05-21 13:08:25,946 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:08:25,960 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:24:06,402 INFO Node <naming_instance_metadata/nacos3:7848> term 102 start preVote.

2024-05-21 13:24:06,412 INFO Node <naming_persistent_service/nacos3:7848> term 105 start preVote.

2024-05-21 13:24:06,901 INFO Node <naming_service_metadata/nacos3:7848> term 103 start preVote.

2024-05-21 13:24:07,238 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:07,239 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:07,246 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 13:24:06,482 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:06,901 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:24:06,901 INFO Node <naming_persistent_service_v2/nacos3:7848> term 101 start preVote.

2024-05-21 13:24:07,359 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 101, cost 44 ms.

2024-05-21 13:24:06,888 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:07,215 INFO Node <naming_persistent_service/nacos3:7848> term 105 start preVote.

2024-05-21 13:24:06,901 INFO Node <naming_instance_metadata/nacos3:7848> term 102 start preVote.

2024-05-21 13:24:06,901 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:07,222 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,386 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,386 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,391 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 13:24:07,401 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,406 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 101, cost 0 ms.

2024-05-21 13:24:07,411 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,412 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,415 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 13:24:07,436 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=105, granted=true.

2024-05-21 13:24:07,436 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=105.

2024-05-21 13:24:07,450 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 100, cost 0 ms.

2024-05-21 13:24:07,450 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 13:24:07,451 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=106, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 13:24:07,474 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=104, currTerm=103, because the leader nacos1:7848's lease is still valid.

2024-05-21 13:24:07,474 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:24:07,486 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:24:07,486 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 104, cost 1 ms.

2024-05-21 13:24:07,487 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=103, granted=true.

2024-05-21 13:24:07,490 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=103.

2024-05-21 13:24:07,547 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=102, granted=true.

2024-05-21 13:24:07,489 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=102, currTerm=101, because the leader nacos2:7848's lease is still valid.

2024-05-21 13:24:07,548 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=102.

2024-05-21 13:24:07,552 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:24:07,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=103, votedFor=nacos3:7848, cost time=9 ms

2024-05-21 13:24:07,559 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:24:07,560 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=103, currTerm=103, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,561 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=106, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:24:07,562 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:24:07,572 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:24:07,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=104, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 13:24:07,595 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:24:07,596 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=104.

2024-05-21 13:24:07,599 INFO onLeaderStart: term=106.

2024-05-21 13:24:07,599 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=101, granted=true.

2024-05-21 13:24:07,626 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=101.

2024-05-21 13:24:07,631 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:24:07,623 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=103, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:24:07,642 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:24:07,633 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:24:07,635 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:24:07,634 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:24:07,654 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:24:07,654 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=102, currTerm=102.

2024-05-21 13:24:07,671 INFO onLeaderStart: term=103.

2024-05-21 13:24:07,694 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=102, votedFor=nacos3:7848, cost time=26 ms

2024-05-21 13:24:07,707 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=104, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:24:07,710 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:24:07,712 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:24:07,718 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:24:07,719 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:24:07,726 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:24:07,733 INFO onLeaderStart: term=104.

2024-05-21 13:24:07,739 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:24:30,489 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499805332s. [closed=[], open=[[remote_addr=nacos2/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-21 13:24:30,586 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499800304s. [closed=[], open=[[remote_addr=nacos2/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-21 13:25:27,661 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=104, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:25:27,665 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=58, type=Follower] is going to quit

2024-05-21 13:25:27,665 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:25:27,668 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499801165s. [closed=[], open=[[remote_addr=nacos1/172.25.0.2:7848]]]], groupId=naming_service_metadata

2024-05-21 13:25:27,661 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=106, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:25:27,662 INFO Node <naming_persistent_service_v2/nacos3:7848> term 102 start preVote.

2024-05-21 13:25:27,661 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=103, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:25:27,692 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=53, type=Follower] is going to quit

2024-05-21 13:25:27,693 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=54, type=Follower] is going to quit

2024-05-21 13:25:27,671 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:25:27,681 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=59, type=Follower] is going to quit

2024-05-21 13:25:27,693 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=60, type=Follower] is going to quit

2024-05-21 13:25:27,753 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=61, type=Follower] is going to quit

2024-05-21 13:25:27,693 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:25:27,754 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:25:27,700 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:25:27,780 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:25:27,802 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:27,808 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 13:25:27,841 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=105, currTerm=104.

2024-05-21 13:25:27,844 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:27,857 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:27,866 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=105, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 13:25:27,877 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:27,882 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=105, votedFor=nacos2:7848, cost time=5 ms

2024-05-21 13:25:27,905 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:27,889 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=102, granted=true.

2024-05-21 13:25:27,911 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=102.

2024-05-21 13:25:27,890 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:25:27,911 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=105, currTerm=105, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:25:27,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=103, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 13:25:27,947 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:27,960 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=103.

2024-05-21 13:25:27,960 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=107, currTerm=106.

2024-05-21 13:25:27,989 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=104, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 13:25:27,998 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=107, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 13:25:28,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=104, votedFor=nacos2:7848, cost time=25 ms

2024-05-21 13:25:28,025 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=104.

2024-05-21 13:25:28,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=107, votedFor=nacos2:7848, cost time=33 ms

2024-05-21 13:25:28,033 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=107.

2024-05-21 13:25:28,084 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=103, currTerm=103.

2024-05-21 13:25:28,103 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:28,116 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=103, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:25:28,107 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:28,119 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:25:28,122 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:25:28,134 INFO onLeaderStart: term=103.

2024-05-21 13:25:28,138 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:28,151 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:26:10,302 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499780264s. [closed=[], open=[[remote_addr=nacos1/172.25.0.2:7848]]]], groupId=naming_persistent_service_v2

2024-05-21 13:31:51,952 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=103, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:31:52,580 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:31:52,173 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:51,984 INFO Node <naming_service_metadata/nacos3:7848> term 105 start preVote.

2024-05-21 13:31:51,974 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:51,984 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:52,167 INFO Node <naming_persistent_service/nacos3:7848> term 107 start preVote.

2024-05-21 13:31:51,955 INFO Node <naming_instance_metadata/nacos3:7848> term 104 start preVote.

2024-05-21 13:31:52,581 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=56, type=Follower] is going to quit

2024-05-21 13:31:52,803 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=57, type=Follower] is going to quit

2024-05-21 13:31:52,650 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 13:31:52,827 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:52,833 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:31:52,833 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 13:31:52,848 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 13:31:52,845 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:52,848 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=105, granted=true.

2024-05-21 13:31:52,850 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=105.

2024-05-21 13:31:52,853 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=104, granted=true.

2024-05-21 13:31:52,857 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=104.

2024-05-21 13:31:52,856 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos3:7848, cost time=5 ms

2024-05-21 13:31:52,859 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:31:52,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 13:31:53,211 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=107, granted=true.

2024-05-21 13:31:53,357 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=107.

2024-05-21 13:31:53,461 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:53,466 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=105, currTerm=105.

2024-05-21 13:31:53,975 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=105, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:31:53,989 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:31:53,992 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:31:53,461 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=103.

2024-05-21 13:31:53,462 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=106, currTerm=106.

2024-05-21 13:31:53,684 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos3:7848, cost time=248 ms

2024-05-21 13:31:54,013 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=108, currTerm=108.

2024-05-21 13:31:54,015 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:54,035 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 13:31:54,035 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=104.

2024-05-21 13:31:54,130 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:31:54,133 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos2:7848, cost time=83 ms

2024-05-21 13:31:54,133 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:54,204 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,205 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,206 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,214 INFO onLeaderStart: term=105.

2024-05-21 13:54:05,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:05,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:05,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:05,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:05,697 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:05,697 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:05,699 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:05,699 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:05,709 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:54:05,709 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:54:05,709 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:54:05,709 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:54:05,719 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 104 to 106, cost 0 ms.

2024-05-21 13:54:05,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 101 to 103, cost 0 ms.

2024-05-21 13:54:05,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 100 to 102, cost 0 ms.

2024-05-21 13:54:05,720 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 101 to 102, cost 0 ms.

2024-05-21 13:56:34,513 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 13:56:34,520 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 13:56:34,523 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 13:56:34,542 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 14:01:52,586 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 14:01:53,405 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 14:01:53,926 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 14:01:53,937 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 14:01:54,084 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 14:01:54,085 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 14:01:57,907 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 14:01:59,108 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 14:01:59,110 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 14:01:59,112 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 14:01:59,113 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 14:24:05,620 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 103 to 106, cost 0 ms.

2024-05-21 14:24:05,620 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 106 to 109, cost 0 ms.

2024-05-21 14:24:05,620 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:24:05,620 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:54:05,595 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 14:54:05,597 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:24:05,554 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 1 ms.

2024-05-21 15:24:05,555 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:24:05,556 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 15:24:05,556 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:37:43,732 INFO Node <naming_service_metadata/nacos3:7848> shutdown, currTerm=106 state=STATE_FOLLOWER.

2024-05-21 15:37:43,745 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=106, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:43,800 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos3:7848, cost time=47 ms

2024-05-21 15:37:43,803 INFO Shutting down FSMCaller...

2024-05-21 15:37:43,815 INFO onShutdown.

2024-05-21 15:37:43,817 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=44, target=nacos2:7848}}.

2024-05-21 15:37:43,831 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,832 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,833 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=64, target=nacos1:7848}}.

2024-05-21 15:37:43,833 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,833 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,841 INFO The number of active nodes decrement to 3.

2024-05-21 15:37:43,843 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_service_metadata/nacos3:7848>'}.

2024-05-21 15:37:43,852 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_service_metadata/nacos3:7848>'}.

2024-05-21 15:37:43,882 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_service_metadata/nacos3:7848>'}.

2024-05-21 15:37:43,885 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_service_metadata/nacos3:7848>'}.

2024-05-21 15:37:43,943 INFO Node <naming_service_metadata/nacos3:7848> shutdown, currTerm=106 state=STATE_SHUTTING.

2024-05-21 15:37:43,946 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:43,974 INFO Node <naming_persistent_service/nacos3:7848> shutdown, currTerm=108 state=STATE_FOLLOWER.

2024-05-21 15:37:43,991 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=108, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:43,998 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 15:37:44,000 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@56d1d0fa[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 3360].

2024-05-21 15:37:44,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 15:37:44,010 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,027 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=48, target=nacos2:7848}}.

2024-05-21 15:37:44,030 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,031 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,032 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=67, target=nacos1:7848}}.

2024-05-21 15:37:44,034 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,036 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,038 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@6093411c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 164].

2024-05-21 15:37:44,011 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-21 15:37:44,031 INFO onShutdown.

2024-05-21 15:37:44,073 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:UNKNOWN], groupId=naming_instance_metadata

2024-05-21 15:37:44,098 INFO The number of active nodes decrement to 2.

2024-05-21 15:37:44,107 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos3:7848>'}.

2024-05-21 15:37:44,114 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos3:7848>'}.

2024-05-21 15:37:44,120 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos3:7848>'}.

2024-05-21 15:37:44,120 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos3:7848>'}.

2024-05-21 15:37:44,136 INFO Node <naming_persistent_service/nacos3:7848> shutdown, currTerm=108 state=STATE_SHUTTING.

2024-05-21 15:37:44,115 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@34dbb2b4[Shutting down, pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 154].

2024-05-21 15:37:44,139 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,143 INFO Node <naming_instance_metadata/nacos3:7848> shutdown, currTerm=105 state=STATE_LEADER.

2024-05-21 15:37:44,115 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@43f4605c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 33172].

2024-05-21 15:37:44,164 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=56, type=Follower] is going to quit

2024-05-21 15:37:44,164 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 15:37:44,207 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=55, type=Follower] is going to quit

2024-05-21 15:37:44,222 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-21 15:37:44,223 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 15:37:44,226 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=55, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 15:37:44,238 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,242 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=51, target=nacos2:7848}}.

2024-05-21 15:37:44,242 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,243 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,251 INFO onShutdown.

2024-05-21 15:37:44,252 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=70, target=nacos1:7848}}.

2024-05-21 15:37:44,280 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,285 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,315 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_instance_metadata/nacos3:7848>'}.

2024-05-21 15:37:44,325 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_instance_metadata/nacos3:7848>'}.

2024-05-21 15:37:44,327 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_instance_metadata/nacos3:7848>'}.

2024-05-21 15:37:44,327 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_instance_metadata/nacos3:7848>'}.

2024-05-21 15:37:44,320 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3e8b4783[Shutting down, pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 32735].

2024-05-21 15:37:44,353 INFO Node <naming_instance_metadata/nacos3:7848> shutdown, currTerm=105 state=STATE_SHUTTING.

2024-05-21 15:37:44,373 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 15:37:44,375 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_service_metadata/log.

2024-05-21 15:37:44,385 INFO The number of active nodes decrement to 1.

2024-05-21 15:37:44,413 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,414 INFO Node <naming_persistent_service_v2/nacos3:7848> shutdown, currTerm=104 state=STATE_FOLLOWER.

2024-05-21 15:37:44,432 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=104, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:44,456 INFO Connection disconnected: /172.25.0.3:60886

2024-05-21 15:37:44,466 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_instance_metadata/log.

2024-05-21 15:37:44,480 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos2:7848, cost time=49 ms

2024-05-21 15:37:44,482 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,481 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@70f751fd[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 167].

2024-05-21 15:37:44,485 INFO onShutdown.

2024-05-21 15:37:44,496 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=46, target=nacos2:7848}}.

2024-05-21 15:37:44,511 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,531 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,536 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=63, target=nacos1:7848}}.

2024-05-21 15:37:44,537 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,538 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,543 INFO The number of active nodes decrement to 0.

2024-05-21 15:37:44,543 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@38a1639e[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 16534].

2024-05-21 15:37:44,582 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service_v2/nacos3:7848>'}.

2024-05-21 15:37:44,596 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@88c2e0d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 140].

2024-05-21 15:37:44,606 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service_v2/nacos3:7848>'}.

2024-05-21 15:37:44,615 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@173f2cc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 3420].

2024-05-21 15:37:44,619 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@719c7ded[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 7447].

2024-05-21 15:37:44,628 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service_v2/nacos3:7848>'}.

2024-05-21 15:37:44,638 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@6071431b[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 148].

2024-05-21 15:37:44,638 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@26376d44[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 76].

2024-05-21 15:37:44,645 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service_v2/nacos3:7848>'}.

2024-05-21 15:37:44,647 INFO Node <naming_persistent_service_v2/nacos3:7848> shutdown, currTerm=104 state=STATE_SHUTTING.

2024-05-21 15:37:44,654 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,670 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos3:7848}}.

2024-05-21 15:37:44,674 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,675 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,679 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=17, target=nacos2:7848}}.

2024-05-21 15:37:44,681 INFO Connection disconnected: /172.25.0.5:58192

2024-05-21 15:37:44,681 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,687 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,690 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=36, target=nacos1:7848}}.

2024-05-21 15:37:44,691 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log.

2024-05-21 15:37:44,699 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,699 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,727 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@380115fc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 46013].

2024-05-21 23:07:25,851 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 23:07:26,229 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 23:07:26,973 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 23:07:26,974 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 23:07:26,976 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 23:07:26,979 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 23:07:26,983 INFO The number of active nodes increment to 1.

2024-05-21 23:07:27,365 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 23:07:27,375 INFO Starts FSMCaller successfully.

2024-05-21 23:07:27,391 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:27,495 INFO Node <naming_persistent_service/nacos3:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:27,496 INFO Node <naming_persistent_service/nacos3:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:27,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 23:07:27,516 INFO Node <naming_persistent_service/nacos3:7848> init, term=108, lastLogId=LogId [index=108, term=108], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:27,523 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:27,524 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:27,870 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:07:27,994 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:07:28,787 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:07:28,790 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:07:28,899 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: deadline exceeded after 0.913024319s. [closed=[], open=[[buffered_nanos=787004358, remote_addr=nacos3/172.25.0.4:7848]]].

2024-05-21 23:07:28,904 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 23:07:28,906 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:28,917 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:28,941 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:28,941 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:29,014 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:29,020 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:29,174 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:29,177 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:32,864 INFO Node <naming_persistent_service/nacos3:7848> term 108 start preVote.

2024-05-21 23:07:32,870 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:32,872 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:32,878 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:32,878 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:32,880 INFO Peer nacos2:7848 is connected.

2024-05-21 23:07:32,889 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:32,891 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:32,896 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:32,898 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:32,899 INFO Peer nacos1:7848 is connected.

2024-05-21 23:07:32,906 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 116, expect=108.

2024-05-21 23:07:32,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 23:07:32,924 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=108, currTerm=116.

2024-05-21 23:07:33,293 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=117, currTerm=116, granted=true, requestLastLogId=LogId [index=113, term=116], lastLogId=LogId [index=108, term=108].

2024-05-21 23:07:33,298 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=117, currTerm=116.

2024-05-21 23:07:33,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=117, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-21 23:07:33,312 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=117, votedFor=nacos1:7848, cost time=3 ms

2024-05-21 23:07:33,354 WARN Node <naming_persistent_service/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=117, prevLogIndex=113, prevLogTerm=116, localPrevLogTerm=0, lastLogIndex=108, entriesSize=0.

2024-05-21 23:07:33,386 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 23:07:42,167 INFO The number of active nodes increment to 2.

2024-05-21 23:07:42,371 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 0 to 105, cost 1 ms.

2024-05-21 23:07:42,378 INFO Starts FSMCaller successfully.

2024-05-21 23:07:42,383 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:42,404 INFO Node <naming_persistent_service_v2/nacos3:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:42,404 INFO Node <naming_persistent_service_v2/nacos3:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:42,413 INFO Node <naming_persistent_service_v2/nacos3:7848> init, term=104, lastLogId=LogId [index=104, term=104], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:42,415 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:42,415 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:42,417 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:42,452 INFO The number of active nodes increment to 3.

2024-05-21 23:07:42,849 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 0 to 105, cost 0 ms.

2024-05-21 23:07:42,856 INFO Starts FSMCaller successfully.

2024-05-21 23:07:42,870 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:42,881 INFO Node <naming_instance_metadata/nacos3:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:42,882 INFO Node <naming_instance_metadata/nacos3:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:42,887 INFO Node <naming_instance_metadata/nacos3:7848> init, term=105, lastLogId=LogId [index=104, term=105], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:42,889 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:42,899 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:42,900 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:42,950 INFO The number of active nodes increment to 4.

2024-05-21 23:07:43,195 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 0 to 106, cost 1 ms.

2024-05-21 23:07:43,202 INFO Starts FSMCaller successfully.

2024-05-21 23:07:43,205 INFO Loading snapshot, meta=last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,220 INFO Node <naming_service_metadata/nacos3:7848> onSnapshotLoadDone, last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,221 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 23:07:43,223 INFO Node <naming_service_metadata/nacos3:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,230 INFO Node <naming_service_metadata/nacos3:7848> init, term=106, lastLogId=LogId [index=105, term=106], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,233 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,233 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:47,425 INFO Node <naming_persistent_service_v2/nacos3:7848> term 104 start preVote.

2024-05-21 23:07:47,434 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:47,436 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:47,450 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:47,451 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:47,454 INFO Peer nacos2:7848 is connected.

2024-05-21 23:07:47,479 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:47,487 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:47,501 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:47,504 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:47,509 INFO Peer nacos1:7848 is connected.

2024-05-21 23:07:47,531 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=104, granted=true.

2024-05-21 23:07:47,532 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=104.

2024-05-21 23:07:47,574 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=105, votedFor=nacos3:7848, cost time=30 ms

2024-05-21 23:07:47,575 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:07:47,606 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=105, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:47,680 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:07:47,713 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:07:47,733 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:07:47,782 INFO onLeaderStart: term=105.

2024-05-21 23:07:48,119 INFO Node <naming_instance_metadata/nacos3:7848> term 105 start preVote.

2024-05-21 23:07:48,122 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:48,125 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:48,128 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:48,129 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:48,129 INFO Peer nacos2:7848 is connected.

2024-05-21 23:07:48,142 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:48,148 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:48,159 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:48,164 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:48,167 INFO Peer nacos1:7848 is connected.

2024-05-21 23:07:48,185 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=105, granted=true.

2024-05-21 23:07:48,186 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=105.

2024-05-21 23:07:48,209 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=106, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 23:07:48,216 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:07:48,238 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=106, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:48,239 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:07:48,240 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:07:48,249 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:07:48,276 INFO onLeaderStart: term=106.

2024-05-21 23:07:48,533 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=106], lastLogId=LogId [index=105, term=106].

2024-05-21 23:07:48,548 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=106.

2024-05-21 23:07:48,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=107, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-21 23:07:48,562 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=107, votedFor=nacos1:7848, cost time=6 ms

2024-05-21 23:27:40,630 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:27:40,631 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:27:40,632 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 23:27:40,637 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 1 ms.

2024-05-21 23:31:51,575 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:31:51,575 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:31:51,577 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 23:31:51,586 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:34:17,377 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:34:17,378 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:34:17,380 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 23:34:17,386 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 23:34:38,732 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:34:38,735 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:34:38,739 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 23:34:38,746 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:37:32,916 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 23:37:32,936 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 23:37:48,333 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 23:47:44,612 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=106, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:44,865 INFO Node <naming_service_metadata/nacos3:7848> term 107 start preVote.

2024-05-21 23:47:44,891 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:44,887 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:44,865 INFO Node <naming_persistent_service/nacos3:7848> term 117 start preVote.

2024-05-21 23:47:44,893 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=117, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:44,893 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:44,515 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=105, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:45,104 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:45,118 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:45,025 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:47:45,101 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:45,105 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:45,184 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,183 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,203 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,508 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,509 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,515 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,524 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,516 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,526 INFO Peer nacos2:7848 is connected.

2024-05-21 23:47:45,542 INFO Peer nacos2:7848 is connected.

2024-05-21 23:47:45,545 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,547 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,558 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=117, granted=true.

2024-05-21 23:47:45,559 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=117.

2024-05-21 23:47:45,561 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=117, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:45,540 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,579 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:47:45,593 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,594 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 23:47:45,597 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=106], lastLogId=LogId [index=105, term=106].

2024-05-21 23:47:45,620 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=106], lastLogId=LogId [index=105, term=106].

2024-05-21 23:47:45,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=118, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 23:47:45,612 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,624 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=118, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:45,639 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:47:45,645 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=106, currTerm=105.

2024-05-21 23:47:45,656 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:47:45,657 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=106.

2024-05-21 23:47:45,662 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,672 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,681 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,682 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,691 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,693 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=118, currTerm=118, because the leader nacos3:7848's lease is still valid.

2024-05-21 23:47:45,729 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=107, votedFor=0.0.0.0:0, cost time=72 ms

2024-05-21 23:47:45,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=106, votedFor=0.0.0.0:0, cost time=74 ms

2024-05-21 23:47:45,733 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=106, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 23:47:45,708 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=108, currTerm=107, because the leader nacos1:7848's lease is still valid.

2024-05-21 23:47:45,738 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=107, granted=false.

2024-05-21 23:47:45,745 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=107, votedFor=nacos1:7848, cost time=15 ms

2024-05-21 23:47:45,748 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=107, currTerm=107.

2024-05-21 23:47:45,749 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,752 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,734 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,766 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=106, votedFor=nacos1:7848, cost time=17 ms

2024-05-21 23:47:45,746 INFO onLeaderStart: term=118.

2024-05-21 23:47:45,747 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=108, currTerm=107.

2024-05-21 23:47:45,778 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:45,786 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=108, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 23:47:45,792 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 23:47:45,816 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=28 ms

2024-05-21 23:47:45,821 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=107, currTerm=108.

2024-05-21 23:47:45,852 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:45,895 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,130 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=118, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:57,356 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499520111s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-21 23:47:57,276 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499639520s. [closed=[], open=[[remote_addr=nacos2/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-21 23:47:57,407 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=115, lastLogIncluded=0, lastLogIndex=115, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:57,401 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:57,439 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=115, lastLogIncluded=0, lastLogIndex=115, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:57,445 INFO Node <naming_persistent_service_v2/nacos3:7848> term 106 start preVote.

2024-05-21 23:47:57,445 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:57,470 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,476 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=108, currTerm=107, because the leader nacos1:7848's lease is still valid.

2024-05-21 23:47:57,479 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,489 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=106, granted=true.

2024-05-21 23:47:57,491 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=106.

2024-05-21 23:47:57,486 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,515 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=107, votedFor=nacos3:7848, cost time=18 ms

2024-05-21 23:47:57,531 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:47:57,534 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,566 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=107, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:57,570 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:47:57,580 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:47:57,596 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=108, currTerm=107.

2024-05-21 23:47:57,597 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:57,607 INFO onLeaderStart: term=107.

2024-05-21 23:47:57,611 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=108, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 23:47:57,622 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:57,623 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=10 ms

2024-05-21 23:47:57,625 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:58,617 INFO Node <naming_service_metadata/nacos3:7848> term 108 start preVote.

2024-05-21 23:47:58,617 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=108, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 23:47:58,625 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=108, granted=true.

2024-05-21 23:47:58,627 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=108.

2024-05-21 23:47:58,635 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=109, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 23:47:58,637 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:47:58,652 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=109, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:58,654 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:47:58,655 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:47:58,659 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:58,674 INFO onLeaderStart: term=109.

2024-05-21 23:48:00,511 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:48:01,529 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:48:02,799 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=115, term=118], lastLogId=LogId [index=115, term=118].

2024-05-21 23:48:02,803 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=119, currTerm=118.

2024-05-21 23:48:02,809 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=119, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-21 23:48:02,814 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=119, votedFor=nacos1:7848, cost time=4 ms

