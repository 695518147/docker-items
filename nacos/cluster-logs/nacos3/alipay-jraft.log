2024-05-28 00:08:37,833 INFO Node <naming_service_metadata/nacos3:7848> term 341 start preVote.

2024-05-28 00:08:38,875 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=339, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 00:08:37,833 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=341, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:08:39,112 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 00:08:39,112 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=331, lastLogIncluded=0, lastLogIndex=331, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=230, type=Follower] is going to quit

2024-05-28 00:08:39,116 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=331, lastLogIncluded=0, lastLogIndex=331, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=231, type=Follower] is going to quit

2024-05-28 00:08:39,122 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=340, currTerm=339, granted=true, requestLastLogId=LogId [index=331, term=339], lastLogId=LogId [index=331, term=339].

2024-05-28 00:08:39,163 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=340, currTerm=339.

2024-05-28 00:08:39,179 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=344, currTerm=343, because the leader nacos2:7848's lease is still valid.

2024-05-28 00:08:39,184 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=340, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-28 00:08:39,193 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=341, granted=true.

2024-05-28 00:08:39,197 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=341.

2024-05-28 00:08:39,202 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=341, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 00:08:39,211 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=340, votedFor=nacos2:7848, cost time=18 ms

2024-05-28 00:08:39,214 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=340, currTerm=340, granted=true, requestLastLogId=LogId [index=331, term=339], lastLogId=LogId [index=331, term=339].

2024-05-28 00:08:39,215 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:08:39,216 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:08:39,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=342, votedFor=nacos3:7848, cost time=23 ms

2024-05-28 00:08:39,230 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=342, granted=true, requestLastLogId=LogId [index=330, term=341], lastLogId=LogId [index=330, term=341].

2024-05-28 00:08:39,233 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:08:39,228 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=344, currTerm=343.

2024-05-28 00:08:39,238 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 00:08:39,238 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=342, granted=true, requestLastLogId=LogId [index=330, term=341], lastLogId=LogId [index=330, term=341].

2024-05-28 00:08:39,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=344, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-28 00:08:39,260 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=342, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 00:08:39,269 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 00:08:39,264 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=344, votedFor=nacos1:7848, cost time=12 ms

2024-05-28 00:08:39,278 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 00:08:39,306 INFO onLeaderStart: term=342.

2024-05-28 00:08:39,333 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 00:08:44,235 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=349, currTerm=348, granted=true, requestLastLogId=LogId [index=336, term=348], lastLogId=LogId [index=336, term=348].

2024-05-28 00:08:44,241 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=349, currTerm=348.

2024-05-28 00:08:44,242 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 00:08:44,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=349, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-28 00:08:44,254 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=349, votedFor=nacos2:7848, cost time=3 ms

2024-05-28 00:09:09,248 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497775241s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-28 00:09:40,491 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=342, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 00:09:40,652 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=331, lastLogIncluded=0, lastLogIndex=331, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=215, type=Follower] is going to quit

2024-05-28 00:09:40,687 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 00:09:40,718 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=331, lastLogIncluded=0, lastLogIndex=331, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=214, type=Follower] is going to quit

2024-05-28 00:09:40,913 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:09:41,061 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=343, currTerm=342, granted=true, requestLastLogId=LogId [index=331, term=342], lastLogId=LogId [index=331, term=342].

2024-05-28 00:09:41,220 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=343, currTerm=342.

2024-05-28 00:09:41,477 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=343, votedFor=0.0.0.0:0, cost time=240 ms

2024-05-28 00:09:41,790 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=343, votedFor=nacos2:7848, cost time=121 ms

2024-05-28 00:09:42,366 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:25:14,804 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-28 00:25:14,822 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-28 00:25:15,854 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_328.

2024-05-28 00:25:15,895 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_328.

2024-05-28 00:25:15,855 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_337.

2024-05-28 00:25:15,731 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_332.

2024-05-28 00:25:15,714 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=344, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 00:25:15,707 INFO Node <naming_persistent_service_v2/nacos3:7848> term 344 start preVote.

2024-05-28 00:25:15,674 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=344, currTerm=343, granted=true, requestLastLogId=LogId [index=332, term=343], lastLogId=LogId [index=332, term=343].

2024-05-28 00:25:15,907 INFO Node <naming_service_metadata/nacos3:7848> term 343 start preVote.

2024-05-28 00:25:15,901 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_332.

2024-05-28 00:25:15,912 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:25:15,794 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_332.

2024-05-28 00:25:15,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=349, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:25:15,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=340, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:25:15,708 INFO Node <naming_instance_metadata/nacos3:7848> term 340 start preVote.

2024-05-28 00:25:15,707 INFO Node <naming_persistent_service/nacos3:7848> term 349 start preVote.

2024-05-28 00:25:15,649 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-28 00:25:15,903 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_326.

2024-05-28 00:25:15,900 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_337.

2024-05-28 00:25:15,903 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-28 00:25:15,916 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-28 00:25:15,918 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=344, currTerm=343, granted=true, requestLastLogId=LogId [index=332, term=343], lastLogId=LogId [index=332, term=343].

2024-05-28 00:25:15,959 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=344, currTerm=343, granted=true, requestLastLogId=LogId [index=332, term=343], lastLogId=LogId [index=332, term=343].

2024-05-28 00:25:15,944 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_330.

2024-05-28 00:25:15,946 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_332.

2024-05-28 00:25:15,974 INFO The channel nacos1:7848 is in state: READY.

2024-05-28 00:25:15,950 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=341, currTerm=340, granted=true, requestLastLogId=LogId [index=332, term=340], lastLogId=LogId [index=332, term=340].

2024-05-28 00:25:15,978 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_329.

2024-05-28 00:25:15,961 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-28 00:25:15,984 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=350, currTerm=349, because the leader nacos2:7848's lease is still valid.

2024-05-28 00:25:15,962 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 321 to 327, cost 0 ms.

2024-05-28 00:25:15,969 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_335.

2024-05-28 00:25:15,970 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-28 00:25:15,972 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=343, granted=true.

2024-05-28 00:25:16,015 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=343.

2024-05-28 00:25:15,975 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-28 00:25:15,976 INFO The channel nacos1:7848 has successfully established.

2024-05-28 00:25:15,977 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=345, currTerm=344, because the leader nacos1:7848's lease is still valid.

2024-05-28 00:25:16,025 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=345, currTerm=344.

2024-05-28 00:25:15,978 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=341, currTerm=340.

2024-05-28 00:25:16,029 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=344, votedFor=nacos3:7848, cost time=11 ms

2024-05-28 00:25:16,031 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=344, currTerm=344.

2024-05-28 00:25:15,983 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 325 to 331, cost 0 ms.

2024-05-28 00:25:15,989 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=350, currTerm=349.

2024-05-28 00:25:15,993 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 322 to 330, cost 1 ms.

2024-05-28 00:25:15,998 INFO The channel nacos2:7848 is in state: READY.

2024-05-28 00:25:16,038 INFO The channel nacos2:7848 has successfully established.

2024-05-28 00:25:16,019 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 328 to 336, cost 1 ms.

2024-05-28 00:25:16,021 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 00:25:16,022 INFO Peer nacos1:7848 is connected.

2024-05-28 00:25:16,032 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:25:16,033 INFO The channel nacos2:7848 is in state: READY.

2024-05-28 00:25:16,047 INFO The channel nacos2:7848 has successfully established.

2024-05-28 00:25:16,048 INFO Peer nacos2:7848 is connected.

2024-05-28 00:25:16,033 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=345, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-28 00:25:16,035 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=341, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-28 00:25:16,036 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=349, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 00:25:16,041 INFO Peer nacos2:7848 is connected.

2024-05-28 00:25:16,047 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=350, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-28 00:25:16,048 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-28 00:25:16,049 INFO The channel nacos1:7848 is in state: READY.

2024-05-28 00:25:16,065 INFO The channel nacos1:7848 has successfully established.

2024-05-28 00:25:16,062 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=341, votedFor=nacos1:7848, cost time=8 ms

2024-05-28 00:25:16,068 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=341, currTerm=341, granted=true, requestLastLogId=LogId [index=332, term=340], lastLogId=LogId [index=332, term=340].

2024-05-28 00:25:16,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=345, votedFor=nacos2:7848, cost time=12 ms

2024-05-28 00:25:16,066 INFO Peer nacos1:7848 is connected.

2024-05-28 00:25:16,067 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-28 00:25:16,067 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=350, votedFor=nacos1:7848, cost time=4 ms

2024-05-28 00:25:16,070 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=340, currTerm=341.

2024-05-28 00:25:16,071 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=344, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 00:25:16,072 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=344, currTerm=345.

2024-05-28 00:25:16,076 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=349, currTerm=350.

2024-05-28 00:25:16,077 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=340, currTerm=341.

2024-05-28 00:25:16,081 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=340, currTerm=341.

2024-05-28 00:25:16,080 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=344, currTerm=345.

2024-05-28 00:25:16,080 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=349, currTerm=350.

2024-05-28 00:25:19,808 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-28 00:25:19,809 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-28 00:25:19,810 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-28 00:25:19,811 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-28 00:25:54,034 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=345, currTerm=344, granted=true, requestLastLogId=LogId [index=333, term=344], lastLogId=LogId [index=333, term=344].

2024-05-28 00:25:54,192 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=345, currTerm=344, granted=true, requestLastLogId=LogId [index=333, term=344], lastLogId=LogId [index=333, term=344].

2024-05-28 00:25:54,207 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=345, currTerm=344.

2024-05-28 00:25:54,247 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=344, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 00:25:54,633 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=345, votedFor=0.0.0.0:0, cost time=386 ms

2024-05-28 00:25:55,695 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=345, votedFor=nacos1:7848, cost time=881 ms

2024-05-28 00:42:47,393 INFO Node <naming_persistent_service/nacos3:7848> term 350 start preVote.

2024-05-28 00:42:47,393 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 00:42:47,394 INFO Node <naming_persistent_service_v2/nacos3:7848> term 345 start preVote.

2024-05-28 00:42:47,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=341, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 00:42:48,127 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=345, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 00:42:47,395 INFO Node <naming_instance_metadata/nacos3:7848> term 341 start preVote.

2024-05-28 00:42:47,394 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=345, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:42:48,106 INFO Node <naming_persistent_service/nacos3:7848> term 350 start preVote.

2024-05-28 00:42:48,126 INFO Node <naming_service_metadata/nacos3:7848> term 345 start preVote.

2024-05-28 00:42:48,273 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=346, currTerm=345, because the leader nacos2:7848's lease is still valid.

2024-05-28 00:42:48,313 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=346, currTerm=345, granted=true, requestLastLogId=LogId [index=334, term=345], lastLogId=LogId [index=334, term=345].

2024-05-28 00:42:48,326 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=345, granted=true.

2024-05-28 00:42:48,327 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=345.

2024-05-28 00:42:48,332 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=350, granted=true.

2024-05-28 00:42:48,340 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=350.

2024-05-28 00:42:48,326 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=341, granted=true.

2024-05-28 00:42:48,333 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=345, granted=true.

2024-05-28 00:42:48,402 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=345.

2024-05-28 00:42:48,361 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=345, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 00:42:48,372 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=351, currTerm=351, granted=true, requestLastLogId=LogId [index=338, term=350], lastLogId=LogId [index=338, term=350].

2024-05-28 00:42:48,415 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=346, currTerm=346.

2024-05-28 00:42:48,417 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=346, votedFor=nacos3:7848, cost time=57 ms

2024-05-28 00:42:48,398 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=341.

2024-05-28 00:42:48,422 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:42:48,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=341, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 00:42:48,430 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=351, votedFor=nacos3:7848, cost time=12 ms

2024-05-28 00:42:48,431 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:42:48,432 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=350, currTerm=351.

2024-05-28 00:42:48,440 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=346, votedFor=nacos3:7848, cost time=15 ms

2024-05-28 00:42:48,442 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:42:48,443 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=342, votedFor=nacos3:7848, cost time=17 ms

2024-05-28 00:42:48,445 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 00:42:48,443 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=346, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 00:42:48,446 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-28 00:42:48,483 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-28 00:42:48,446 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=342, currTerm=342, granted=true, requestLastLogId=LogId [index=333, term=341], lastLogId=LogId [index=333, term=341].

2024-05-28 00:42:48,493 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=342, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 00:42:48,495 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=351, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 00:42:48,495 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 00:42:48,495 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 00:42:48,496 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 00:42:48,496 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 00:42:48,505 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-28 00:42:48,505 INFO onLeaderStart: term=346.

2024-05-28 00:42:48,505 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 00:42:48,506 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-28 00:42:48,523 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 00:42:48,526 INFO onLeaderStart: term=351.

2024-05-28 00:42:48,526 INFO onLeaderStart: term=342.

2024-05-28 00:42:48,542 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 00:43:19,161 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499820913s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-28 00:45:30,663 INFO Node <naming_service_metadata/nacos3:7848> term 346 start preVote.

2024-05-28 00:45:30,674 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=346, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 00:45:30,672 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 00:45:30,667 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=342, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 00:45:30,673 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=351, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 00:45:31,467 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=330, lastLogIncluded=0, lastLogIndex=330, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=182, type=Follower] is going to quit

2024-05-28 00:45:31,470 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 00:45:31,549 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=334, lastLogIncluded=0, lastLogIndex=334, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=233, type=Follower] is going to quit

2024-05-28 00:45:31,552 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=334, lastLogIncluded=0, lastLogIndex=334, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=234, type=Follower] is going to quit

2024-05-28 00:45:31,554 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=347, currTerm=346, because the leader nacos2:7848's lease is still valid.

2024-05-28 00:45:31,559 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=346, granted=false.

2024-05-28 00:45:31,591 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=343, currTerm=342, granted=true, requestLastLogId=LogId [index=334, term=342], lastLogId=LogId [index=334, term=342].

2024-05-28 00:45:31,592 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=343, currTerm=342, granted=true, requestLastLogId=LogId [index=334, term=342], lastLogId=LogId [index=334, term=342].

2024-05-28 00:45:31,551 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=330, lastLogIncluded=0, lastLogIndex=330, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=183, type=Follower] is going to quit

2024-05-28 00:45:31,550 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 00:45:31,550 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 00:45:31,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=339, lastLogIncluded=0, lastLogIndex=339, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=222, type=Follower] is going to quit

2024-05-28 00:45:31,592 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=346, granted=true.

2024-05-28 00:45:31,597 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=347, currTerm=346, granted=true, requestLastLogId=LogId [index=330, term=346], lastLogId=LogId [index=330, term=346].

2024-05-28 00:45:31,622 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=339, lastLogIncluded=0, lastLogIndex=339, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=223, type=Follower] is going to quit

2024-05-28 00:45:31,623 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=346.

2024-05-28 00:45:31,628 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=339, term=351], lastLogId=LogId [index=339, term=351].

2024-05-28 00:45:31,629 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 00:45:31,625 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,627 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=343, currTerm=342.

2024-05-28 00:45:31,629 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=339, term=351], lastLogId=LogId [index=339, term=351].

2024-05-28 00:45:31,635 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=352, currTerm=351.

2024-05-28 00:45:31,630 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=347, currTerm=346, granted=true, requestLastLogId=LogId [index=330, term=346], lastLogId=LogId [index=330, term=346].

2024-05-28 00:45:31,698 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=347, votedFor=nacos3:7848, cost time=67 ms

2024-05-28 00:45:31,701 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=347, currTerm=347.

2024-05-28 00:45:31,700 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=347, currTerm=346.

2024-05-28 00:45:31,706 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=352, votedFor=0.0.0.0:0, cost time=69 ms

2024-05-28 00:45:31,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=343, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-28 00:45:31,712 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=347, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-28 00:45:31,715 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=343, votedFor=nacos2:7848, cost time=7 ms

2024-05-28 00:45:31,716 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=352, votedFor=nacos1:7848, cost time=8 ms

2024-05-28 00:45:31,719 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=343, currTerm=343.

2024-05-28 00:45:31,721 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,717 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,719 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=347, votedFor=nacos1:7848, cost time=6 ms

2024-05-28 00:45:31,721 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,729 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,727 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,727 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,733 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=347, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 00:45:31,738 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 00:45:31,737 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,846 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 00:45:31,874 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,864 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 00:45:31,894 INFO onLeaderStart: term=347.

2024-05-28 00:55:15,687 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_331.

2024-05-28 00:55:15,687 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_340.

2024-05-28 00:55:15,689 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_340.

2024-05-28 00:55:15,687 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_335.

2024-05-28 00:55:15,689 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_336.

2024-05-28 00:55:15,689 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_331.

2024-05-28 00:55:15,690 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_335.

2024-05-28 00:55:15,690 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_336.

2024-05-28 00:55:15,692 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_337.

2024-05-28 00:55:15,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_328.

2024-05-28 00:55:15,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_332.

2024-05-28 00:55:15,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_332.

2024-05-28 00:55:15,694 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 336 to 338, cost 0 ms.

2024-05-28 00:55:15,696 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 327 to 329, cost 0 ms.

2024-05-28 00:55:15,697 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 330 to 333, cost 1 ms.

2024-05-28 00:55:15,697 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 331 to 333, cost 0 ms.

2024-05-28 01:12:19,260 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=347, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:12:20,028 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:12:20,287 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=336, lastLogIncluded=0, lastLogIndex=336, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=218, type=Follower] is going to quit

2024-05-28 01:12:20,288 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:12:20,289 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=336, lastLogIncluded=0, lastLogIndex=336, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=217, type=Follower] is going to quit

2024-05-28 01:12:20,304 INFO Node <naming_persistent_service/nacos3:7848> term 352 start preVote.

2024-05-28 01:12:20,305 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:12:19,261 INFO Node <naming_instance_metadata/nacos3:7848> term 343 start preVote.

2024-05-28 01:12:20,528 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=353, currTerm=352, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:12:20,532 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=353, currTerm=352, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:12:20,539 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=348, currTerm=347, granted=true, requestLastLogId=LogId [index=336, term=347], lastLogId=LogId [index=336, term=347].

2024-05-28 01:12:20,543 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=348, currTerm=347, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:12:20,545 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=348, currTerm=347, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:12:20,556 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=343, granted=true.

2024-05-28 01:12:20,558 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=343.

2024-05-28 01:12:20,559 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:12:20,572 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=352, granted=false.

2024-05-28 01:12:20,579 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=352, granted=true.

2024-05-28 01:12:20,579 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=352.

2024-05-28 01:12:20,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:12:20,580 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=344, votedFor=nacos3:7848, cost time=19 ms

2024-05-28 01:12:20,583 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=353, votedFor=nacos3:7848, cost time=4 ms

2024-05-28 01:12:20,583 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=344, currTerm=344, granted=true, requestLastLogId=LogId [index=335, term=343], lastLogId=LogId [index=335, term=343].

2024-05-28 01:12:20,586 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=344, currTerm=344, granted=true, requestLastLogId=LogId [index=335, term=343], lastLogId=LogId [index=335, term=343].

2024-05-28 01:12:20,586 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:12:20,586 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=348, currTerm=347.

2024-05-28 01:12:20,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=348, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-28 01:12:20,603 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=348, currTerm=347.

2024-05-28 01:12:20,604 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=348, votedFor=nacos2:7848, cost time=7 ms

2024-05-28 01:12:20,605 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=347, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 01:12:20,605 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=348, currTerm=348, granted=true, requestLastLogId=LogId [index=336, term=347], lastLogId=LogId [index=336, term=347].

2024-05-28 01:12:20,605 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=344, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:12:20,608 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:12:20,607 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:12:20,607 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:12:20,613 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=348, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-28 01:12:20,610 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:12:20,619 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=353, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:12:20,622 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:12:20,622 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:12:20,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=348, votedFor=nacos2:7848, cost time=11 ms

2024-05-28 01:12:20,626 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:12:20,632 INFO onLeaderStart: term=344.

2024-05-28 01:12:20,642 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:12:20,660 INFO onLeaderStart: term=353.

2024-05-28 01:13:03,285 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=353, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:13:03,287 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=224, type=Follower] is going to quit

2024-05-28 01:13:03,486 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=225, type=Follower] is going to quit

2024-05-28 01:13:03,542 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=341, term=353], lastLogId=LogId [index=341, term=353].

2024-05-28 01:13:03,285 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=344, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:13:03,285 INFO Node <naming_service_metadata/nacos3:7848> term 348 start preVote.

2024-05-28 01:13:03,286 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:13:03,286 INFO Node <naming_persistent_service_v2/nacos3:7848> term 348 start preVote.

2024-05-28 01:13:03,287 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:13:03,287 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:13:03,532 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499770260s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-28 01:13:03,548 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499801936s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-28 01:13:03,568 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:13:03,568 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=336, lastLogIncluded=0, lastLogIndex=336, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=236, type=Follower] is going to quit

2024-05-28 01:13:03,570 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=336, lastLogIncluded=0, lastLogIndex=336, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=237, type=Follower] is going to quit

2024-05-28 01:13:03,666 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=345, currTerm=344, granted=true, requestLastLogId=LogId [index=336, term=344], lastLogId=LogId [index=336, term=344].

2024-05-28 01:13:03,669 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,582 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=341, term=353], lastLogId=LogId [index=341, term=353].

2024-05-28 01:13:03,585 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=349, currTerm=348, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:13:03,603 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=349, currTerm=348, granted=true, requestLastLogId=LogId [index=332, term=348], lastLogId=LogId [index=332, term=348].

2024-05-28 01:13:03,680 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=341, term=353], lastLogId=LogId [index=341, term=353].

2024-05-28 01:13:03,681 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=349, currTerm=348, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:13:03,688 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=348, granted=true.

2024-05-28 01:13:03,699 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=348.

2024-05-28 01:13:03,700 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=348, granted=true.

2024-05-28 01:13:03,701 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:13:03,702 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=348.

2024-05-28 01:13:03,703 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:13:03,708 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=354, currTerm=353.

2024-05-28 01:13:03,708 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=345, currTerm=344, granted=true, requestLastLogId=LogId [index=336, term=344], lastLogId=LogId [index=336, term=344].

2024-05-28 01:13:03,729 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=349, votedFor=nacos3:7848, cost time=25 ms

2024-05-28 01:13:03,731 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=349, votedFor=nacos3:7848, cost time=28 ms

2024-05-28 01:13:03,748 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=345, currTerm=344, granted=true, requestLastLogId=LogId [index=336, term=344], lastLogId=LogId [index=336, term=344].

2024-05-28 01:13:03,748 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:13:03,750 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:13:03,751 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=349, currTerm=349.

2024-05-28 01:13:03,751 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=345, currTerm=344.

2024-05-28 01:13:03,756 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=354, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-28 01:13:03,760 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=354, currTerm=354.

2024-05-28 01:13:03,765 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=345, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-28 01:13:03,768 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,769 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,777 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=354, votedFor=nacos2:7848, cost time=17 ms

2024-05-28 01:13:03,778 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=349, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:13:03,786 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:13:03,784 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=349, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:13:03,785 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,784 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,784 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:03,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=345, votedFor=nacos2:7848, cost time=8 ms

2024-05-28 01:13:03,789 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:13:03,792 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:13:03,805 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:13:03,815 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:13:03,821 INFO onLeaderStart: term=349.

2024-05-28 01:13:03,832 INFO onLeaderStart: term=349.

2024-05-28 01:13:41,986 INFO Node <naming_persistent_service/nacos3:7848> term 354 start preVote.

2024-05-28 01:13:42,010 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=345, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:13:42,005 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=354, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:13:41,995 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=349, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:13:41,995 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=349, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:13:42,755 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:13:42,005 INFO Node <naming_instance_metadata/nacos3:7848> term 345 start preVote.

2024-05-28 01:13:42,763 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=346, currTerm=345, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:13:42,754 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=338, lastLogIncluded=0, lastLogIndex=338, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=219, type=Follower] is going to quit

2024-05-28 01:13:42,768 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=345, granted=false.

2024-05-28 01:13:42,754 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:13:42,755 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=333, lastLogIncluded=0, lastLogIndex=333, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=186, type=Follower] is going to quit

2024-05-28 01:13:42,771 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=333, lastLogIncluded=0, lastLogIndex=333, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=185, type=Follower] is going to quit

2024-05-28 01:13:42,763 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=355, currTerm=354, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:13:42,768 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=338, lastLogIncluded=0, lastLogIndex=338, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=220, type=Follower] is going to quit

2024-05-28 01:13:42,774 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=345, granted=true.

2024-05-28 01:13:42,775 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=345.

2024-05-28 01:13:42,773 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=333, term=349], lastLogId=LogId [index=333, term=349].

2024-05-28 01:13:42,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=345, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:13:42,773 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=354, granted=false.

2024-05-28 01:13:42,790 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=350, currTerm=349.

2024-05-28 01:13:42,774 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:42,775 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=338, term=349], lastLogId=LogId [index=338, term=349].

2024-05-28 01:13:42,826 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=354, granted=true.

2024-05-28 01:13:42,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=346, votedFor=nacos3:7848, cost time=49 ms

2024-05-28 01:13:42,829 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=338, term=349], lastLogId=LogId [index=338, term=349].

2024-05-28 01:13:42,830 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=354.

2024-05-28 01:13:42,831 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=346, currTerm=346.

2024-05-28 01:13:42,834 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=354, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:13:42,834 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=350, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-28 01:13:42,836 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=355, currTerm=355.

2024-05-28 01:13:42,836 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=350, currTerm=349.

2024-05-28 01:13:42,837 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:42,861 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=350, votedFor=nacos2:7848, cost time=24 ms

2024-05-28 01:13:42,861 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:42,862 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=350, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-28 01:13:42,862 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=355, votedFor=nacos3:7848, cost time=20 ms

2024-05-28 01:13:42,864 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:13:42,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=350, votedFor=nacos1:7848, cost time=7 ms

2024-05-28 01:13:42,879 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-28 01:13:42,915 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-28 01:14:30,928 INFO Node <naming_service_metadata/nacos3:7848> term 350 start preVote.

2024-05-28 01:14:30,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:14:30,928 INFO Node <naming_instance_metadata/nacos3:7848> term 346 start preVote.

2024-05-28 01:14:30,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=355, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:14:30,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:14:30,928 INFO Node <naming_persistent_service/nacos3:7848> term 355 start preVote.

2024-05-28 01:14:30,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:14:30,928 INFO Node <naming_persistent_service_v2/nacos3:7848> term 350 start preVote.

2024-05-28 01:14:31,736 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=350, granted=true.

2024-05-28 01:14:31,758 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=347, currTerm=346, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:14:31,764 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=350.

2024-05-28 01:14:31,763 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=351, currTerm=350, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:14:31,770 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=356, currTerm=355, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:14:31,772 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:14:31,793 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=346, granted=true.

2024-05-28 01:14:31,801 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=346.

2024-05-28 01:14:31,813 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:14:31,815 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:14:31,795 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=355, granted=true.

2024-05-28 01:14:31,801 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=351, votedFor=nacos3:7848, cost time=23 ms

2024-05-28 01:14:31,835 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:14:31,809 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=350, granted=true.

2024-05-28 01:14:31,841 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=350.

2024-05-28 01:14:31,825 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=355.

2024-05-28 01:14:31,847 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=355, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:14:31,843 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:14:31,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=347, votedFor=nacos3:7848, cost time=27 ms

2024-05-28 01:14:31,941 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=351, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:14:31,943 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:14:31,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=356, votedFor=nacos3:7848, cost time=96 ms

2024-05-28 01:14:31,945 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:14:31,943 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:14:31,944 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=351, votedFor=nacos3:7848, cost time=99 ms

2024-05-28 01:14:31,947 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=351, currTerm=351.

2024-05-28 01:14:31,949 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:14:31,952 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:14:31,953 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=347, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:14:31,953 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:14:31,956 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:14:31,956 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=351, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:14:31,959 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:14:31,959 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=356, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:14:31,961 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:14:31,963 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:14:31,963 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:14:31,965 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:14:31,968 INFO onLeaderStart: term=347.

2024-05-28 01:14:31,970 INFO onLeaderStart: term=351.

2024-05-28 01:14:31,971 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:14:31,973 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:14:31,997 INFO onLeaderStart: term=356.

2024-05-28 01:14:31,999 INFO onLeaderStart: term=351.

2024-05-28 01:30:17,334 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=351, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:30:17,334 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=347, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:30:17,334 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=356, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:30:17,333 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=351, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:30:17,385 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=335, lastLogIncluded=0, lastLogIndex=335, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=187, type=Follower] is going to quit

2024-05-28 01:30:17,331 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.495377925s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-28 01:30:17,173 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499826007s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-28 01:30:17,173 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499789697s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-28 01:30:17,358 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499500922s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_service_metadata

2024-05-28 01:30:17,365 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:30:17,367 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:30:17,386 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:30:17,387 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:30:17,392 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=339, lastLogIncluded=0, lastLogIndex=339, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=238, type=Follower] is going to quit

2024-05-28 01:30:17,553 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=339, lastLogIncluded=0, lastLogIndex=339, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=239, type=Follower] is going to quit

2024-05-28 01:30:17,403 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=335, lastLogIncluded=0, lastLogIndex=335, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=188, type=Follower] is going to quit

2024-05-28 01:30:17,556 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=348, currTerm=347, granted=true, requestLastLogId=LogId [index=339, term=347], lastLogId=LogId [index=339, term=347].

2024-05-28 01:30:17,462 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=344, lastLogIncluded=0, lastLogIndex=344, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=226, type=Follower] is going to quit

2024-05-28 01:30:17,558 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=344, lastLogIncluded=0, lastLogIndex=344, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=227, type=Follower] is going to quit

2024-05-28 01:30:17,517 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=340, lastLogIncluded=0, lastLogIndex=340, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=222, type=Follower] is going to quit

2024-05-28 01:30:17,562 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=340, lastLogIncluded=0, lastLogIndex=340, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=223, type=Follower] is going to quit

2024-05-28 01:30:17,558 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=335, term=351], lastLogId=LogId [index=335, term=351].

2024-05-28 01:30:17,558 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=348, currTerm=347, granted=true, requestLastLogId=LogId [index=339, term=347], lastLogId=LogId [index=339, term=347].

2024-05-28 01:30:17,559 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=357, currTerm=356, granted=true, requestLastLogId=LogId [index=344, term=356], lastLogId=LogId [index=344, term=356].

2024-05-28 01:30:17,571 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_339.

2024-05-28 01:30:17,576 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_339.

2024-05-28 01:30:17,573 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_344.

2024-05-28 01:30:17,576 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_344.

2024-05-28 01:30:17,574 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=335, term=351], lastLogId=LogId [index=335, term=351].

2024-05-28 01:30:17,578 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,578 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,578 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=357, currTerm=356, granted=true, requestLastLogId=LogId [index=344, term=356], lastLogId=LogId [index=344, term=356].

2024-05-28 01:30:17,587 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=340, term=351], lastLogId=LogId [index=340, term=351].

2024-05-28 01:30:17,588 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=340, term=351], lastLogId=LogId [index=340, term=351].

2024-05-28 01:30:17,579 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_335.

2024-05-28 01:30:17,581 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_340.

2024-05-28 01:30:17,593 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=357, currTerm=356.

2024-05-28 01:30:17,583 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=348, currTerm=347.

2024-05-28 01:30:17,583 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_335.

2024-05-28 01:30:17,594 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=352, currTerm=351.

2024-05-28 01:30:17,600 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 333 to 336, cost 4 ms.

2024-05-28 01:30:17,602 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=340, term=351], lastLogId=LogId [index=340, term=351].

2024-05-28 01:30:17,606 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 338 to 341, cost 0 ms.

2024-05-28 01:30:17,608 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_335.

2024-05-28 01:30:17,611 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=352, currTerm=351.

2024-05-28 01:30:17,614 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_340.

2024-05-28 01:30:17,616 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_340.

2024-05-28 01:30:17,616 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=348, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-28 01:30:17,616 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=357, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-28 01:30:17,620 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=352, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-28 01:30:17,621 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_331.

2024-05-28 01:30:17,622 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_336.

2024-05-28 01:30:17,624 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=352, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-28 01:30:17,624 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=352, currTerm=352.

2024-05-28 01:30:17,625 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=357, votedFor=nacos2:7848, cost time=8 ms

2024-05-28 01:30:17,628 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=357, currTerm=357.

2024-05-28 01:30:17,627 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=348, votedFor=nacos2:7848, cost time=8 ms

2024-05-28 01:30:17,628 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 333 to 337, cost 1 ms.

2024-05-28 01:30:17,629 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,629 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,629 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 329 to 332, cost 1 ms.

2024-05-28 01:30:17,639 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=352, votedFor=nacos2:7848, cost time=13 ms

2024-05-28 01:30:17,629 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=348, currTerm=348.

2024-05-28 01:30:17,630 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=352, votedFor=nacos2:7848, cost time=8 ms

2024-05-28 01:30:17,657 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=352, currTerm=352.

2024-05-28 01:30:17,658 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,640 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,680 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,650 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,659 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:17,671 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:30:59,356 INFO Node <naming_persistent_service/nacos3:7848> term 357 start preVote.

2024-05-28 01:30:59,356 INFO Node <naming_service_metadata/nacos3:7848> term 352 start preVote.

2024-05-28 01:30:59,378 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:30:59,378 INFO Node <naming_persistent_service_v2/nacos3:7848> term 352 start preVote.

2024-05-28 01:30:59,379 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:30:59,415 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=357, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:30:59,658 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=352, granted=true.

2024-05-28 01:30:59,662 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=352.

2024-05-28 01:30:59,662 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=352, granted=true.

2024-05-28 01:30:59,664 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:30:59,665 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=352.

2024-05-28 01:30:59,667 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:30:59,667 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=357, granted=true.

2024-05-28 01:30:59,669 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=357.

2024-05-28 01:30:59,682 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=353, votedFor=nacos3:7848, cost time=17 ms

2024-05-28 01:30:59,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=358, votedFor=nacos3:7848, cost time=13 ms

2024-05-28 01:30:59,684 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=357, currTerm=358.

2024-05-28 01:30:59,685 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=353, votedFor=nacos3:7848, cost time=17 ms

2024-05-28 01:30:59,686 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:30:59,688 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=358, currTerm=358, granted=true, requestLastLogId=LogId [index=345, term=357], lastLogId=LogId [index=345, term=357].

2024-05-28 01:30:59,689 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=353, currTerm=353, granted=true, requestLastLogId=LogId [index=341, term=352], lastLogId=LogId [index=341, term=352].

2024-05-28 01:30:59,691 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=353, currTerm=353, granted=true, requestLastLogId=LogId [index=341, term=352], lastLogId=LogId [index=341, term=352].

2024-05-28 01:30:59,689 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=353, currTerm=353, granted=true, requestLastLogId=LogId [index=336, term=352], lastLogId=LogId [index=336, term=352].

2024-05-28 01:30:59,694 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:30:59,689 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=349, currTerm=348, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:30:59,690 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:30:59,702 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=358, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:30:59,702 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=353, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:30:59,706 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:30:59,707 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:30:59,710 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:30:59,711 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=353, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:30:59,716 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:30:59,717 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:30:59,716 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:30:59,730 INFO onLeaderStart: term=353.

2024-05-28 01:30:59,733 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:30:59,738 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=358, currTerm=358.

2024-05-28 01:30:59,740 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:30:59,741 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:30:59,757 INFO onLeaderStart: term=358.

2024-05-28 01:30:59,763 INFO onLeaderStart: term=353.

2024-05-28 01:32:04,546 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=353, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:32:04,447 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:32:04,446 INFO Node <naming_instance_metadata/nacos3:7848> term 348 start preVote.

2024-05-28 01:32:04,621 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499767812s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-28 01:32:04,622 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=358, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:32:04,622 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=353, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:32:05,268 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:32:05,213 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:32:05,213 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=342, lastLogIncluded=0, lastLogIndex=342, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=225, type=Follower] is going to quit

2024-05-28 01:32:05,258 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=346, lastLogIncluded=0, lastLogIndex=346, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=229, type=Follower] is going to quit

2024-05-28 01:32:05,258 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:32:05,268 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=337, lastLogIncluded=0, lastLogIndex=337, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=189, type=Follower] is going to quit

2024-05-28 01:32:05,367 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=342, lastLogIncluded=0, lastLogIndex=342, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=226, type=Follower] is going to quit

2024-05-28 01:32:05,442 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=342, term=353], lastLogId=LogId [index=342, term=353].

2024-05-28 01:32:05,392 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=346, lastLogIncluded=0, lastLogIndex=346, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=230, type=Follower] is going to quit

2024-05-28 01:32:05,436 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=337, lastLogIncluded=0, lastLogIndex=337, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=190, type=Follower] is going to quit

2024-05-28 01:32:05,541 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=359, currTerm=358, granted=true, requestLastLogId=LogId [index=346, term=358], lastLogId=LogId [index=346, term=358].

2024-05-28 01:32:05,446 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=348, granted=true.

2024-05-28 01:32:05,540 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,541 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,542 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,542 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,547 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=337, term=353], lastLogId=LogId [index=337, term=353].

2024-05-28 01:32:05,564 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=348.

2024-05-28 01:32:05,572 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=348, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:32:05,574 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,585 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,592 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=349, votedFor=nacos3:7848, cost time=19 ms

2024-05-28 01:32:05,602 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:32:05,586 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=342, term=353], lastLogId=LogId [index=342, term=353].

2024-05-28 01:32:05,629 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=349, currTerm=349, granted=true, requestLastLogId=LogId [index=340, term=348], lastLogId=LogId [index=340, term=348].

2024-05-28 01:32:05,630 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=342, term=353], lastLogId=LogId [index=342, term=353].

2024-05-28 01:32:05,634 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,630 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,630 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,635 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,639 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=354, currTerm=353, granted=true, requestLastLogId=LogId [index=337, term=353], lastLogId=LogId [index=337, term=353].

2024-05-28 01:32:05,639 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=354, currTerm=353.

2024-05-28 01:32:05,649 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=349, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:32:05,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=354, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-28 01:32:05,654 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:32:05,655 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:32:05,664 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=354, currTerm=353.

2024-05-28 01:32:05,668 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,664 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,709 INFO onLeaderStart: term=349.

2024-05-28 01:32:05,715 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=354, votedFor=0.0.0.0:0, cost time=90 ms

2024-05-28 01:32:05,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=354, votedFor=nacos1:7848, cost time=100 ms

2024-05-28 01:32:05,765 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,774 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,773 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,773 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=354, currTerm=354.

2024-05-28 01:32:05,787 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=359, currTerm=358.

2024-05-28 01:32:05,773 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,803 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=354, votedFor=nacos1:7848, cost time=37 ms

2024-05-28 01:32:05,805 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=354, currTerm=354.

2024-05-28 01:32:05,809 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=359, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-28 01:32:05,813 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,816 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:32:05,818 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,819 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=359, votedFor=nacos2:7848, cost time=8 ms

2024-05-28 01:32:05,820 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,822 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,827 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:32:05,829 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:48:11,432 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=349, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:48:11,433 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=242, type=Follower] is going to quit

2024-05-28 01:48:11,434 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=241, type=Follower] is going to quit

2024-05-28 01:48:11,468 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=354, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:48:11,464 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:48:11,448 INFO Node <naming_service_metadata/nacos3:7848> term 354 start preVote.

2024-05-28 01:48:11,728 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=355, currTerm=354, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:48:11,773 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=360, currTerm=359, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:48:11,760 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=354, granted=true.

2024-05-28 01:48:11,777 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=354.

2024-05-28 01:48:11,760 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=341, term=349], lastLogId=LogId [index=341, term=349].

2024-05-28 01:48:11,779 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=355, currTerm=355, granted=true, requestLastLogId=LogId [index=343, term=354], lastLogId=LogId [index=343, term=354].

2024-05-28 01:48:11,774 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=355, currTerm=354.

2024-05-28 01:48:11,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=354, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 01:48:11,784 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=355, currTerm=355, granted=true, requestLastLogId=LogId [index=343, term=354], lastLogId=LogId [index=343, term=354].

2024-05-28 01:48:11,793 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=341, term=349], lastLogId=LogId [index=341, term=349].

2024-05-28 01:48:11,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=355, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-28 01:48:11,798 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=350, currTerm=349, granted=true, requestLastLogId=LogId [index=341, term=349], lastLogId=LogId [index=341, term=349].

2024-05-28 01:48:11,806 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=350, currTerm=349.

2024-05-28 01:48:11,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=355, votedFor=nacos2:7848, cost time=7 ms

2024-05-28 01:48:11,829 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=360, currTerm=359.

2024-05-28 01:48:11,829 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=359, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 01:48:11,830 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=355, votedFor=nacos3:7848, cost time=25 ms

2024-05-28 01:48:11,831 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=350, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-28 01:48:11,832 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=350, currTerm=350.

2024-05-28 01:48:11,832 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:48:11,833 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:48:11,843 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=360, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-28 01:48:11,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=350, votedFor=nacos2:7848, cost time=12 ms

2024-05-28 01:48:11,849 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:48:11,850 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=355, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:48:11,851 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:48:11,853 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:48:11,853 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=360, votedFor=nacos1:7848, cost time=10 ms

2024-05-28 01:48:11,874 INFO onLeaderStart: term=355.

2024-05-28 01:48:11,876 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:48:53,757 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=355, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:48:54,625 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=344, lastLogIncluded=0, lastLogIndex=344, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=227, type=Follower] is going to quit

2024-05-28 01:48:54,576 INFO Node <naming_persistent_service_v2/nacos3:7848> term 355 start preVote.

2024-05-28 01:48:54,709 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=356, currTerm=355, because the leader nacos2:7848's lease is still valid.

2024-05-28 01:48:54,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=355, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:48:54,579 INFO Node <naming_persistent_service/nacos3:7848> term 360 start preVote.

2024-05-28 01:48:54,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=360, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:48:54,625 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:48:54,719 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=361, currTerm=360, granted=true, requestLastLogId=LogId [index=348, term=360], lastLogId=LogId [index=348, term=360].

2024-05-28 01:48:54,702 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=344, lastLogIncluded=0, lastLogIndex=344, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=228, type=Follower] is going to quit

2024-05-28 01:48:54,727 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=356, currTerm=355, granted=true, requestLastLogId=LogId [index=344, term=355], lastLogId=LogId [index=344, term=355].

2024-05-28 01:48:54,787 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=355, granted=false.

2024-05-28 01:48:54,789 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=360, granted=true.

2024-05-28 01:48:54,789 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=360.

2024-05-28 01:48:54,791 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=356, currTerm=355.

2024-05-28 01:48:54,802 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=356, currTerm=355.

2024-05-28 01:48:54,803 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=355, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 01:48:54,822 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=361, votedFor=nacos3:7848, cost time=30 ms

2024-05-28 01:48:54,822 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=356, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-28 01:48:54,830 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=356, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-28 01:48:54,831 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=355, currTerm=356.

2024-05-28 01:48:54,835 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=356, votedFor=nacos1:7848, cost time=12 ms

2024-05-28 01:48:54,837 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=356, currTerm=356, granted=true, requestLastLogId=LogId [index=344, term=355], lastLogId=LogId [index=344, term=355].

2024-05-28 01:48:54,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=356, votedFor=nacos1:7848, cost time=5 ms

2024-05-28 01:48:54,840 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=356, currTerm=356, granted=true, requestLastLogId=LogId [index=344, term=355], lastLogId=LogId [index=344, term=355].

2024-05-28 01:48:54,841 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=361, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:48:54,843 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:48:54,844 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:48:54,861 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=361, currTerm=361.

2024-05-28 01:48:54,871 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:48:54,871 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-28 01:48:54,875 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:48:54,877 INFO onLeaderStart: term=361.

2024-05-28 01:48:54,879 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:00,340 INFO Node <naming_instance_metadata/nacos3:7848> term 350 start preVote.

2024-05-28 01:49:00,340 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=350, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 01:49:00,343 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=350, granted=true.

2024-05-28 01:49:00,343 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=350.

2024-05-28 01:49:00,344 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 01:49:00,352 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=351, votedFor=nacos3:7848, cost time=7 ms

2024-05-28 01:49:00,360 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=351, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:49:00,361 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:49:00,362 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:49:00,362 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 01:49:00,367 INFO onLeaderStart: term=351.

2024-05-28 01:49:44,675 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499732533s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-28 01:49:44,675 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499785616s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-28 01:49:44,650 INFO Node <naming_persistent_service_v2/nacos3:7848> term 356 start preVote.

2024-05-28 01:49:44,670 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=361, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:49:44,670 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=351, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 01:49:44,684 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=356, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 01:49:45,456 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:49:45,456 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=349, lastLogIncluded=0, lastLogIndex=349, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=232, type=Follower] is going to quit

2024-05-28 01:49:45,540 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=349, lastLogIncluded=0, lastLogIndex=349, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=233, type=Follower] is going to quit

2024-05-28 01:49:45,458 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=343, lastLogIncluded=0, lastLogIndex=343, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=243, type=Follower] is going to quit

2024-05-28 01:49:45,608 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=357, currTerm=356, because the leader nacos1:7848's lease is still valid.

2024-05-28 01:49:45,458 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 01:49:45,559 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=362, currTerm=361, granted=true, requestLastLogId=LogId [index=349, term=361], lastLogId=LogId [index=349, term=361].

2024-05-28 01:49:45,609 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=343, lastLogIncluded=0, lastLogIndex=343, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=244, type=Follower] is going to quit

2024-05-28 01:49:45,609 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=356, granted=false.

2024-05-28 01:49:45,611 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=352, currTerm=351, granted=true, requestLastLogId=LogId [index=343, term=351], lastLogId=LogId [index=343, term=351].

2024-05-28 01:49:45,620 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,638 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,641 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,659 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,643 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=362, currTerm=361.

2024-05-28 01:49:45,646 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=356, granted=true.

2024-05-28 01:49:45,665 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=356.

2024-05-28 01:49:45,670 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=356, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 01:49:45,705 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=352, currTerm=351.

2024-05-28 01:49:45,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=362, votedFor=0.0.0.0:0, cost time=76 ms

2024-05-28 01:49:45,746 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=357, votedFor=nacos3:7848, cost time=72 ms

2024-05-28 01:49:45,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=352, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-28 01:49:45,756 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=362, votedFor=nacos1:7848, cost time=10 ms

2024-05-28 01:49:45,770 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=357, currTerm=357.

2024-05-28 01:49:45,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=352, votedFor=nacos2:7848, cost time=19 ms

2024-05-28 01:49:45,813 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,817 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=357, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 01:49:45,819 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-28 01:49:45,822 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-28 01:49:45,818 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 01:49:45,864 INFO onLeaderStart: term=357.

2024-05-28 01:49:50,886 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=357, currTerm=356, granted=true, requestLastLogId=LogId [index=345, term=356], lastLogId=LogId [index=345, term=356].

2024-05-28 01:49:50,889 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=357, currTerm=356.

2024-05-28 01:49:50,890 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=356, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-28 01:49:50,897 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=357, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-28 01:49:50,899 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=357, votedFor=nacos1:7848, cost time=2 ms

2024-05-28 02:05:29,351 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=352, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 02:05:30,416 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=357, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 02:05:30,414 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=362, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 02:05:30,419 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 02:05:30,412 INFO Node <naming_persistent_service/nacos3:7848> term 362 start preVote.

2024-05-28 02:05:30,411 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=357, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 02:05:29,399 INFO Node <naming_service_metadata/nacos3:7848> term 357 start preVote.

2024-05-28 02:05:30,417 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=193, type=Follower] is going to quit

2024-05-28 02:05:29,352 INFO Node <naming_instance_metadata/nacos3:7848> term 352 start preVote.

2024-05-28 02:05:30,421 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499790288s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-28 02:05:30,425 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=341, lastLogIncluded=0, lastLogIndex=341, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=194, type=Follower] is going to quit

2024-05-28 02:05:30,426 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=358, currTerm=357, granted=true, requestLastLogId=LogId [index=341, term=357], lastLogId=LogId [index=341, term=357].

2024-05-28 02:05:30,427 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=358, currTerm=357, granted=true, requestLastLogId=LogId [index=341, term=357], lastLogId=LogId [index=341, term=357].

2024-05-28 02:05:30,426 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=353, currTerm=352, granted=true, requestLastLogId=LogId [index=344, term=352], lastLogId=LogId [index=344, term=352].

2024-05-28 02:05:30,428 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=358, currTerm=357, granted=true, requestLastLogId=LogId [index=341, term=357], lastLogId=LogId [index=341, term=357].

2024-05-28 02:05:30,430 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=353, currTerm=352, granted=true, requestLastLogId=LogId [index=344, term=352], lastLogId=LogId [index=344, term=352].

2024-05-28 02:05:30,433 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_341.

2024-05-28 02:05:30,435 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_341.

2024-05-28 02:05:30,498 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=353, currTerm=352.

2024-05-28 02:05:30,476 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=363, currTerm=362, because the leader nacos1:7848's lease is still valid.

2024-05-28 02:05:30,499 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=358, currTerm=357, granted=true, requestLastLogId=LogId [index=346, term=357], lastLogId=LogId [index=346, term=357].

2024-05-28 02:05:30,500 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=358, currTerm=357.

2024-05-28 02:05:30,510 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_344.

2024-05-28 02:05:30,515 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=353, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-28 02:05:30,510 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_335.

2024-05-28 02:05:30,513 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=358, currTerm=357, because the leader nacos1:7848's lease is still valid.

2024-05-28 02:05:30,515 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_344.

2024-05-28 02:05:30,517 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=362, granted=true.

2024-05-28 02:05:30,552 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=362.

2024-05-28 02:05:30,546 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=358, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-28 02:05:30,548 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 332 to 336, cost 0 ms.

2024-05-28 02:05:30,549 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_339.

2024-05-28 02:05:30,554 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=353, votedFor=nacos1:7848, cost time=36 ms

2024-05-28 02:05:30,581 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=352, currTerm=353.

2024-05-28 02:05:30,559 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_350.

2024-05-28 02:05:30,586 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_350.

2024-05-28 02:05:30,568 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_346.

2024-05-28 02:05:30,576 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=357, granted=true.

2024-05-28 02:05:30,589 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=357.

2024-05-28 02:05:30,578 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=358, currTerm=358.

2024-05-28 02:05:30,579 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=363, votedFor=nacos3:7848, cost time=7 ms

2024-05-28 02:05:30,592 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_344.

2024-05-28 02:05:30,592 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=363, currTerm=363.

2024-05-28 02:05:30,586 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 336 to 340, cost 0 ms.

2024-05-28 02:05:30,588 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_346.

2024-05-28 02:05:30,589 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=352, currTerm=353.

2024-05-28 02:05:30,589 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=357, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 02:05:30,595 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=362, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 02:05:30,595 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 02:05:30,600 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=358, votedFor=nacos1:7848, cost time=10 ms

2024-05-28 02:05:30,600 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 341 to 345, cost 0 ms.

2024-05-28 02:05:30,600 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_340.

2024-05-28 02:05:30,603 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=358, votedFor=nacos3:7848, cost time=13 ms

2024-05-28 02:05:30,619 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:05:30,627 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:05:30,637 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=358, currTerm=358.

2024-05-28 02:05:30,639 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 02:05:30,640 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 337 to 341, cost 1 ms.

2024-05-28 02:05:30,641 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=358, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 02:05:30,643 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 02:05:30,644 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 02:05:30,647 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 02:05:30,654 INFO onLeaderStart: term=358.

2024-05-28 02:06:19,975 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=358, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-28 02:06:20,000 INFO Node <naming_persistent_service/nacos3:7848> term 363 start preVote.

2024-05-28 02:06:20,000 INFO Node <naming_persistent_service_v2/nacos3:7848> term 358 start preVote.

2024-05-28 02:06:20,001 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=358, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 02:06:20,001 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=363, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-28 02:06:20,001 INFO Node <naming_instance_metadata/nacos3:7848> term 353 start preVote.

2024-05-28 02:06:20,001 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=353, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-28 02:06:20,724 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=347, lastLogIncluded=0, lastLogIndex=347, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=229, type=Follower] is going to quit

2024-05-28 02:06:20,749 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=347, lastLogIncluded=0, lastLogIndex=347, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=230, type=Follower] is going to quit

2024-05-28 02:06:20,731 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-28 02:06:20,750 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=363, granted=true.

2024-05-28 02:06:20,752 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=363.

2024-05-28 02:06:20,752 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:06:20,758 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=353, granted=true.

2024-05-28 02:06:20,760 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=353.

2024-05-28 02:06:20,763 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=353, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 02:06:20,766 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:06:20,789 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=359, currTerm=358, granted=true, requestLastLogId=LogId [index=347, term=358], lastLogId=LogId [index=347, term=358].

2024-05-28 02:06:20,832 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=359, currTerm=358, granted=true, requestLastLogId=LogId [index=347, term=358], lastLogId=LogId [index=347, term=358].

2024-05-28 02:06:20,921 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=364, votedFor=nacos3:7848, cost time=167 ms

2024-05-28 02:06:20,924 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=359, currTerm=358, because the leader nacos1:7848's lease is still valid.

2024-05-28 02:06:20,942 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=358, granted=true.

2024-05-28 02:06:20,945 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=358.

2024-05-28 02:06:20,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=354, votedFor=nacos3:7848, cost time=159 ms

2024-05-28 02:06:20,940 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=364, currTerm=364, granted=true, requestLastLogId=LogId [index=351, term=363], lastLogId=LogId [index=351, term=363].

2024-05-28 02:06:20,949 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=364, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 02:06:20,950 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-28 02:06:20,941 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=359, currTerm=358.

2024-05-28 02:06:20,947 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=358, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-28 02:06:20,947 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 02:06:20,952 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-28 02:06:20,961 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=354, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-28 02:06:20,966 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-28 02:06:20,974 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=359, votedFor=nacos3:7848, cost time=15 ms

2024-05-28 02:06:20,974 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-28 02:06:20,974 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=359, currTerm=359, granted=true, requestLastLogId=LogId [index=342, term=358], lastLogId=LogId [index=342, term=358].

2024-05-28 02:06:20,976 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=359, currTerm=359.

2024-05-28 02:06:20,980 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=359, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-28 02:06:20,981 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=354, currTerm=354, because the leader nacos3:7848's lease is still valid.

2024-05-28 02:06:20,983 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-28 02:06:20,991 INFO onLeaderStart: term=354.

2024-05-28 02:06:20,993 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=359, votedFor=nacos1:7848, cost time=12 ms

2024-05-28 02:06:20,995 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:06:20,998 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-28 02:06:21,012 INFO onLeaderStart: term=364.

2024-05-28 02:06:21,016 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 02:06:21,021 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-28 02:06:21,053 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-28 02:06:52,762 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499782702s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service

