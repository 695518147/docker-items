2024-05-26 00:04:11,972 INFO Node <naming_persistent_service/nacos3:7848> term 228 start preVote.

2024-05-26 00:04:12,003 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=222, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 00:04:12,002 INFO Node <naming_service_metadata/nacos3:7848> term 222 start preVote.

2024-05-26 00:04:12,002 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 00:04:12,610 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=225, currTerm=224, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,650 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=225, currTerm=224, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,649 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 00:04:12,648 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 00:04:12,644 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=229, currTerm=228, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,641 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=223, currTerm=222, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,668 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 00:04:12,681 INFO The channel nacos2:7848 has successfully established.

2024-05-26 00:04:12,683 INFO Peer nacos2:7848 is connected.

2024-05-26 00:04:12,700 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 00:04:12,703 INFO The channel nacos1:7848 has successfully established.

2024-05-26 00:04:12,701 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=222, granted=false.

2024-05-26 00:04:12,705 INFO Peer nacos1:7848 is connected.

2024-05-26 00:04:12,712 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=228, granted=false.

2024-05-26 00:04:12,740 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=223, currTerm=222.

2024-05-26 00:04:12,742 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=222, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 00:04:12,744 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=228, granted=true.

2024-05-26 00:04:12,748 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=228.

2024-05-26 00:04:12,750 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 00:04:12,750 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=223, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 00:04:12,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=229, votedFor=nacos3:7848, cost time=8 ms

2024-05-26 00:04:12,762 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=223, votedFor=nacos1:7848, cost time=9 ms

2024-05-26 00:04:12,768 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=222, currTerm=223.

2024-05-26 00:04:12,787 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=229, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 00:04:12,788 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 00:04:12,794 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 00:04:12,807 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 00:04:12,818 INFO onLeaderStart: term=229.

2024-05-26 00:10:11,806 INFO Node <naming_instance_metadata/nacos3:7848> term 220 start preVote.

2024-05-26 00:10:12,705 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=229, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 00:10:11,806 INFO Node <naming_persistent_service_v2/nacos3:7848> term 224 start preVote.

2024-05-26 00:10:12,910 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 00:10:12,911 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=160, type=Follower] is going to quit

2024-05-26 00:10:12,911 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=161, type=Follower] is going to quit

2024-05-26 00:10:12,654 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=220, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 00:10:11,806 INFO Node <naming_service_metadata/nacos3:7848> term 223 start preVote.

2024-05-26 00:10:11,806 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 00:10:11,806 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=223, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 00:10:12,945 INFO Node <naming_service_metadata/nacos3:7848> term 223 start preVote.

2024-05-26 00:10:12,959 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=224, currTerm=223, because the leader nacos1:7848's lease is still valid.

2024-05-26 00:10:13,063 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,105 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,119 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,142 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=221, currTerm=220, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:10:13,142 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,143 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=220, granted=true.

2024-05-26 00:10:13,145 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=220.

2024-05-26 00:10:13,146 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=220, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 00:10:13,157 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=221, votedFor=nacos3:7848, cost time=8 ms

2024-05-26 00:10:13,158 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,161 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,177 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=230, currTerm=229, granted=true, requestLastLogId=LogId [index=220, term=229], lastLogId=LogId [index=220, term=229].

2024-05-26 00:10:13,183 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=223, granted=true.

2024-05-26 00:10:13,184 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=223.

2024-05-26 00:10:13,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=223, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 00:10:13,185 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,186 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=230, currTerm=229.

2024-05-26 00:10:13,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=224, votedFor=nacos3:7848, cost time=7 ms

2024-05-26 00:10:13,195 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=224, granted=true.

2024-05-26 00:10:13,195 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=224.

2024-05-26 00:10:13,197 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 00:10:13,197 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,204 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,206 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=230, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 00:10:13,213 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=225, votedFor=nacos3:7848, cost time=13 ms

2024-05-26 00:10:13,214 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=230, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 00:10:13,216 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,261 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,271 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=224, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 00:10:13,273 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 00:10:13,272 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=225, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 00:10:13,275 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 00:10:13,276 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 00:10:13,275 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 00:10:13,286 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=221, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 00:10:13,287 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 00:10:13,288 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 00:10:13,293 INFO onLeaderStart: term=224.

2024-05-26 00:10:13,304 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 00:10:13,306 INFO onLeaderStart: term=225.

2024-05-26 00:10:13,308 INFO onLeaderStart: term=221.

2024-05-26 00:10:13,309 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 00:10:13,311 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 00:25:25,937 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 00:25:25,938 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 00:25:25,937 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 00:25:25,938 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 00:25:25,938 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 00:25:25,938 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 00:25:25,939 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_218.

2024-05-26 00:25:25,938 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 00:25:25,939 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 00:25:25,940 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_212.

2024-05-26 00:25:25,942 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_212.

2024-05-26 00:25:25,943 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_212.

2024-05-26 00:25:25,943 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:25:25,943 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 218 to 219, cost 1 ms.

2024-05-26 00:25:25,945 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:25:25,947 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:34:17,538 INFO Connection disconnected: /172.25.0.5:43476

2024-05-26 00:34:17,555 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 00:34:17,556 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 00:34:17,557 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 00:40:13,022 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:13,068 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 00:40:13,197 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:17,816 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 00:40:17,817 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 00:40:17,819 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 00:40:17,821 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 00:40:17,989 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 00:55:25,831 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 213 to 215, cost 0 ms.

2024-05-26 00:55:25,831 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 219 to 222, cost 0 ms.

2024-05-26 00:55:25,831 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 213 to 216, cost 0 ms.

2024-05-26 00:55:25,833 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 213 to 215, cost 1 ms.

2024-05-26 01:10:54,764 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=221, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:10:54,759 INFO Node <naming_persistent_service/nacos3:7848> term 230 start preVote.

2024-05-26 01:10:54,764 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=225, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:10:54,948 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=214, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=128, type=Follower] is going to quit

2024-05-26 01:10:54,763 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=224, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:10:54,951 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=215, lastLogIncluded=0, lastLogIndex=215, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=146, type=Follower] is going to quit

2024-05-26 01:10:54,951 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=215, lastLogIncluded=0, lastLogIndex=215, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=147, type=Follower] is going to quit

2024-05-26 01:10:54,758 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 01:10:54,936 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:10:54,936 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=214, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=160, type=Follower] is going to quit

2024-05-26 01:10:54,948 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=214, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=129, type=Follower] is going to quit

2024-05-26 01:10:54,948 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:10:54,951 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:10:54,952 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,035 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=214, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=161, type=Follower] is going to quit

2024-05-26 01:10:55,049 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,045 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,048 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,102 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 01:10:55,127 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:10:55,145 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:10:55,205 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:10:55,211 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:10:55,217 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:10:55,220 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:10:55,207 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,212 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 01:10:55,223 INFO The channel nacos2:7848 has successfully established.

2024-05-26 01:10:55,218 INFO Peer nacos1:7848 is connected.

2024-05-26 01:10:55,226 INFO Peer nacos2:7848 is connected.

2024-05-26 01:10:55,242 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=225, currTerm=224, granted=true, requestLastLogId=LogId [index=215, term=224], lastLogId=LogId [index=215, term=224].

2024-05-26 01:10:55,246 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=214, term=225], lastLogId=LogId [index=214, term=225].

2024-05-26 01:10:55,247 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=214, term=225], lastLogId=LogId [index=214, term=225].

2024-05-26 01:10:55,247 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=230, granted=true.

2024-05-26 01:10:55,250 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,251 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=214, term=225], lastLogId=LogId [index=214, term=225].

2024-05-26 01:10:55,251 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=230.

2024-05-26 01:10:55,254 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,255 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,257 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,257 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,259 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:10:55,261 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=225, currTerm=224.

2024-05-26 01:10:55,264 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=226, currTerm=225.

2024-05-26 01:10:55,265 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=222, currTerm=221, granted=true, requestLastLogId=LogId [index=214, term=221], lastLogId=LogId [index=214, term=221].

2024-05-26 01:10:55,266 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=222, currTerm=221, granted=true, requestLastLogId=LogId [index=214, term=221], lastLogId=LogId [index=214, term=221].

2024-05-26 01:10:55,277 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=222, currTerm=221.

2024-05-26 01:10:55,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=231, votedFor=nacos3:7848, cost time=22 ms

2024-05-26 01:10:55,282 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:10:55,283 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=231, currTerm=231, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=222, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=225, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-26 01:10:55,286 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=226, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-26 01:10:55,291 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=226, currTerm=226.

2024-05-26 01:10:55,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=222, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 01:10:55,293 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=225, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 01:10:55,301 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=231, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:10:55,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=226, votedFor=nacos2:7848, cost time=11 ms

2024-05-26 01:10:55,305 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,307 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,308 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,304 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 01:10:55,314 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:10:55,323 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:10:55,342 INFO onLeaderStart: term=231.

2024-05-26 01:26:55,153 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=231, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:26:55,215 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=163, type=Follower] is going to quit

2024-05-26 01:26:55,217 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=162, type=Follower] is going to quit

2024-05-26 01:26:55,221 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:26:55,224 INFO Node <naming_persistent_service_v2/nacos3:7848> term 226 start preVote.

2024-05-26 01:26:55,238 INFO Node <naming_service_metadata/nacos3:7848> term 225 start preVote.

2024-05-26 01:26:55,239 INFO Node <naming_instance_metadata/nacos3:7848> term 222 start preVote.

2024-05-26 01:26:55,290 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=232, currTerm=231, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 01:26:55,238 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:26:55,239 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=222, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:26:55,238 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=226, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 01:26:55,324 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:26:55,324 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:26:55,329 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:26:55,329 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,332 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,329 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:26:55,354 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=225, granted=false.

2024-05-26 01:26:55,356 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,371 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:26:55,377 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:26:55,366 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 01:26:55,373 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=222, granted=true.

2024-05-26 01:26:55,376 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,375 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=216, term=225], lastLogId=LogId [index=216, term=225].

2024-05-26 01:26:55,373 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 01:26:55,390 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=227, currTerm=226, because the leader nacos2:7848's lease is still valid.

2024-05-26 01:26:55,425 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=232, currTerm=231, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 01:26:55,426 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=225, granted=true.

2024-05-26 01:26:55,427 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=225.

2024-05-26 01:26:55,430 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 222 to 222, cost 0 ms.

2024-05-26 01:26:55,391 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=222.

2024-05-26 01:26:55,425 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 216 to 216, cost 0 ms.

2024-05-26 01:26:55,425 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 215 to 215, cost 0 ms.

2024-05-26 01:26:55,425 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 01:26:55,427 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=226, granted=false.

2024-05-26 01:26:55,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=222, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:26:55,451 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=226, votedFor=nacos3:7848, cost time=5 ms

2024-05-26 01:26:55,454 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=225, currTerm=226.

2024-05-26 01:26:55,453 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=227, currTerm=226, because the leader nacos2:7848's lease is still valid.

2024-05-26 01:26:55,457 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=227, currTerm=226, because the leader nacos2:7848's lease is still valid.

2024-05-26 01:26:55,456 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=223, votedFor=nacos3:7848, cost time=8 ms

2024-05-26 01:26:55,458 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:26:55,458 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 215 to 215, cost 0 ms.

2024-05-26 01:26:55,474 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=231.

2024-05-26 01:26:55,477 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=227, currTerm=226.

2024-05-26 01:26:55,477 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=226, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:26:55,484 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=223, currTerm=223, granted=true, requestLastLogId=LogId [index=215, term=222], lastLogId=LogId [index=215, term=222].

2024-05-26 01:26:55,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=232, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 01:26:55,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=227, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 01:26:55,502 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=226, currTerm=226.

2024-05-26 01:26:55,505 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=232, votedFor=nacos1:7848, cost time=15 ms

2024-05-26 01:26:55,505 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=227, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 01:26:55,506 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=232, currTerm=232.

2024-05-26 01:26:55,508 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,509 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=226, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:26:55,508 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=226, currTerm=227.

2024-05-26 01:26:55,510 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=223, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:26:55,513 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 01:26:55,516 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:26:55,511 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 01:26:55,521 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:26:55,524 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,531 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:26:55,531 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:26:55,540 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,542 INFO onLeaderStart: term=226.

2024-05-26 01:26:55,542 INFO onLeaderStart: term=223.

2024-05-26 01:43:23,221 INFO Node <naming_persistent_service/nacos3:7848> term 232 start preVote.

2024-05-26 01:43:23,161 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=226, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:43:23,160 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=223, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:43:24,205 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=227, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:43:24,197 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:43:24,204 INFO Node <naming_persistent_service_v2/nacos3:7848> term 227 start preVote.

2024-05-26 01:43:24,245 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:43:24,218 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=217, lastLogIncluded=0, lastLogIndex=217, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=149, type=Follower] is going to quit

2024-05-26 01:43:24,257 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=217, lastLogIncluded=0, lastLogIndex=217, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=150, type=Follower] is going to quit

2024-05-26 01:43:24,219 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:43:24,244 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=216, lastLogIncluded=0, lastLogIndex=216, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=162, type=Follower] is going to quit

2024-05-26 01:43:24,423 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=216, lastLogIncluded=0, lastLogIndex=216, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=163, type=Follower] is going to quit

2024-05-26 01:43:24,257 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=233, currTerm=232, because the leader nacos1:7848's lease is still valid.

2024-05-26 01:43:24,265 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=217, term=226], lastLogId=LogId [index=217, term=226].

2024-05-26 01:43:24,439 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=217, term=226], lastLogId=LogId [index=217, term=226].

2024-05-26 01:43:24,453 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:43:24,418 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=228, currTerm=227, because the leader nacos1:7848's lease is still valid.

2024-05-26 01:43:24,437 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=224, currTerm=223.

2024-05-26 01:43:24,438 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=233, currTerm=232.

2024-05-26 01:43:24,457 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:43:24,458 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=227, currTerm=226.

2024-05-26 01:43:24,458 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=227, status=Status[ENEWLEADER<10011>: Raft node receives message from new leader with higher term.]].

2024-05-26 01:43:24,470 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=224, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 01:43:24,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=228, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-26 01:43:24,473 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=228, currTerm=228.

2024-05-26 01:43:24,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=227, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-26 01:43:24,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=233, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-26 01:43:24,475 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=232, currTerm=233.

2024-05-26 01:43:24,476 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=232, currTerm=233.

2024-05-26 01:43:24,479 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=224, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 01:43:24,480 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=224, currTerm=224, granted=true, requestLastLogId=LogId [index=216, term=223], lastLogId=LogId [index=216, term=223].

2024-05-26 01:43:24,482 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=224, currTerm=224, granted=true, requestLastLogId=LogId [index=216, term=223], lastLogId=LogId [index=216, term=223].

2024-05-26 01:43:24,486 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=224, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 01:43:24,486 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=224, currTerm=224, granted=true, requestLastLogId=LogId [index=216, term=223], lastLogId=LogId [index=216, term=223].

2024-05-26 01:43:24,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=227, votedFor=nacos2:7848, cost time=15 ms

2024-05-26 01:43:24,491 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:43:24,493 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:43:24,494 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:43:24,493 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=233, votedFor=nacos2:7848, cost time=16 ms

2024-05-26 01:43:24,493 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=228, votedFor=nacos2:7848, cost time=19 ms

2024-05-26 01:43:24,497 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:43:24,499 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=227, currTerm=228.

2024-05-26 01:43:24,500 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=227, currTerm=228.

2024-05-26 01:43:24,502 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=228, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 01:59:52,039 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=225, currTerm=224, granted=true, requestLastLogId=LogId [index=217, term=224], lastLogId=LogId [index=217, term=224].

2024-05-26 01:59:52,159 INFO Node <naming_service_metadata/nacos3:7848> term 227 start preVote.

2024-05-26 01:59:52,163 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=227, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 01:59:52,166 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:59:52,166 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=234, currTerm=233, because the leader nacos2:7848's lease is still valid.

2024-05-26 01:59:52,166 INFO Node <naming_instance_metadata/nacos3:7848> term 224 start preVote.

2024-05-26 01:59:52,186 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=229, currTerm=228, granted=true, requestLastLogId=LogId [index=217, term=228], lastLogId=LogId [index=217, term=228].

2024-05-26 01:59:52,187 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 01:59:52,199 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 01:59:52,221 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-26 01:59:52,228 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=225, currTerm=224.

2024-05-26 01:59:52,232 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=224, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:59:52,233 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=229, currTerm=228.

2024-05-26 01:59:52,235 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:59:52,237 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=227, granted=false.

2024-05-26 01:59:52,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=228, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:59:52,242 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 01:59:52,243 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 01:59:52,246 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=233.

2024-05-26 01:59:52,246 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 01:59:52,249 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 01:59:52,251 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 01:59:52,247 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 215 to 216, cost 0 ms.

2024-05-26 01:59:52,248 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=228, currTerm=227.

2024-05-26 01:59:52,261 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:59:52,249 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=233, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:59:52,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=225, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-26 01:59:52,251 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:59:52,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=229, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 01:59:52,252 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 01:59:52,261 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=227, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:59:52,263 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=224, currTerm=225.

2024-05-26 01:59:52,263 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=234, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-26 01:59:52,266 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 216 to 217, cost 0 ms.

2024-05-26 01:59:52,272 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 222 to 223, cost 0 ms.

2024-05-26 01:59:52,272 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:59:52,272 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=228, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-26 01:59:52,276 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=229, votedFor=nacos1:7848, cost time=12 ms

2024-05-26 01:59:52,281 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=234, votedFor=nacos1:7848, cost time=13 ms

2024-05-26 01:59:52,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=225, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 01:59:52,287 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 215 to 216, cost 2 ms.

2024-05-26 01:59:52,290 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=224, currTerm=225.

2024-05-26 01:59:52,288 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=228, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 01:59:52,294 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=227, currTerm=228.

2024-05-26 02:00:32,111 INFO Node <naming_instance_metadata/nacos3:7848> term 225 start preVote.

2024-05-26 02:00:32,133 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:00:32,597 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=218, term=225], lastLogId=LogId [index=218, term=225].

2024-05-26 02:00:33,299 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=225, granted=true.

2024-05-26 02:00:33,512 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=225.

2024-05-26 02:00:34,109 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=226, votedFor=nacos3:7848, cost time=410 ms

2024-05-26 02:00:34,302 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:00:36,167 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=226, currTerm=226.

2024-05-26 02:00:36,428 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=226, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:00:36,721 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 02:00:36,739 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:00:36,954 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:00:38,541 INFO onLeaderStart: term=226.

2024-05-26 02:16:15,317 INFO Node <naming_service_metadata/nacos3:7848> term 228 start preVote.

2024-05-26 02:16:15,472 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=226, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:16:15,465 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 02:16:15,451 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 02:16:15,507 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 02:16:15,318 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 02:16:15,317 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:16:15,546 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=235, currTerm=234, because the leader nacos1:7848's lease is still valid.

2024-05-26 02:16:15,549 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=235, currTerm=234.

2024-05-26 02:16:15,552 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:16:15,493 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=165, type=Follower] is going to quit

2024-05-26 02:16:15,493 INFO Node <naming_service_metadata/nacos3:7848> term 228 start preVote.

2024-05-26 02:16:15,561 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 229, expect=228.

2024-05-26 02:16:15,494 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:16:15,317 INFO Node <naming_persistent_service_v2/nacos3:7848> term 229 start preVote.

2024-05-26 02:16:15,326 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:16:15,555 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=164, type=Follower] is going to quit

2024-05-26 02:16:15,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=235, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-26 02:16:15,583 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=229, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 02:16:15,585 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=227, currTerm=226.

2024-05-26 02:16:15,587 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=228, currTerm=229.

2024-05-26 02:16:15,587 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=229, currTerm=229.

2024-05-26 02:16:15,591 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=235, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 02:16:15,591 INFO Node <naming_persistent_service_v2/nacos3:7848> term 229 start preVote.

2024-05-26 02:16:15,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=235, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 02:16:15,604 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=230, currTerm=229.

2024-05-26 02:16:15,592 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 02:16:15,592 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 02:16:15,593 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=227, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 02:16:15,595 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=229, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 02:16:15,613 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=229, currTerm=229, granted=true, requestLastLogId=LogId [index=219, term=228], lastLogId=LogId [index=219, term=228].

2024-05-26 02:16:15,614 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=228, currTerm=229.

2024-05-26 02:16:15,614 WARN Node <naming_service_metadata/nacos3:7848> raise term 229 when get lastLogId.

2024-05-26 02:16:15,614 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=227, currTerm=227, granted=true, requestLastLogId=LogId [index=219, term=226], lastLogId=LogId [index=219, term=226].

2024-05-26 02:16:15,616 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=227, granted=true, requestLastLogId=LogId [index=219, term=226], lastLogId=LogId [index=219, term=226].

2024-05-26 02:16:15,616 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=230, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 02:16:15,625 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 02:16:15,629 INFO The channel nacos1:7848 has successfully established.

2024-05-26 02:16:15,629 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=230, currTerm=230, granted=true, requestLastLogId=LogId [index=218, term=229], lastLogId=LogId [index=218, term=229].

2024-05-26 02:16:15,632 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=229, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:16:15,629 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 02:16:15,645 INFO The channel nacos2:7848 has successfully established.

2024-05-26 02:16:15,631 INFO Peer nacos1:7848 is connected.

2024-05-26 02:16:15,647 INFO Peer nacos2:7848 is connected.

2024-05-26 02:16:15,649 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=230, votedFor=nacos2:7848, cost time=9 ms

2024-05-26 02:16:15,650 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=229, currTerm=230.

2024-05-26 02:16:15,650 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=227, votedFor=nacos2:7848, cost time=9 ms

2024-05-26 02:16:15,651 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=229, currTerm=230.

2024-05-26 02:16:15,652 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=229, currTerm=230.

2024-05-26 02:16:15,653 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=229, currTerm=230.

2024-05-26 02:16:15,652 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=227, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 02:16:15,652 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:01,838 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=227, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:17:01,838 INFO Node <naming_instance_metadata/nacos3:7848> term 227 start preVote.

2024-05-26 02:17:01,838 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:17:01,083 INFO Node <naming_persistent_service_v2/nacos3:7848> term 230 start preVote.

2024-05-26 02:17:01,081 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:17:01,081 INFO Node <naming_service_metadata/nacos3:7848> term 229 start preVote.

2024-05-26 02:17:01,990 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=220, term=227], lastLogId=LogId [index=220, term=227].

2024-05-26 02:17:02,054 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=227, granted=false.

2024-05-26 02:17:02,046 INFO Node <naming_persistent_service_v2/nacos3:7848> term 230 start preVote.

2024-05-26 02:17:02,040 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=236, currTerm=235, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:17:02,055 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=230, currTerm=229, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:17:02,100 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=231, currTerm=230, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:17:02,130 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=230, granted=false.

2024-05-26 02:17:02,132 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=228, currTerm=227.

2024-05-26 02:17:02,151 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=230, granted=true.

2024-05-26 02:17:02,153 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=227, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:17:02,153 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=230.

2024-05-26 02:17:02,157 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:17:02,159 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=228, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-26 02:17:02,159 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=231, currTerm=231.

2024-05-26 02:17:02,160 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=229, granted=false.

2024-05-26 02:17:02,161 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:17:02,164 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=228, votedFor=nacos1:7848, cost time=4 ms

2024-05-26 02:17:02,165 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=236, currTerm=235.

2024-05-26 02:17:02,166 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=227, currTerm=228.

2024-05-26 02:17:02,168 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=235, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:17:02,170 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=229, granted=true.

2024-05-26 02:17:02,172 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=229.

2024-05-26 02:17:02,173 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:17:02,174 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=236, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 02:17:02,175 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=231, votedFor=nacos3:7848, cost time=8 ms

2024-05-26 02:17:02,176 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:17:02,178 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=236, votedFor=nacos1:7848, cost time=4 ms

2024-05-26 02:17:02,179 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=230, votedFor=nacos3:7848, cost time=6 ms

2024-05-26 02:17:02,181 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=230, currTerm=230.

2024-05-26 02:33:28,099 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=237, currTerm=236, granted=true, requestLastLogId=LogId [index=227, term=236], lastLogId=LogId [index=227, term=236].

2024-05-26 02:33:28,110 INFO Node <naming_persistent_service_v2/nacos3:7848> term 231 start preVote.

2024-05-26 02:33:28,110 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,110 INFO Node <naming_service_metadata/nacos3:7848> term 230 start preVote.

2024-05-26 02:33:28,112 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,112 INFO Node <naming_instance_metadata/nacos3:7848> term 228 start preVote.

2024-05-26 02:33:28,124 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=229, currTerm=228, granted=true, requestLastLogId=LogId [index=221, term=228], lastLogId=LogId [index=221, term=228].

2024-05-26 02:33:28,112 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,118 INFO Node <naming_persistent_service_v2/nacos3:7848> term 231 start preVote.

2024-05-26 02:33:28,121 INFO Node <naming_service_metadata/nacos3:7848> term 230 start preVote.

2024-05-26 02:33:28,149 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 02:33:28,195 INFO Node <naming_service_metadata/nacos3:7848> term 230 start preVote.

2024-05-26 02:33:28,149 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,197 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,195 INFO Node <naming_persistent_service_v2/nacos3:7848> term 231 start preVote.

2024-05-26 02:33:28,195 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 02:33:28,196 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,215 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,198 INFO Node <naming_persistent_service/nacos3:7848> term 236 start preVote.

2024-05-26 02:33:28,217 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=237, currTerm=236.

2024-05-26 02:33:28,198 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,199 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 02:33:28,224 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 02:33:28,203 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 02:33:28,229 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 02:33:28,229 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=230, granted=true.

2024-05-26 02:33:28,231 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=230.

2024-05-26 02:33:28,203 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 02:33:28,212 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=231, granted=false.

2024-05-26 02:33:28,217 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=228, granted=true.

2024-05-26 02:33:28,218 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 02:33:28,221 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 02:33:28,222 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=237, votedFor=0.0.0.0:0, cost time=3 ms

2024-05-26 02:33:28,243 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 223 to 225, cost 0 ms.

2024-05-26 02:33:28,245 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=228.

2024-05-26 02:33:28,245 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=232, currTerm=231, because the leader nacos1:7848's lease is still valid.

2024-05-26 02:33:28,249 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 217 to 219, cost 0 ms.

2024-05-26 02:33:28,272 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=237, votedFor=nacos2:7848, cost time=19 ms

2024-05-26 02:33:28,273 WARN Node <naming_persistent_service/nacos3:7848> raise term 237 when get lastLogId.

2024-05-26 02:33:28,274 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=236, currTerm=237.

2024-05-26 02:33:28,255 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 216 to 218, cost 2 ms.

2024-05-26 02:33:28,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=231, votedFor=nacos3:7848, cost time=26 ms

2024-05-26 02:33:28,277 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,265 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 216 to 218, cost 12 ms.

2024-05-26 02:33:28,279 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,280 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,271 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=231, granted=false.

2024-05-26 02:33:28,278 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:33:28,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=229, votedFor=nacos3:7848, cost time=10 ms

2024-05-26 02:33:28,281 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,285 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=231, currTerm=231.

2024-05-26 02:33:28,284 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=231, granted=false.

2024-05-26 02:33:28,285 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=229, currTerm=229.

2024-05-26 02:33:28,287 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=231, granted=false.

2024-05-26 02:33:28,287 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=228, currTerm=229.

2024-05-26 02:33:28,289 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,288 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=231, granted=false.

2024-05-26 02:33:28,294 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 232, expect=231.

2024-05-26 02:33:28,295 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=231, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-26 02:33:28,302 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=232, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 02:33:28,303 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=232, currTerm=232.

2024-05-26 02:33:28,306 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=231, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:33:28,307 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 02:33:28,310 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=232, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 02:33:28,311 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:33:28,316 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:33:28,317 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 02:33:28,328 INFO onLeaderStart: term=231.

2024-05-26 02:49:51,377 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:49:51,373 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=237, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 02:49:51,330 INFO Node <naming_instance_metadata/nacos3:7848> term 229 start preVote.

2024-05-26 02:49:51,331 INFO Node <naming_persistent_service/nacos3:7848> term 237 start preVote.

2024-05-26 02:49:51,403 INFO Node <naming_persistent_service/nacos3:7848> term 237 start preVote.

2024-05-26 02:49:51,471 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=233, currTerm=232, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:49:51,481 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=232, currTerm=231, because the leader nacos3:7848's lease is still valid.

2024-05-26 02:49:51,481 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 02:49:51,488 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=238, currTerm=237, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:49:51,503 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 02:49:51,518 INFO The channel nacos1:7848 has successfully established.

2024-05-26 02:49:51,498 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 02:49:51,557 INFO Peer nacos1:7848 is connected.

2024-05-26 02:49:51,562 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=233, currTerm=232.

2024-05-26 02:49:51,562 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=232, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:49:51,563 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=237, granted=false.

2024-05-26 02:49:51,547 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=230, currTerm=229, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:49:51,567 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=229, granted=true.

2024-05-26 02:49:51,568 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=229.

2024-05-26 02:49:51,569 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:49:51,569 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:49:51,573 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=237, granted=false.

2024-05-26 02:49:51,575 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=238, currTerm=237.

2024-05-26 02:49:51,578 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=233, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 02:49:51,580 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=237, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 02:49:51,583 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 02:49:51,583 INFO The channel nacos2:7848 has successfully established.

2024-05-26 02:49:51,584 INFO Peer nacos2:7848 is connected.

2024-05-26 02:49:51,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=230, votedFor=nacos3:7848, cost time=17 ms

2024-05-26 02:49:51,589 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=230, currTerm=230.

2024-05-26 02:49:51,590 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=238, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-26 02:49:51,592 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=233, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 02:49:51,599 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=238, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 02:49:51,607 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=237, currTerm=238.

2024-05-26 02:49:51,608 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=237, currTerm=238.

2024-05-26 03:06:12,205 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 03:06:12,888 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:12,882 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=233, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:12,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:12,214 INFO Node <naming_instance_metadata/nacos3:7848> term 230 start preVote.

2024-05-26 03:06:12,229 INFO Node <naming_persistent_service_v2/nacos3:7848> term 233 start preVote.

2024-05-26 03:06:12,219 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=231, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:06:12,208 INFO Node <naming_persistent_service/nacos3:7848> term 238 start preVote.

2024-05-26 03:06:13,082 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=152, type=Follower] is going to quit

2024-05-26 03:06:13,087 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=153, type=Follower] is going to quit

2024-05-26 03:06:12,207 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 03:06:13,082 INFO Node <naming_instance_metadata/nacos3:7848> term 230 start preVote.

2024-05-26 03:06:13,082 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:06:13,082 INFO Node <naming_persistent_service/nacos3:7848> term 238 start preVote.

2024-05-26 03:06:13,197 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 03:06:13,098 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:06:13,143 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:06:13,210 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:06:13,210 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 03:06:13,210 INFO The channel nacos1:7848 has successfully established.

2024-05-26 03:06:13,148 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:06:13,214 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:06:13,164 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:06:13,184 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=230, granted=true.

2024-05-26 03:06:13,216 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=230.

2024-05-26 03:06:13,217 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:06:13,225 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 03:06:13,228 WARN Node <naming_instance_metadata/nacos3:7848> raise term 231 when get lastLogId.

2024-05-26 03:06:13,209 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:06:13,231 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=232, currTerm=231, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 03:06:13,214 INFO Peer nacos1:7848 is connected.

2024-05-26 03:06:13,214 INFO Node <naming_persistent_service_v2/nacos3:7848> term 233 start preVote.

2024-05-26 03:06:13,215 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=238, granted=true.

2024-05-26 03:06:13,244 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=238.

2024-05-26 03:06:13,247 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 03:06:13,215 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:06:13,235 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 03:06:13,236 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=231, votedFor=nacos3:7848, cost time=7 ms

2024-05-26 03:06:13,244 INFO Node <naming_persistent_service_v2/nacos3:7848> term 233 start preVote.

2024-05-26 03:06:13,253 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=233, granted=true.

2024-05-26 03:06:13,254 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=233.

2024-05-26 03:06:13,245 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 03:06:13,249 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=231.

2024-05-26 03:06:13,253 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 03:06:13,263 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=239, votedFor=nacos3:7848, cost time=17 ms

2024-05-26 03:06:13,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:06:13,255 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 218 to 222, cost 0 ms.

2024-05-26 03:06:13,256 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 225 to 228, cost 0 ms.

2024-05-26 03:06:13,259 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 219 to 222, cost 0 ms.

2024-05-26 03:06:13,270 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=231, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:06:13,290 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=234, votedFor=nacos3:7848, cost time=34 ms

2024-05-26 03:06:13,291 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:06:13,313 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=239, currTerm=239, granted=true, requestLastLogId=LogId [index=229, term=238], lastLogId=LogId [index=229, term=238].

2024-05-26 03:06:13,297 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:06:13,301 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 218 to 221, cost 0 ms.

2024-05-26 03:06:13,302 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=232, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-26 03:06:13,312 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:06:13,314 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=239, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:06:13,322 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:06:13,323 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:06:13,317 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:06:13,321 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=232, currTerm=232, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 03:06:13,327 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=231, currTerm=231, because the leader nacos3:7848's lease is still valid.

2024-05-26 03:06:13,322 WARN Node <naming_persistent_service_v2/nacos3:7848> raise term 234 when get lastLogId.

2024-05-26 03:06:13,329 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=234, currTerm=234, granted=true, requestLastLogId=LogId [index=222, term=233], lastLogId=LogId [index=222, term=233].

2024-05-26 03:06:13,329 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=233, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:06:13,330 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:06:13,339 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 03:06:13,347 INFO The channel nacos2:7848 has successfully established.

2024-05-26 03:06:13,350 INFO Peer nacos2:7848 is connected.

2024-05-26 03:06:13,341 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:06:13,346 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=232, votedFor=nacos1:7848, cost time=18 ms

2024-05-26 03:06:13,348 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=234, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:06:13,356 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:06:13,359 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:06:13,351 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:06:13,366 INFO onLeaderStart: term=239.

2024-05-26 03:06:13,376 INFO onLeaderStart: term=231.

2024-05-26 03:06:13,394 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:06:13,394 INFO onLeaderStart: term=234.

2024-05-26 03:06:13,396 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:06:13,398 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:06:13,401 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:06:13,405 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:06:13,422 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:06:13,427 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:06:13,428 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:06:17,159 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:06:17,160 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:06:17,160 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:06:17,161 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:11:11,069 INFO Node <naming_service_metadata/nacos3:7848> term 232 start preVote.

2024-05-26 03:11:11,103 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:11:11,133 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=239, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:11:11,137 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=165, type=Follower] is going to quit

2024-05-26 03:11:11,133 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=231, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:11:11,139 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:11:11,141 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=164, type=Follower] is going to quit

2024-05-26 03:11:11,146 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=167, type=Follower] is going to quit

2024-05-26 03:11:11,153 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=166, type=Follower] is going to quit

2024-05-26 03:11:11,147 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:11:11,836 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=232, currTerm=231, granted=true, requestLastLogId=LogId [index=224, term=231], lastLogId=LogId [index=224, term=231].

2024-05-26 03:11:11,835 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 03:11:11,133 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=234, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:11:11,852 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=223, lastLogIncluded=0, lastLogIndex=223, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=131, type=Follower] is going to quit

2024-05-26 03:11:11,857 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=223, lastLogIncluded=0, lastLogIndex=223, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=130, type=Follower] is going to quit

2024-05-26 03:11:11,862 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=232, granted=true.

2024-05-26 03:11:11,854 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:11:11,874 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 03:11:11,879 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=232.

2024-05-26 03:11:11,894 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:11,888 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=231.

2024-05-26 03:11:11,862 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=235, currTerm=234, granted=true, requestLastLogId=LogId [index=223, term=234], lastLogId=LogId [index=223, term=234].

2024-05-26 03:11:11,906 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=240, currTerm=239.

2024-05-26 03:11:12,058 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=232, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-26 03:11:12,059 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,029 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=233, votedFor=nacos3:7848, cost time=119 ms

2024-05-26 03:11:12,064 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=233, currTerm=233, granted=true, requestLastLogId=LogId [index=223, term=232], lastLogId=LogId [index=223, term=232].

2024-05-26 03:11:12,064 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:11:12,055 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=235, currTerm=234, granted=true, requestLastLogId=LogId [index=223, term=234], lastLogId=LogId [index=223, term=234].

2024-05-26 03:11:12,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=240, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 03:11:12,091 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=235, currTerm=234, granted=true, requestLastLogId=LogId [index=223, term=234], lastLogId=LogId [index=223, term=234].

2024-05-26 03:11:12,065 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=233, currTerm=233.

2024-05-26 03:11:12,067 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=232, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 03:11:12,090 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,090 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,091 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,091 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=240, currTerm=240.

2024-05-26 03:11:12,092 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=235, currTerm=234.

2024-05-26 03:11:12,093 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=233, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:11:12,101 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:11:12,104 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:11:12,095 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,098 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,102 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=235, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-26 03:11:12,108 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=240, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 03:11:12,109 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,119 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:11:12,120 INFO onLeaderStart: term=233.

2024-05-26 03:11:12,122 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=235, votedFor=nacos1:7848, cost time=4 ms

2024-05-26 03:11:12,122 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=235, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:11:12,132 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:27:30,641 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.494491643s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-26 03:27:30,653 INFO Node <naming_persistent_service/nacos3:7848> term 240 start preVote.

2024-05-26 03:27:30,658 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:27:31,369 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=224, term=233], lastLogId=LogId [index=224, term=233].

2024-05-26 03:27:31,371 INFO Node <naming_instance_metadata/nacos3:7848> term 232 start preVote.

2024-05-26 03:27:31,371 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:27:31,393 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=240, granted=true.

2024-05-26 03:27:31,405 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=240.

2024-05-26 03:27:31,405 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:27:31,409 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=232, granted=true.

2024-05-26 03:27:31,409 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=232.

2024-05-26 03:27:31,413 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=241, votedFor=nacos3:7848, cost time=7 ms

2024-05-26 03:27:31,417 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=233, votedFor=nacos3:7848, cost time=6 ms

2024-05-26 03:27:31,431 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=234, currTerm=233, because the leader nacos3:7848's lease is still valid.

2024-05-26 03:27:31,452 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=236, currTerm=235, because the leader nacos1:7848's lease is still valid.

2024-05-26 03:27:31,457 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=233, currTerm=233, granted=true, requestLastLogId=LogId [index=225, term=232], lastLogId=LogId [index=225, term=232].

2024-05-26 03:27:31,469 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=233, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:27:31,474 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:27:31,458 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:27:31,463 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=233.

2024-05-26 03:27:31,466 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=236, currTerm=235.

2024-05-26 03:27:31,485 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=235, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:27:31,479 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:27:31,486 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=241, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:27:31,499 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 03:27:31,485 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-26 03:27:31,495 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=234, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-26 03:27:31,503 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:27:31,513 INFO onLeaderStart: term=233.

2024-05-26 03:27:31,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=236, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 03:27:31,517 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=236, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:27:31,508 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:27:31,511 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=155, type=Follower] is going to quit

2024-05-26 03:27:31,521 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=154, type=Follower] is going to quit

2024-05-26 03:27:31,522 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:27:31,520 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:27:31,522 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listLearners(NodeImpl.java:2992)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:59)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:27:31,523 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:27:31,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=236, votedFor=nacos2:7848, cost time=8 ms

2024-05-26 03:27:31,527 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=234, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 03:27:31,528 INFO onLeaderStart: term=241.

2024-05-26 03:43:48,841 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 03:43:48,906 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499704099s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-26 03:43:49,001 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=233, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:43:49,017 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=169, type=Follower] is going to quit

2024-05-26 03:43:49,021 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=168, type=Follower] is going to quit

2024-05-26 03:43:49,023 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=241, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:43:49,023 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=232, lastLogIncluded=0, lastLogIndex=232, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=168, type=Follower] is going to quit

2024-05-26 03:43:49,026 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=232, lastLogIncluded=0, lastLogIndex=232, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=167, type=Follower] is going to quit

2024-05-26 03:43:49,030 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:43:49,036 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:43:49,014 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 03:43:49,030 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,069 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 03:43:49,070 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 03:43:49,071 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 03:43:49,038 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=226, term=233], lastLogId=LogId [index=226, term=233].

2024-05-26 03:43:49,091 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 03:43:49,075 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:43:49,076 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=242, currTerm=241, granted=true, requestLastLogId=LogId [index=232, term=241], lastLogId=LogId [index=232, term=241].

2024-05-26 03:43:49,115 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,116 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 03:43:49,119 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 03:43:49,082 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 03:43:49,102 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=237, currTerm=236, because the leader nacos2:7848's lease is still valid.

2024-05-26 03:43:49,120 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=237, currTerm=236.

2024-05-26 03:43:49,120 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=236, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:43:49,103 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=235, currTerm=234, because the leader nacos1:7848's lease is still valid.

2024-05-26 03:43:49,107 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 03:43:49,110 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,117 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 222 to 224, cost 0 ms.

2024-05-26 03:43:49,120 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=242, currTerm=241, granted=true, requestLastLogId=LogId [index=232, term=241], lastLogId=LogId [index=232, term=241].

2024-05-26 03:43:49,123 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,124 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:43:49,125 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=226, term=233], lastLogId=LogId [index=226, term=233].

2024-05-26 03:43:49,121 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:43:49,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=237, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 03:43:49,129 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 222 to 223, cost 0 ms.

2024-05-26 03:43:49,130 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=234, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-26 03:43:49,121 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=235, currTerm=234.

2024-05-26 03:43:49,132 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=234.

2024-05-26 03:43:49,124 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=242, currTerm=241.

2024-05-26 03:43:49,124 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:43:49,132 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:43:49,135 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=237, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 03:43:49,137 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 221 to 223, cost 3 ms.

2024-05-26 03:43:49,138 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=235, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 03:43:49,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=234, votedFor=nacos1:7848, cost time=4 ms

2024-05-26 03:43:49,140 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:43:49,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=242, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-26 03:43:49,141 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=242, currTerm=242, granted=true, requestLastLogId=LogId [index=232, term=241], lastLogId=LogId [index=232, term=241].

2024-05-26 03:43:49,144 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=235, votedFor=nacos2:7848, cost time=5 ms

2024-05-26 03:43:49,152 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:43:49,157 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 228 to 230, cost 2 ms.

2024-05-26 03:43:49,165 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=242, votedFor=nacos1:7848, cost time=13 ms

2024-05-26 03:43:49,168 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:53,043 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:43:53,043 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:43:53,044 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:43:53,045 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-26 03:43:53,077 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 03:43:53,079 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 03:43:53,081 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 03:43:53,081 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-26 04:00:15,620 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-26 04:00:15,630 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 04:00:15,646 INFO Node <naming_service_metadata/nacos3:7848> term 235 start preVote.

2024-05-26 04:00:15,648 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=235, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:00:16,403 INFO Node <naming_instance_metadata/nacos3:7848> term 234 start preVote.

2024-05-26 04:00:16,403 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:00:16,406 INFO Node <naming_persistent_service/nacos3:7848> term 242 start preVote.

2024-05-26 04:00:16,406 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:00:16,418 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 04:00:16,437 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=234, granted=true.

2024-05-26 04:00:16,442 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=234.

2024-05-26 04:00:16,443 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 04:00:16,444 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 04:00:16,450 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=235, votedFor=nacos3:7848, cost time=6 ms

2024-05-26 04:00:16,452 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 04:00:16,454 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=243, currTerm=242.

2024-05-26 04:00:16,459 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=234, currTerm=235.

2024-05-26 04:00:16,460 INFO The channel nacos2:7848 has successfully established.

2024-05-26 04:00:16,469 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=236, currTerm=235, granted=true, requestLastLogId=LogId [index=226, term=235], lastLogId=LogId [index=226, term=235].

2024-05-26 04:00:16,566 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:00:16,573 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=235, currTerm=235, granted=true, requestLastLogId=LogId [index=227, term=234], lastLogId=LogId [index=227, term=234].

2024-05-26 04:00:16,578 INFO Peer nacos2:7848 is connected.

2024-05-26 04:00:16,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=243, votedFor=0.0.0.0:0, cost time=123 ms

2024-05-26 04:00:16,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=243, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 04:00:16,597 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:00:16,606 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=242, currTerm=243.

2024-05-26 04:00:16,606 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=242, currTerm=243.

2024-05-26 04:00:16,611 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 04:00:16,612 INFO The channel nacos1:7848 has successfully established.

2024-05-26 04:00:16,611 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=235, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:00:16,615 INFO Peer nacos1:7848 is connected.

2024-05-26 04:00:16,627 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=236, currTerm=235.

2024-05-26 04:00:16,630 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 04:00:16,640 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:00:16,651 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=236, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-26 04:00:16,655 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=235, currTerm=236.

2024-05-26 04:00:16,674 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=236, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 04:00:16,692 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=235, currTerm=236.

2024-05-26 04:00:16,702 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:00:16,703 INFO onLeaderStart: term=235.

2024-05-26 04:00:21,441 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=238, currTerm=237, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:00:21,447 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=238, currTerm=237.

2024-05-26 04:00:21,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:00:21,453 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=238, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 04:00:21,455 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=238, votedFor=nacos2:7848, cost time=3 ms

2024-05-26 04:10:37,993 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=235, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:10:38,252 INFO Node <naming_persistent_service_v2/nacos3:7848> term 238 start preVote.

2024-05-26 04:10:38,086 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499763288s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-26 04:10:38,057 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:10:38,252 INFO Node <naming_service_metadata/nacos3:7848> term 236 start preVote.

2024-05-26 04:10:38,252 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:10:38,252 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:10:38,057 INFO Node <naming_persistent_service/nacos3:7848> term 243 start preVote.

2024-05-26 04:10:38,799 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=170, type=Follower] is going to quit

2024-05-26 04:10:38,849 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=171, type=Follower] is going to quit

2024-05-26 04:10:38,799 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:10:38,805 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-26 04:10:38,808 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 04:10:38,818 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=234, term=243], lastLogId=LogId [index=234, term=243].

2024-05-26 04:10:38,835 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=239, currTerm=238, because the leader nacos2:7848's lease is still valid.

2024-05-26 04:10:38,855 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=236, granted=false.

2024-05-26 04:10:39,061 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=237, currTerm=236, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:10:39,052 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=236, currTerm=235, granted=true, requestLastLogId=LogId [index=228, term=235], lastLogId=LogId [index=228, term=235].

2024-05-26 04:10:39,061 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=243, granted=false.

2024-05-26 04:10:39,066 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=244, currTerm=243.

2024-05-26 04:10:39,068 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=239, currTerm=238.

2024-05-26 04:10:39,068 INFO The channel nacos2:7848 is in state: READY.

2024-05-26 04:10:39,064 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,063 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=236, granted=true.

2024-05-26 04:10:39,070 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=236.

2024-05-26 04:10:39,074 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=244, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 04:10:39,075 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=243, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:10:39,076 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=237, currTerm=237.

2024-05-26 04:10:39,068 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=238, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:10:39,069 INFO The channel nacos2:7848 has successfully established.

2024-05-26 04:10:39,072 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 04:10:39,082 INFO Peer nacos2:7848 is connected.

2024-05-26 04:10:39,075 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:10:39,076 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=243, currTerm=244.

2024-05-26 04:10:39,077 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=236, currTerm=235.

2024-05-26 04:10:39,076 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=239, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 04:10:39,083 INFO The channel nacos1:7848 has successfully established.

2024-05-26 04:10:39,087 INFO Peer nacos1:7848 is connected.

2024-05-26 04:10:39,088 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=236, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 04:10:39,090 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=237, votedFor=nacos3:7848, cost time=9 ms

2024-05-26 04:10:39,091 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=244, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 04:10:39,095 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=236, votedFor=nacos2:7848, cost time=5 ms

2024-05-26 04:10:39,097 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,099 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=239, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 04:10:39,099 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,103 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=238, currTerm=239.

2024-05-26 04:10:39,106 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=238, currTerm=239.

2024-05-26 04:10:39,145 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 04:11:17,386 INFO Node <naming_persistent_service_v2/nacos3:7848> term 239 start preVote.

2024-05-26 04:11:17,513 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:11:17,550 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=245, currTerm=244, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:11:17,553 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=228, term=239], lastLogId=LogId [index=228, term=239].

2024-05-26 04:11:17,598 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 240, expect=239.

2024-05-26 04:11:17,615 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=238, currTerm=237, because the leader nacos2:7848's lease is still valid.

2024-05-26 04:11:17,626 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=237, currTerm=236, because the leader nacos2:7848's lease is still valid.

2024-05-26 04:11:17,628 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=245, currTerm=244.

2024-05-26 04:11:17,626 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=238, currTerm=237.

2024-05-26 04:11:17,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=240, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-26 04:11:17,648 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=239, currTerm=240.

2024-05-26 04:11:17,634 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=237, currTerm=236.

2024-05-26 04:11:17,640 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=237, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:11:17,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:11:17,652 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=240, currTerm=240.

2024-05-26 04:11:17,652 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=236, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:11:17,655 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=238, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 04:11:17,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=238, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 04:11:17,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=240, votedFor=nacos2:7848, cost time=20 ms

2024-05-26 04:11:17,676 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=237, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-26 04:11:17,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=245, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-26 04:11:17,690 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=237, votedFor=nacos1:7848, cost time=13 ms

2024-05-26 04:11:17,695 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=245, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 04:11:17,763 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=239, currTerm=240.

2024-05-26 04:12:42,543 INFO Node <naming_instance_metadata/nacos3:7848> term 237 start preVote.

2024-05-26 04:12:42,551 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:12:42,545 INFO Node <naming_service_metadata/nacos3:7848> term 238 start preVote.

2024-05-26 04:12:42,605 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=245, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:12:42,550 INFO Node <naming_persistent_service_v2/nacos3:7848> term 240 start preVote.

2024-05-26 04:12:42,545 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:12:42,547 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:12:42,599 INFO Node <naming_persistent_service/nacos3:7848> term 245 start preVote.

2024-05-26 04:12:42,722 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=239, currTerm=238, granted=true, requestLastLogId=LogId [index=229, term=238], lastLogId=LogId [index=229, term=238].

2024-05-26 04:12:42,780 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=238, currTerm=237, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:12:42,782 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=239, currTerm=238, granted=true, requestLastLogId=LogId [index=229, term=238], lastLogId=LogId [index=229, term=238].

2024-05-26 04:12:42,791 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=238, currTerm=237.

2024-05-26 04:12:42,793 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=240, granted=true.

2024-05-26 04:12:42,837 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=240.

2024-05-26 04:12:42,806 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=239, currTerm=238.

2024-05-26 04:12:42,846 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:12:42,837 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:12:42,841 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:12:42,847 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=245, granted=false.

2024-05-26 04:12:42,875 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=245, granted=true.

2024-05-26 04:12:42,878 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=245.

2024-05-26 04:12:42,879 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=245, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:12:42,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=238, votedFor=0.0.0.0:0, cost time=65 ms

2024-05-26 04:12:42,904 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=239, votedFor=0.0.0.0:0, cost time=60 ms

2024-05-26 04:12:42,905 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=237, currTerm=238.

2024-05-26 04:12:42,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=246, votedFor=nacos3:7848, cost time=20 ms

2024-05-26 04:12:42,905 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=241, votedFor=nacos3:7848, cost time=39 ms

2024-05-26 04:12:42,941 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:12:42,911 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=238, currTerm=239.

2024-05-26 04:12:42,913 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=237, currTerm=238.

2024-05-26 04:12:42,943 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=238, currTerm=239.

2024-05-26 04:12:42,970 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=246, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:12:42,970 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=241, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:12:43,003 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 04:12:43,016 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 04:12:43,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=239, votedFor=nacos2:7848, cost time=64 ms

2024-05-26 04:12:43,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=238, votedFor=nacos2:7848, cost time=65 ms

2024-05-26 04:12:43,060 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=238, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 04:12:43,064 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:12:43,066 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:12:43,102 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:12:43,110 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:12:43,147 INFO onLeaderStart: term=246.

2024-05-26 04:12:43,147 INFO onLeaderStart: term=241.

2024-05-26 04:29:04,427 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=241, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:29:04,867 INFO Node <naming_service_metadata/nacos3:7848> term 239 start preVote.

2024-05-26 04:29:04,867 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:29:04,892 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=132, type=Follower] is going to quit

2024-05-26 04:29:04,859 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:29:05,244 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=170, type=Follower] is going to quit

2024-05-26 04:29:04,858 INFO Node <naming_instance_metadata/nacos3:7848> term 238 start preVote.

2024-05-26 04:29:04,845 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=246, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:29:04,894 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:29:05,041 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=240, currTerm=239.

2024-05-26 04:29:05,062 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=133, type=Follower] is going to quit

2024-05-26 04:29:05,265 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=239, currTerm=238, granted=true, requestLastLogId=LogId [index=231, term=238], lastLogId=LogId [index=231, term=238].

2024-05-26 04:29:05,303 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=169, type=Follower] is going to quit

2024-05-26 04:29:05,387 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:29:05,388 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=242, currTerm=241, granted=true, requestLastLogId=LogId [index=230, term=241], lastLogId=LogId [index=230, term=241].

2024-05-26 04:29:05,395 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=242, currTerm=241.

2024-05-26 04:29:05,400 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=238, status=Status[ENEWLEADER<10011>: Raft node receives message from new leader with higher term.]].

2024-05-26 04:29:05,407 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=169, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 04:29:05,411 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=240, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-26 04:29:05,411 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=170, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 04:29:05,416 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=247, currTerm=246.

2024-05-26 04:29:05,420 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=242, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-26 04:29:05,425 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=242, currTerm=242, because the leader nacos2:7848's lease is still valid.

2024-05-26 04:29:05,430 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=242, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 04:29:05,437 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=239, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-26 04:29:05,438 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=247, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-26 04:29:05,440 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=240, votedFor=nacos1:7848, cost time=27 ms

2024-05-26 04:29:05,474 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=247, currTerm=247.

2024-05-26 04:29:05,464 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=238, currTerm=239.

2024-05-26 04:29:05,466 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=242, votedFor=nacos2:7848, cost time=40 ms

2024-05-26 04:29:05,475 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=239, currTerm=240.

2024-05-26 04:29:05,493 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=240, currTerm=240, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 04:29:05,495 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=239, currTerm=240.

2024-05-26 04:29:05,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=247, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 04:29:05,503 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=239, currTerm=239.

2024-05-26 04:29:05,504 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=238, currTerm=239.

2024-05-26 04:29:05,502 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=247, currTerm=247, granted=true, requestLastLogId=LogId [index=237, term=246], lastLogId=LogId [index=237, term=246].

2024-05-26 04:29:05,516 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 04:29:05,524 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=247, granted=true, requestLastLogId=LogId [index=237, term=246], lastLogId=LogId [index=237, term=246].

2024-05-26 04:29:05,498 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=169, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send1,5,main].

2024-05-26 04:29:05,498 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=170, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send0,5,main].

2024-05-26 04:29:05,526 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=247, granted=true, requestLastLogId=LogId [index=237, term=246], lastLogId=LogId [index=237, term=246].

2024-05-26 04:29:05,547 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=239, votedFor=nacos1:7848, cost time=39 ms

2024-05-26 04:29:05,556 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:24,993 INFO Node <naming_persistent_service/nacos3:7848> term 247 start preVote.

2024-05-26 04:45:24,999 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:45:25,448 INFO Node <naming_instance_metadata/nacos3:7848> term 239 start preVote.

2024-05-26 04:45:25,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:45:25,478 INFO Node <naming_persistent_service_v2/nacos3:7848> term 242 start preVote.

2024-05-26 04:45:25,483 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 04:45:25,474 INFO Node <naming_service_metadata/nacos3:7848> term 240 start preVote.

2024-05-26 04:45:25,487 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:45:25,624 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 04:45:25,637 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 04:45:25,660 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=243, currTerm=242, because the leader nacos2:7848's lease is still valid.

2024-05-26 04:45:25,669 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=232, term=239], lastLogId=LogId [index=232, term=239].

2024-05-26 04:45:25,736 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=240, currTerm=239.

2024-05-26 04:45:25,756 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=242, granted=true.

2024-05-26 04:45:25,787 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=242.

2024-05-26 04:45:25,767 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=241, currTerm=240, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:45:25,835 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:45:25,847 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=247, granted=true.

2024-05-26 04:45:25,887 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=241, currTerm=240.

2024-05-26 04:45:25,896 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=247.

2024-05-26 04:45:25,963 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:45:25,955 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 04:45:25,960 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=240, votedFor=0.0.0.0:0, cost time=180 ms

2024-05-26 04:45:25,985 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:45:25,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=243, votedFor=nacos3:7848, cost time=123 ms

2024-05-26 04:45:25,974 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=241, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-26 04:45:25,977 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=248.

2024-05-26 04:45:25,996 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=243, currTerm=243.

2024-05-26 04:45:26,024 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=240, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 04:45:26,025 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:45:26,027 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=239, currTerm=240.

2024-05-26 04:45:26,061 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=239, currTerm=240.

2024-05-26 04:45:26,071 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_232.

2024-05-26 04:45:26,074 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_232.

2024-05-26 04:45:26,079 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_238.

2024-05-26 04:45:26,080 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_238.

2024-05-26 04:45:26,080 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=248, votedFor=nacos3:7848, cost time=67 ms

2024-05-26 04:45:26,080 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_231.

2024-05-26 04:45:26,087 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_231.

2024-05-26 04:45:26,080 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_231.

2024-05-26 04:45:26,085 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 04:45:26,092 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 04:45:26,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=241, votedFor=nacos2:7848, cost time=77 ms

2024-05-26 04:45:26,088 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 04:45:26,090 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_231.

2024-05-26 04:45:26,102 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=240, currTerm=241.

2024-05-26 04:45:26,123 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=240, currTerm=241.

2024-05-26 04:45:26,131 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 04:45:26,134 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=248, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:45:26,149 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 04:45:26,153 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 230 to 233, cost 10 ms.

2024-05-26 04:45:26,156 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:45:26,151 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 223 to 226, cost 5 ms.

2024-05-26 04:45:26,159 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 224 to 227, cost 1 ms.

2024-05-26 04:45:26,166 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 223 to 226, cost 10 ms.

2024-05-26 04:45:26,172 INFO onLeaderStart: term=248.

2024-05-26 05:12:55,192 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=248, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:12:55,321 INFO Node <naming_service_metadata/nacos3:7848> term 241 start preVote.

2024-05-26 05:12:55,330 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:12:55,332 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=241, currTerm=240, granted=true, requestLastLogId=LogId [index=233, term=240], lastLogId=LogId [index=233, term=240].

2024-05-26 05:12:55,464 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=241, currTerm=240.

2024-05-26 05:12:55,333 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:12:55,333 INFO Node <naming_persistent_service_v2/nacos3:7848> term 243 start preVote.

2024-05-26 05:12:55,371 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:12:55,492 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=244, currTerm=243.

2024-05-26 05:12:55,371 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=172, type=Follower] is going to quit

2024-05-26 05:12:55,400 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=242, currTerm=241, because the leader nacos2:7848's lease is still valid.

2024-05-26 05:12:55,474 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=240, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:12:55,500 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=242, currTerm=241.

2024-05-26 05:12:55,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=171, type=Follower] is going to quit

2024-05-26 05:12:55,503 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 05:12:55,506 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 05:12:55,509 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 05:12:55,512 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=249, currTerm=248.

2024-05-26 05:12:55,510 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=241, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-26 05:12:55,516 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=244, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 05:12:55,520 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=243, currTerm=244.

2024-05-26 05:12:55,518 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=242, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 05:12:55,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=249, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-26 05:12:55,527 WARN Node <naming_service_metadata/nacos3:7848> raise term 242 when get lastLogId.

2024-05-26 05:12:55,529 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=241, votedFor=nacos1:7848, cost time=12 ms

2024-05-26 05:12:55,531 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=240, currTerm=241.

2024-05-26 05:12:55,533 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=244, votedFor=nacos2:7848, cost time=11 ms

2024-05-26 05:12:55,535 WARN Node <naming_persistent_service_v2/nacos3:7848> raise term 244 when get lastLogId.

2024-05-26 05:12:55,531 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=241, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:12:55,538 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=249, votedFor=nacos2:7848, cost time=9 ms

2024-05-26 05:12:55,535 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=244, currTerm=244, granted=true, requestLastLogId=LogId [index=232, term=243], lastLogId=LogId [index=232, term=243].

2024-05-26 05:12:55,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=242, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 05:12:55,549 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:10,981 INFO Node <naming_service_metadata/nacos3:7848> term 242 start preVote.

2024-05-26 05:13:11,012 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:13:11,022 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:13:11,019 INFO Node <naming_instance_metadata/nacos3:7848> term 241 start preVote.

2024-05-26 05:13:11,366 INFO Node <naming_service_metadata/nacos3:7848> term 242 start preVote.

2024-05-26 05:13:11,402 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 05:13:11,414 INFO Node <naming_service_metadata/nacos3:7848> term 242 start preVote.

2024-05-26 05:13:11,436 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 05:13:11,507 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=250, currTerm=249.

2024-05-26 05:13:11,511 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 05:13:11,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=249, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:13:11,531 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=242, granted=true.

2024-05-26 05:13:11,535 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=242.

2024-05-26 05:13:11,543 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:11,548 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=250, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-26 05:13:11,562 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=241, granted=false.

2024-05-26 05:13:11,590 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=243, votedFor=nacos3:7848, cost time=42 ms

2024-05-26 05:13:11,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=250, votedFor=nacos1:7848, cost time=37 ms

2024-05-26 05:13:11,596 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=241, granted=false.

2024-05-26 05:13:11,599 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=243, currTerm=243.

2024-05-26 05:13:11,601 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,607 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,611 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,624 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,635 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,652 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=243, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:11,666 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:13:11,678 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:11,721 INFO onLeaderStart: term=243.

2024-05-26 05:13:16,653 INFO Node <naming_persistent_service_v2/nacos3:7848> term 244 start preVote.

2024-05-26 05:13:16,653 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:13:16,662 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=244, granted=true.

2024-05-26 05:13:16,666 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=244.

2024-05-26 05:13:16,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=245, votedFor=nacos3:7848, cost time=5 ms

2024-05-26 05:13:16,683 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:16,692 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=245, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:16,693 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:13:16,697 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:16,700 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:16,705 INFO onLeaderStart: term=245.

2024-05-26 05:13:28,581 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=251, currTerm=250, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:13:28,616 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=234, term=243], lastLogId=LogId [index=234, term=243].

2024-05-26 05:13:28,616 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=234, term=245], lastLogId=LogId [index=234, term=245].

2024-05-26 05:13:28,633 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=242, currTerm=241, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:13:28,663 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=245, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:28,748 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=135, type=Follower] is going to quit

2024-05-26 05:13:28,754 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:28,755 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=134, type=Follower] is going to quit

2024-05-26 05:13:28,781 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:28,787 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:28,796 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=234, term=245], lastLogId=LogId [index=234, term=245].

2024-05-26 05:13:28,797 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=244, currTerm=243.

2024-05-26 05:13:28,810 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=246, currTerm=245.

2024-05-26 05:13:28,817 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=242, currTerm=241.

2024-05-26 05:13:28,826 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=241, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:13:28,824 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-26 05:13:28,830 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=251, currTerm=250.

2024-05-26 05:13:28,834 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:13:28,974 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=251, votedFor=0.0.0.0:0, cost time=141 ms

2024-05-26 05:13:28,974 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=242, votedFor=0.0.0.0:0, cost time=147 ms

2024-05-26 05:13:28,975 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=246, votedFor=0.0.0.0:0, cost time=156 ms

2024-05-26 05:13:28,975 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=244, votedFor=0.0.0.0:0, cost time=159 ms

2024-05-26 05:13:28,987 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=156, type=Follower] is going to quit

2024-05-26 05:13:28,984 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=246.

2024-05-26 05:13:28,990 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=157, type=Follower] is going to quit

2024-05-26 05:13:28,995 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=242, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 05:13:28,984 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:28,992 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:28,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=251, votedFor=nacos2:7848, cost time=14 ms

2024-05-26 05:13:28,996 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=244, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 05:13:29,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=244, votedFor=nacos2:7848, cost time=10 ms

2024-05-26 05:13:29,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=246, votedFor=nacos2:7848, cost time=16 ms

2024-05-26 05:13:44,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:13:44,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:13:44,094 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:13:44,098 INFO Node <naming_instance_metadata/nacos3:7848> term 242 start preVote.

2024-05-26 05:13:44,095 INFO Node <naming_service_metadata/nacos3:7848> term 244 start preVote.

2024-05-26 05:13:44,098 INFO Node <naming_persistent_service/nacos3:7848> term 251 start preVote.

2024-05-26 05:13:44,160 INFO Node <naming_instance_metadata/nacos3:7848> term 242 start preVote.

2024-05-26 05:13:44,364 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=242, granted=true.

2024-05-26 05:13:44,362 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=244, granted=true.

2024-05-26 05:13:44,429 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=251, granted=true.

2024-05-26 05:13:44,437 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=244.

2024-05-26 05:13:44,439 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=251.

2024-05-26 05:13:44,447 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:44,431 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=242.

2024-05-26 05:13:44,460 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:44,445 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:44,447 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:44,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=243, votedFor=nacos3:7848, cost time=48 ms

2024-05-26 05:13:44,521 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=252, votedFor=nacos3:7848, cost time=58 ms

2024-05-26 05:13:44,522 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:44,526 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:44,529 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=245, votedFor=nacos3:7848, cost time=72 ms

2024-05-26 05:13:44,531 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:44,538 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:44,558 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=245, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:44,555 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=252, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:44,573 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=243, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:44,578 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:13:44,581 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:13:44,580 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:13:44,586 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:44,591 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:44,595 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:44,604 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:44,605 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:44,617 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:44,646 INFO onLeaderStart: term=252.

2024-05-26 05:13:44,644 INFO onLeaderStart: term=245.

2024-05-26 05:13:44,675 INFO onLeaderStart: term=243.

2024-05-26 05:13:49,476 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=246, granted=true, requestLastLogId=LogId [index=235, term=246], lastLogId=LogId [index=235, term=246].

2024-05-26 05:13:49,488 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=247, currTerm=246.

2024-05-26 05:13:49,489 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=246, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:13:49,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=247, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-26 05:13:49,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=247, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 05:16:00,219 INFO Node <naming_persistent_service_v2/nacos3:7848> term 247 start preVote.

2024-05-26 05:16:00,224 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:16:00,240 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=252, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:16:00,245 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=243, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:16:00,241 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=245, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:16:00,297 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:16:00,298 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:16:00,305 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=243, lastLogIncluded=0, lastLogIndex=243, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=174, type=Follower] is going to quit

2024-05-26 05:16:00,337 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:16:00,346 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=243, lastLogIncluded=0, lastLogIndex=243, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=173, type=Follower] is going to quit

2024-05-26 05:16:00,366 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=253, currTerm=252, granted=true, requestLastLogId=LogId [index=243, term=252], lastLogId=LogId [index=243, term=252].

2024-05-26 05:16:00,392 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=159, type=Follower] is going to quit

2024-05-26 05:16:00,401 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=158, type=Follower] is going to quit

2024-05-26 05:16:00,401 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=247, granted=true.

2024-05-26 05:16:00,416 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=173, type=Follower] is going to quit

2024-05-26 05:16:00,483 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=236, term=245], lastLogId=LogId [index=236, term=245].

2024-05-26 05:16:00,494 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=245.

2024-05-26 05:16:00,402 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=253, currTerm=252, granted=true, requestLastLogId=LogId [index=243, term=252], lastLogId=LogId [index=243, term=252].

2024-05-26 05:16:00,404 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=172, type=Follower] is going to quit

2024-05-26 05:16:00,507 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=253, currTerm=252.

2024-05-26 05:16:00,417 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=247.

2024-05-26 05:16:00,509 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:16:00,511 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=173, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 05:16:00,516 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=246, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 05:16:00,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=253, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 05:16:00,518 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:16:00,527 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=236, term=243], lastLogId=LogId [index=236, term=243].

2024-05-26 05:16:00,531 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=244, currTerm=243.

2024-05-26 05:16:00,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=248, votedFor=nacos3:7848, cost time=13 ms

2024-05-26 05:16:00,540 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=248, currTerm=248, granted=true, requestLastLogId=LogId [index=236, term=247], lastLogId=LogId [index=236, term=247].

2024-05-26 05:16:00,544 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=246, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 05:16:00,544 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=246, currTerm=246, granted=true, requestLastLogId=LogId [index=236, term=245], lastLogId=LogId [index=236, term=245].

2024-05-26 05:16:00,546 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=253, votedFor=nacos1:7848, cost time=15 ms

2024-05-26 05:16:00,549 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=244, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-26 05:16:00,550 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=244, currTerm=244, granted=true, requestLastLogId=LogId [index=236, term=243], lastLogId=LogId [index=236, term=243].

2024-05-26 05:16:00,550 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=173, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send3,5,main].

2024-05-26 05:16:00,570 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=244, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 05:16:00,571 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=244, currTerm=244.

2024-05-26 05:16:00,628 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=248, currTerm=248.

2024-05-26 05:16:00,639 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:16:00,637 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=246, currTerm=246.

2024-05-26 05:16:00,638 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=253, currTerm=253.

2024-05-26 05:16:00,640 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:16:00,644 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=248, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:16:00,650 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:16:00,651 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:16:00,659 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:16:00,667 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:16:00,667 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:16:00,675 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:16:00,688 INFO onLeaderStart: term=248.

2024-05-26 05:32:21,697 INFO Node <naming_instance_metadata/nacos3:7848> term 244 start preVote.

2024-05-26 05:32:21,700 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,175 INFO Node <naming_persistent_service/nacos3:7848> term 253 start preVote.

2024-05-26 05:32:21,816 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,791 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,782 INFO Node <naming_service_metadata/nacos3:7848> term 246 start preVote.

2024-05-26 05:32:21,170 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=248, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:32:21,912 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=245, currTerm=244, granted=true, requestLastLogId=LogId [index=237, term=244], lastLogId=LogId [index=237, term=244].

2024-05-26 05:32:21,930 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=247, currTerm=246, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:32:21,931 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=244, granted=true.

2024-05-26 05:32:21,932 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=137, type=Follower] is going to quit

2024-05-26 05:32:21,937 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=244.

2024-05-26 05:32:21,958 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=246, granted=true.

2024-05-26 05:32:21,991 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=246.

2024-05-26 05:32:21,962 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=254, currTerm=253, granted=true, requestLastLogId=LogId [index=244, term=253], lastLogId=LogId [index=244, term=253].

2024-05-26 05:32:22,050 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=253, granted=true.

2024-05-26 05:32:21,938 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=136, type=Follower] is going to quit

2024-05-26 05:32:22,060 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=137, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 05:32:21,966 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:32:21,937 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:32:21,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=245, votedFor=nacos3:7848, cost time=19 ms

2024-05-26 05:32:21,996 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:32:22,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=247, votedFor=nacos3:7848, cost time=13 ms

2024-05-26 05:32:22,058 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=253.

2024-05-26 05:32:22,093 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=249, currTerm=248.

2024-05-26 05:32:22,117 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,119 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,124 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:32:22,124 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,129 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=249, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 05:32:22,131 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=247, currTerm=247.

2024-05-26 05:32:22,128 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=245, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:32:22,133 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=254, currTerm=254.

2024-05-26 05:32:22,137 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=247, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:32:22,142 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:32:22,145 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:32:22,146 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=249, votedFor=nacos1:7848, cost time=12 ms

2024-05-26 05:32:22,151 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=249, currTerm=249.

2024-05-26 05:32:22,152 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=237, lastLogIncluded=0, lastLogIndex=237, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=137, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send7,5,main].

2024-05-26 05:32:22,154 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=249, currTerm=249, granted=true, requestLastLogId=LogId [index=237, term=248], lastLogId=LogId [index=237, term=248].

2024-05-26 05:32:22,154 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:32:22,155 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:32:22,159 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=249, granted=true, requestLastLogId=LogId [index=237, term=248], lastLogId=LogId [index=237, term=248].

2024-05-26 05:32:22,173 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:32:22,187 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=254, votedFor=nacos3:7848, cost time=43 ms

2024-05-26 05:32:22,176 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:32:22,184 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:32:22,207 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:32:22,272 INFO onLeaderStart: term=247.

2024-05-26 05:32:22,331 INFO onLeaderStart: term=245.

2024-05-26 05:48:41,842 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 05:48:41,833 INFO Node <naming_persistent_service/nacos3:7848> term 254 start preVote.

2024-05-26 05:48:42,369 INFO Node <naming_persistent_service_v2/nacos3:7848> term 249 start preVote.

2024-05-26 05:48:42,373 INFO Node <naming_persistent_service/nacos3:7848> term 254 start preVote.

2024-05-26 05:48:42,382 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:48:42,388 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=247, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:48:42,380 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=245, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:48:42,433 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=176, type=Follower] is going to quit

2024-05-26 05:48:42,432 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:48:42,437 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:48:42,441 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=161, type=Follower] is going to quit

2024-05-26 05:48:42,459 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=162, type=Follower] is going to quit

2024-05-26 05:48:42,437 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=255, currTerm=254, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 05:48:42,451 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=175, type=Follower] is going to quit

2024-05-26 05:48:42,461 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 05:48:42,471 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=238, term=245], lastLogId=LogId [index=238, term=245].

2024-05-26 05:48:42,469 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=254, granted=false.

2024-05-26 05:48:42,483 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=245.

2024-05-26 05:48:42,485 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=249, granted=true.

2024-05-26 05:48:42,501 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=249.

2024-05-26 05:48:42,515 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:48:42,484 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=254, granted=false.

2024-05-26 05:48:42,531 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=255, currTerm=254.

2024-05-26 05:48:42,541 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 05:48:42,554 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=246, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-26 05:48:42,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=250, votedFor=nacos3:7848, cost time=29 ms

2024-05-26 05:48:42,564 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=246, currTerm=246, granted=true, requestLastLogId=LogId [index=238, term=245], lastLogId=LogId [index=238, term=245].

2024-05-26 05:48:42,577 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=255, votedFor=0.0.0.0:0, cost time=44 ms

2024-05-26 05:48:42,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=246, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 05:48:42,586 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=246, currTerm=246, granted=true, requestLastLogId=LogId [index=238, term=245], lastLogId=LogId [index=238, term=245].

2024-05-26 05:48:42,576 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=250, currTerm=250, granted=true, requestLastLogId=LogId [index=238, term=249], lastLogId=LogId [index=238, term=249].

2024-05-26 05:48:42,597 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=246, currTerm=246.

2024-05-26 05:48:42,609 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=255, votedFor=nacos1:7848, cost time=27 ms

2024-05-26 05:48:42,621 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=254, currTerm=255.

2024-05-26 05:48:42,629 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=250, currTerm=250.

2024-05-26 05:48:42,626 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=254, currTerm=255.

2024-05-26 05:48:42,640 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=248, currTerm=247.

2024-05-26 05:48:42,644 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=254, currTerm=255.

2024-05-26 05:48:42,667 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=248, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 05:48:42,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=248, votedFor=nacos2:7848, cost time=18 ms

2024-05-26 05:48:42,695 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,739 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=248.

2024-05-26 05:48:42,809 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=250, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:48:42,814 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 05:48:42,828 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:48:42,864 INFO onLeaderStart: term=250.

2024-05-26 06:04:57,361 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=250, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:04:57,612 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:04:57,561 INFO Node <naming_service_metadata/nacos3:7848> term 248 start preVote.

2024-05-26 06:04:57,705 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:04:57,693 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=140, type=Follower] is going to quit

2024-05-26 06:04:57,612 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:04:57,570 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:04:57,569 INFO Node <naming_instance_metadata/nacos3:7848> term 246 start preVote.

2024-05-26 06:04:57,562 INFO Node <naming_persistent_service/nacos3:7848> term 255 start preVote.

2024-05-26 06:04:57,726 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=139, type=Follower] is going to quit

2024-05-26 06:04:57,991 INFO Node <naming_persistent_service/nacos3:7848> term 255 start preVote.

2024-05-26 06:04:58,015 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=251, currTerm=250, granted=true, requestLastLogId=LogId [index=239, term=250], lastLogId=LogId [index=239, term=250].

2024-05-26 06:04:58,034 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=256, currTerm=255, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,035 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=251, currTerm=250, granted=true, requestLastLogId=LogId [index=239, term=250], lastLogId=LogId [index=239, term=250].

2024-05-26 06:04:58,044 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 06:04:58,046 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=247, currTerm=246, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,047 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=247, currTerm=246, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,196 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=248, granted=true.

2024-05-26 06:04:58,215 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=246, granted=false.

2024-05-26 06:04:58,218 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=255, granted=false.

2024-05-26 06:04:58,247 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=246, granted=true.

2024-05-26 06:04:58,244 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=255, granted=true.

2024-05-26 06:04:58,249 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=251, currTerm=250.

2024-05-26 06:04:58,235 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=248.

2024-05-26 06:04:58,253 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=246.

2024-05-26 06:04:58,282 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=255.

2024-05-26 06:04:58,288 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=248, currTerm=249.

2024-05-26 06:04:58,292 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:04:58,289 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=247, currTerm=247.

2024-05-26 06:04:58,289 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:04:58,290 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:04:58,297 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=249, currTerm=249.

2024-05-26 06:04:58,306 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=251, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-26 06:04:58,307 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=251, currTerm=251.

2024-05-26 06:04:58,311 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=256, votedFor=nacos3:7848, cost time=20 ms

2024-05-26 06:04:58,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=247, votedFor=nacos3:7848, cost time=317 ms

2024-05-26 06:04:58,619 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:04:58,628 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:04:58,632 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=256, currTerm=256.

2024-05-26 06:04:58,639 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=249, votedFor=nacos3:7848, cost time=335 ms

2024-05-26 06:04:58,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=251, votedFor=nacos2:7848, cost time=33 ms

2024-05-26 06:04:58,655 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:04:58,656 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:04:58,655 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:05:16,567 INFO Node <naming_persistent_service_v2/nacos3:7848> term 251 start preVote.

2024-05-26 06:05:16,582 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:05:16,570 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:05:16,573 INFO Node <naming_persistent_service/nacos3:7848> term 256 start preVote.

2024-05-26 06:05:16,736 INFO Node <naming_instance_metadata/nacos3:7848> term 247 start preVote.

2024-05-26 06:05:16,748 INFO Node <naming_service_metadata/nacos3:7848> term 249 start preVote.

2024-05-26 06:05:16,756 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:05:16,765 INFO Node <naming_instance_metadata/nacos3:7848> term 247 start preVote.

2024-05-26 06:05:16,745 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:05:16,784 INFO Node <naming_persistent_service/nacos3:7848> term 256 start preVote.

2024-05-26 06:05:16,793 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 06:05:16,794 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=247, term=256], lastLogId=LogId [index=247, term=256].

2024-05-26 06:05:16,808 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=256.

2024-05-26 06:05:16,801 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=250, currTerm=249.

2024-05-26 06:05:16,806 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=251, granted=true.

2024-05-26 06:05:16,834 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=251.

2024-05-26 06:05:16,823 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=248, currTerm=247, because the leader nacos2:7848's lease is still valid.

2024-05-26 06:05:16,837 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=247.

2024-05-26 06:05:16,841 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=252.

2024-05-26 06:05:16,844 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=250, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 06:05:16,843 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=257, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-26 06:05:16,847 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=248, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 06:05:16,846 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=251, currTerm=252.

2024-05-26 06:05:16,847 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=256, currTerm=257.

2024-05-26 06:05:16,849 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:05:16,850 WARN Node <naming_instance_metadata/nacos3:7848> raise term 248 when get lastLogId.

2024-05-26 06:05:16,850 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=256, currTerm=257.

2024-05-26 06:05:16,855 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=252, granted=true, requestLastLogId=LogId [index=240, term=251], lastLogId=LogId [index=240, term=251].

2024-05-26 06:05:16,857 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=256, currTerm=257.

2024-05-26 06:05:16,860 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=247, currTerm=248.

2024-05-26 06:05:16,863 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=247, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 06:05:16,891 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=250, votedFor=nacos2:7848, cost time=44 ms

2024-05-26 06:05:16,894 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=249, currTerm=250.

2024-05-26 06:05:16,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=257, votedFor=nacos1:7848, cost time=40 ms

2024-05-26 06:05:16,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=248, votedFor=nacos1:7848, cost time=43 ms

2024-05-26 06:05:16,915 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=252, votedFor=nacos3:7848, cost time=55 ms

2024-05-26 06:05:16,915 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=247, currTerm=248.

2024-05-26 06:05:16,924 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=249, currTerm=250.

2024-05-26 06:05:16,944 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=249, currTerm=250.

2024-05-26 06:05:16,947 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=256, currTerm=257.

2024-05-26 06:05:16,949 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=256, currTerm=257.

2024-05-26 06:15:39,782 INFO Node <naming_service_metadata/nacos3:7848> term 250 start preVote.

2024-05-26 06:15:39,463 INFO Node <naming_instance_metadata/nacos3:7848> term 248 start preVote.

2024-05-26 06:15:39,484 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:15:39,484 INFO Node <naming_persistent_service/nacos3:7848> term 257 start preVote.

2024-05-26 06:15:39,810 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:15:39,486 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:15:39,816 INFO Node <naming_instance_metadata/nacos3:7848> term 248 start preVote.

2024-05-26 06:15:39,869 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=253, currTerm=252, granted=true, requestLastLogId=LogId [index=241, term=252], lastLogId=LogId [index=241, term=252].

2024-05-26 06:15:39,895 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=258, currTerm=257, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:15:39,913 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=241, term=248], lastLogId=LogId [index=241, term=248].

2024-05-26 06:15:39,915 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=250, granted=true.

2024-05-26 06:15:39,929 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=250.

2024-05-26 06:15:39,931 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=248, granted=false.

2024-05-26 06:15:39,932 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=253, currTerm=252.

2024-05-26 06:15:39,932 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:15:39,947 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 06:15:39,951 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=257, granted=true.

2024-05-26 06:15:39,955 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=257.

2024-05-26 06:15:39,963 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=248, granted=false.

2024-05-26 06:15:39,966 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:15:39,972 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=249, currTerm=248.

2024-05-26 06:15:39,971 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=253, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 06:15:39,974 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=248, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 06:15:39,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=251, votedFor=nacos3:7848, cost time=34 ms

2024-05-26 06:15:39,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=249, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-26 06:15:39,996 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=253, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 06:15:40,000 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=258, votedFor=nacos3:7848, cost time=30 ms

2024-05-26 06:15:40,011 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=249, votedFor=nacos2:7848, cost time=16 ms

2024-05-26 06:15:40,032 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=241, term=250], lastLogId=LogId [index=241, term=250].

2024-05-26 06:15:40,062 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:15:40,078 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:15:40,103 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=251, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:15:40,123 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 06:15:40,112 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=258, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:15:40,131 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 06:15:40,128 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=248, currTerm=249.

2024-05-26 06:15:40,140 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:15:40,134 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=248, currTerm=249.

2024-05-26 06:15:40,147 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:15:40,164 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 06:15:40,168 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 06:15:40,180 INFO onLeaderStart: term=251.

2024-05-26 06:15:40,196 INFO onLeaderStart: term=258.

2024-05-26 06:32:00,441 INFO Node <naming_instance_metadata/nacos3:7848> term 249 start preVote.

2024-05-26 06:32:00,543 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:32:00,544 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 06:32:00,472 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=258, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:32:00,472 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=251, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:32:00,447 INFO Node <naming_persistent_service_v2/nacos3:7848> term 253 start preVote.

2024-05-26 06:32:00,593 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=249, lastLogIncluded=0, lastLogIndex=249, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=176, type=Follower] is going to quit

2024-05-26 06:32:00,592 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=164, type=Follower] is going to quit

2024-05-26 06:32:00,598 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=249, lastLogIncluded=0, lastLogIndex=249, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=175, type=Follower] is going to quit

2024-05-26 06:32:00,596 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:32:00,610 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=259, currTerm=258.

2024-05-26 06:32:00,599 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=164, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 06:32:00,620 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=163, type=Follower] is going to quit

2024-05-26 06:32:00,602 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:32:00,624 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 06:32:00,683 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=251.

2024-05-26 06:32:00,692 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 254, expect=253.

2024-05-26 06:32:00,744 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=253, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-26 06:32:00,747 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 250, expect=249.

2024-05-26 06:32:00,769 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=249, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-26 06:32:00,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=259, votedFor=0.0.0.0:0, cost time=150 ms

2024-05-26 06:32:00,775 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=252, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-26 06:32:00,782 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=254, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-26 06:32:00,783 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=253, currTerm=254.

2024-05-26 06:32:00,789 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=250, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 06:32:00,793 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=252, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 06:32:00,795 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=249, currTerm=250.

2024-05-26 06:32:00,796 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=259, votedFor=nacos2:7848, cost time=22 ms

2024-05-26 06:32:00,801 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=250, granted=true, requestLastLogId=LogId [index=242, term=249], lastLogId=LogId [index=242, term=249].

2024-05-26 06:32:00,809 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=254.

2024-05-26 06:32:00,813 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=254, currTerm=254, granted=true, requestLastLogId=LogId [index=242, term=253], lastLogId=LogId [index=242, term=253].

2024-05-26 06:32:00,809 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=252, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 06:32:00,803 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 06:32:00,796 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=164, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send5,5,main].

2024-05-26 06:32:00,813 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,816 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=250, currTerm=250.

2024-05-26 06:32:00,824 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=252, currTerm=252.

2024-05-26 06:32:00,836 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=252, currTerm=252, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 06:32:00,825 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=259, currTerm=259.

2024-05-26 06:32:00,849 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 06:32:00,856 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=254, votedFor=nacos1:7848, cost time=33 ms

2024-05-26 06:32:00,860 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=250, votedFor=nacos1:7848, cost time=30 ms

2024-05-26 06:32:00,861 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:48:15,705 INFO Node <naming_service_metadata/nacos3:7848> term 252 start preVote.

2024-05-26 06:48:15,717 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,780 INFO Node <naming_instance_metadata/nacos3:7848> term 250 start preVote.

2024-05-26 06:48:15,792 INFO Node <naming_instance_metadata/nacos3:7848> term 250 start preVote.

2024-05-26 06:48:15,832 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,836 INFO Node <naming_instance_metadata/nacos3:7848> term 250 start preVote.

2024-05-26 06:48:15,781 INFO Node <naming_persistent_service_v2/nacos3:7848> term 254 start preVote.

2024-05-26 06:48:15,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,841 INFO Node <naming_instance_metadata/nacos3:7848> term 250 start preVote.

2024-05-26 06:48:15,864 INFO Node <naming_persistent_service_v2/nacos3:7848> term 254 start preVote.

2024-05-26 06:48:15,874 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=253, currTerm=252.

2024-05-26 06:48:15,915 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=250, granted=true.

2024-05-26 07:03:44,405 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=253, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-26 07:03:44,409 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=250.

2024-05-26 07:03:44,503 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=243, term=252], lastLogId=LogId [index=243, term=252].

2024-05-26 07:03:44,505 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:03:44,519 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=255, currTerm=254, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:03:44,549 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=252, currTerm=253.

2024-05-26 07:03:44,564 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=254, granted=true.

2024-05-26 07:03:44,565 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=251, votedFor=nacos3:7848, cost time=44 ms

2024-05-26 07:03:44,568 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=254.

2024-05-26 07:03:44,566 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=252, currTerm=253.

2024-05-26 07:03:44,575 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:03:44,571 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=251, currTerm=251.

2024-05-26 07:03:44,584 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,591 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,593 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,597 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=253, votedFor=nacos2:7848, cost time=21 ms

2024-05-26 07:03:44,597 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=250, currTerm=251.

2024-05-26 07:03:44,604 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=250, currTerm=251.

2024-05-26 07:03:44,604 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=252, currTerm=253.

2024-05-26 07:03:44,608 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=255, votedFor=nacos3:7848, cost time=28 ms

2024-05-26 07:03:44,617 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,609 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=250, currTerm=251.

2024-05-26 07:03:44,618 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,624 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=250, currTerm=251.

2024-05-26 07:03:44,624 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=255, currTerm=255.

2024-05-26 07:03:44,625 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 07:03:44,633 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=243, term=250], lastLogId=LogId [index=243, term=250].

2024-05-26 07:03:44,626 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:44,642 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 07:03:44,662 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 07:03:49,547 INFO Node <naming_persistent_service/nacos3:7848> term 259 start preVote.

2024-05-26 07:03:49,547 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:03:49,554 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=259, granted=true.

2024-05-26 07:03:49,554 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=259.

2024-05-26 07:03:49,572 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=260, votedFor=nacos3:7848, cost time=16 ms

2024-05-26 07:03:49,577 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:03:49,591 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=260, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:03:49,595 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 07:03:49,599 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:03:49,604 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:03:49,612 INFO onLeaderStart: term=260.

2024-05-26 07:04:07,714 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:04:07,725 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=260, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:04:07,715 INFO Node <naming_persistent_service_v2/nacos3:7848> term 255 start preVote.

2024-05-26 07:04:08,046 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:04:08,037 INFO Node <naming_instance_metadata/nacos3:7848> term 251 start preVote.

2024-05-26 07:04:08,128 INFO Node <naming_persistent_service_v2/nacos3:7848> term 255 start preVote.

2024-05-26 07:04:08,103 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:04:08,154 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=256, currTerm=255, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:04:08,105 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=251, lastLogIncluded=0, lastLogIndex=251, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=179, type=Follower] is going to quit

2024-05-26 07:04:08,162 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=251, lastLogIncluded=0, lastLogIndex=251, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=178, type=Follower] is going to quit

2024-05-26 07:04:08,140 INFO Node <naming_instance_metadata/nacos3:7848> term 251 start preVote.

2024-05-26 07:04:08,166 INFO Node <naming_instance_metadata/nacos3:7848> term 251 start preVote.

2024-05-26 07:04:08,179 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=252, currTerm=251, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:04:08,182 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=261, currTerm=260, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 07:04:08,199 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=261, currTerm=260, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 07:04:08,204 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=251, granted=true.

2024-05-26 07:04:08,239 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=254, currTerm=253, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:04:08,219 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=261, currTerm=260.

2024-05-26 07:04:08,203 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=255, granted=true.

2024-05-26 07:04:08,256 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=255.

2024-05-26 07:04:08,247 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=251.

2024-05-26 07:04:08,263 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:04:08,267 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=253.

2024-05-26 07:04:08,275 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=253, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:04:08,283 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=261, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-26 07:04:08,298 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=256, votedFor=nacos3:7848, cost time=36 ms

2024-05-26 07:04:08,301 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,306 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=254, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-26 07:04:08,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=252, votedFor=nacos3:7848, cost time=42 ms

2024-05-26 07:04:08,328 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,331 WARN Node <naming_instance_metadata/nacos3:7848> raise term 252 when get lastLogId.

2024-05-26 07:04:08,324 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,335 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,339 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,341 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=252.

2024-05-26 07:04:08,328 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=261, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 07:04:08,335 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:04:08,338 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=256, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:04:08,357 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=254, votedFor=nacos1:7848, cost time=26 ms

2024-05-26 07:04:08,357 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,355 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,361 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 07:04:08,388 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:04:08,403 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 07:04:08,406 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:04:08,424 INFO onLeaderStart: term=256.

2024-05-26 07:05:27,566 INFO Node <naming_instance_metadata/nacos3:7848> term 252 start preVote.

2024-05-26 07:05:27,684 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:05:27,825 INFO Node <naming_instance_metadata/nacos3:7848> term 252 start preVote.

2024-05-26 07:05:28,290 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=252, term=261], lastLogId=LogId [index=252, term=261].

2024-05-26 07:05:28,292 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=256, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:05:28,285 INFO Node <naming_service_metadata/nacos3:7848> term 254 start preVote.

2024-05-26 07:05:28,315 INFO Node <naming_instance_metadata/nacos3:7848> term 252 start preVote.

2024-05-26 07:05:28,338 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:05:28,348 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=245, lastLogIncluded=0, lastLogIndex=245, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=141, type=Follower] is going to quit

2024-05-26 07:05:28,390 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:05:28,394 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=255, currTerm=254, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 07:05:28,416 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 07:05:28,421 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=245, lastLogIncluded=0, lastLogIndex=245, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=142, type=Follower] is going to quit

2024-05-26 07:05:28,447 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=245, term=256], lastLogId=LogId [index=245, term=256].

2024-05-26 07:05:28,447 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=253, currTerm=252, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:05:28,432 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=261, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:05:28,450 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=245, term=256], lastLogId=LogId [index=245, term=256].

2024-05-26 07:05:28,454 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=245, term=256], lastLogId=LogId [index=245, term=256].

2024-05-26 07:05:28,468 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=262, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-26 07:05:28,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=262, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 07:05:28,509 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=253, currTerm=252.

2024-05-26 07:05:28,516 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:05:28,520 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=255, currTerm=254.

2024-05-26 07:05:28,578 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=257, currTerm=256.

2024-05-26 07:05:28,578 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=253, votedFor=0.0.0.0:0, cost time=65 ms

2024-05-26 07:05:28,602 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:05:28,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=257, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-26 07:05:28,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=255, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-26 07:05:28,645 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=254, currTerm=255.

2024-05-26 07:05:28,641 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:05:28,643 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=253, votedFor=nacos2:7848, cost time=39 ms

2024-05-26 07:05:28,641 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:05:28,664 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=252, currTerm=253.

2024-05-26 07:05:28,650 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=254, currTerm=255.

2024-05-26 07:05:28,669 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=252, currTerm=253.

2024-05-26 07:05:28,676 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=257, votedFor=nacos2:7848, cost time=29 ms

2024-05-26 07:05:28,679 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=252, currTerm=253.

2024-05-26 07:05:28,682 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=257.

2024-05-26 07:05:28,693 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=252, currTerm=253.

2024-05-26 07:05:28,725 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=252, currTerm=253.

2024-05-26 07:05:28,726 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=252, currTerm=253.

2024-05-26 07:05:28,727 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:05:28,735 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=255, votedFor=nacos2:7848, cost time=64 ms

2024-05-26 07:15:58,605 INFO Node <naming_service_metadata/nacos3:7848> term 255 start preVote.

2024-05-26 07:15:59,040 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:15:59,014 INFO Node <naming_instance_metadata/nacos3:7848> term 253 start preVote.

2024-05-26 07:15:59,013 INFO Node <naming_persistent_service/nacos3:7848> term 262 start preVote.

2024-05-26 07:15:59,069 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=258, currTerm=257, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:15:59,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:15:59,014 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:15:59,109 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=256, currTerm=255, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:15:59,102 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=263, currTerm=262, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:15:59,155 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=263, currTerm=262.

2024-05-26 07:15:59,100 INFO Node <naming_instance_metadata/nacos3:7848> term 253 start preVote.

2024-05-26 07:15:59,174 INFO Node <naming_instance_metadata/nacos3:7848> term 253 start preVote.

2024-05-26 07:15:59,111 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=258, currTerm=257, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:15:59,119 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=256, currTerm=255.

2024-05-26 07:15:59,191 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=255, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:15:59,180 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=258, currTerm=257.

2024-05-26 07:15:59,181 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=254, currTerm=253, granted=true, requestLastLogId=LogId [index=246, term=253], lastLogId=LogId [index=246, term=253].

2024-05-26 07:15:59,238 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=253.

2024-05-26 07:15:59,243 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=257, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:15:59,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=258, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-26 07:15:59,261 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=254, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-26 07:15:59,261 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=263, votedFor=0.0.0.0:0, cost time=102 ms

2024-05-26 07:15:59,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=256, votedFor=0.0.0.0:0, cost time=75 ms

2024-05-26 07:15:59,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=254, votedFor=nacos1:7848, cost time=15 ms

2024-05-26 07:15:59,287 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=253, currTerm=254.

2024-05-26 07:15:59,290 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=253, currTerm=254.

2024-05-26 07:15:59,292 WARN Node <naming_instance_metadata/nacos3:7848> raise term 254 when get lastLogId.

2024-05-26 07:15:59,289 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=258, votedFor=nacos1:7848, cost time=23 ms

2024-05-26 07:15:59,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=256, votedFor=nacos1:7848, cost time=18 ms

2024-05-26 07:15:59,291 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=263, votedFor=nacos2:7848, cost time=15 ms

2024-05-26 07:15:59,297 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=253, currTerm=254.

2024-05-26 07:15:59,319 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=255, currTerm=256.

2024-05-26 07:15:59,327 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=253, currTerm=254.

2024-05-26 07:15:59,325 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:15:59,326 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=262, currTerm=263.

2024-05-26 07:15:59,334 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=255, currTerm=256.

2024-05-26 07:15:59,336 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=253, currTerm=254.

2024-05-26 07:15:59,340 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=262, currTerm=263.

2024-05-26 07:32:13,604 INFO Node <naming_persistent_service_v2/nacos3:7848> term 258 start preVote.

2024-05-26 07:32:13,813 INFO Node <naming_service_metadata/nacos3:7848> term 256 start preVote.

2024-05-26 07:32:14,440 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:13,693 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:13,692 INFO Node <naming_instance_metadata/nacos3:7848> term 254 start preVote.

2024-05-26 07:32:14,492 INFO Node <naming_persistent_service_v2/nacos3:7848> term 258 start preVote.

2024-05-26 07:32:14,502 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=247, term=256], lastLogId=LogId [index=247, term=256].

2024-05-26 07:32:13,687 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:14,488 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=254, term=263], lastLogId=LogId [index=254, term=263].

2024-05-26 07:32:14,492 INFO Node <naming_instance_metadata/nacos3:7848> term 254 start preVote.

2024-05-26 07:32:14,543 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=259, currTerm=258, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:32:14,568 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=255, currTerm=254, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:32:14,559 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=256, granted=false.

2024-05-26 07:32:14,593 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=257, currTerm=256.

2024-05-26 07:32:14,565 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=259, currTerm=258.

2024-05-26 07:32:14,598 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=256, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:32:14,623 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=254, granted=true.

2024-05-26 07:32:14,626 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=254.

2024-05-26 07:32:14,629 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:32:14,649 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=263.

2024-05-26 07:32:14,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=263, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:32:14,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=257, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-26 07:32:14,660 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=255, votedFor=nacos3:7848, cost time=28 ms

2024-05-26 07:32:14,660 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=259, votedFor=0.0.0.0:0, cost time=65 ms

2024-05-26 07:32:14,663 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,671 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=258, currTerm=259.

2024-05-26 07:32:14,670 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:32:14,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=264, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-26 07:32:14,695 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=258, currTerm=259.

2024-05-26 07:32:14,691 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,698 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=258, currTerm=259.

2024-05-26 07:32:14,701 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=255, currTerm=255.

2024-05-26 07:32:14,704 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=257, votedFor=nacos2:7848, cost time=40 ms

2024-05-26 07:32:14,711 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=256, currTerm=257.

2024-05-26 07:32:14,711 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=264, votedFor=nacos1:7848, cost time=15 ms

2024-05-26 07:32:14,726 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=259, votedFor=nacos2:7848, cost time=20 ms

2024-05-26 07:32:14,735 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=258, currTerm=259.

2024-05-26 07:32:14,757 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=255, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:32:14,789 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 07:32:14,801 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:32:14,836 INFO onLeaderStart: term=255.

2024-05-26 07:48:34,909 INFO Node <naming_service_metadata/nacos3:7848> term 257 start preVote.

2024-05-26 07:48:34,919 INFO Node <naming_persistent_service/nacos3:7848> term 264 start preVote.

2024-05-26 07:48:34,956 INFO Node <naming_persistent_service/nacos3:7848> term 264 start preVote.

2024-05-26 07:48:34,959 INFO Node <naming_service_metadata/nacos3:7848> term 257 start preVote.

2024-05-26 07:48:35,372 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=255, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:48:34,915 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:48:35,445 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:48:35,458 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 07:48:35,495 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=178, type=Follower] is going to quit

2024-05-26 07:48:35,498 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:48:35,456 INFO Node <naming_persistent_service_v2/nacos3:7848> term 259 start preVote.

2024-05-26 07:48:35,519 INFO Node <naming_persistent_service_v2/nacos3:7848> term 259 start preVote.

2024-05-26 07:48:35,518 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=264, granted=false.

2024-05-26 07:48:35,533 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=265, currTerm=264, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:48:35,535 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=177, type=Follower] is going to quit

2024-05-26 07:48:35,571 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=248, term=259], lastLogId=LogId [index=248, term=259].

2024-05-26 07:48:35,584 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=265, currTerm=264.

2024-05-26 07:48:35,574 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=248, term=255], lastLogId=LogId [index=248, term=255].

2024-05-26 07:48:35,622 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=248, term=255], lastLogId=LogId [index=248, term=255].

2024-05-26 07:48:35,571 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=258, currTerm=257, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:48:35,633 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=256, currTerm=255.

2024-05-26 07:48:35,637 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 258, expect=257.

2024-05-26 07:48:35,641 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=257, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-26 07:48:35,625 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=260, currTerm=259.

2024-05-26 07:48:35,646 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=265, votedFor=0.0.0.0:0, cost time=60 ms

2024-05-26 07:48:35,657 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=258, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 07:48:35,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=256, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-26 07:48:35,671 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=258, currTerm=258.

2024-05-26 07:48:35,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=260, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-26 07:48:35,675 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=257, currTerm=258.

2024-05-26 07:48:35,675 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=256, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 07:48:35,682 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=257, currTerm=258.

2024-05-26 07:48:35,680 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=259, currTerm=260.

2024-05-26 07:48:35,699 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=265, votedFor=nacos2:7848, cost time=40 ms

2024-05-26 07:48:35,701 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=259, currTerm=260.

2024-05-26 07:48:35,710 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 07:48:35,719 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=258, votedFor=nacos1:7848, cost time=23 ms

2024-05-26 07:48:35,712 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=264, currTerm=265.

2024-05-26 07:48:35,722 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=257, currTerm=258.

2024-05-26 07:48:35,727 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=260, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 07:48:35,724 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=264, currTerm=265.

2024-05-26 07:48:35,729 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=259, currTerm=260.

2024-05-26 07:48:35,734 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=264, currTerm=265.

2024-05-26 07:48:35,738 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=259, currTerm=260.

2024-05-26 08:05:01,512 INFO Node <naming_service_metadata/nacos3:7848> term 258 start preVote.

2024-05-26 08:05:01,517 INFO Node <naming_persistent_service/nacos3:7848> term 265 start preVote.

2024-05-26 08:05:01,535 INFO Node <naming_service_metadata/nacos3:7848> term 258 start preVote.

2024-05-26 08:05:01,518 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=265, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:05:01,515 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:05:01,518 INFO Node <naming_persistent_service_v2/nacos3:7848> term 260 start preVote.

2024-05-26 08:05:01,521 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:05:01,547 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=266, currTerm=265, granted=true, requestLastLogId=LogId [index=256, term=265], lastLogId=LogId [index=256, term=265].

2024-05-26 08:05:01,555 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=249, term=256], lastLogId=LogId [index=249, term=256].

2024-05-26 08:05:01,612 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=266, currTerm=265.

2024-05-26 08:05:01,611 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=261, currTerm=260, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:05:01,624 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=259, currTerm=258, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 08:05:01,642 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=259, currTerm=258.

2024-05-26 08:05:01,678 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=266, votedFor=0.0.0.0:0, cost time=61 ms

2024-05-26 08:05:01,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=259, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-26 08:05:01,687 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=258, currTerm=259.

2024-05-26 08:05:01,698 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=266, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 08:05:01,701 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=265, currTerm=266.

2024-05-26 08:05:01,707 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=260, granted=true.

2024-05-26 08:05:01,715 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=260.

2024-05-26 08:05:01,719 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:05:01,721 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=261, currTerm=261.

2024-05-26 08:05:01,727 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=259, votedFor=nacos2:7848, cost time=38 ms

2024-05-26 08:05:01,734 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=256.

2024-05-26 08:05:01,730 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=258, currTerm=259.

2024-05-26 08:05:01,739 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=256, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:05:01,751 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=258, currTerm=259.

2024-05-26 08:05:01,755 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=257, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-26 08:05:01,755 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=265, currTerm=266.

2024-05-26 08:05:01,774 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=258, currTerm=259.

2024-05-26 08:05:01,776 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=261, votedFor=nacos3:7848, cost time=27 ms

2024-05-26 08:05:01,777 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=257, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 08:05:01,778 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:05:01,806 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=258, currTerm=259.

2024-05-26 08:20:07,238 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=262, currTerm=261, because the leader nacos2:7848's lease is still valid.

2024-05-26 08:20:07,234 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=257, term=266], lastLogId=LogId [index=257, term=266].

2024-05-26 08:20:07,259 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=250, term=259], lastLogId=LogId [index=250, term=259].

2024-05-26 08:20:07,262 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=250, term=257], lastLogId=LogId [index=250, term=257].

2024-05-26 08:20:07,293 INFO Node <naming_service_metadata/nacos3:7848> term 259 start preVote.

2024-05-26 08:20:07,316 INFO Node <naming_service_metadata/nacos3:7848> term 259 start preVote.

2024-05-26 08:20:07,314 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:07,297 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:20:07,313 INFO Node <naming_persistent_service/nacos3:7848> term 266 start preVote.

2024-05-26 08:20:07,446 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=258, currTerm=257.

2024-05-26 08:20:07,451 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 260, expect=259.

2024-05-26 08:20:07,453 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=266, granted=true.

2024-05-26 08:20:07,464 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=266.

2024-05-26 08:20:07,454 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:20:07,472 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 08:20:07,473 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:07,482 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=261, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:20:07,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=258, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-26 08:20:07,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=260, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-26 08:20:07,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=262, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-26 08:20:07,503 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=259, currTerm=260.

2024-05-26 08:20:07,506 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=259, currTerm=260.

2024-05-26 08:20:07,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=267, votedFor=nacos3:7848, cost time=20 ms

2024-05-26 08:20:07,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=258, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 08:20:07,510 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=260, currTerm=260.

2024-05-26 08:20:07,511 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=267, currTerm=267.

2024-05-26 08:20:07,515 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:07,521 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=262, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 08:20:07,531 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=260, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 08:20:07,534 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=259, currTerm=260.

2024-05-26 08:20:32,937 INFO Node <naming_instance_metadata/nacos3:7848> term 258 start preVote.

2024-05-26 08:20:33,267 INFO Node <naming_persistent_service/nacos3:7848> term 267 start preVote.

2024-05-26 08:20:33,276 INFO Node <naming_persistent_service/nacos3:7848> term 267 start preVote.

2024-05-26 08:20:33,265 INFO Node <naming_persistent_service_v2/nacos3:7848> term 262 start preVote.

2024-05-26 08:20:33,555 INFO Node <naming_persistent_service/nacos3:7848> term 267 start preVote.

2024-05-26 08:20:33,268 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:33,533 INFO Node <naming_service_metadata/nacos3:7848> term 260 start preVote.

2024-05-26 08:20:33,533 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:33,534 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:20:33,590 INFO Node <naming_service_metadata/nacos3:7848> term 260 start preVote.

2024-05-26 08:20:32,940 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:20:33,562 INFO Node <naming_persistent_service_v2/nacos3:7848> term 262 start preVote.

2024-05-26 08:20:33,598 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=263, currTerm=262, granted=true, requestLastLogId=LogId [index=251, term=262], lastLogId=LogId [index=251, term=262].

2024-05-26 08:20:33,579 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=259, currTerm=258, because the leader nacos2:7848's lease is still valid.

2024-05-26 08:20:33,581 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=258, term=267], lastLogId=LogId [index=258, term=267].

2024-05-26 08:20:33,594 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=261, currTerm=260, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 08:20:33,684 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=259, currTerm=258.

2024-05-26 08:20:33,684 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=267, granted=true.

2024-05-26 08:20:33,697 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=267.

2024-05-26 08:20:33,696 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=258, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:20:33,696 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=262, granted=false.

2024-05-26 08:20:33,700 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,706 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=262, granted=false.

2024-05-26 08:20:33,720 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=262, granted=true.

2024-05-26 08:20:33,723 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=260, granted=true.

2024-05-26 08:20:33,747 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=260.

2024-05-26 08:20:33,723 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=262.

2024-05-26 08:20:33,799 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:33,739 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=259, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-26 08:20:33,775 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:33,802 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=268, votedFor=nacos3:7848, cost time=69 ms

2024-05-26 08:20:33,822 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,823 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=263, votedFor=nacos3:7848, cost time=26 ms

2024-05-26 08:20:33,833 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,827 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=268, currTerm=268.

2024-05-26 08:20:33,832 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=261, votedFor=nacos3:7848, cost time=29 ms

2024-05-26 08:20:33,836 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=259, votedFor=nacos1:7848, cost time=18 ms

2024-05-26 08:20:33,837 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=263, currTerm=263.

2024-05-26 08:20:33,839 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,856 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,844 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,849 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=258, currTerm=259.

2024-05-26 08:20:33,861 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,867 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=261, currTerm=261.

2024-05-26 08:20:33,869 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=258, currTerm=259.

2024-05-26 08:20:33,874 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,879 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=268, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:20:33,889 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,904 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=261, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:20:33,909 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 08:20:33,916 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 08:20:33,923 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:20:33,925 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:20:33,974 INFO onLeaderStart: term=261.

2024-05-26 08:20:33,990 INFO onLeaderStart: term=268.

2024-05-26 08:36:50,900 INFO Node <naming_instance_metadata/nacos3:7848> term 259 start preVote.

2024-05-26 08:36:50,926 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:36:50,991 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=268, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:36:51,080 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=261, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:36:51,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=263, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:36:51,099 INFO Node <naming_persistent_service_v2/nacos3:7848> term 263 start preVote.

2024-05-26 08:36:51,124 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=252, term=259], lastLogId=LogId [index=252, term=259].

2024-05-26 08:36:51,148 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=259, lastLogIncluded=0, lastLogIndex=259, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=181, type=Follower] is going to quit

2024-05-26 08:36:51,151 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:36:51,153 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=165, type=Follower] is going to quit

2024-05-26 08:36:51,167 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=166, type=Follower] is going to quit

2024-05-26 08:36:51,168 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=259, lastLogIncluded=0, lastLogIndex=259, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=180, type=Follower] is going to quit

2024-05-26 08:36:51,179 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=252, term=261], lastLogId=LogId [index=252, term=261].

2024-05-26 08:36:51,175 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=259, term=268], lastLogId=LogId [index=259, term=268].

2024-05-26 08:36:51,158 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:36:51,193 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=252, term=261], lastLogId=LogId [index=252, term=261].

2024-05-26 08:36:51,222 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=264, currTerm=263, because the leader nacos2:7848's lease is still valid.

2024-05-26 08:36:51,193 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=259, term=268], lastLogId=LogId [index=259, term=268].

2024-05-26 08:36:51,225 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=268.

2024-05-26 08:36:51,233 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=263.

2024-05-26 08:36:51,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=263, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:36:51,245 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=259, granted=true.

2024-05-26 08:36:51,246 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 08:36:51,253 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=259.

2024-05-26 08:36:51,256 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=269, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-26 08:36:51,269 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=264, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-26 08:36:51,275 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:36:51,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=262, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 08:36:51,317 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=269, votedFor=nacos1:7848, cost time=47 ms

2024-05-26 08:36:51,317 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=260, votedFor=nacos3:7848, cost time=40 ms

2024-05-26 08:36:51,319 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=264, votedFor=nacos1:7848, cost time=42 ms

2024-05-26 08:36:51,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=262, votedFor=nacos1:7848, cost time=26 ms

2024-05-26 08:36:51,336 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=262, currTerm=262.

2024-05-26 08:36:51,343 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=263, currTerm=264.

2024-05-26 08:36:51,349 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=260, currTerm=260.

2024-05-26 08:36:51,392 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=269, currTerm=269.

2024-05-26 08:36:51,448 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=260, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:36:51,467 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 08:36:51,458 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:36:51,474 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:36:51,482 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:36:51,502 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 08:36:51,505 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:36:51,524 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=263, currTerm=264.

2024-05-26 08:36:51,554 INFO onLeaderStart: term=260.

2024-05-26 08:53:05,868 INFO Node <naming_persistent_service/nacos3:7848> term 269 start preVote.

2024-05-26 08:53:06,155 INFO Node <naming_persistent_service_v2/nacos3:7848> term 264 start preVote.

2024-05-26 08:53:06,239 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:06,174 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=260, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:53:06,212 INFO Node <naming_service_metadata/nacos3:7848> term 262 start preVote.

2024-05-26 08:53:06,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:06,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=269, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:06,285 INFO Node <naming_persistent_service_v2/nacos3:7848> term 264 start preVote.

2024-05-26 08:53:06,347 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:53:06,328 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=253, lastLogIncluded=0, lastLogIndex=253, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=179, type=Follower] is going to quit

2024-05-26 08:53:06,375 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=265, currTerm=264, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:53:06,390 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=270, currTerm=269, granted=true, requestLastLogId=LogId [index=260, term=269], lastLogId=LogId [index=260, term=269].

2024-05-26 08:53:06,391 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=253, lastLogIncluded=0, lastLogIndex=253, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=180, type=Follower] is going to quit

2024-05-26 08:53:06,379 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=263, currTerm=262, granted=true, requestLastLogId=LogId [index=253, term=262], lastLogId=LogId [index=253, term=262].

2024-05-26 08:53:06,417 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=261, currTerm=260, granted=true, requestLastLogId=LogId [index=253, term=260], lastLogId=LogId [index=253, term=260].

2024-05-26 08:53:06,431 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=262, granted=true.

2024-05-26 08:53:06,444 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=264, granted=false.

2024-05-26 08:53:06,479 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=264, granted=false.

2024-05-26 08:53:06,444 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=262.

2024-05-26 08:53:06,452 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=269, granted=false.

2024-05-26 08:53:06,491 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,476 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=261, currTerm=260.

2024-05-26 08:53:06,515 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=264, granted=true.

2024-05-26 08:53:06,518 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=264.

2024-05-26 08:53:06,523 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,497 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=270, currTerm=269.

2024-05-26 08:53:06,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=261, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-26 08:53:06,541 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=261, currTerm=261, granted=true, requestLastLogId=LogId [index=253, term=260], lastLogId=LogId [index=253, term=260].

2024-05-26 08:53:06,530 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=269, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:53:06,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=263, votedFor=nacos3:7848, cost time=27 ms

2024-05-26 08:53:06,544 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:53:06,547 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=265, votedFor=nacos3:7848, cost time=19 ms

2024-05-26 08:53:06,549 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:06,546 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:53:06,554 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:06,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=270, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-26 08:53:06,555 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=263, currTerm=263.

2024-05-26 08:53:06,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=261, votedFor=nacos2:7848, cost time=12 ms

2024-05-26 08:53:06,558 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=265, currTerm=265.

2024-05-26 08:53:06,574 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=270, votedFor=nacos2:7848, cost time=15 ms

2024-05-26 08:53:06,578 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=269, currTerm=270.

2024-05-26 08:53:06,590 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=263, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:06,594 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 08:53:06,600 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:06,618 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=265, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:06,627 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 08:53:06,634 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:06,639 INFO onLeaderStart: term=263.

2024-05-26 08:53:06,662 INFO onLeaderStart: term=265.

2024-05-26 08:53:22,202 INFO Node <naming_persistent_service/nacos3:7848> term 270 start preVote.

2024-05-26 08:53:22,296 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=270, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 08:53:22,611 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=263, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:53:22,669 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 08:53:22,771 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:53:22,298 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=265, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:53:22,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=261, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 08:53:22,700 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=271, currTerm=270, granted=true, requestLastLogId=LogId [index=261, term=270], lastLogId=LogId [index=261, term=270].

2024-05-26 08:53:22,793 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=143, type=Follower] is going to quit

2024-05-26 08:53:22,797 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=271, currTerm=270.

2024-05-26 08:53:22,758 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=167, type=Follower] is going to quit

2024-05-26 08:53:22,814 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=168, type=Follower] is going to quit

2024-05-26 08:53:22,798 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=144, type=Follower] is going to quit

2024-05-26 08:53:22,798 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:53:22,818 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=262, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-26 08:53:22,823 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=167, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 08:53:22,826 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=266, currTerm=265.

2024-05-26 08:53:22,831 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=168, type=Follower] already destroyed, ignore error code: 1001

2024-05-26 08:53:22,841 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=264, currTerm=263.

2024-05-26 08:53:22,842 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=262, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 08:53:22,845 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=262, granted=true, requestLastLogId=LogId [index=254, term=261], lastLogId=LogId [index=254, term=261].

2024-05-26 08:53:22,847 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=271, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-26 08:53:22,849 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=270, currTerm=271.

2024-05-26 08:53:22,849 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=266, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 08:53:22,851 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=270, currTerm=271.

2024-05-26 08:53:22,851 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=261, currTerm=262.

2024-05-26 08:53:22,853 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=266, currTerm=266, granted=true, requestLastLogId=LogId [index=254, term=265], lastLogId=LogId [index=254, term=265].

2024-05-26 08:53:22,864 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=264, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-26 08:53:22,870 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=271, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 08:53:22,882 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=264, granted=true, requestLastLogId=LogId [index=254, term=263], lastLogId=LogId [index=254, term=263].

2024-05-26 08:53:22,884 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=266, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 08:53:22,895 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=264.

2024-05-26 08:53:22,884 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=167, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send5,5,main].

2024-05-26 08:53:22,886 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=168, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send4,5,main].

2024-05-26 08:53:22,897 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=264, currTerm=264, granted=true, requestLastLogId=LogId [index=254, term=263], lastLogId=LogId [index=254, term=263].

2024-05-26 08:53:22,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=266, votedFor=nacos2:7848, cost time=25 ms

2024-05-26 08:53:22,919 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=264, votedFor=nacos2:7848, cost time=15 ms

2024-05-26 08:53:22,920 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=270, currTerm=271.

2024-05-26 08:53:22,951 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 09:10:11,053 INFO Node <naming_persistent_service/nacos3:7848> term 271 start preVote.

2024-05-26 09:10:11,084 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:10:11,154 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 09:10:11,155 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:10:11,152 INFO Node <naming_persistent_service_v2/nacos3:7848> term 266 start preVote.

2024-05-26 09:10:11,151 INFO Node <naming_instance_metadata/nacos3:7848> term 262 start preVote.

2024-05-26 09:10:11,346 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=255, term=266], lastLogId=LogId [index=255, term=266].

2024-05-26 09:10:11,356 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=272, currTerm=271, because the leader nacos1:7848's lease is still valid.

2024-05-26 09:10:11,148 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 09:10:11,359 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=263, currTerm=262, granted=true, requestLastLogId=LogId [index=255, term=262], lastLogId=LogId [index=255, term=262].

2024-05-26 09:10:11,144 INFO Node <naming_service_metadata/nacos3:7848> term 264 start preVote.

2024-05-26 09:10:11,361 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=255, term=266], lastLogId=LogId [index=255, term=266].

2024-05-26 09:10:11,371 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=271, granted=true.

2024-05-26 09:10:11,398 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=271.

2024-05-26 09:10:11,401 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=262, granted=true.

2024-05-26 09:10:11,409 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=265, currTerm=264, because the leader nacos2:7848's lease is still valid.

2024-05-26 09:10:11,444 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=267, currTerm=266.

2024-05-26 09:10:11,442 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=262.

2024-05-26 09:10:11,444 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=265, currTerm=264.

2024-05-26 09:10:11,454 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=266, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 09:10:11,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 09:10:11,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=265, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-26 09:10:11,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=267, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-26 09:10:11,498 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=264, currTerm=265.

2024-05-26 09:10:11,494 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=264, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 09:10:11,497 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=272, votedFor=nacos3:7848, cost time=24 ms

2024-05-26 09:10:11,497 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=263, votedFor=nacos3:7848, cost time=19 ms

2024-05-26 09:10:11,505 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=266, currTerm=267.

2024-05-26 09:10:11,524 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:10:11,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=265, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 09:10:11,525 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:10:11,548 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=272, currTerm=272.

2024-05-26 09:10:11,545 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=263, currTerm=263.

2024-05-26 09:10:11,547 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=264, currTerm=265.

2024-05-26 09:10:11,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=267, votedFor=nacos1:7848, cost time=31 ms

2024-05-26 09:10:11,566 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=266, currTerm=267.

2024-05-26 09:10:11,603 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 09:17:46,118 INFO Node <naming_persistent_service_v2/nacos3:7848> term 267 start preVote.

2024-05-26 09:17:46,180 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=272, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 09:17:46,130 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:17:46,162 INFO Node <naming_persistent_service/nacos3:7848> term 272 start preVote.

2024-05-26 09:17:46,185 INFO Node <naming_instance_metadata/nacos3:7848> term 263 start preVote.

2024-05-26 09:17:46,364 INFO Node <naming_service_metadata/nacos3:7848> term 265 start preVote.

2024-05-26 09:17:46,413 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=265, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:17:46,469 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=266, currTerm=265, granted=true, requestLastLogId=LogId [index=256, term=265], lastLogId=LogId [index=256, term=265].

2024-05-26 09:17:46,186 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=263, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 09:17:46,646 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=265, granted=true.

2024-05-26 09:17:46,686 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=265.

2024-05-26 09:17:46,658 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=263, granted=true.

2024-05-26 09:17:46,617 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=267, granted=true.

2024-05-26 09:17:46,694 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=267.

2024-05-26 09:17:46,677 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=272, granted=true.

2024-05-26 09:17:46,693 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=266, currTerm=266.

2024-05-26 09:17:46,699 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=263.

2024-05-26 09:17:46,734 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=263, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 09:17:46,715 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=272.

2024-05-26 09:17:46,742 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=272, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 09:17:46,736 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=264, granted=true, requestLastLogId=LogId [index=256, term=263], lastLogId=LogId [index=256, term=263].

2024-05-26 09:17:46,750 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=268, votedFor=nacos3:7848, cost time=31 ms

2024-05-26 09:17:46,761 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=266, votedFor=nacos3:7848, cost time=27 ms

2024-05-26 09:17:46,763 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=265, currTerm=266.

2024-05-26 09:17:46,763 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=268, currTerm=268, granted=true, requestLastLogId=LogId [index=256, term=267], lastLogId=LogId [index=256, term=267].

2024-05-26 09:17:46,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=273, votedFor=nacos3:7848, cost time=36 ms

2024-05-26 09:17:46,789 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:17:46,798 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=268, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:17:46,800 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=273, currTerm=273, granted=true, requestLastLogId=LogId [index=263, term=272], lastLogId=LogId [index=263, term=272].

2024-05-26 09:17:46,801 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=264, votedFor=nacos3:7848, cost time=52 ms

2024-05-26 09:17:46,807 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=273, currTerm=273.

2024-05-26 09:17:46,809 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:17:46,809 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-26 09:17:46,813 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=273, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:17:46,824 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-26 09:17:46,828 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=264, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:17:46,831 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:17:46,838 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-26 09:17:46,841 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:17:46,850 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:17:46,876 INFO onLeaderStart: term=268.

2024-05-26 09:17:46,918 INFO onLeaderStart: term=264.

2024-05-26 09:17:46,925 INFO onLeaderStart: term=273.

2024-05-26 09:17:46,930 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 09:17:46,945 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 09:17:46,942 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=265, currTerm=266.

2024-05-26 09:17:46,952 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 09:17:46,958 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 09:17:46,974 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 09:19:03,290 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=268, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:19:06,275 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=273, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:19:06,211 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=264, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:19:03,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-26 09:19:03,518 INFO Node <naming_service_metadata/nacos3:7848> term 266 start preVote.

2024-05-26 09:19:06,857 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:19:06,854 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=145, type=Follower] is going to quit

2024-05-26 09:19:06,857 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:19:06,858 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=264, lastLogIncluded=0, lastLogIndex=264, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=183, type=Follower] is going to quit

2024-05-26 09:19:06,855 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:19:06,862 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=146, type=Follower] is going to quit

2024-05-26 09:19:06,865 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=182, type=Follower] is going to quit

2024-05-26 09:19:06,863 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=264, lastLogIncluded=0, lastLogIndex=264, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=184, type=Follower] is going to quit

2024-05-26 09:19:06,877 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=183, type=Follower] is going to quit

2024-05-26 09:19:06,885 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=265, currTerm=264.

2024-05-26 09:19:06,886 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=268.

2024-05-26 09:19:06,899 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=274, currTerm=273, granted=true, requestLastLogId=LogId [index=264, term=273], lastLogId=LogId [index=264, term=273].

2024-05-26 09:19:06,969 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=274, currTerm=273.

2024-05-26 09:19:07,157 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=269, votedFor=0.0.0.0:0, cost time=258 ms

2024-05-26 09:19:07,177 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=265, votedFor=0.0.0.0:0, cost time=286 ms

2024-05-26 09:19:07,193 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=274, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-26 09:19:07,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=265, votedFor=nacos1:7848, cost time=48 ms

2024-05-26 09:19:07,214 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=269, currTerm=269.

2024-05-26 09:19:07,279 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=269, currTerm=269, granted=true, requestLastLogId=LogId [index=257, term=268], lastLogId=LogId [index=257, term=268].

2024-05-26 09:19:07,502 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=265, currTerm=265.

2024-05-26 09:19:07,507 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=266, status=Status[ENEWLEADER<10011>: Raft node receives message from new leader with higher term.]].

2024-05-26 09:19:07,518 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=274, currTerm=274, granted=true, requestLastLogId=LogId [index=264, term=273], lastLogId=LogId [index=264, term=273].

2024-05-26 09:19:07,519 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 09:19:07,521 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=274, currTerm=274.

2024-05-26 09:19:07,528 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=267, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 09:19:07,528 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=265, currTerm=265, granted=true, requestLastLogId=LogId [index=257, term=264], lastLogId=LogId [index=257, term=264].

2024-05-26 09:19:07,533 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=267, currTerm=267, because the leader nacos1:7848's lease is still valid.

2024-05-26 09:19:07,662 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=267, currTerm=267.

2024-05-26 09:19:07,662 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=265, currTerm=265, granted=true, requestLastLogId=LogId [index=257, term=264], lastLogId=LogId [index=257, term=264].

2024-05-26 09:19:07,752 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=274, votedFor=nacos2:7848, cost time=228 ms

2024-05-26 09:19:07,753 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

