2024-05-26 09:19:07,763 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:17:10,877 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:17:10,700 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=269, votedFor=nacos2:7848, cost time=384 ms

2024-05-27 00:17:10,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=267, votedFor=nacos1:7848, cost time=150 ms

2024-05-27 00:17:12,026 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=266, currTerm=267.

2024-05-27 00:17:12,065 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:17:12,137 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:17:12,067 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=266, currTerm=267.

2024-05-27 00:17:12,077 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=269, currTerm=269, granted=true, requestLastLogId=LogId [index=257, term=268], lastLogId=LogId [index=257, term=268].

2024-05-27 00:17:12,302 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:17:12,312 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 00:29:13,445 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_265.

2024-05-27 00:29:13,446 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_265.

2024-05-27 00:29:13,447 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_238.

2024-05-27 00:29:13,452 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 233 to 239, cost 1 ms.

2024-05-27 00:29:13,476 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_258.

2024-05-27 00:29:13,477 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_258.

2024-05-27 00:29:13,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_231.

2024-05-27 00:29:13,479 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_258.

2024-05-27 00:29:13,479 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_258.

2024-05-27 00:29:13,481 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 226 to 232, cost 0 ms.

2024-05-27 00:29:13,482 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_232.

2024-05-27 00:29:13,486 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 227 to 233, cost 0 ms.

2024-05-27 00:29:13,505 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_258.

2024-05-27 00:29:13,506 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_258.

2024-05-27 00:29:13,507 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_231.

2024-05-27 00:29:13,510 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 226 to 232, cost 0 ms.

2024-05-27 00:46:48,498 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 00:47:09,125 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 00:47:09,368 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 00:47:09,371 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 00:47:09,417 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 00:47:09,706 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 00:47:09,706 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 00:47:10,269 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 00:47:14,367 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:14,370 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:14,371 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:14,374 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:15,094 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:15,095 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 00:47:15,326 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:47:15,327 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:47:15,330 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:47:15,330 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:47:16,593 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:47:16,594 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 00:53:35,777 INFO Node <naming_service_metadata/nacos3:7848> term 267 start preVote.

2024-05-27 00:53:37,704 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 00:53:37,704 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=265, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 00:53:37,704 INFO Node <naming_instance_metadata/nacos3:7848> term 265 start preVote.

2024-05-27 00:53:37,825 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 00:53:37,837 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 00:53:37,837 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 00:53:37,839 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 00:53:37,935 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 00:53:37,936 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 00:53:37,939 INFO The channel nacos1:7848 has successfully established.

2024-05-27 00:53:37,937 INFO The channel nacos2:7848 has successfully established.

2024-05-27 00:53:37,943 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 00:53:37,946 INFO The channel nacos1:7848 has successfully established.

2024-05-27 00:53:37,944 INFO Peer nacos1:7848 is connected.

2024-05-27 00:53:37,944 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 00:53:37,960 INFO The channel nacos2:7848 has successfully established.

2024-05-27 00:53:37,948 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=266, currTerm=265, granted=true, requestLastLogId=LogId [index=258, term=265], lastLogId=LogId [index=258, term=265].

2024-05-27 00:53:37,966 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=270, currTerm=269, because the leader nacos2:7848's lease is still valid.

2024-05-27 00:53:37,949 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=268, currTerm=267, because the leader nacos1:7848's lease is still valid.

2024-05-27 00:53:37,949 INFO Peer nacos1:7848 is connected.

2024-05-27 00:53:37,953 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=275, currTerm=274, because the leader nacos2:7848's lease is still valid.

2024-05-27 00:53:37,949 INFO Peer nacos2:7848 is connected.

2024-05-27 00:53:37,967 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=265, granted=true.

2024-05-27 00:53:37,979 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=265.

2024-05-27 00:53:37,971 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=267, granted=true.

2024-05-27 00:53:37,986 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=267.

2024-05-27 00:53:37,980 INFO Peer nacos2:7848 is connected.

2024-05-27 00:53:37,985 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 00:53:37,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 00:53:37,998 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=275, currTerm=274.

2024-05-27 00:53:38,001 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=274, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 00:53:38,002 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=270, currTerm=269.

2024-05-27 00:53:38,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=266, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 00:53:38,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=268, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 00:53:38,008 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 00:53:38,006 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=269, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 00:53:38,007 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=266, currTerm=266.

2024-05-27 00:53:38,010 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=268, currTerm=268.

2024-05-27 00:53:38,011 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=275, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 00:53:38,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=270, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-27 00:53:38,022 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=275, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 00:53:38,022 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=266, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 00:53:38,028 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 00:53:38,031 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=270, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 00:53:38,032 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 00:53:38,084 INFO onLeaderStart: term=266.

2024-05-27 00:59:13,318 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_266.

2024-05-27 00:59:13,319 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_266.

2024-05-27 00:59:13,320 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_265.

2024-05-27 00:59:13,324 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 239 to 266, cost 1 ms.

2024-05-27 00:59:13,359 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_259.

2024-05-27 00:59:13,359 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_259.

2024-05-27 00:59:13,361 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_258.

2024-05-27 00:59:13,366 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 232 to 259, cost 0 ms.

2024-05-27 00:59:13,366 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_259.

2024-05-27 00:59:13,367 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_259.

2024-05-27 00:59:13,368 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_258.

2024-05-27 00:59:13,371 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 233 to 259, cost 1 ms.

2024-05-27 00:59:13,389 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_259.

2024-05-27 00:59:13,389 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_259.

2024-05-27 00:59:13,391 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_258.

2024-05-27 00:59:13,394 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 232 to 259, cost 0 ms.

2024-05-27 01:06:12,399 INFO Node <naming_persistent_service/nacos3:7848> term 275 start preVote.

2024-05-27 01:06:12,399 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=275, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 01:06:11,653 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=266, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 01:06:13,153 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=259, lastLogIncluded=0, lastLogIndex=259, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=184, type=Follower] is going to quit

2024-05-27 01:06:13,157 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=259, lastLogIncluded=0, lastLogIndex=259, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=185, type=Follower] is going to quit

2024-05-27 01:06:12,399 INFO Node <naming_service_metadata/nacos3:7848> term 268 start preVote.

2024-05-27 01:06:13,202 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=268, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:06:13,235 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=271, currTerm=270, because the leader nacos1:7848's lease is still valid.

2024-05-27 01:06:13,235 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=271, currTerm=270.

2024-05-27 01:06:13,239 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=269, currTerm=268, because the leader nacos2:7848's lease is still valid.

2024-05-27 01:06:13,242 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 01:06:13,244 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=270, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 01:06:13,253 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 01:06:13,255 INFO The channel nacos1:7848 has successfully established.

2024-05-27 01:06:13,256 INFO Peer nacos1:7848 is connected.

2024-05-27 01:06:13,158 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 01:06:13,154 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 01:06:13,242 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=268, granted=false.

2024-05-27 01:06:13,264 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=271, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-27 01:06:13,259 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=259, term=266], lastLogId=LogId [index=259, term=266].

2024-05-27 01:06:13,269 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=268, granted=true.

2024-05-27 01:06:13,280 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=268.

2024-05-27 01:06:13,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=271, votedFor=nacos2:7848, cost time=6 ms

2024-05-27 01:06:13,273 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 01:06:13,271 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=259, term=266], lastLogId=LogId [index=259, term=266].

2024-05-27 01:06:13,282 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=268, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 01:06:13,285 INFO The channel nacos2:7848 has successfully established.

2024-05-27 01:06:13,286 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=267, currTerm=266.

2024-05-27 01:06:13,286 INFO Peer nacos2:7848 is connected.

2024-05-27 01:06:13,297 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=275, granted=false.

2024-05-27 01:06:13,300 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=275, granted=true.

2024-05-27 01:06:13,301 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=275.

2024-05-27 01:06:13,300 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=269, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 01:06:13,301 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=275, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 01:06:13,303 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=269.

2024-05-27 01:06:13,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=267, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 01:06:13,312 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=276, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 01:06:13,317 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=267, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 01:06:13,326 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:06:13,328 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:06:13,330 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=269, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 01:06:13,335 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 01:06:13,343 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 01:06:13,345 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=276, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 01:06:13,347 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 01:06:13,348 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 01:06:13,353 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 01:06:13,364 INFO onLeaderStart: term=276.

2024-05-27 01:06:13,369 INFO onLeaderStart: term=269.

2024-05-27 01:26:05,472 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=269, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 01:26:06,497 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=260, lastLogIncluded=0, lastLogIndex=260, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=170, type=Follower] is going to quit

2024-05-27 01:26:06,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=260, lastLogIncluded=0, lastLogIndex=260, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=169, type=Follower] is going to quit

2024-05-27 01:26:06,369 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 01:26:06,369 INFO Node <naming_persistent_service_v2/nacos3:7848> term 271 start preVote.

2024-05-27 01:26:06,220 INFO Node <naming_instance_metadata/nacos3:7848> term 267 start preVote.

2024-05-27 01:26:06,500 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 01:26:06,381 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=276, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 01:26:06,510 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 01:26:06,508 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 01:26:06,513 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=267, lastLogIncluded=0, lastLogIndex=267, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=185, type=Follower] is going to quit

2024-05-27 01:26:06,518 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=272, currTerm=271, granted=true, requestLastLogId=LogId [index=260, term=271], lastLogId=LogId [index=260, term=271].

2024-05-27 01:26:06,520 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 01:26:06,536 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:26:06,543 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=267, lastLogIncluded=0, lastLogIndex=267, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=186, type=Follower] is going to quit

2024-05-27 01:26:06,595 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=270, currTerm=269, granted=true, requestLastLogId=LogId [index=260, term=269], lastLogId=LogId [index=260, term=269].

2024-05-27 01:26:06,614 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=277, currTerm=276, granted=true, requestLastLogId=LogId [index=267, term=276], lastLogId=LogId [index=267, term=276].

2024-05-27 01:26:06,614 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=270, currTerm=269, granted=true, requestLastLogId=LogId [index=260, term=269], lastLogId=LogId [index=260, term=269].

2024-05-27 01:26:06,646 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 01:26:06,661 INFO The channel nacos1:7848 has successfully established.

2024-05-27 01:26:06,662 INFO Peer nacos1:7848 is connected.

2024-05-27 01:26:06,658 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=277, currTerm=276.

2024-05-27 01:26:06,658 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 01:26:06,670 INFO The channel nacos2:7848 has successfully established.

2024-05-27 01:26:06,665 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=267, granted=true.

2024-05-27 01:26:06,716 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=267.

2024-05-27 01:26:06,673 INFO Peer nacos2:7848 is connected.

2024-05-27 01:26:06,675 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=272, currTerm=271.

2024-05-27 01:26:06,680 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=277, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 01:26:06,719 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=268, currTerm=268, granted=true, requestLastLogId=LogId [index=260, term=267], lastLogId=LogId [index=260, term=267].

2024-05-27 01:26:06,732 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=270, currTerm=269.

2024-05-27 01:26:06,743 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=272, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 01:26:06,744 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=277, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 01:26:06,750 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=277, currTerm=277, granted=true, requestLastLogId=LogId [index=267, term=276], lastLogId=LogId [index=267, term=276].

2024-05-27 01:26:06,746 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=268, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 01:26:06,748 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=270, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 01:26:06,754 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 01:26:06,754 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=270, currTerm=270.

2024-05-27 01:26:06,761 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:26:06,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=272, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 01:26:06,766 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=271, currTerm=272.

2024-05-27 01:26:06,765 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=270, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 01:26:06,771 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:26:06,772 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:26:06,765 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=268, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 01:26:06,777 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 01:26:06,778 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 01:26:06,784 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:26:06,771 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:26:06,788 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 01:26:06,789 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=271, currTerm=272.

2024-05-27 01:26:06,799 INFO onLeaderStart: term=268.

2024-05-27 01:26:11,195 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:26:11,196 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:26:11,196 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:42:34,528 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 01:42:34,656 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=272, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 01:42:34,656 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=277, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 01:42:34,655 INFO Node <naming_persistent_service_v2/nacos3:7848> term 272 start preVote.

2024-05-27 01:42:34,655 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=270, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:42:34,655 INFO Node <naming_persistent_service/nacos3:7848> term 277 start preVote.

2024-05-27 01:42:34,655 INFO Node <naming_service_metadata/nacos3:7848> term 270 start preVote.

2024-05-27 01:42:35,268 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=268, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 01:42:35,519 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 01:42:35,542 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=261, lastLogIncluded=0, lastLogIndex=261, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=187, type=Follower] is going to quit

2024-05-27 01:42:35,518 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 01:42:35,536 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=271, currTerm=270, granted=true, requestLastLogId=LogId [index=261, term=270], lastLogId=LogId [index=261, term=270].

2024-05-27 01:42:35,542 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 01:42:35,545 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=261, lastLogIncluded=0, lastLogIndex=261, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=186, type=Follower] is going to quit

2024-05-27 01:42:35,570 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 01:42:35,562 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_261.

2024-05-27 01:42:35,574 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_261.

2024-05-27 01:42:35,571 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_261.

2024-05-27 01:42:35,580 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=273, currTerm=272, because the leader nacos1:7848's lease is still valid.

2024-05-27 01:42:35,584 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_259.

2024-05-27 01:42:35,586 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_261.

2024-05-27 01:42:35,588 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 01:42:35,593 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_261.

2024-05-27 01:42:35,594 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_261.

2024-05-27 01:42:35,573 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 01:42:35,596 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_259.

2024-05-27 01:42:35,573 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 01:42:35,599 INFO The channel nacos1:7848 has successfully established.

2024-05-27 01:42:35,574 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:42:35,582 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=278, currTerm=277, granted=true, requestLastLogId=LogId [index=268, term=277], lastLogId=LogId [index=268, term=277].

2024-05-27 01:42:35,604 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 259 to 260, cost 3 ms.

2024-05-27 01:42:35,584 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=272, granted=false.

2024-05-27 01:42:35,608 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=272, granted=true.

2024-05-27 01:42:35,590 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_268.

2024-05-27 01:42:35,591 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_259.

2024-05-27 01:42:35,594 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=261, term=268], lastLogId=LogId [index=261, term=268].

2024-05-27 01:42:35,599 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 259 to 260, cost 4 ms.

2024-05-27 01:42:35,617 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_268.

2024-05-27 01:42:35,601 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 01:42:35,620 INFO The channel nacos2:7848 has successfully established.

2024-05-27 01:42:35,603 INFO Peer nacos1:7848 is connected.

2024-05-27 01:42:35,605 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=278, currTerm=277.

2024-05-27 01:42:35,622 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_266.

2024-05-27 01:42:35,611 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=272.

2024-05-27 01:42:35,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=272, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 01:42:35,617 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=261, term=268], lastLogId=LogId [index=261, term=268].

2024-05-27 01:42:35,620 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 271, expect=270.

2024-05-27 01:42:35,621 INFO Peer nacos2:7848 is connected.

2024-05-27 01:42:35,625 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=273, currTerm=273.

2024-05-27 01:42:35,630 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=261, term=268], lastLogId=LogId [index=261, term=268].

2024-05-27 01:42:35,627 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 259 to 260, cost 0 ms.

2024-05-27 01:42:35,630 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 266 to 267, cost 2 ms.

2024-05-27 01:42:35,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=273, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 01:42:35,642 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:42:35,643 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=278, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-27 01:42:35,644 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 01:42:35,656 INFO The channel nacos2:7848 has successfully established.

2024-05-27 01:42:35,657 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=271, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-27 01:42:35,660 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=271, currTerm=271.

2024-05-27 01:42:35,657 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 01:42:35,658 INFO Peer nacos2:7848 is connected.

2024-05-27 01:42:35,659 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=269, currTerm=268.

2024-05-27 01:42:35,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=278, votedFor=nacos2:7848, cost time=19 ms

2024-05-27 01:42:35,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=271, votedFor=nacos1:7848, cost time=15 ms

2024-05-27 01:42:35,678 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=277, currTerm=278.

2024-05-27 01:42:35,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=269, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 01:42:35,695 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=270, currTerm=271.

2024-05-27 01:42:35,700 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=269, votedFor=nacos2:7848, cost time=13 ms

2024-05-27 01:42:35,702 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=277, currTerm=278.

2024-05-27 01:42:35,712 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=269.

2024-05-27 01:42:40,256 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 01:42:40,257 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 01:42:40,258 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 01:42:40,258 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 01:42:40,502 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:42:40,503 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:42:40,505 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:42:40,506 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 01:53:51,906 INFO Node <naming_service_metadata/nacos3:7848> term 271 start preVote.

2024-05-27 01:53:51,907 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=269, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:53:51,906 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 01:53:51,906 INFO Node <naming_persistent_service/nacos3:7848> term 278 start preVote.

2024-05-27 01:53:51,906 INFO Node <naming_instance_metadata/nacos3:7848> term 269 start preVote.

2024-05-27 01:53:51,907 INFO Node <naming_persistent_service_v2/nacos3:7848> term 273 start preVote.

2024-05-27 01:53:51,980 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:53:51,939 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=271, granted=true.

2024-05-27 01:53:51,907 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 01:53:51,985 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=271.

2024-05-27 01:53:51,989 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 01:53:51,990 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=269, granted=true.

2024-05-27 01:53:51,992 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=269.

2024-05-27 01:53:51,997 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=273, granted=false.

2024-05-27 01:53:51,998 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=273, granted=false.

2024-05-27 01:53:51,996 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=278, granted=false.

2024-05-27 01:53:51,998 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=278, granted=false.

2024-05-27 01:53:52,007 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=270, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 01:53:52,009 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 01:53:52,008 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=272, votedFor=nacos3:7848, cost time=18 ms

2024-05-27 01:53:52,011 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 01:53:52,012 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=272, currTerm=272, granted=true, requestLastLogId=LogId [index=262, term=271], lastLogId=LogId [index=262, term=271].

2024-05-27 01:53:52,018 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=272, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 01:53:52,019 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 01:53:52,025 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 01:53:52,025 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=270, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 01:53:52,029 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 01:53:52,031 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 01:53:52,037 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 01:53:52,047 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 01:53:52,055 INFO onLeaderStart: term=272.

2024-05-27 01:53:52,057 INFO onLeaderStart: term=270.

2024-05-27 01:57:13,848 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 02:12:35,459 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_262.

2024-05-27 02:12:35,460 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_262.

2024-05-27 02:12:35,464 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_261.

2024-05-27 02:12:35,469 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 260 to 262, cost 0 ms.

2024-05-27 02:12:35,474 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_263.

2024-05-27 02:12:35,474 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_263.

2024-05-27 02:12:35,477 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_261.

2024-05-27 02:12:35,480 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 260 to 262, cost 0 ms.

2024-05-27 02:12:35,497 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_269.

2024-05-27 02:12:35,497 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_269.

2024-05-27 02:12:35,498 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_268.

2024-05-27 02:12:35,502 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 267 to 269, cost 0 ms.

2024-05-27 02:12:35,509 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_263.

2024-05-27 02:12:35,510 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_263.

2024-05-27 02:12:35,512 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_261.

2024-05-27 02:12:35,515 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 260 to 262, cost 1 ms.

2024-05-27 02:12:40,655 INFO Connection disconnected: /172.25.0.5:60780

2024-05-27 02:23:51,936 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 02:23:51,940 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 02:23:51,941 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 02:23:51,944 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 02:23:52,422 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 02:23:56,410 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 02:23:56,412 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 02:23:56,412 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 02:23:56,968 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 02:23:56,970 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 02:56:45,187 INFO Node <naming_persistent_service_v2/nacos3:7848> term 273 start preVote.

2024-05-27 02:56:46,516 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 02:56:46,498 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 269 to 270, cost 0 ms.

2024-05-27 02:56:46,086 INFO Node <naming_persistent_service/nacos3:7848> term 278 start preVote.

2024-05-27 02:56:46,012 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=272, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 02:56:46,525 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=171, type=Follower] is going to quit

2024-05-27 02:56:46,526 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=172, type=Follower] is going to quit

2024-05-27 02:56:46,528 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 262 to 264, cost 1 ms.

2024-05-27 02:56:45,955 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=270, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 02:56:46,531 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=189, type=Follower] is going to quit

2024-05-27 02:56:46,532 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=190, type=Follower] is going to quit

2024-05-27 02:56:46,086 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 02:56:46,525 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 02:56:46,530 INFO Node <naming_persistent_service_v2/nacos3:7848> term 273 start preVote.

2024-05-27 02:56:46,531 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 02:56:46,538 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 262 to 264, cost 1 ms.

2024-05-27 02:56:46,540 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 262 to 263, cost 1 ms.

2024-05-27 02:56:46,544 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 02:56:46,540 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 02:56:46,544 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 02:56:46,545 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 02:56:46,553 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=279, currTerm=278, because the leader nacos2:7848's lease is still valid.

2024-05-27 02:56:46,557 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 02:56:46,558 INFO The channel nacos2:7848 has successfully established.

2024-05-27 02:56:46,559 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=271, currTerm=270, granted=true, requestLastLogId=LogId [index=263, term=270], lastLogId=LogId [index=263, term=270].

2024-05-27 02:56:46,559 INFO Peer nacos2:7848 is connected.

2024-05-27 02:56:46,569 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 02:56:46,570 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 02:56:46,571 INFO The channel nacos1:7848 has successfully established.

2024-05-27 02:56:46,572 INFO Peer nacos1:7848 is connected.

2024-05-27 02:56:46,573 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 02:56:46,574 INFO The channel nacos1:7848 has successfully established.

2024-05-27 02:56:46,575 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 02:56:46,579 INFO The channel nacos2:7848 has successfully established.

2024-05-27 02:56:46,580 INFO Peer nacos2:7848 is connected.

2024-05-27 02:56:46,581 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=271, currTerm=270.

2024-05-27 02:56:46,579 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 02:56:46,589 INFO The channel nacos1:7848 has successfully established.

2024-05-27 02:56:46,595 INFO Peer nacos1:7848 is connected.

2024-05-27 02:56:46,586 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=278, granted=true.

2024-05-27 02:56:46,601 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=273, currTerm=272, granted=true, requestLastLogId=LogId [index=263, term=272], lastLogId=LogId [index=263, term=272].

2024-05-27 02:56:46,612 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,601 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,602 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=278.

2024-05-27 02:56:46,609 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=271, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-27 02:56:46,644 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 02:56:46,624 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=273, granted=false.

2024-05-27 02:56:46,664 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,671 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=273, granted=false.

2024-05-27 02:56:46,694 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=273, granted=false.

2024-05-27 02:56:46,697 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=271, votedFor=nacos2:7848, cost time=54 ms

2024-05-27 02:56:46,700 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=279, votedFor=nacos3:7848, cost time=59 ms

2024-05-27 02:56:46,700 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=273, granted=false.

2024-05-27 02:56:46,705 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 02:56:46,707 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=271, currTerm=271, granted=true, requestLastLogId=LogId [index=263, term=270], lastLogId=LogId [index=263, term=270].

2024-05-27 02:56:46,707 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=273, currTerm=272.

2024-05-27 02:56:46,705 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,712 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,712 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=279, currTerm=279.

2024-05-27 02:56:46,715 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,729 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=273, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 02:56:46,725 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=279, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 02:56:46,734 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 02:56:46,744 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=273, votedFor=nacos1:7848, cost time=13 ms

2024-05-27 02:56:46,745 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 02:56:46,745 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,746 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,747 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 02:56:46,765 INFO onLeaderStart: term=279.

2024-05-27 03:13:15,258 INFO Node <naming_service_metadata/nacos3:7848> term 273 start preVote.

2024-05-27 03:13:15,274 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=274, currTerm=273, granted=true, requestLastLogId=LogId [index=264, term=273], lastLogId=LogId [index=264, term=273].

2024-05-27 03:13:15,261 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 03:13:15,347 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=273, granted=true.

2024-05-27 03:13:15,258 INFO Node <naming_instance_metadata/nacos3:7848> term 271 start preVote.

2024-05-27 03:13:15,259 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 03:13:15,258 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 03:13:15,259 INFO Node <naming_persistent_service_v2/nacos3:7848> term 273 start preVote.

2024-05-27 03:13:15,272 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=279, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 03:13:15,355 INFO Node <naming_persistent_service_v2/nacos3:7848> term 273 start preVote.

2024-05-27 03:13:15,351 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=273.

2024-05-27 03:13:15,361 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=270, lastLogIncluded=0, lastLogIndex=270, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=187, type=Follower] is going to quit

2024-05-27 03:13:15,378 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=270, lastLogIncluded=0, lastLogIndex=270, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=188, type=Follower] is going to quit

2024-05-27 03:13:15,368 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=271, granted=true.

2024-05-27 03:13:15,384 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=271.

2024-05-27 03:13:15,368 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 03:13:15,370 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=273, granted=true.

2024-05-27 03:13:15,398 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=273.

2024-05-27 03:13:15,384 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=280, currTerm=279, granted=true, requestLastLogId=LogId [index=270, term=279], lastLogId=LogId [index=270, term=279].

2024-05-27 03:13:15,387 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 03:13:15,402 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:13:15,406 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=280, currTerm=279.

2024-05-27 03:13:15,414 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=274, votedFor=nacos3:7848, cost time=38 ms

2024-05-27 03:13:15,415 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=272, votedFor=nacos3:7848, cost time=27 ms

2024-05-27 03:13:15,420 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:13:15,425 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:13:15,427 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=272, currTerm=272, granted=true, requestLastLogId=LogId [index=264, term=271], lastLogId=LogId [index=264, term=271].

2024-05-27 03:13:15,442 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=274, currTerm=274.

2024-05-27 03:13:15,438 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=280, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 03:13:15,438 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:13:15,442 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=272, currTerm=272, granted=true, requestLastLogId=LogId [index=264, term=271], lastLogId=LogId [index=264, term=271].

2024-05-27 03:13:15,445 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=280, currTerm=280, granted=true, requestLastLogId=LogId [index=270, term=279], lastLogId=LogId [index=270, term=279].

2024-05-27 03:13:15,450 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:13:15,453 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:13:15,456 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:13:15,457 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=280, currTerm=280, granted=true, requestLastLogId=LogId [index=270, term=279], lastLogId=LogId [index=270, term=279].

2024-05-27 03:13:15,457 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=272, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 03:13:15,461 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=274, votedFor=nacos3:7848, cost time=15 ms

2024-05-27 03:13:15,462 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 03:13:15,465 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 03:13:15,467 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=274, currTerm=274, granted=true, requestLastLogId=LogId [index=262, term=273], lastLogId=LogId [index=262, term=273].

2024-05-27 03:13:15,470 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=274, currTerm=274.

2024-05-27 03:13:15,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=280, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 03:13:15,470 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 03:13:15,476 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 03:13:15,476 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:13:15,502 INFO onLeaderStart: term=272.

2024-05-27 03:29:07,924 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=272, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 03:29:08,024 INFO Node <naming_persistent_service/nacos3:7848> term 280 start preVote.

2024-05-27 03:29:07,999 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=274, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 03:29:08,029 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=265, lastLogIncluded=0, lastLogIndex=265, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=192, type=Follower] is going to quit

2024-05-27 03:29:08,034 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=265, lastLogIncluded=0, lastLogIndex=265, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=191, type=Follower] is going to quit

2024-05-27 03:29:07,999 INFO Node <naming_persistent_service_v2/nacos3:7848> term 274 start preVote.

2024-05-27 03:29:08,076 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 03:29:08,096 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_265.

2024-05-27 03:29:08,097 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_265.

2024-05-27 03:29:08,102 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_263.

2024-05-27 03:29:08,105 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 264 to 264, cost 0 ms.

2024-05-27 03:29:07,997 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=274, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 03:29:07,997 INFO Node <naming_service_metadata/nacos3:7848> term 274 start preVote.

2024-05-27 03:29:08,076 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 03:29:08,109 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_265.

2024-05-27 03:29:08,110 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_265.

2024-05-27 03:29:08,115 INFO Node <naming_persistent_service_v2/nacos3:7848> term 274 start preVote.

2024-05-27 03:29:08,121 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_263.

2024-05-27 03:29:08,122 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_271.

2024-05-27 03:29:08,161 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_271.

2024-05-27 03:29:08,161 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_263.

2024-05-27 03:29:08,145 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=274, granted=true.

2024-05-27 03:29:08,165 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=274.

2024-05-27 03:29:08,165 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_263.

2024-05-27 03:29:08,166 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=274, currTerm=275.

2024-05-27 03:29:08,184 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 264 to 264, cost 0 ms.

2024-05-27 03:29:08,191 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_269.

2024-05-27 03:29:08,195 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_262.

2024-05-27 03:29:08,228 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 270 to 270, cost 0 ms.

2024-05-27 03:29:08,238 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 263 to 263, cost 0 ms.

2024-05-27 03:29:08,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=275, votedFor=nacos3:7848, cost time=22 ms

2024-05-27 03:29:08,285 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=273, currTerm=272, granted=true, requestLastLogId=LogId [index=265, term=272], lastLogId=LogId [index=265, term=272].

2024-05-27 03:29:08,286 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=274, granted=true.

2024-05-27 03:29:08,287 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=274.

2024-05-27 03:29:08,287 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,320 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:29:08,288 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,288 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=281, currTerm=280, because the leader nacos1:7848's lease is still valid.

2024-05-27 03:29:08,302 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,332 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=275, votedFor=nacos3:7848, cost time=38 ms

2024-05-27 03:29:08,335 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=280, granted=false.

2024-05-27 03:29:08,335 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=275, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 03:29:08,340 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:29:08,348 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 03:29:08,351 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 03:29:08,357 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=275, currTerm=275, granted=false, requestLastLogId=LogId [index=263, term=274], lastLogId=LogId [index=264, term=275].

2024-05-27 03:29:08,359 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=275, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 03:29:08,366 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 03:29:08,368 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=280, granted=true.

2024-05-27 03:29:08,371 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 03:29:08,377 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=280.

2024-05-27 03:29:08,384 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 03:29:08,387 INFO onLeaderStart: term=275.

2024-05-27 03:29:08,388 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=275, currTerm=275, granted=false, requestLastLogId=LogId [index=265, term=274], lastLogId=LogId [index=266, term=275].

2024-05-27 03:29:08,397 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=273, currTerm=272.

2024-05-27 03:29:08,407 INFO onLeaderStart: term=275.

2024-05-27 03:29:08,408 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 03:29:08,418 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 03:29:08,419 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=281, votedFor=nacos3:7848, cost time=35 ms

2024-05-27 03:29:08,424 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 03:29:08,434 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=273, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-27 03:29:08,439 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 03:29:08,473 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=273, votedFor=nacos1:7848, cost time=33 ms

2024-05-27 03:29:08,475 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,478 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,482 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:29:08,481 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=281, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 03:29:08,488 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 03:29:08,495 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 03:29:08,497 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 03:29:08,515 INFO onLeaderStart: term=281.

2024-05-27 03:29:12,193 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 03:29:12,194 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 03:29:12,195 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 03:29:12,196 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 03:29:12,229 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 03:29:12,230 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 03:29:12,231 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 03:29:12,232 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 03:29:40,991 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499777632s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-27 03:45:49,623 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=275, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 03:45:49,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 03:45:50,312 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=275, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 03:45:50,312 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=281, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 03:45:50,510 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=272, lastLogIncluded=0, lastLogIndex=272, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=190, type=Follower] is going to quit

2024-05-27 03:45:50,511 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 03:45:49,570 INFO Node <naming_instance_metadata/nacos3:7848> term 273 start preVote.

2024-05-27 03:45:50,412 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 03:45:50,412 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=266, lastLogIncluded=0, lastLogIndex=266, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=173, type=Follower] is going to quit

2024-05-27 03:45:50,511 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=272, lastLogIncluded=0, lastLogIndex=272, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=191, type=Follower] is going to quit

2024-05-27 03:45:50,520 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 03:45:50,509 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=264, lastLogIncluded=0, lastLogIndex=264, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=147, type=Follower] is going to quit

2024-05-27 03:45:50,523 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=266, lastLogIncluded=0, lastLogIndex=266, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=174, type=Follower] is going to quit

2024-05-27 03:45:50,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=264, lastLogIncluded=0, lastLogIndex=264, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=148, type=Follower] is going to quit

2024-05-27 03:45:50,605 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,606 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,606 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=276, currTerm=275, granted=true, requestLastLogId=LogId [index=264, term=275], lastLogId=LogId [index=264, term=275].

2024-05-27 03:45:50,607 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,607 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=276, currTerm=275, granted=true, requestLastLogId=LogId [index=266, term=275], lastLogId=LogId [index=266, term=275].

2024-05-27 03:45:50,607 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=282, currTerm=281, granted=true, requestLastLogId=LogId [index=272, term=281], lastLogId=LogId [index=272, term=281].

2024-05-27 03:45:50,615 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=273, granted=true.

2024-05-27 03:45:50,628 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=276, currTerm=275, granted=true, requestLastLogId=LogId [index=264, term=275], lastLogId=LogId [index=264, term=275].

2024-05-27 03:45:50,633 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=276, currTerm=275, granted=true, requestLastLogId=LogId [index=266, term=275], lastLogId=LogId [index=266, term=275].

2024-05-27 03:45:50,646 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=273.

2024-05-27 03:45:50,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 03:45:50,648 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,649 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=282, currTerm=281, granted=true, requestLastLogId=LogId [index=272, term=281], lastLogId=LogId [index=272, term=281].

2024-05-27 03:45:50,668 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,656 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 03:45:50,665 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,667 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,668 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,674 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=274, votedFor=nacos3:7848, cost time=7 ms

2024-05-27 03:45:50,683 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=276, currTerm=275.

2024-05-27 03:45:50,692 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=274, currTerm=274, granted=true, requestLastLogId=LogId [index=266, term=273], lastLogId=LogId [index=266, term=273].

2024-05-27 03:45:50,695 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=276, currTerm=275.

2024-05-27 03:45:50,702 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=282, currTerm=281.

2024-05-27 03:45:50,705 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=276, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 03:45:50,702 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=276, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 03:45:50,707 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=274, currTerm=274.

2024-05-27 03:45:50,716 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=276, votedFor=nacos1:7848, cost time=11 ms

2024-05-27 03:45:50,719 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=276, currTerm=276.

2024-05-27 03:45:50,719 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=282, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-27 03:45:50,720 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,723 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=276, votedFor=nacos1:7848, cost time=15 ms

2024-05-27 03:45:50,725 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=276, currTerm=276.

2024-05-27 03:45:50,730 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,737 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=282, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 03:45:50,738 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=282, currTerm=282.

2024-05-27 03:45:50,739 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,739 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,739 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,741 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,741 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=274, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 03:45:50,743 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 03:45:50,745 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 03:45:50,751 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 03:45:50,775 INFO onLeaderStart: term=274.

2024-05-27 04:00:40,311 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=274, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 04:00:40,362 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=277, currTerm=276, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:00:40,358 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_267.

2024-05-27 04:00:40,393 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_267.

2024-05-27 04:00:40,319 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_265.

2024-05-27 04:00:40,403 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_265.

2024-05-27 04:00:40,345 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=283, currTerm=282, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:00:40,365 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_267.

2024-05-27 04:00:40,422 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_267.

2024-05-27 04:00:40,366 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_273.

2024-05-27 04:00:40,464 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_273.

2024-05-27 04:00:40,379 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=277, currTerm=276, granted=true, requestLastLogId=LogId [index=267, term=276], lastLogId=LogId [index=267, term=276].

2024-05-27 04:00:40,387 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=277, currTerm=276, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:00:40,399 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=267, lastLogIncluded=0, lastLogIndex=267, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=193, type=Follower] is going to quit

2024-05-27 04:00:40,480 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=267, lastLogIncluded=0, lastLogIndex=267, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=194, type=Follower] is going to quit

2024-05-27 04:00:40,482 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_271.

2024-05-27 04:00:40,403 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 04:00:40,452 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_265.

2024-05-27 04:00:40,452 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_263.

2024-05-27 04:00:40,466 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_265.

2024-05-27 04:00:40,502 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 270 to 272, cost 1 ms.

2024-05-27 04:00:40,470 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=283, currTerm=282.

2024-05-27 04:00:40,472 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=277, currTerm=276.

2024-05-27 04:00:40,505 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=282, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:00:40,477 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=277, currTerm=276.

2024-05-27 04:00:40,482 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=275, currTerm=274, granted=true, requestLastLogId=LogId [index=267, term=274], lastLogId=LogId [index=267, term=274].

2024-05-27 04:00:40,505 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=276, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:00:40,508 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 263 to 264, cost 0 ms.

2024-05-27 04:00:40,508 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 264 to 266, cost 0 ms.

2024-05-27 04:00:40,509 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=276, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:00:40,510 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=275, currTerm=274.

2024-05-27 04:00:40,511 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 264 to 266, cost 0 ms.

2024-05-27 04:00:40,522 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=283, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 04:00:40,527 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=277, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-27 04:00:40,527 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=277, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-27 04:00:40,533 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=275, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-27 04:00:40,536 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=283, votedFor=nacos2:7848, cost time=14 ms

2024-05-27 04:00:40,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=277, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 04:00:40,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=277, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 04:00:40,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=275, votedFor=nacos1:7848, cost time=6 ms

2024-05-27 04:00:40,545 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=275, currTerm=275.

2024-05-27 04:00:40,549 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=275, currTerm=275, granted=true, requestLastLogId=LogId [index=267, term=274], lastLogId=LogId [index=267, term=274].

2024-05-27 04:00:40,551 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 04:00:40,572 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 04:17:12,508 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 04:17:13,353 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=275, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 04:17:13,353 INFO Node <naming_instance_metadata/nacos3:7848> term 275 start preVote.

2024-05-27 04:17:13,353 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=277, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 04:17:13,349 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=277, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 04:17:13,349 INFO Node <naming_persistent_service_v2/nacos3:7848> term 277 start preVote.

2024-05-27 04:17:13,349 INFO Node <naming_service_metadata/nacos3:7848> term 277 start preVote.

2024-05-27 04:17:12,509 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 04:17:13,447 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 04:17:12,510 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 04:17:13,603 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=284, currTerm=283, because the leader nacos2:7848's lease is still valid.

2024-05-27 04:17:13,603 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 04:17:13,608 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=277, granted=true.

2024-05-27 04:17:13,609 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=275, granted=true.

2024-05-27 04:17:13,616 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=275.

2024-05-27 04:17:13,612 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=277.

2024-05-27 04:17:13,616 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 04:17:13,625 INFO The channel nacos1:7848 has successfully established.

2024-05-27 04:17:13,625 INFO Peer nacos1:7848 is connected.

2024-05-27 04:17:13,623 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=277, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 04:17:13,643 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=284, currTerm=283.

2024-05-27 04:17:13,645 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 04:17:13,623 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=278, currTerm=277, because the leader nacos2:7848's lease is still valid.

2024-05-27 04:17:13,640 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 04:17:13,651 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=276, votedFor=nacos3:7848, cost time=33 ms

2024-05-27 04:17:13,654 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 04:17:13,647 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=283, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:17:13,650 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=278, currTerm=277.

2024-05-27 04:17:13,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=284, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 04:17:13,655 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:17:13,658 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 04:17:13,659 INFO The channel nacos1:7848 has successfully established.

2024-05-27 04:17:13,659 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=277, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:17:13,659 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=275, currTerm=276.

2024-05-27 04:17:13,659 INFO Peer nacos1:7848 is connected.

2024-05-27 04:17:13,664 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=276, currTerm=276, granted=true, requestLastLogId=LogId [index=268, term=275], lastLogId=LogId [index=268, term=275].

2024-05-27 04:17:13,665 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=276, currTerm=276.

2024-05-27 04:17:13,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=278, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 04:17:13,673 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 04:17:13,678 INFO The channel nacos2:7848 has successfully established.

2024-05-27 04:17:13,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=284, votedFor=nacos1:7848, cost time=21 ms

2024-05-27 04:17:13,679 INFO Peer nacos2:7848 is connected.

2024-05-27 04:17:13,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=278, votedFor=nacos3:7848, cost time=29 ms

2024-05-27 04:17:13,681 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:17:13,688 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=278, currTerm=278, granted=true, requestLastLogId=LogId [index=266, term=277], lastLogId=LogId [index=266, term=277].

2024-05-27 04:17:13,690 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=278, currTerm=278.

2024-05-27 04:17:13,701 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=278, votedFor=nacos1:7848, cost time=28 ms

2024-05-27 04:17:13,703 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=277, currTerm=278.

2024-05-27 04:17:13,712 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=277, currTerm=278.

2024-05-27 04:33:38,559 INFO Node <naming_instance_metadata/nacos3:7848> term 276 start preVote.

2024-05-27 04:33:39,282 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_269.

2024-05-27 04:33:39,286 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_269.

2024-05-27 04:33:39,276 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=279, currTerm=278, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:33:38,560 INFO Node <naming_persistent_service/nacos3:7848> term 284 start preVote.

2024-05-27 04:33:39,302 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_267.

2024-05-27 04:33:39,317 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=277, currTerm=276, because the leader nacos2:7848's lease is still valid.

2024-05-27 04:33:38,560 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 04:33:38,559 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 04:33:39,327 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 04:33:38,559 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=276, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 04:33:38,559 INFO Node <naming_persistent_service_v2/nacos3:7848> term 278 start preVote.

2024-05-27 04:33:39,332 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 04:33:39,321 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 266 to 268, cost 0 ms.

2024-05-27 04:33:39,334 INFO Node <naming_persistent_service_v2/nacos3:7848> term 278 start preVote.

2024-05-27 04:33:39,340 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=285, currTerm=284, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:33:39,340 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=279, currTerm=278, because the leader nacos1:7848's lease is still valid.

2024-05-27 04:33:39,344 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=279, currTerm=278.

2024-05-27 04:33:39,344 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=278, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 04:33:39,349 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 04:33:39,357 INFO The channel nacos2:7848 has successfully established.

2024-05-27 04:33:39,383 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 04:33:39,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=279, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-27 04:33:39,392 INFO Peer nacos2:7848 is connected.

2024-05-27 04:33:39,392 INFO The channel nacos1:7848 has successfully established.

2024-05-27 04:33:39,426 INFO Peer nacos1:7848 is connected.

2024-05-27 04:33:39,428 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_269.

2024-05-27 04:33:39,443 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_269.

2024-05-27 04:33:39,428 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_275.

2024-05-27 04:33:39,447 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_275.

2024-05-27 04:33:39,428 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_267.

2024-05-27 04:33:39,443 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=278, granted=false.

2024-05-27 04:33:39,479 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=278, granted=false.

2024-05-27 04:33:39,450 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=276, granted=true.

2024-05-27 04:33:39,493 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=276.

2024-05-27 04:33:39,456 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=279, votedFor=nacos2:7848, cost time=37 ms

2024-05-27 04:33:39,456 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_267.

2024-05-27 04:33:39,476 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_267.

2024-05-27 04:33:39,503 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_265.

2024-05-27 04:33:39,480 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_273.

2024-05-27 04:33:39,483 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=278, granted=true.

2024-05-27 04:33:39,508 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=278.

2024-05-27 04:33:39,472 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=284, granted=true.

2024-05-27 04:33:39,514 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=284.

2024-05-27 04:33:39,495 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=276, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 04:33:39,495 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:33:39,509 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 266 to 268, cost 1 ms.

2024-05-27 04:33:39,515 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 04:33:39,515 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:33:39,517 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 264 to 266, cost 1 ms.

2024-05-27 04:33:39,514 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 04:33:39,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=279, votedFor=nacos3:7848, cost time=12 ms

2024-05-27 04:33:39,532 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=285, currTerm=285.

2024-05-27 04:33:39,534 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:33:39,538 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 272 to 274, cost 0 ms.

2024-05-27 04:33:39,540 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=279, currTerm=279.

2024-05-27 04:33:39,543 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=277, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 04:33:39,545 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=277, currTerm=277.

2024-05-27 04:33:39,547 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=285, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 04:33:39,560 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=279, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 04:33:39,561 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 04:33:39,565 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 04:33:39,567 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 04:33:39,585 INFO onLeaderStart: term=279.

2024-05-27 04:50:04,403 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 04:50:05,638 INFO Node <naming_instance_metadata/nacos3:7848> term 277 start preVote.

2024-05-27 04:50:05,644 INFO Node <naming_service_metadata/nacos3:7848> term 279 start preVote.

2024-05-27 04:50:05,637 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=285, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 04:50:05,273 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=279, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 04:50:05,380 INFO Node <naming_persistent_service/nacos3:7848> term 285 start preVote.

2024-05-27 04:50:05,646 INFO Node <naming_persistent_service/nacos3:7848> term 285 start preVote.

2024-05-27 04:50:05,638 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=277, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 04:50:05,307 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 04:50:05,650 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=268, lastLogIncluded=0, lastLogIndex=268, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=149, type=Follower] is going to quit

2024-05-27 04:50:05,656 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=268, lastLogIncluded=0, lastLogIndex=268, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=150, type=Follower] is going to quit

2024-05-27 04:50:05,644 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=279, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 04:50:05,644 INFO Node <naming_instance_metadata/nacos3:7848> term 277 start preVote.

2024-05-27 04:50:05,656 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 04:50:05,660 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 04:50:05,658 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 04:50:05,664 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 04:50:05,682 INFO The channel nacos1:7848 has successfully established.

2024-05-27 04:50:05,683 INFO Peer nacos1:7848 is connected.

2024-05-27 04:50:05,666 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=285, granted=false.

2024-05-27 04:50:05,679 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=280, currTerm=279, granted=true, requestLastLogId=LogId [index=268, term=279], lastLogId=LogId [index=268, term=279].

2024-05-27 04:50:05,685 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 04:50:05,683 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=277, granted=false.

2024-05-27 04:50:05,686 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=277, granted=true.

2024-05-27 04:50:05,687 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=277.

2024-05-27 04:50:05,685 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=279, granted=false.

2024-05-27 04:50:05,686 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=280, currTerm=279, granted=true, requestLastLogId=LogId [index=268, term=279], lastLogId=LogId [index=268, term=279].

2024-05-27 04:50:05,686 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 04:50:05,689 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 04:50:05,696 INFO The channel nacos2:7848 has successfully established.

2024-05-27 04:50:05,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=278, votedFor=nacos3:7848, cost time=3 ms

2024-05-27 04:50:05,698 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:50:05,704 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=278, currTerm=278.

2024-05-27 04:50:05,694 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=280, currTerm=279.

2024-05-27 04:50:05,689 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=285, granted=false.

2024-05-27 04:50:05,699 INFO Peer nacos2:7848 is connected.

2024-05-27 04:50:05,705 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=278, currTerm=278, granted=true, requestLastLogId=LogId [index=270, term=277], lastLogId=LogId [index=270, term=277].

2024-05-27 04:50:05,715 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:50:05,709 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=280, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-27 04:50:05,711 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=285, granted=true.

2024-05-27 04:50:05,726 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=279, granted=true.

2024-05-27 04:50:05,731 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=279.

2024-05-27 04:50:05,732 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=279, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 04:50:05,727 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 04:50:05,729 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 04:50:05,731 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=285.

2024-05-27 04:50:05,735 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=280, votedFor=nacos1:7848, cost time=6 ms

2024-05-27 04:50:05,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=286, votedFor=nacos3:7848, cost time=6 ms

2024-05-27 04:50:05,740 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 04:50:05,744 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=280, votedFor=nacos3:7848, cost time=11 ms

2024-05-27 04:50:05,752 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=286, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 04:50:05,752 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=280, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 04:50:05,754 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 04:50:05,755 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 04:50:05,754 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 04:50:05,759 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 04:50:05,759 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 04:50:05,772 INFO onLeaderStart: term=280.

2024-05-27 04:50:05,772 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 04:50:05,780 INFO onLeaderStart: term=286.

2024-05-27 05:01:42,202 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=280, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 05:01:42,206 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=271, lastLogIncluded=0, lastLogIndex=271, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=175, type=Follower] is going to quit

2024-05-27 05:01:42,207 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=271, lastLogIncluded=0, lastLogIndex=271, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=176, type=Follower] is going to quit

2024-05-27 05:01:42,202 INFO Node <naming_persistent_service_v2/nacos3:7848> term 280 start preVote.

2024-05-27 05:01:42,205 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=286, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 05:01:42,205 INFO Node <naming_instance_metadata/nacos3:7848> term 278 start preVote.

2024-05-27 05:01:42,211 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 05:01:42,205 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 05:01:42,205 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 05:01:42,207 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 05:01:42,212 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=281, currTerm=280, granted=true, requestLastLogId=LogId [index=271, term=280], lastLogId=LogId [index=271, term=280].

2024-05-27 05:01:42,212 INFO Node <naming_instance_metadata/nacos3:7848> term 278 start preVote.

2024-05-27 05:01:42,212 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=277, lastLogIncluded=0, lastLogIndex=277, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=194, type=Follower] is going to quit

2024-05-27 05:01:42,216 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=279, currTerm=278, because the leader nacos2:7848's lease is still valid.

2024-05-27 05:01:42,228 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,247 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=281, currTerm=280.

2024-05-27 05:01:42,247 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=277, lastLogIncluded=0, lastLogIndex=277, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=193, type=Follower] is going to quit

2024-05-27 05:01:42,249 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=281, currTerm=280, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:01:42,282 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=281, currTerm=280, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:01:42,275 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=278, granted=true.

2024-05-27 05:01:42,294 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=278.

2024-05-27 05:01:42,288 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,289 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=287, currTerm=286, granted=true, requestLastLogId=LogId [index=277, term=286], lastLogId=LogId [index=277, term=286].

2024-05-27 05:01:42,289 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=281, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 05:01:42,291 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=280, granted=false.

2024-05-27 05:01:42,299 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=281, currTerm=280.

2024-05-27 05:01:42,297 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=279, currTerm=279.

2024-05-27 05:01:42,296 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=278, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 05:01:42,297 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=287, currTerm=286.

2024-05-27 05:01:42,298 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,300 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=280, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:01:42,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=281, votedFor=nacos2:7848, cost time=5 ms

2024-05-27 05:01:42,304 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 05:01:42,312 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=281, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 05:01:42,316 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=287, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 05:01:42,324 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=287, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 05:01:42,324 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=281, votedFor=nacos2:7848, cost time=9 ms

2024-05-27 05:01:42,324 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=287, currTerm=287.

2024-05-27 05:01:42,325 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=279, votedFor=nacos3:7848, cost time=12 ms

2024-05-27 05:01:42,328 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=287, currTerm=287, granted=true, requestLastLogId=LogId [index=277, term=286], lastLogId=LogId [index=277, term=286].

2024-05-27 05:01:42,344 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,328 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=280, currTerm=281.

2024-05-27 05:01:42,342 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=278, currTerm=279.

2024-05-27 05:01:42,364 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=278, currTerm=279.

2024-05-27 05:01:42,345 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:01:42,367 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 05:01:42,376 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 05:18:15,455 INFO Node <naming_persistent_service/nacos3:7848> term 287 start preVote.

2024-05-27 05:18:15,542 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=279, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 05:18:15,542 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=281, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 05:18:15,541 INFO Node <naming_service_metadata/nacos3:7848> term 281 start preVote.

2024-05-27 05:18:15,540 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=281, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 05:18:15,538 INFO Node <naming_persistent_service_v2/nacos3:7848> term 281 start preVote.

2024-05-27 05:18:15,468 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=287, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 05:18:15,542 INFO Node <naming_instance_metadata/nacos3:7848> term 279 start preVote.

2024-05-27 05:18:15,700 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_270.

2024-05-27 05:18:15,700 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_278.

2024-05-27 05:18:15,787 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_278.

2024-05-27 05:18:15,700 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_272.

2024-05-27 05:18:15,796 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_272.

2024-05-27 05:18:15,727 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_272.

2024-05-27 05:18:15,797 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_272.

2024-05-27 05:18:15,756 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=287, granted=true.

2024-05-27 05:18:15,808 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=287.

2024-05-27 05:18:15,771 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=281, granted=true.

2024-05-27 05:18:15,862 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=281.

2024-05-27 05:18:15,865 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=281, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 05:18:15,786 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_270.

2024-05-27 05:18:15,786 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=282, currTerm=281, granted=true, requestLastLogId=LogId [index=270, term=281], lastLogId=LogId [index=270, term=281].

2024-05-27 05:18:15,878 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=281, granted=true.

2024-05-27 05:18:15,803 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_275.

2024-05-27 05:18:15,804 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_269.

2024-05-27 05:18:15,859 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=288, currTerm=288, granted=true, requestLastLogId=LogId [index=278, term=287], lastLogId=LogId [index=278, term=287].

2024-05-27 05:18:15,861 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_269.

2024-05-27 05:18:15,877 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_267.

2024-05-27 05:18:15,879 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=282, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 05:18:15,882 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=281.

2024-05-27 05:18:15,893 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=279, granted=true.

2024-05-27 05:18:15,894 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 274 to 276, cost 0 ms.

2024-05-27 05:18:15,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=288, votedFor=nacos3:7848, cost time=52 ms

2024-05-27 05:18:15,939 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 268 to 270, cost 0 ms.

2024-05-27 05:18:15,939 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 266 to 268, cost 0 ms.

2024-05-27 05:18:15,939 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 268 to 270, cost 0 ms.

2024-05-27 05:18:15,942 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=279.

2024-05-27 05:18:15,950 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=279, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 05:18:15,943 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=282, currTerm=282, granted=true, requestLastLogId=LogId [index=272, term=281], lastLogId=LogId [index=272, term=281].

2024-05-27 05:18:15,944 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=287, currTerm=288.

2024-05-27 05:18:15,947 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=282, votedFor=nacos3:7848, cost time=6 ms

2024-05-27 05:18:15,959 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 05:18:15,965 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=282, currTerm=282.

2024-05-27 05:18:15,957 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=282, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 05:18:15,970 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=281, currTerm=282.

2024-05-27 05:18:15,974 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 05:18:15,970 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=280, votedFor=nacos3:7848, cost time=20 ms

2024-05-27 05:18:15,973 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 05:18:15,980 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=280, currTerm=280, granted=true, requestLastLogId=LogId [index=272, term=279], lastLogId=LogId [index=272, term=279].

2024-05-27 05:18:15,980 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=288, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 05:18:15,983 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 05:18:15,984 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 05:18:15,989 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=280, currTerm=280.

2024-05-27 05:18:15,990 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=280, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 05:18:15,985 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 05:18:15,985 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 05:18:15,993 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 05:18:15,995 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 05:18:15,997 INFO onLeaderStart: term=282.

2024-05-27 05:18:15,998 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 05:18:16,000 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 05:18:16,003 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 05:18:16,014 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 05:18:16,019 INFO onLeaderStart: term=288.

2024-05-27 05:18:16,023 INFO onLeaderStart: term=280.

2024-05-27 05:18:16,024 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 05:18:20,435 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 05:18:20,437 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 05:18:20,437 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 05:18:20,438 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 05:34:40,209 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=288, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 05:34:40,263 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=282, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 05:34:41,239 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 05:34:41,219 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=280, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 05:34:41,236 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=279, lastLogIncluded=0, lastLogIndex=279, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=196, type=Follower] is going to quit

2024-05-27 05:34:41,270 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=279, lastLogIncluded=0, lastLogIndex=279, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=195, type=Follower] is going to quit

2024-05-27 05:34:41,268 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=273, lastLogIncluded=0, lastLogIndex=273, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=178, type=Follower] is going to quit

2024-05-27 05:34:41,268 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 05:34:41,269 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 05:34:41,269 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=273, lastLogIncluded=0, lastLogIndex=273, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=195, type=Follower] is going to quit

2024-05-27 05:34:41,338 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=273, lastLogIncluded=0, lastLogIndex=273, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=196, type=Follower] is going to quit

2024-05-27 05:34:41,272 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=289, currTerm=288, granted=true, requestLastLogId=LogId [index=279, term=288], lastLogId=LogId [index=279, term=288].

2024-05-27 05:34:41,353 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=289, currTerm=288.

2024-05-27 05:34:41,272 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=273, lastLogIncluded=0, lastLogIndex=273, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=177, type=Follower] is going to quit

2024-05-27 05:34:41,359 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=283, currTerm=282, granted=true, requestLastLogId=LogId [index=273, term=282], lastLogId=LogId [index=273, term=282].

2024-05-27 05:34:41,360 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=283, currTerm=282, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:34:41,372 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=283, currTerm=282.

2024-05-27 05:34:41,364 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=283, currTerm=282.

2024-05-27 05:34:41,372 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=281, currTerm=280.

2024-05-27 05:34:41,376 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=282, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:34:41,395 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=289, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-27 05:34:41,397 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=283, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-27 05:34:41,402 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=281, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-27 05:34:41,406 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=283, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-27 05:34:41,407 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=283, currTerm=283, granted=true, requestLastLogId=LogId [index=273, term=282], lastLogId=LogId [index=273, term=282].

2024-05-27 05:34:41,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=289, votedFor=nacos1:7848, cost time=21 ms

2024-05-27 05:34:41,420 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 05:34:41,420 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=289, currTerm=289, granted=true, requestLastLogId=LogId [index=279, term=288], lastLogId=LogId [index=279, term=288].

2024-05-27 05:34:41,426 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=283, votedFor=nacos2:7848, cost time=24 ms

2024-05-27 05:34:41,426 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=281, votedFor=nacos1:7848, cost time=20 ms

2024-05-27 05:34:41,437 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=281, currTerm=281, granted=true, requestLastLogId=LogId [index=273, term=280], lastLogId=LogId [index=273, term=280].

2024-05-27 05:34:41,427 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=283, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 05:34:41,440 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=283, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 05:34:41,443 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=281, currTerm=281, granted=true, requestLastLogId=LogId [index=273, term=280], lastLogId=LogId [index=273, term=280].

2024-05-27 05:51:07,949 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 05:51:07,990 INFO Node <naming_service_metadata/nacos3:7848> term 283 start preVote.

2024-05-27 05:51:07,990 INFO Node <naming_instance_metadata/nacos3:7848> term 281 start preVote.

2024-05-27 05:51:07,990 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=281, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 05:51:07,991 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=283, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 05:51:07,991 INFO Node <naming_persistent_service_v2/nacos3:7848> term 283 start preVote.

2024-05-27 05:51:07,991 INFO Node <naming_persistent_service/nacos3:7848> term 289 start preVote.

2024-05-27 05:51:07,992 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=283, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 05:51:07,992 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=289, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 05:51:08,702 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 05:51:08,741 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 05:51:09,180 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 05:51:09,182 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=284, currTerm=283, because the leader nacos2:7848's lease is still valid.

2024-05-27 05:51:09,148 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=290, currTerm=289, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:51:09,187 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=290, currTerm=289.

2024-05-27 05:51:09,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_274.

2024-05-27 05:51:09,193 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_274.

2024-05-27 05:51:09,158 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 05:51:09,177 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=283, granted=false.

2024-05-27 05:51:09,182 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=282, currTerm=281, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:51:09,198 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=284, currTerm=283, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:51:09,213 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=284, currTerm=283, because the leader nacos1:7848's lease is still valid.

2024-05-27 05:51:09,216 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=284, currTerm=283.

2024-05-27 05:51:09,184 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 05:51:09,183 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 05:51:09,186 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 05:51:09,186 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=284, currTerm=283.

2024-05-27 05:51:09,196 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_274.

2024-05-27 05:51:09,207 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=290, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-27 05:51:09,205 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_272.

2024-05-27 05:51:09,233 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_272.

2024-05-27 05:51:09,200 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_272.

2024-05-27 05:51:09,235 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=284, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 05:51:09,198 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 05:51:09,236 INFO The channel nacos2:7848 has successfully established.

2024-05-27 05:51:09,211 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=282, currTerm=281.

2024-05-27 05:51:09,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=281, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:51:09,238 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_270.

2024-05-27 05:51:09,223 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=283, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:51:09,240 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=284, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 05:51:09,241 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=290, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 05:51:09,228 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 05:51:09,231 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=283, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:51:09,231 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_274.

2024-05-27 05:51:09,233 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 05:51:09,245 INFO The channel nacos2:7848 has successfully established.

2024-05-27 05:51:09,245 INFO Peer nacos2:7848 is connected.

2024-05-27 05:51:09,236 INFO Peer nacos2:7848 is connected.

2024-05-27 05:51:09,240 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 270 to 273, cost 1 ms.

2024-05-27 05:51:09,243 INFO The channel nacos2:7848 has successfully established.

2024-05-27 05:51:09,248 INFO Peer nacos2:7848 is connected.

2024-05-27 05:51:09,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=284, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 05:51:09,250 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=283, currTerm=284.

2024-05-27 05:51:09,243 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=289, currTerm=290.

2024-05-27 05:51:09,245 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=282, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 05:51:09,252 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=289, currTerm=290.

2024-05-27 05:51:09,246 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 268 to 271, cost 2 ms.

2024-05-27 05:51:09,254 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 05:51:09,254 INFO The channel nacos1:7848 has successfully established.

2024-05-27 05:51:09,255 INFO Peer nacos1:7848 is connected.

2024-05-27 05:51:09,246 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_272.

2024-05-27 05:51:09,246 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=284, votedFor=nacos1:7848, cost time=5 ms

2024-05-27 05:51:09,247 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=289, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 05:51:09,253 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=281, currTerm=282.

2024-05-27 05:51:09,260 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=283, currTerm=284.

2024-05-27 05:51:09,262 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_280.

2024-05-27 05:51:09,266 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 270 to 273, cost 1 ms.

2024-05-27 05:51:09,267 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_280.

2024-05-27 05:51:09,267 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=283, currTerm=284.

2024-05-27 05:51:09,267 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=281, currTerm=282.

2024-05-27 05:51:09,270 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_278.

2024-05-27 05:51:09,277 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 276 to 279, cost 0 ms.

2024-05-27 05:51:09,278 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=282, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 05:51:09,280 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=282, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 06:02:43,459 INFO Node <naming_persistent_service_v2/nacos3:7848> term 284 start preVote.

2024-05-27 06:02:43,460 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:02:43,459 INFO Node <naming_service_metadata/nacos3:7848> term 284 start preVote.

2024-05-27 06:02:43,459 INFO Node <naming_persistent_service/nacos3:7848> term 290 start preVote.

2024-05-27 06:02:43,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=290, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:02:43,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=282, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:02:43,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 06:02:43,459 INFO Node <naming_instance_metadata/nacos3:7848> term 282 start preVote.

2024-05-27 06:02:44,156 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=284, granted=true.

2024-05-27 06:02:44,301 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=284.

2024-05-27 06:02:44,174 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=285, currTerm=284, because the leader nacos1:7848's lease is still valid.

2024-05-27 06:02:44,179 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=283, currTerm=282, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:02:44,313 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=290, granted=false.

2024-05-27 06:02:44,316 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:02:44,318 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=284, granted=true.

2024-05-27 06:02:44,319 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=282, granted=false.

2024-05-27 06:02:44,330 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=282, granted=true.

2024-05-27 06:02:44,331 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=282.

2024-05-27 06:02:44,323 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=290, granted=false.

2024-05-27 06:02:44,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=285, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 06:02:44,327 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=284.

2024-05-27 06:02:44,332 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=282, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:02:44,334 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=285, currTerm=285, granted=true, requestLastLogId=LogId [index=275, term=284], lastLogId=LogId [index=275, term=284].

2024-05-27 06:02:44,342 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:02:44,335 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=284, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:02:44,346 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=283, votedFor=nacos3:7848, cost time=15 ms

2024-05-27 06:02:44,348 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=283, currTerm=283.

2024-05-27 06:02:44,349 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=285, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 06:02:44,351 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:02:44,352 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=285, currTerm=285.

2024-05-27 06:02:44,357 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=285, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 06:02:44,361 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 06:02:44,371 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 06:02:44,385 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 06:02:44,396 INFO onLeaderStart: term=285.

2024-05-27 06:19:06,865 INFO Node <naming_instance_metadata/nacos3:7848> term 283 start preVote.

2024-05-27 06:19:06,931 INFO Node <naming_instance_metadata/nacos3:7848> term 283 start preVote.

2024-05-27 06:19:06,874 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=283, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 06:19:06,924 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=285, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:19:06,871 INFO Node <naming_persistent_service_v2/nacos3:7848> term 285 start preVote.

2024-05-27 06:19:06,934 INFO Node <naming_persistent_service_v2/nacos3:7848> term 285 start preVote.

2024-05-27 06:19:06,975 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=285, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 06:19:07,025 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=276, lastLogIncluded=0, lastLogIndex=276, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=181, type=Follower] is going to quit

2024-05-27 06:19:07,026 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=276, lastLogIncluded=0, lastLogIndex=276, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=180, type=Follower] is going to quit

2024-05-27 06:19:07,074 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 06:19:07,082 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=291, currTerm=290, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:19:07,084 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=286, currTerm=285, granted=true, requestLastLogId=LogId [index=276, term=285], lastLogId=LogId [index=276, term=285].

2024-05-27 06:19:07,105 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=283, granted=true.

2024-05-27 06:19:07,110 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=283.

2024-05-27 06:19:07,107 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=285, granted=true.

2024-05-27 06:19:07,115 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=285.

2024-05-27 06:19:07,109 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:19:07,113 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:19:07,115 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:19:07,116 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=283, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:19:07,117 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=285, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:19:07,118 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=286, currTerm=286, granted=true, requestLastLogId=LogId [index=274, term=285], lastLogId=LogId [index=274, term=285].

2024-05-27 06:19:07,123 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:19:07,124 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:19:07,123 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=286, currTerm=285.

2024-05-27 06:19:07,128 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=291, currTerm=290.

2024-05-27 06:19:07,129 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=290, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 06:19:07,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=284, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 06:19:07,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=286, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 06:19:07,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=286, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 06:19:07,137 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 06:19:07,137 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=286, currTerm=286.

2024-05-27 06:19:07,135 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=284, currTerm=284, granted=true, requestLastLogId=LogId [index=276, term=283], lastLogId=LogId [index=276, term=283].

2024-05-27 06:19:07,136 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=291, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 06:19:07,142 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=286, votedFor=nacos1:7848, cost time=6 ms

2024-05-27 06:19:07,143 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=286, currTerm=286, granted=true, requestLastLogId=LogId [index=276, term=285], lastLogId=LogId [index=276, term=285].

2024-05-27 06:19:07,143 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:19:07,148 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=291, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 06:19:07,152 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:19:07,158 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=286, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 06:19:07,160 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=284, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 06:19:07,161 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 06:19:07,161 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 06:19:07,166 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 06:19:07,167 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 06:19:07,173 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 06:19:07,180 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 06:19:07,181 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 06:19:07,205 INFO onLeaderStart: term=286.

2024-05-27 06:19:07,206 INFO onLeaderStart: term=284.

2024-05-27 06:19:07,213 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:21:08,687 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_277.

2024-05-27 06:21:08,688 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_277.

2024-05-27 06:21:08,690 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_274.

2024-05-27 06:21:08,692 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 273 to 275, cost 0 ms.

2024-05-27 06:21:09,096 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_277.

2024-05-27 06:21:09,097 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_277.

2024-05-27 06:21:09,099 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_274.

2024-05-27 06:21:09,103 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 273 to 275, cost 1 ms.

2024-05-27 06:21:09,109 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_282.

2024-05-27 06:21:09,110 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_282.

2024-05-27 06:21:09,110 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_275.

2024-05-27 06:21:09,111 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_275.

2024-05-27 06:21:09,112 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_280.

2024-05-27 06:21:09,113 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_272.

2024-05-27 06:21:09,114 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 279 to 281, cost 0 ms.

2024-05-27 06:21:09,117 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 271 to 273, cost 0 ms.

2024-05-27 06:36:43,811 INFO Node <naming_service_metadata/nacos3:7848> term 286 start preVote.

2024-05-27 06:36:44,003 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=291, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 06:36:43,817 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=286, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 06:36:44,601 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 06:36:44,694 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=275, lastLogIncluded=0, lastLogIndex=275, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=152, type=Follower] is going to quit

2024-05-27 06:36:44,695 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 06:36:44,696 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=275, lastLogIncluded=0, lastLogIndex=275, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=151, type=Follower] is going to quit

2024-05-27 06:36:44,003 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=286, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 06:36:44,703 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 06:36:43,868 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 06:36:44,002 INFO Node <naming_persistent_service/nacos3:7848> term 291 start preVote.

2024-05-27 06:36:43,816 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=284, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 06:36:44,849 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=277, lastLogIncluded=0, lastLogIndex=277, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=197, type=Follower] is going to quit

2024-05-27 06:36:44,851 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=277, lastLogIncluded=0, lastLogIndex=277, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=198, type=Follower] is going to quit

2024-05-27 06:36:44,842 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=287, currTerm=286, granted=true, requestLastLogId=LogId [index=275, term=286], lastLogId=LogId [index=275, term=286].

2024-05-27 06:36:44,852 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 06:36:44,865 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 06:36:44,867 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 06:36:44,869 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 06:36:44,868 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=287, currTerm=286.

2024-05-27 06:36:44,875 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=285, currTerm=284, granted=true, requestLastLogId=LogId [index=277, term=284], lastLogId=LogId [index=277, term=284].

2024-05-27 06:36:44,878 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=285, currTerm=284, granted=true, requestLastLogId=LogId [index=277, term=284], lastLogId=LogId [index=277, term=284].

2024-05-27 06:36:44,881 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 06:36:44,882 INFO The channel nacos2:7848 has successfully established.

2024-05-27 06:36:44,884 INFO Peer nacos2:7848 is connected.

2024-05-27 06:36:44,891 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=285, currTerm=284.

2024-05-27 06:36:44,895 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 06:36:44,897 INFO The channel nacos2:7848 has successfully established.

2024-05-27 06:36:44,896 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=287, currTerm=286, because the leader nacos1:7848's lease is still valid.

2024-05-27 06:36:44,897 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=292, currTerm=291, because the leader nacos1:7848's lease is still valid.

2024-05-27 06:36:44,897 INFO Peer nacos2:7848 is connected.

2024-05-27 06:36:44,899 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=287, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-27 06:36:44,901 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=286, granted=true.

2024-05-27 06:36:44,901 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=286.

2024-05-27 06:36:44,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=286, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:36:44,910 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=291, granted=true.

2024-05-27 06:36:44,912 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=291.

2024-05-27 06:36:44,913 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=291, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:36:44,916 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=285, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-27 06:36:44,918 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=287, votedFor=nacos2:7848, cost time=19 ms

2024-05-27 06:36:44,922 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=287, votedFor=nacos3:7848, cost time=19 ms

2024-05-27 06:36:44,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=292, votedFor=nacos3:7848, cost time=9 ms

2024-05-27 06:36:44,926 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=285, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 06:36:44,935 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 06:36:44,935 INFO The channel nacos1:7848 has successfully established.

2024-05-27 06:36:44,936 INFO Peer nacos1:7848 is connected.

2024-05-27 06:36:44,943 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:36:44,960 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=285, currTerm=285, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:36:44,985 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=287, currTerm=287, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:36:44,994 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=287, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 06:36:44,998 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 06:36:44,999 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 06:36:44,995 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:36:44,994 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=292, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 06:36:45,009 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 06:36:45,012 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 06:36:45,016 INFO onLeaderStart: term=287.

2024-05-27 06:36:45,020 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 06:36:45,025 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 06:36:45,035 INFO onLeaderStart: term=292.

2024-05-27 06:36:45,043 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 06:36:45,059 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 06:53:10,692 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=287, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:53:10,559 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=292, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 06:53:10,692 INFO Node <naming_persistent_service_v2/nacos3:7848> term 287 start preVote.

2024-05-27 06:53:10,560 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=287, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 06:53:11,684 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=278, lastLogIncluded=0, lastLogIndex=278, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=182, type=Follower] is going to quit

2024-05-27 06:53:11,684 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=278, lastLogIncluded=0, lastLogIndex=278, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=183, type=Follower] is going to quit

2024-05-27 06:53:11,684 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 06:53:10,689 INFO Node <naming_instance_metadata/nacos3:7848> term 285 start preVote.

2024-05-27 06:53:10,689 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=285, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 06:53:11,744 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_276.

2024-05-27 06:53:11,682 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=197, type=Follower] is going to quit

2024-05-27 06:53:11,755 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=198, type=Follower] is going to quit

2024-05-27 06:53:11,695 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=286, currTerm=285, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:53:11,753 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=287, granted=false.

2024-05-27 06:53:11,768 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=288, currTerm=287, because the leader nacos2:7848's lease is still valid.

2024-05-27 06:53:11,754 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 06:53:11,750 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=288, currTerm=287, granted=true, requestLastLogId=LogId [index=278, term=287], lastLogId=LogId [index=278, term=287].

2024-05-27 06:53:11,771 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=283, term=292], lastLogId=LogId [index=283, term=292].

2024-05-27 06:53:11,754 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_276.

2024-05-27 06:53:11,772 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=283, term=292], lastLogId=LogId [index=283, term=292].

2024-05-27 06:53:11,780 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_283.

2024-05-27 06:53:11,781 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_275.

2024-05-27 06:53:11,781 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_278.

2024-05-27 06:53:11,781 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_283.

2024-05-27 06:53:11,789 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_278.

2024-05-27 06:53:11,789 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 273 to 276, cost 0 ms.

2024-05-27 06:53:11,792 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_282.

2024-05-27 06:53:11,793 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=293, currTerm=292.

2024-05-27 06:53:11,795 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_277.

2024-05-27 06:53:11,796 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_278.

2024-05-27 06:53:11,799 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=288, currTerm=287, granted=true, requestLastLogId=LogId [index=278, term=287], lastLogId=LogId [index=278, term=287].

2024-05-27 06:53:11,800 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=285, granted=false.

2024-05-27 06:53:11,801 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_278.

2024-05-27 06:53:11,803 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=293, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-27 06:53:11,811 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 281 to 283, cost 8 ms.

2024-05-27 06:53:11,812 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 275 to 278, cost 0 ms.

2024-05-27 06:53:11,815 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_277.

2024-05-27 06:53:11,816 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=288, currTerm=287.

2024-05-27 06:53:11,819 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=287, granted=true.

2024-05-27 06:53:11,820 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=287.

2024-05-27 06:53:11,820 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=293, votedFor=nacos1:7848, cost time=14 ms

2024-05-27 06:53:11,821 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=287, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 06:53:11,824 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=286, currTerm=285.

2024-05-27 06:53:11,827 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=285, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 06:53:11,828 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 275 to 278, cost 0 ms.

2024-05-27 06:53:11,830 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=288, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 06:53:11,832 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=288, votedFor=nacos3:7848, cost time=11 ms

2024-05-27 06:53:11,833 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=288, currTerm=288.

2024-05-27 06:53:11,834 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=286, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-27 06:53:11,837 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=288, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 06:53:11,852 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=286, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 06:53:11,855 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=285, currTerm=286.

2024-05-27 06:53:11,861 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 06:53:11,862 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=288, currTerm=288.

2024-05-27 06:53:11,878 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:03:45,502 INFO Node <naming_instance_metadata/nacos3:7848> term 286 start preVote.

2024-05-27 07:03:45,788 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=286, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:03:45,505 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=288, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:03:45,805 INFO Node <naming_instance_metadata/nacos3:7848> term 286 start preVote.

2024-05-27 07:03:45,503 INFO Node <naming_persistent_service_v2/nacos3:7848> term 288 start preVote.

2024-05-27 07:03:46,272 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=288, granted=true.

2024-05-27 07:03:46,273 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=288.

2024-05-27 07:03:46,279 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=286, granted=true.

2024-05-27 07:03:46,290 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=286.

2024-05-27 07:03:46,295 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=286, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 07:03:46,302 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=289, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 07:03:46,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=287, votedFor=nacos3:7848, cost time=16 ms

2024-05-27 07:03:46,309 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=289, currTerm=289, granted=true, requestLastLogId=LogId [index=277, term=288], lastLogId=LogId [index=277, term=288].

2024-05-27 07:03:46,312 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:03:46,316 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:03:46,325 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:03:46,336 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=287, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:03:46,337 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:03:46,338 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:03:46,344 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:03:46,348 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=289, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:03:46,351 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:03:46,352 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:03:46,354 INFO onLeaderStart: term=287.

2024-05-27 07:03:46,356 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:03:46,357 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:03:46,367 INFO onLeaderStart: term=289.

2024-05-27 07:03:50,575 INFO Node <naming_persistent_service/nacos3:7848> term 293 start preVote.

2024-05-27 07:03:50,575 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=293, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:03:50,579 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=293, granted=true.

2024-05-27 07:03:50,579 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=293.

2024-05-27 07:03:50,582 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:03:50,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=294, votedFor=nacos3:7848, cost time=7 ms

2024-05-27 07:03:50,595 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=294, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:03:50,596 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:03:50,597 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:03:50,597 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:03:50,601 INFO onLeaderStart: term=294.

2024-05-27 07:03:51,240 INFO Node <naming_service_metadata/nacos3:7848> term 288 start preVote.

2024-05-27 07:03:51,240 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=288, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:03:51,242 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=288, granted=false.

2024-05-27 07:03:51,243 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=288, granted=true.

2024-05-27 07:03:51,243 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=288.

2024-05-27 07:03:51,252 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=289, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 07:03:51,259 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=289, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:03:51,260 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:03:51,261 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:03:51,263 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:03:51,269 INFO onLeaderStart: term=289.

2024-05-27 07:04:45,501 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499784818s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 07:23:11,722 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_280.

2024-05-27 07:23:11,723 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_280.

2024-05-27 07:23:11,727 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_278.

2024-05-27 07:23:11,727 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_278.

2024-05-27 07:23:11,727 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_278.

2024-05-27 07:23:11,732 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_276.

2024-05-27 07:23:11,732 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 278 to 279, cost 1 ms.

2024-05-27 07:23:11,733 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_280.

2024-05-27 07:23:11,733 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_280.

2024-05-27 07:23:11,735 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 276 to 277, cost 0 ms.

2024-05-27 07:23:11,737 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_278.

2024-05-27 07:23:11,742 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 278 to 279, cost 0 ms.

2024-05-27 07:23:11,798 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_285.

2024-05-27 07:23:11,798 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_285.

2024-05-27 07:23:11,801 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_283.

2024-05-27 07:23:11,806 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 283 to 284, cost 1 ms.

2024-05-27 07:23:16,728 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 07:23:16,730 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 07:23:16,732 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 07:23:16,733 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 07:24:18,604 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 07:24:18,613 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 07:24:18,633 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 07:24:18,635 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 07:32:42,042 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=294, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 07:32:42,042 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=289, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 07:32:42,042 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=287, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 07:32:42,042 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=289, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 07:32:42,058 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=285, lastLogIncluded=0, lastLogIndex=285, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=199, type=Follower] is going to quit

2024-05-27 07:32:42,124 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=285, lastLogIncluded=0, lastLogIndex=285, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=200, type=Follower] is going to quit

2024-05-27 07:32:42,127 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,058 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 07:32:42,060 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=278, lastLogIncluded=0, lastLogIndex=278, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=153, type=Follower] is going to quit

2024-05-27 07:32:42,139 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=278, lastLogIncluded=0, lastLogIndex=278, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=154, type=Follower] is going to quit

2024-05-27 07:32:42,060 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 07:32:42,141 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=290, currTerm=289, granted=true, requestLastLogId=LogId [index=278, term=289], lastLogId=LogId [index=278, term=289].

2024-05-27 07:32:42,142 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=290, currTerm=289, granted=true, requestLastLogId=LogId [index=278, term=289], lastLogId=LogId [index=278, term=289].

2024-05-27 07:32:42,079 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=199, type=Follower] is going to quit

2024-05-27 07:32:42,079 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 07:32:42,091 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=184, type=Follower] is going to quit

2024-05-27 07:32:42,091 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 07:32:42,127 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=295, currTerm=294, granted=true, requestLastLogId=LogId [index=285, term=294], lastLogId=LogId [index=285, term=294].

2024-05-27 07:32:42,144 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=200, type=Follower] is going to quit

2024-05-27 07:32:42,152 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,147 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=185, type=Follower] is going to quit

2024-05-27 07:32:42,147 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=290, currTerm=289.

2024-05-27 07:32:42,152 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=288, currTerm=287, granted=true, requestLastLogId=LogId [index=280, term=287], lastLogId=LogId [index=280, term=287].

2024-05-27 07:32:42,167 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=290, currTerm=289, granted=true, requestLastLogId=LogId [index=280, term=289], lastLogId=LogId [index=280, term=289].

2024-05-27 07:32:42,206 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=295, currTerm=294.

2024-05-27 07:32:42,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=290, votedFor=0.0.0.0:0, cost time=127 ms

2024-05-27 07:32:42,301 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=295, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 07:32:42,316 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,316 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=295, currTerm=295, granted=true, requestLastLogId=LogId [index=285, term=294], lastLogId=LogId [index=285, term=294].

2024-05-27 07:32:42,321 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=290, currTerm=289.

2024-05-27 07:32:42,322 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=288, currTerm=287.

2024-05-27 07:32:42,351 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=290, votedFor=nacos1:7848, cost time=52 ms

2024-05-27 07:32:42,354 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,354 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,381 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=290, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-27 07:32:42,410 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=288, votedFor=0.0.0.0:0, cost time=69 ms

2024-05-27 07:32:42,414 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=290, currTerm=290.

2024-05-27 07:32:42,414 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=295, votedFor=nacos1:7848, cost time=76 ms

2024-05-27 07:32:42,463 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=290, votedFor=nacos1:7848, cost time=60 ms

2024-05-27 07:32:42,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=288, votedFor=nacos1:7848, cost time=77 ms

2024-05-27 07:32:42,490 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=290, currTerm=290, granted=true, requestLastLogId=LogId [index=280, term=289], lastLogId=LogId [index=280, term=289].

2024-05-27 07:32:42,514 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=288, currTerm=288, granted=true, requestLastLogId=LogId [index=280, term=287], lastLogId=LogId [index=280, term=287].

2024-05-27 07:32:42,552 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,555 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=290, currTerm=290, granted=true, requestLastLogId=LogId [index=280, term=289], lastLogId=LogId [index=280, term=289].

2024-05-27 07:32:42,572 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,666 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,685 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,848 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:32:42,848 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 07:48:55,662 INFO Node <naming_persistent_service_v2/nacos3:7848> term 290 start preVote.

2024-05-27 07:48:55,663 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=288, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:48:55,663 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=290, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:48:55,663 INFO Node <naming_instance_metadata/nacos3:7848> term 288 start preVote.

2024-05-27 07:48:55,663 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=295, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:48:55,662 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=290, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 07:48:55,662 INFO Node <naming_persistent_service/nacos3:7848> term 295 start preVote.

2024-05-27 07:48:55,662 INFO Node <naming_service_metadata/nacos3:7848> term 290 start preVote.

2024-05-27 07:48:55,986 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=288, granted=false.

2024-05-27 07:48:55,987 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=290, granted=false.

2024-05-27 07:48:55,988 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=290, granted=true.

2024-05-27 07:48:55,989 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=290.

2024-05-27 07:48:55,988 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=296, currTerm=295, because the leader nacos1:7848's lease is still valid.

2024-05-27 07:48:55,991 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=291, currTerm=291, granted=true, requestLastLogId=LogId [index=279, term=290], lastLogId=LogId [index=279, term=290].

2024-05-27 07:48:55,995 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=291, currTerm=290, because the leader nacos1:7848's lease is still valid.

2024-05-27 07:48:56,025 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=295, granted=true.

2024-05-27 07:48:56,026 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=291, votedFor=nacos3:7848, cost time=34 ms

2024-05-27 07:48:56,029 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=290, currTerm=291.

2024-05-27 07:48:56,026 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=288, granted=true.

2024-05-27 07:48:56,035 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=288.

2024-05-27 07:48:56,026 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=295.

2024-05-27 07:48:56,026 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=290, granted=true.

2024-05-27 07:48:56,035 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:48:56,041 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=288, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 07:48:56,042 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=295, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 07:48:56,042 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 07:48:56,044 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=290.

2024-05-27 07:48:56,052 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=289, votedFor=nacos3:7848, cost time=12 ms

2024-05-27 07:48:56,090 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=290, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 07:48:56,095 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=296, votedFor=nacos3:7848, cost time=23 ms

2024-05-27 07:48:56,095 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=296, currTerm=296.

2024-05-27 07:48:56,095 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=291, currTerm=291.

2024-05-27 07:48:56,103 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=291, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:48:56,104 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:48:56,106 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:48:56,107 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=291, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 07:48:56,109 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:48:56,107 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=289, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 07:48:56,112 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 07:48:56,114 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 07:48:56,136 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 07:48:56,137 INFO onLeaderStart: term=289.

2024-05-27 07:48:56,147 INFO onLeaderStart: term=291.

2024-05-27 07:49:39,806 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499797073s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 08:04:47,061 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=291, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 08:04:47,244 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=296, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 08:04:47,866 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 08:04:47,851 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=155, type=Follower] is going to quit

2024-05-27 08:04:47,244 INFO Node <naming_persistent_service/nacos3:7848> term 296 start preVote.

2024-05-27 08:04:47,244 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=291, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 08:04:47,244 INFO Node <naming_service_metadata/nacos3:7848> term 291 start preVote.

2024-05-27 08:04:47,061 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=289, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 08:04:47,954 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 08:04:47,901 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=280, lastLogIncluded=0, lastLogIndex=280, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=156, type=Follower] is going to quit

2024-05-27 08:04:47,952 INFO Node <naming_persistent_service/nacos3:7848> term 296 start preVote.

2024-05-27 08:04:48,045 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=292, currTerm=291, granted=true, requestLastLogId=LogId [index=280, term=291], lastLogId=LogId [index=280, term=291].

2024-05-27 08:04:47,955 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=282, lastLogIncluded=0, lastLogIndex=282, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=201, type=Follower] is going to quit

2024-05-27 08:04:48,064 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=282, lastLogIncluded=0, lastLogIndex=282, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=202, type=Follower] is going to quit

2024-05-27 08:04:48,085 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=291, granted=true.

2024-05-27 08:04:48,100 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=291.

2024-05-27 08:04:48,144 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_280.

2024-05-27 08:04:48,146 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_280.

2024-05-27 08:04:48,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_278.

2024-05-27 08:04:48,128 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=290, currTerm=289, granted=true, requestLastLogId=LogId [index=282, term=289], lastLogId=LogId [index=282, term=289].

2024-05-27 08:04:48,156 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=291, currTerm=292.

2024-05-27 08:04:48,158 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:04:48,135 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_282.

2024-05-27 08:04:48,138 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=297, currTerm=296, granted=true, requestLastLogId=LogId [index=287, term=296], lastLogId=LogId [index=287, term=296].

2024-05-27 08:04:48,154 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=292, currTerm=291.

2024-05-27 08:04:48,160 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_282.

2024-05-27 08:04:48,165 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_287.

2024-05-27 08:04:48,168 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_287.

2024-05-27 08:04:48,165 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 277 to 279, cost 1 ms.

2024-05-27 08:04:48,165 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_282.

2024-05-27 08:04:48,171 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_282.

2024-05-27 08:04:48,168 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=292, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 08:04:48,171 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_280.

2024-05-27 08:04:48,172 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_285.

2024-05-27 08:04:48,173 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=292, currTerm=292, granted=true, requestLastLogId=LogId [index=282, term=291], lastLogId=LogId [index=282, term=291].

2024-05-27 08:04:48,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=292, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 08:04:48,176 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_280.

2024-05-27 08:04:48,181 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 279 to 281, cost 0 ms.

2024-05-27 08:04:48,182 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 284 to 286, cost 0 ms.

2024-05-27 08:04:48,188 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 297, expect=296.

2024-05-27 08:04:48,197 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=292, votedFor=nacos1:7848, cost time=20 ms

2024-05-27 08:04:48,207 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:04:48,207 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=296, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-27 08:04:48,200 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 279 to 281, cost 0 ms.

2024-05-27 08:04:48,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=297, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-27 08:04:48,218 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=297, currTerm=297.

2024-05-27 08:04:48,234 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=297, votedFor=nacos1:7848, cost time=13 ms

2024-05-27 08:04:48,236 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=296, currTerm=297.

2024-05-27 08:04:48,236 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=290, currTerm=289.

2024-05-27 08:04:48,237 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=296, currTerm=297.

2024-05-27 08:04:48,250 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=292, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 08:04:48,251 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 08:04:48,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=290, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 08:04:48,252 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 08:04:48,256 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:04:48,258 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 08:04:48,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=290, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 08:04:48,263 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=296, currTerm=297.

2024-05-27 08:04:48,274 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:04:48,270 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:04:48,282 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:04:48,285 INFO onLeaderStart: term=292.

2024-05-27 08:04:53,063 INFO Connection disconnected: /172.25.0.4:55212

2024-05-27 08:05:20,669 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=291, currTerm=290, granted=true, requestLastLogId=LogId [index=283, term=290], lastLogId=LogId [index=283, term=290].

2024-05-27 08:05:21,061 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=291, currTerm=290.

2024-05-27 08:05:21,101 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=290, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:05:21,200 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=291, votedFor=0.0.0.0:0, cost time=102 ms

2024-05-27 08:05:21,318 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=291, votedFor=nacos1:7848, cost time=93 ms

2024-05-27 08:20:01,127 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=292, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 08:20:02,179 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 08:20:01,870 INFO Node <naming_persistent_service/nacos3:7848> term 297 start preVote.

2024-05-27 08:20:02,180 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=186, type=Follower] is going to quit

2024-05-27 08:20:02,181 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 08:20:02,229 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=187, type=Follower] is going to quit

2024-05-27 08:20:02,256 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=298, currTerm=297, because the leader nacos1:7848's lease is still valid.

2024-05-27 08:20:02,258 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=298, currTerm=297.

2024-05-27 08:20:02,258 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:20:02,259 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=283, term=292], lastLogId=LogId [index=283, term=292].

2024-05-27 08:20:02,259 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:20:02,264 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=297, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:20:02,266 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=283, term=292], lastLogId=LogId [index=283, term=292].

2024-05-27 08:20:02,278 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=298, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-27 08:20:02,279 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=297, currTerm=298.

2024-05-27 08:20:02,277 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=283, term=292], lastLogId=LogId [index=283, term=292].

2024-05-27 08:20:02,306 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=293, currTerm=292.

2024-05-27 08:20:02,306 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=297, currTerm=298.

2024-05-27 08:20:02,328 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=293, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-27 08:20:02,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=298, votedFor=nacos2:7848, cost time=16 ms

2024-05-27 08:20:02,341 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=293, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 08:20:02,369 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=292, currTerm=291, because the leader nacos1:7848's lease is still valid.

2024-05-27 08:20:02,380 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:20:02,397 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=292, currTerm=291.

2024-05-27 08:20:02,398 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=291, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:20:02,409 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=292, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 08:20:02,416 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=292, votedFor=nacos2:7848, cost time=6 ms

2024-05-27 08:20:06,999 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 08:20:07,000 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 08:20:07,001 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 08:20:07,525 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=293, currTerm=292, granted=true, requestLastLogId=LogId [index=281, term=292], lastLogId=LogId [index=281, term=292].

2024-05-27 08:20:07,535 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=293, currTerm=292.

2024-05-27 08:20:07,536 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=292, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:20:07,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=293, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-27 08:20:07,546 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=293, votedFor=nacos1:7848, cost time=4 ms

2024-05-27 08:30:10,120 INFO Node <naming_persistent_service/nacos3:7848> term 298 start preVote.

2024-05-27 08:30:10,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=293, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 08:30:10,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=292, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 08:30:10,182 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=298, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 08:30:10,915 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=294, currTerm=293, granted=true, requestLastLogId=LogId [index=284, term=293], lastLogId=LogId [index=284, term=293].

2024-05-27 08:30:10,230 INFO Node <naming_persistent_service_v2/nacos3:7848> term 293 start preVote.

2024-05-27 08:30:10,230 INFO Node <naming_instance_metadata/nacos3:7848> term 292 start preVote.

2024-05-27 08:30:10,943 INFO Node <naming_persistent_service/nacos3:7848> term 298 start preVote.

2024-05-27 08:30:11,023 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=299, currTerm=298, because the leader nacos2:7848's lease is still valid.

2024-05-27 08:30:11,031 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=294, currTerm=293.

2024-05-27 08:30:11,032 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=293, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:30:11,033 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=293, granted=true.

2024-05-27 08:30:11,034 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=293.

2024-05-27 08:30:11,034 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=293, currTerm=292.

2024-05-27 08:30:11,037 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=293, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 08:30:11,049 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=299, currTerm=298.

2024-05-27 08:30:11,050 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=298, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:30:11,079 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=294, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-27 08:30:11,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=299, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-27 08:30:11,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=293, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-27 08:30:11,083 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=293, currTerm=293, granted=true, requestLastLogId=LogId [index=285, term=292], lastLogId=LogId [index=285, term=292].

2024-05-27 08:30:11,084 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=292, currTerm=293.

2024-05-27 08:30:11,084 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=292, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:30:11,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=294, votedFor=nacos3:7848, cost time=49 ms

2024-05-27 08:30:11,090 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=294, currTerm=294, granted=true, requestLastLogId=LogId [index=282, term=293], lastLogId=LogId [index=282, term=293].

2024-05-27 08:30:11,094 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=299, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 08:30:11,095 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=294, votedFor=nacos2:7848, cost time=14 ms

2024-05-27 08:30:11,095 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:30:11,097 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=298, currTerm=299.

2024-05-27 08:30:11,100 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=293, votedFor=nacos1:7848, cost time=13 ms

2024-05-27 08:30:11,102 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=294, currTerm=294, granted=true, requestLastLogId=LogId [index=282, term=293], lastLogId=LogId [index=282, term=293].

2024-05-27 08:30:11,106 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=298, currTerm=299.

2024-05-27 08:30:11,114 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=294, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 08:30:11,115 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=298, currTerm=299.

2024-05-27 08:30:11,115 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=292, currTerm=293.

2024-05-27 08:30:11,115 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 08:30:11,117 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=298, currTerm=299.

2024-05-27 08:30:11,120 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 08:30:11,131 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 08:30:11,140 INFO onLeaderStart: term=294.

2024-05-27 08:47:50,104 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=299, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 08:47:50,099 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=294, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 08:47:51,152 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 08:47:50,071 INFO Node <naming_persistent_service/nacos3:7848> term 299 start preVote.

2024-05-27 08:47:51,217 INFO Node <naming_persistent_service/nacos3:7848> term 299 start preVote.

2024-05-27 08:47:51,217 INFO Node <naming_persistent_service/nacos3:7848> term 299 start preVote.

2024-05-27 08:47:51,217 INFO Node <naming_persistent_service/nacos3:7848> term 299 start preVote.

2024-05-27 08:47:51,220 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=158, type=Follower] is going to quit

2024-05-27 08:47:51,222 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=283, lastLogIncluded=0, lastLogIndex=283, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=157, type=Follower] is going to quit

2024-05-27 08:47:51,223 INFO Node <naming_service_metadata/nacos3:7848> term 294 start preVote.

2024-05-27 08:47:51,223 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=294, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 08:47:51,229 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=295, currTerm=294, granted=true, requestLastLogId=LogId [index=283, term=294], lastLogId=LogId [index=283, term=294].

2024-05-27 08:47:51,249 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_286.

2024-05-27 08:47:51,250 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_286.

2024-05-27 08:47:51,250 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=299, granted=true.

2024-05-27 08:47:51,254 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=299.

2024-05-27 08:47:51,255 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_290.

2024-05-27 08:47:51,257 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=295, currTerm=294.

2024-05-27 08:47:51,259 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_283.

2024-05-27 08:47:51,258 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=294, granted=true.

2024-05-27 08:47:51,261 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=294.

2024-05-27 08:47:51,258 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_282.

2024-05-27 08:47:51,258 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,264 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=300, currTerm=300, granted=true, requestLastLogId=LogId [index=290, term=299], lastLogId=LogId [index=290, term=299].

2024-05-27 08:47:51,258 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_285.

2024-05-27 08:47:51,258 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_290.

2024-05-27 08:47:51,261 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_283.

2024-05-27 08:47:51,264 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=295, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-27 08:47:51,270 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,287 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,271 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_285.

2024-05-27 08:47:51,301 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_282.

2024-05-27 08:47:51,275 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 281 to 283, cost 0 ms.

2024-05-27 08:47:51,276 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=295, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 08:47:51,286 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_287.

2024-05-27 08:47:51,287 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_280.

2024-05-27 08:47:51,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=295, votedFor=nacos1:7848, cost time=28 ms

2024-05-27 08:47:51,315 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=295, currTerm=295, granted=true, requestLastLogId=LogId [index=285, term=294], lastLogId=LogId [index=285, term=294].

2024-05-27 08:47:51,324 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=295, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 08:47:51,325 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 08:47:51,319 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 281 to 283, cost 0 ms.

2024-05-27 08:47:51,320 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=300, votedFor=nacos3:7848, cost time=24 ms

2024-05-27 08:47:51,326 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:47:51,327 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 08:47:51,328 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:47:51,333 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=300, currTerm=300.

2024-05-27 08:47:51,333 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 279 to 281, cost 0 ms.

2024-05-27 08:47:51,333 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=295, currTerm=295.

2024-05-27 08:47:51,339 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 08:47:51,333 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 08:47:51,337 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,343 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,339 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 08:47:51,340 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 286 to 288, cost 1 ms.

2024-05-27 08:47:51,349 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:51,353 INFO onLeaderStart: term=295.

2024-05-27 08:47:51,423 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 08:47:55,205 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=294, currTerm=293, because the leader nacos1:7848's lease is still valid.

2024-05-27 08:47:56,246 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=294, currTerm=293, granted=true, requestLastLogId=LogId [index=286, term=293], lastLogId=LogId [index=286, term=293].

2024-05-27 08:47:56,252 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=294, currTerm=293.

2024-05-27 08:47:56,253 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=293, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 08:47:56,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=294, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-27 08:47:56,267 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=294, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 08:48:22,833 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497545604s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-27 09:04:07,080 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 09:04:08,010 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 09:04:07,811 INFO Node <naming_persistent_service/nacos3:7848> term 300 start preVote.

2024-05-27 09:04:07,810 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=295, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 09:04:08,026 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 09:04:08,133 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=295, currTerm=294, because the leader nacos2:7848's lease is still valid.

2024-05-27 09:04:08,114 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 09:04:08,026 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=286, lastLogIncluded=0, lastLogIndex=286, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=190, type=Follower] is going to quit

2024-05-27 09:04:08,145 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=286, lastLogIncluded=0, lastLogIndex=286, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=189, type=Follower] is going to quit

2024-05-27 09:04:08,125 INFO Node <naming_persistent_service/nacos3:7848> term 300 start preVote.

2024-05-27 09:04:08,147 INFO Node <naming_persistent_service/nacos3:7848> term 300 start preVote.

2024-05-27 09:04:08,149 INFO Node <naming_persistent_service/nacos3:7848> term 300 start preVote.

2024-05-27 09:04:08,151 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=300, granted=false.

2024-05-27 09:04:08,147 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=296, currTerm=295, granted=true, requestLastLogId=LogId [index=286, term=295], lastLogId=LogId [index=286, term=295].

2024-05-27 09:04:08,152 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=300, granted=true.

2024-05-27 09:04:08,154 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=300.

2024-05-27 09:04:08,155 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 09:04:08,158 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:04:08,159 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=296, currTerm=295.

2024-05-27 09:04:08,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=301, votedFor=nacos3:7848, cost time=47 ms

2024-05-27 09:04:08,205 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=295, currTerm=294.

2024-05-27 09:04:08,206 WARN Node <naming_persistent_service/nacos3:7848> raise term 301 when get lastLogId.

2024-05-27 09:04:08,207 WARN Node <naming_persistent_service/nacos3:7848> raise term 301 when get lastLogId.

2024-05-27 09:04:08,207 WARN Node <naming_persistent_service/nacos3:7848> raise term 301 when get lastLogId.

2024-05-27 09:04:08,208 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=296, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-27 09:04:08,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=294, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 09:04:08,241 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=296, currTerm=295, because the leader nacos1:7848's lease is still valid.

2024-05-27 09:04:08,241 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=296, currTerm=295, because the leader nacos1:7848's lease is still valid.

2024-05-27 09:04:08,244 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=296, currTerm=295, because the leader nacos1:7848's lease is still valid.

2024-05-27 09:04:08,247 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=296, votedFor=nacos1:7848, cost time=33 ms

2024-05-27 09:04:08,247 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=295, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-27 09:04:08,251 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=296, currTerm=296, granted=true, requestLastLogId=LogId [index=286, term=295], lastLogId=LogId [index=286, term=295].

2024-05-27 09:04:08,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=295, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 09:04:08,267 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=301, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 09:04:08,268 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 09:04:08,269 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:04:08,269 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 09:04:08,284 INFO onLeaderStart: term=301.

2024-05-27 09:04:08,290 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=296, currTerm=295.

2024-05-27 09:04:08,291 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=295, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 09:04:08,301 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=296, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 09:04:08,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=296, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 09:04:08,406 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 09:04:12,889 INFO Connection disconnected: /172.25.0.4:60484

2024-05-27 09:04:13,030 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:04:13,032 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:04:13,033 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:04:13,033 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:04:13,116 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 09:04:13,117 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 09:04:13,118 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 09:04:13,119 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 09:05:07,983 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.491746234s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-27 09:20:33,515 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=301, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 09:20:33,525 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 09:20:34,282 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 09:20:34,626 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=292, lastLogIncluded=0, lastLogIndex=292, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=202, type=Follower] is going to quit

2024-05-27 09:20:34,638 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=292, lastLogIncluded=0, lastLogIndex=292, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=201, type=Follower] is going to quit

2024-05-27 09:20:34,619 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 09:20:34,630 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 09:20:34,630 INFO Node <naming_persistent_service_v2/nacos3:7848> term 296 start preVote.

2024-05-27 09:20:34,633 INFO Node <naming_service_metadata/nacos3:7848> term 296 start preVote.

2024-05-27 09:20:34,633 INFO Node <naming_instance_metadata/nacos3:7848> term 295 start preVote.

2024-05-27 09:20:34,703 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=297, currTerm=296, granted=true, requestLastLogId=LogId [index=287, term=296], lastLogId=LogId [index=287, term=296].

2024-05-27 09:20:34,633 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=296, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 09:20:34,635 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=295, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:20:34,637 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=296, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:20:34,659 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=302, currTerm=301, granted=true, requestLastLogId=LogId [index=292, term=301], lastLogId=LogId [index=292, term=301].

2024-05-27 09:20:34,702 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_292.

2024-05-27 09:20:34,731 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_292.

2024-05-27 09:20:34,705 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=296, currTerm=295, granted=true, requestLastLogId=LogId [index=288, term=295], lastLogId=LogId [index=288, term=295].

2024-05-27 09:20:34,706 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=297, currTerm=296, granted=true, requestLastLogId=LogId [index=285, term=296], lastLogId=LogId [index=285, term=296].

2024-05-27 09:20:34,745 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 09:20:34,716 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 09:20:34,749 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 09:20:34,717 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 09:20:34,729 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 09:20:34,745 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=297, currTerm=296.

2024-05-27 09:20:34,748 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_290.

2024-05-27 09:20:34,751 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=302, currTerm=301.

2024-05-27 09:20:34,753 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_285.

2024-05-27 09:20:34,763 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_285.

2024-05-27 09:20:34,755 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_288.

2024-05-27 09:20:34,764 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_288.

2024-05-27 09:20:34,758 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_287.

2024-05-27 09:20:34,765 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_287.

2024-05-27 09:20:34,763 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 09:20:34,766 INFO The channel nacos2:7848 has successfully established.

2024-05-27 09:20:34,764 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 288 to 291, cost 0 ms.

2024-05-27 09:20:34,766 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 09:20:34,770 INFO The channel nacos2:7848 has successfully established.

2024-05-27 09:20:34,772 INFO Peer nacos2:7848 is connected.

2024-05-27 09:20:34,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=302, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 09:20:34,767 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 09:20:34,775 INFO The channel nacos2:7848 has successfully established.

2024-05-27 09:20:34,775 INFO Peer nacos2:7848 is connected.

2024-05-27 09:20:34,768 INFO Peer nacos2:7848 is connected.

2024-05-27 09:20:34,769 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 09:20:34,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=297, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 09:20:34,770 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_286.

2024-05-27 09:20:34,770 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_283.

2024-05-27 09:20:34,770 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_285.

2024-05-27 09:20:34,796 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=296, granted=true.

2024-05-27 09:20:34,797 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=296.

2024-05-27 09:20:34,777 INFO The channel nacos1:7848 has successfully established.

2024-05-27 09:20:34,808 INFO Peer nacos1:7848 is connected.

2024-05-27 09:20:34,796 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=302, votedFor=nacos2:7848, cost time=21 ms

2024-05-27 09:20:34,810 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:20:34,798 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 09:20:34,811 INFO The channel nacos1:7848 has successfully established.

2024-05-27 09:20:34,804 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 283 to 286, cost 0 ms.

2024-05-27 09:20:34,804 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 281 to 284, cost 0 ms.

2024-05-27 09:20:34,805 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 283 to 287, cost 0 ms.

2024-05-27 09:20:34,805 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=297, votedFor=nacos2:7848, cost time=26 ms

2024-05-27 09:20:34,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=297, votedFor=nacos3:7848, cost time=7 ms

2024-05-27 09:20:34,812 INFO Peer nacos1:7848 is connected.

2024-05-27 09:20:34,814 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=296, currTerm=295.

2024-05-27 09:20:34,819 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=297, currTerm=297.

2024-05-27 09:20:34,816 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=296, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 09:20:34,816 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=296, currTerm=297.

2024-05-27 09:20:34,819 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=295, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 09:20:34,821 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=296, currTerm=297.

2024-05-27 09:20:34,823 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:20:34,825 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=302, currTerm=302, because the leader nacos2:7848's lease is still valid.

2024-05-27 09:20:34,827 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:20:34,831 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=297, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 09:20:34,833 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 09:20:34,834 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 09:20:34,831 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=296, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 09:20:34,840 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=295, currTerm=296.

2024-05-27 09:20:34,842 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:20:34,850 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=296, votedFor=nacos2:7848, cost time=5 ms

2024-05-27 09:20:34,846 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 09:20:34,858 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 09:20:34,871 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=295, currTerm=296.

2024-05-27 09:20:34,875 INFO onLeaderStart: term=297.

2024-05-27 09:38:03,132 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=297, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 09:38:03,191 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=302, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 09:38:03,190 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 09:38:03,190 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=296, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 09:38:03,190 INFO Node <naming_persistent_service/nacos3:7848> term 302 start preVote.

2024-05-27 09:38:03,190 INFO Node <naming_service_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 09:38:03,354 INFO Node <naming_service_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 09:38:03,185 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 09:38:03,189 INFO Node <naming_instance_metadata/nacos3:7848> term 296 start preVote.

2024-05-27 09:38:03,363 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=297, granted=false.

2024-05-27 09:38:03,341 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 09:38:03,340 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=286, lastLogIncluded=0, lastLogIndex=286, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=159, type=Follower] is going to quit

2024-05-27 09:38:03,465 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=286, lastLogIncluded=0, lastLogIndex=286, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=160, type=Follower] is going to quit

2024-05-27 09:38:03,354 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=303, currTerm=302, granted=true, requestLastLogId=LogId [index=293, term=302], lastLogId=LogId [index=293, term=302].

2024-05-27 09:38:03,456 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 09:38:03,458 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=296, granted=false.

2024-05-27 09:38:03,478 INFO Node <naming_instance_metadata/nacos3:7848> term 296 start preVote.

2024-05-27 09:38:03,459 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=298, currTerm=297, granted=true, requestLastLogId=LogId [index=288, term=297], lastLogId=LogId [index=288, term=297].

2024-05-27 09:38:03,466 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=298, currTerm=297, granted=true, requestLastLogId=LogId [index=286, term=297], lastLogId=LogId [index=286, term=297].

2024-05-27 09:38:03,468 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=302, granted=false.

2024-05-27 09:38:03,491 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=303, currTerm=302.

2024-05-27 09:38:03,483 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=297, currTerm=296, granted=true, requestLastLogId=LogId [index=289, term=296], lastLogId=LogId [index=289, term=296].

2024-05-27 09:38:03,494 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=296, granted=false.

2024-05-27 09:38:03,487 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=297, granted=false.

2024-05-27 09:38:03,488 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 09:38:03,503 INFO The channel nacos2:7848 has successfully established.

2024-05-27 09:38:03,492 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=302, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 09:38:03,500 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=298, currTerm=297, granted=true, requestLastLogId=LogId [index=286, term=297], lastLogId=LogId [index=286, term=297].

2024-05-27 09:38:03,503 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=297, granted=true.

2024-05-27 09:38:03,503 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=296, granted=true.

2024-05-27 09:38:03,509 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=296.

2024-05-27 09:38:03,503 INFO Peer nacos2:7848 is connected.

2024-05-27 09:38:03,504 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=303, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 09:38:03,507 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=298, currTerm=297.

2024-05-27 09:38:03,506 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:38:03,508 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=297.

2024-05-27 09:38:03,510 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=296, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 09:38:03,510 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 09:38:03,517 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=297, currTerm=297.

2024-05-27 09:38:03,515 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 09:38:03,523 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=298, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 09:38:03,523 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=303, votedFor=nacos1:7848, cost time=11 ms

2024-05-27 09:38:03,525 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=302, currTerm=303.

2024-05-27 09:38:03,527 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=298, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 09:38:03,528 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=298, currTerm=298.

2024-05-27 09:38:03,533 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 09:38:03,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=297, votedFor=nacos3:7848, cost time=15 ms

2024-05-27 09:38:03,543 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=298, votedFor=nacos1:7848, cost time=19 ms

2024-05-27 09:38:03,545 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=298, currTerm=298, granted=true, requestLastLogId=LogId [index=286, term=297], lastLogId=LogId [index=286, term=297].

2024-05-27 09:38:03,550 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:38:03,551 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 09:38:07,396 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:38:07,396 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:38:07,397 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:38:07,397 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 09:54:29,184 INFO Node <naming_instance_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 09:54:29,185 INFO Node <naming_service_metadata/nacos3:7848> term 298 start preVote.

2024-05-27 09:54:29,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=298, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:54:29,185 INFO Node <naming_persistent_service_v2/nacos3:7848> term 298 start preVote.

2024-05-27 09:54:29,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=298, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:54:29,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:54:30,170 INFO Node <naming_instance_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 09:54:30,220 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=304, currTerm=303, granted=true, requestLastLogId=LogId [index=294, term=303], lastLogId=LogId [index=294, term=303].

2024-05-27 09:54:30,229 INFO Node <naming_persistent_service/nacos3:7848> term 303 start preVote.

2024-05-27 09:54:30,229 INFO Node <naming_persistent_service/nacos3:7848> term 303 start preVote.

2024-05-27 09:54:30,234 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_294.

2024-05-27 09:54:30,250 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_294.

2024-05-27 09:54:30,170 INFO Node <naming_service_metadata/nacos3:7848> term 298 start preVote.

2024-05-27 09:54:30,213 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=299, currTerm=298, granted=true, requestLastLogId=LogId [index=287, term=298], lastLogId=LogId [index=287, term=298].

2024-05-27 09:54:30,229 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=303, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 09:54:30,258 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_292.

2024-05-27 09:54:30,293 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term 304, expect=303.

2024-05-27 09:54:30,297 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=297, granted=false.

2024-05-27 09:54:30,298 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=297, granted=false.

2024-05-27 09:54:30,299 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=298, granted=false.

2024-05-27 09:54:30,300 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=297, granted=false.

2024-05-27 09:54:30,300 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 291 to 293, cost 2 ms.

2024-05-27 09:54:30,306 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=297, granted=false.

2024-05-27 09:54:30,308 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=304, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 09:54:30,310 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=303, currTerm=304.

2024-05-27 09:54:30,312 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=303, currTerm=304.

2024-05-27 09:54:30,313 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=304, currTerm=304.

2024-05-27 09:54:30,316 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=298, granted=true.

2024-05-27 09:54:30,319 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=298.

2024-05-27 09:54:30,325 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_290.

2024-05-27 09:54:30,326 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_290.

2024-05-27 09:54:30,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=304, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 09:54:30,326 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=298, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 09:54:30,326 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=299, currTerm=298.

2024-05-27 09:54:30,340 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_289.

2024-05-27 09:54:30,336 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_287.

2024-05-27 09:54:30,339 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=299, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 09:54:30,342 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=303, currTerm=304.

2024-05-27 09:54:30,344 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_288.

2024-05-27 09:54:30,345 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_289.

2024-05-27 09:54:30,347 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_287.

2024-05-27 09:54:30,348 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 09:54:30,353 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=299, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-27 09:54:30,369 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=298, currTerm=299.

2024-05-27 09:54:30,359 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 287 to 289, cost 1 ms.

2024-05-27 09:54:30,367 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 09:54:30,370 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=298, currTerm=299.

2024-05-27 09:54:30,397 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_287.

2024-05-27 09:54:30,394 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_285.

2024-05-27 09:54:30,400 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=299, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 09:54:30,401 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 09:54:30,402 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 09:54:30,403 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 284 to 286, cost 1 ms.

2024-05-27 09:54:30,405 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 09:54:30,407 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=299, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 09:54:30,408 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 286 to 288, cost 2 ms.

2024-05-27 09:54:30,408 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=299, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 09:54:30,419 INFO onLeaderStart: term=299.

2024-05-27 09:55:29,226 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499776370s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-27 10:05:56,062 INFO Node <naming_persistent_service_v2/nacos3:7848> term 299 start preVote.

2024-05-27 10:05:56,067 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=299, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 10:05:57,051 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=290, lastLogIncluded=0, lastLogIndex=290, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=191, type=Follower] is going to quit

2024-05-27 10:05:56,063 INFO Node <naming_instance_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 10:05:56,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:05:56,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=299, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:05:56,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=304, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:05:57,103 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=299, granted=false.

2024-05-27 10:05:56,062 INFO Node <naming_persistent_service/nacos3:7848> term 304 start preVote.

2024-05-27 10:05:57,118 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=290, lastLogIncluded=0, lastLogIndex=290, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=192, type=Follower] is going to quit

2024-05-27 10:05:57,119 INFO Node <naming_instance_metadata/nacos3:7848> term 297 start preVote.

2024-05-27 10:05:57,121 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 10:05:57,201 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=299, granted=false.

2024-05-27 10:05:57,227 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=300, currTerm=299.

2024-05-27 10:05:57,202 INFO Node <naming_persistent_service/nacos3:7848> term 304 start preVote.

2024-05-27 10:05:57,235 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=305, currTerm=304.

2024-05-27 10:05:57,208 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=300, currTerm=299, granted=true, requestLastLogId=LogId [index=290, term=299], lastLogId=LogId [index=290, term=299].

2024-05-27 10:05:57,224 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=297, granted=true.

2024-05-27 10:05:57,238 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=297.

2024-05-27 10:05:57,238 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=300, currTerm=299, granted=true, requestLastLogId=LogId [index=290, term=299], lastLogId=LogId [index=290, term=299].

2024-05-27 10:05:57,240 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=300, currTerm=299.

2024-05-27 10:05:57,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=305, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 10:05:57,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=300, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-27 10:05:57,244 WARN Node <naming_persistent_service/nacos3:7848> raise term 305 when get lastLogId.

2024-05-27 10:05:57,244 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=299, currTerm=300.

2024-05-27 10:05:57,246 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=305, currTerm=305, granted=true, requestLastLogId=LogId [index=295, term=304], lastLogId=LogId [index=295, term=304].

2024-05-27 10:05:57,247 WARN Node <naming_persistent_service/nacos3:7848> raise term 305 when get lastLogId.

2024-05-27 10:05:57,247 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=298, votedFor=nacos3:7848, cost time=9 ms

2024-05-27 10:05:57,248 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=300, currTerm=300, granted=true, requestLastLogId=LogId [index=288, term=299], lastLogId=LogId [index=288, term=299].

2024-05-27 10:05:57,250 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=304, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 10:05:57,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=300, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 10:05:57,250 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:05:57,256 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 10:05:57,256 WARN Node <naming_instance_metadata/nacos3:7848> raise term 298 when get lastLogId.

2024-05-27 10:05:57,256 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=297, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 10:05:57,269 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=305, votedFor=nacos1:7848, cost time=21 ms

2024-05-27 10:05:57,272 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=300, votedFor=nacos1:7848, cost time=20 ms

2024-05-27 10:05:57,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=300, votedFor=nacos1:7848, cost time=18 ms

2024-05-27 10:05:57,276 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 10:05:57,277 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=298, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 10:05:57,280 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 10:05:57,298 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 10:05:57,301 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 10:05:57,314 INFO onLeaderStart: term=298.

2024-05-27 10:23:28,922 INFO Node <naming_persistent_service/nacos3:7848> term 305 start preVote.

2024-05-27 10:23:28,926 INFO Node <naming_service_metadata/nacos3:7848> term 300 start preVote.

2024-05-27 10:23:28,962 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=298, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 10:23:28,926 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=305, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:23:29,946 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 10:23:28,926 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:23:28,929 INFO Node <naming_persistent_service_v2/nacos3:7848> term 300 start preVote.

2024-05-27 10:23:28,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:23:29,936 INFO Node <naming_persistent_service/nacos3:7848> term 305 start preVote.

2024-05-27 10:23:29,938 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=301, currTerm=300, because the leader nacos1:7848's lease is still valid.

2024-05-27 10:23:29,938 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 10:23:29,946 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=291, lastLogIncluded=0, lastLogIndex=291, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=203, type=Follower] is going to quit

2024-05-27 10:23:29,947 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=291, lastLogIncluded=0, lastLogIndex=291, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=204, type=Follower] is going to quit

2024-05-27 10:23:29,955 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=306, currTerm=305, because the leader nacos1:7848's lease is still valid.

2024-05-27 10:23:29,956 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=300, granted=true.

2024-05-27 10:23:29,994 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=300.

2024-05-27 10:23:29,969 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=291, lastLogIncluded=0, lastLogIndex=291, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=203, type=Follower] already destroyed, ignore error code: 1001

2024-05-27 10:23:29,999 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=299, currTerm=298.

2024-05-27 10:23:30,013 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=301, votedFor=nacos3:7848, cost time=19 ms

2024-05-27 10:23:30,015 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:23:29,970 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 10:23:29,974 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=301, currTerm=300, because the leader nacos1:7848's lease is still valid.

2024-05-27 10:23:30,030 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=301, currTerm=300.

2024-05-27 10:23:30,032 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=300, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 10:23:30,034 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=299, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-27 10:23:29,983 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=306, currTerm=305.

2024-05-27 10:23:30,048 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=305, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 10:23:29,995 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 10:23:30,049 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=301, currTerm=301.

2024-05-27 10:23:30,054 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=301, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-27 10:23:30,059 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=306, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 10:23:30,060 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=305, currTerm=306.

2024-05-27 10:23:30,061 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=305, currTerm=306.

2024-05-27 10:23:30,070 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=305, currTerm=306.

2024-05-27 10:23:30,071 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=301, votedFor=nacos2:7848, cost time=15 ms

2024-05-27 10:23:30,073 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=299, votedFor=nacos1:7848, cost time=38 ms

2024-05-27 10:23:30,073 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=305, currTerm=306.

2024-05-27 10:23:30,073 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=300, currTerm=301.

2024-05-27 10:23:30,079 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=299, currTerm=299, granted=true, requestLastLogId=LogId [index=291, term=298], lastLogId=LogId [index=291, term=298].

2024-05-27 10:23:30,074 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=291, lastLogIncluded=0, lastLogIndex=291, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=203, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send3,5,main].

2024-05-27 10:23:30,080 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=306, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 10:23:30,081 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=300, currTerm=301.

2024-05-27 10:23:30,082 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=299, currTerm=299, because the leader nacos1:7848's lease is still valid.

2024-05-27 10:23:30,091 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=306, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 10:24:29,964 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_297.

2024-05-27 10:24:29,968 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_297.

2024-05-27 10:24:29,978 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_294.

2024-05-27 10:24:29,992 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 293 to 295, cost 1 ms.

2024-05-27 10:24:30,246 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_292.

2024-05-27 10:24:30,252 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_292.

2024-05-27 10:24:30,259 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_289.

2024-05-27 10:24:30,274 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 288 to 290, cost 1 ms.

2024-05-27 10:24:30,284 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_290.

2024-05-27 10:24:30,286 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_290.

2024-05-27 10:24:30,292 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_287.

2024-05-27 10:24:30,306 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 286 to 288, cost 0 ms.

2024-05-27 10:24:30,318 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_292.

2024-05-27 10:24:30,320 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_292.

2024-05-27 10:24:30,326 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_290.

2024-05-27 10:24:30,336 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 289 to 291, cost 0 ms.

2024-05-27 10:40:28,015 INFO Node <naming_persistent_service/nacos3:7848> term 306 start preVote.

2024-05-27 10:40:28,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=301, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:40:28,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=306, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:40:28,015 INFO Node <naming_service_metadata/nacos3:7848> term 301 start preVote.

2024-05-27 10:40:28,015 INFO Node <naming_persistent_service/nacos3:7848> term 306 start preVote.

2024-05-27 10:40:28,023 INFO Node <naming_persistent_service_v2/nacos3:7848> term 301 start preVote.

2024-05-27 10:40:28,789 INFO Node <naming_persistent_service_v2/nacos3:7848> term 301 start preVote.

2024-05-27 10:40:28,826 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=300, currTerm=299, granted=true, requestLastLogId=LogId [index=292, term=299], lastLogId=LogId [index=292, term=299].

2024-05-27 10:40:28,836 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=300, currTerm=299.

2024-05-27 10:40:28,023 INFO Node <naming_persistent_service/nacos3:7848> term 306 start preVote.

2024-05-27 10:40:28,023 INFO Node <naming_service_metadata/nacos3:7848> term 301 start preVote.

2024-05-27 10:40:28,615 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=301, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:40:28,840 INFO Node <naming_persistent_service/nacos3:7848> term 306 start preVote.

2024-05-27 10:40:28,840 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=301, granted=true.

2024-05-27 10:40:28,842 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=301.

2024-05-27 10:40:28,841 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=299, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 10:40:28,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=300, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 10:40:28,842 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=306, granted=false.

2024-05-27 10:40:28,872 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term 302, expect=301.

2024-05-27 10:40:28,900 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=306, granted=true.

2024-05-27 10:40:28,902 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=306.

2024-05-27 10:40:28,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=302, votedFor=nacos3:7848, cost time=50 ms

2024-05-27 10:40:28,906 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,908 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=301, currTerm=302.

2024-05-27 10:40:28,911 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,911 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=300, votedFor=nacos2:7848, cost time=17 ms

2024-05-27 10:40:28,912 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=302, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 10:40:28,913 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,915 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=302, currTerm=302.

2024-05-27 10:40:28,916 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=302, currTerm=302, granted=true, requestLastLogId=LogId [index=292, term=301], lastLogId=LogId [index=292, term=301].

2024-05-27 10:40:28,917 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=301, currTerm=302.

2024-05-27 10:40:28,916 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=307, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 10:40:28,918 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=301, currTerm=302.

2024-05-27 10:40:28,919 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,919 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=301, currTerm=302.

2024-05-27 10:40:28,921 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=306, currTerm=307.

2024-05-27 10:40:28,922 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=301, currTerm=302.

2024-05-27 10:40:28,922 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=307, currTerm=307, granted=true, requestLastLogId=LogId [index=297, term=306], lastLogId=LogId [index=297, term=306].

2024-05-27 10:40:28,923 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=302, currTerm=302.

2024-05-27 10:40:28,924 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=307, currTerm=307.

2024-05-27 10:40:28,926 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,927 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,927 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,927 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,928 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:40:28,928 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 10:40:28,929 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 10:40:28,932 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=302, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 10:40:28,932 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=302, currTerm=302, granted=true, requestLastLogId=LogId [index=290, term=301], lastLogId=LogId [index=290, term=301].

2024-05-27 10:40:28,933 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=302, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-27 10:56:51,777 INFO Node <naming_persistent_service_v2/nacos3:7848> term 302 start preVote.

2024-05-27 10:56:51,784 INFO Node <naming_instance_metadata/nacos3:7848> term 300 start preVote.

2024-05-27 10:56:51,784 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=302, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:56:51,782 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 10:56:51,779 INFO Node <naming_persistent_service/nacos3:7848> term 307 start preVote.

2024-05-27 10:56:51,995 INFO Node <naming_persistent_service/nacos3:7848> term 307 start preVote.

2024-05-27 10:56:51,998 INFO Node <naming_persistent_service/nacos3:7848> term 307 start preVote.

2024-05-27 10:56:51,113 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 10:56:51,989 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=300, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 10:56:51,990 INFO Node <naming_persistent_service_v2/nacos3:7848> term 302 start preVote.

2024-05-27 10:56:52,017 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=303, currTerm=302, granted=true, requestLastLogId=LogId [index=293, term=302], lastLogId=LogId [index=293, term=302].

2024-05-27 10:56:52,060 INFO Node <naming_instance_metadata/nacos3:7848> term 300 start preVote.

2024-05-27 10:56:52,018 INFO Node <naming_persistent_service/nacos3:7848> term 307 start preVote.

2024-05-27 10:56:52,024 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=307, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:56:52,025 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 10:56:52,027 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 10:56:52,061 INFO Node <naming_service_metadata/nacos3:7848> term 302 start preVote.

2024-05-27 10:56:52,062 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=303, currTerm=302, granted=true, requestLastLogId=LogId [index=291, term=302], lastLogId=LogId [index=291, term=302].

2024-05-27 10:56:52,065 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_293.

2024-05-27 10:56:52,066 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=307, granted=true.

2024-05-27 10:56:52,085 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=302, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 10:56:52,097 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_293.

2024-05-27 10:56:52,102 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 10:56:52,097 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=307.

2024-05-27 10:56:52,106 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,098 INFO Node <naming_service_metadata/nacos3:7848> term 302 start preVote.

2024-05-27 10:56:52,100 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=302, granted=true.

2024-05-27 10:56:52,101 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_293.

2024-05-27 10:56:52,114 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_293.

2024-05-27 10:56:52,104 INFO The channel nacos2:7848 has successfully established.

2024-05-27 10:56:52,106 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_292.

2024-05-27 10:56:52,107 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_298.

2024-05-27 10:56:52,118 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_298.

2024-05-27 10:56:52,119 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 10:56:52,121 INFO The channel nacos1:7848 has successfully established.

2024-05-27 10:56:52,122 INFO Peer nacos1:7848 is connected.

2024-05-27 10:56:52,108 WARN Node <naming_persistent_service/nacos3:7848> raise term 308 when get lastLogId.

2024-05-27 10:56:52,110 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_291.

2024-05-27 10:56:52,110 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=303, currTerm=302.

2024-05-27 10:56:52,111 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=302.

2024-05-27 10:56:52,116 INFO Peer nacos2:7848 is connected.

2024-05-27 10:56:52,118 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_292.

2024-05-27 10:56:52,121 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=300, granted=true.

2024-05-27 10:56:52,122 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_297.

2024-05-27 10:56:52,125 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_291.

2024-05-27 10:56:52,126 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,127 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,130 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=302, currTerm=303.

2024-05-27 10:56:52,131 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 291 to 293, cost 0 ms.

2024-05-27 10:56:52,128 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=300.

2024-05-27 10:56:52,129 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 290 to 293, cost 0 ms.

2024-05-27 10:56:52,131 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=303, currTerm=303.

2024-05-27 10:56:52,132 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_290.

2024-05-27 10:56:52,133 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,133 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 295 to 298, cost 0 ms.

2024-05-27 10:56:52,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=303, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 10:56:52,139 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=302, currTerm=303.

2024-05-27 10:56:52,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=308, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 10:56:52,139 WARN Node <naming_service_metadata/nacos3:7848> raise term 303 when get lastLogId.

2024-05-27 10:56:52,140 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=308, currTerm=308, granted=true, requestLastLogId=LogId [index=298, term=307], lastLogId=LogId [index=298, term=307].

2024-05-27 10:56:52,142 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=302, currTerm=303.

2024-05-27 10:56:52,143 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,146 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=308, currTerm=308.

2024-05-27 10:56:52,147 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,149 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 288 to 291, cost 0 ms.

2024-05-27 10:56:52,149 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,155 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=303, votedFor=nacos3:7848, cost time=18 ms

2024-05-27 10:56:52,159 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=301, votedFor=nacos3:7848, cost time=21 ms

2024-05-27 10:56:52,160 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=303, votedFor=nacos2:7848, cost time=17 ms

2024-05-27 10:56:52,162 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=301, currTerm=301.

2024-05-27 10:56:52,167 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=301, currTerm=301, granted=true, requestLastLogId=LogId [index=293, term=300], lastLogId=LogId [index=293, term=300].

2024-05-27 10:56:52,170 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,175 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,185 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=302, currTerm=303.

2024-05-27 10:56:52,218 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,219 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 10:56:52,233 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 10:56:56,784 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 10:56:56,785 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 10:56:56,787 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 10:56:56,788 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 11:06:58,736 INFO Node <naming_persistent_service_v2/nacos3:7848> term 303 start preVote.

2024-05-27 11:06:58,737 INFO Node <naming_instance_metadata/nacos3:7848> term 301 start preVote.

2024-05-27 11:06:58,741 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=303, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 11:06:58,742 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=301, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 11:06:58,743 INFO Node <naming_persistent_service_v2/nacos3:7848> term 303 start preVote.

2024-05-27 11:06:58,746 INFO Node <naming_persistent_service/nacos3:7848> term 308 start preVote.

2024-05-27 11:06:58,746 INFO Node <naming_instance_metadata/nacos3:7848> term 301 start preVote.

2024-05-27 11:06:58,746 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=308, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 11:06:58,748 INFO Node <naming_persistent_service/nacos3:7848> term 308 start preVote.

2024-05-27 11:06:58,758 INFO Node <naming_persistent_service/nacos3:7848> term 308 start preVote.

2024-05-27 11:06:58,930 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=302, currTerm=301, because the leader nacos1:7848's lease is still valid.

2024-05-27 11:06:58,942 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=301, granted=false.

2024-05-27 11:06:58,950 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=301, granted=false.

2024-05-27 11:06:59,018 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=303, granted=false.

2024-05-27 11:06:59,019 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=309, currTerm=308, because the leader nacos2:7848's lease is still valid.

2024-05-27 11:06:59,021 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=301, granted=true.

2024-05-27 11:06:59,023 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=303, granted=false.

2024-05-27 11:06:59,033 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=308, granted=false.

2024-05-27 11:06:59,033 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=301.

2024-05-27 11:06:59,041 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:06:59,041 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=308, granted=false.

2024-05-27 11:06:59,044 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=308, granted=false.

2024-05-27 11:06:59,038 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=303, granted=false.

2024-05-27 11:06:59,041 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=301, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 11:06:59,055 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=303, granted=false.

2024-05-27 11:06:59,062 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=309, currTerm=308.

2024-05-27 11:06:59,066 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=308, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 11:06:59,062 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=302, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 11:06:59,076 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=302, currTerm=302.

2024-05-27 11:06:59,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=309, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-27 11:06:59,102 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=308, currTerm=309.

2024-05-27 11:06:59,116 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=309, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 11:06:59,121 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=302, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 11:06:59,122 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 11:06:59,123 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 11:06:59,126 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=308, currTerm=309.

2024-05-27 11:06:59,127 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=308, currTerm=309.

2024-05-27 11:06:59,149 INFO onLeaderStart: term=302.

2024-05-27 11:07:03,927 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=304, currTerm=303, granted=true, requestLastLogId=LogId [index=294, term=303], lastLogId=LogId [index=294, term=303].

2024-05-27 11:07:03,930 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=304, currTerm=303.

2024-05-27 11:07:03,930 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=303, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 11:07:03,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=304, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 11:07:03,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=304, votedFor=nacos1:7848, cost time=4 ms

2024-05-27 11:24:34,345 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=309, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 11:24:34,339 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=302, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 11:24:34,605 INFO Node <naming_service_metadata/nacos3:7848> term 304 start preVote.

2024-05-27 11:24:34,379 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=304, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 11:24:34,614 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=295, lastLogIncluded=0, lastLogIndex=295, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=206, type=Follower] is going to quit

2024-05-27 11:24:34,615 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=295, lastLogIncluded=0, lastLogIndex=295, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=205, type=Follower] is going to quit

2024-05-27 11:24:34,615 INFO Node <naming_service_metadata/nacos3:7848> term 304 start preVote.

2024-05-27 11:24:34,616 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 11:24:34,618 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=305, currTerm=304, granted=true, requestLastLogId=LogId [index=295, term=304], lastLogId=LogId [index=295, term=304].

2024-05-27 11:24:34,339 INFO Node <naming_persistent_service/nacos3:7848> term 309 start preVote.

2024-05-27 11:24:34,623 INFO Node <naming_persistent_service/nacos3:7848> term 309 start preVote.

2024-05-27 11:24:34,633 INFO Node <naming_persistent_service/nacos3:7848> term 309 start preVote.

2024-05-27 11:24:34,654 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=304, granted=true.

2024-05-27 11:24:34,659 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=304.

2024-05-27 11:24:34,660 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=304, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 11:24:34,657 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=304, currTerm=303, because the leader nacos2:7848's lease is still valid.

2024-05-27 11:24:34,660 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=309, granted=true.

2024-05-27 11:24:34,662 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=303, currTerm=302, granted=true, requestLastLogId=LogId [index=295, term=302], lastLogId=LogId [index=295, term=302].

2024-05-27 11:24:34,665 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=309.

2024-05-27 11:24:34,667 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=309, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 11:24:34,669 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:24:34,672 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=303, currTerm=302.

2024-05-27 11:24:34,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=305, votedFor=nacos3:7848, cost time=12 ms

2024-05-27 11:24:34,680 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=310, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 11:24:34,688 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,690 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=303, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 11:24:34,681 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,692 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=305, currTerm=305.

2024-05-27 11:24:34,691 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,694 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,695 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,694 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,696 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,698 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=310, currTerm=310, granted=true, requestLastLogId=LogId [index=300, term=309], lastLogId=LogId [index=300, term=309].

2024-05-27 11:24:34,699 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=304, currTerm=303.

2024-05-27 11:24:34,698 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:24:34,699 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=303, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 11:24:34,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=303, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 11:24:34,702 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=305, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 11:24:34,741 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 11:24:34,708 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=303, currTerm=303, granted=true, requestLastLogId=LogId [index=295, term=302], lastLogId=LogId [index=295, term=302].

2024-05-27 11:24:34,716 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=304, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 11:24:34,747 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=310, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 11:24:34,757 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 11:24:34,767 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 11:24:34,753 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 11:24:34,761 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=304, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 11:24:34,790 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 11:24:34,790 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:24:34,794 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 11:24:34,798 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:24:34,806 INFO onLeaderStart: term=310.

2024-05-27 11:24:34,808 INFO onLeaderStart: term=305.

2024-05-27 11:41:03,716 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 11:41:04,090 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 11:41:03,717 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=305, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 11:41:04,103 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 11:41:03,717 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=310, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 11:41:04,104 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=301, lastLogIncluded=0, lastLogIndex=301, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=204, type=Follower] is going to quit

2024-05-27 11:41:04,104 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 11:41:04,103 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=296, lastLogIncluded=0, lastLogIndex=296, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=194, type=Follower] is going to quit

2024-05-27 11:41:04,105 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=301, lastLogIncluded=0, lastLogIndex=301, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=203, type=Follower] is going to quit

2024-05-27 11:41:04,107 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=296, lastLogIncluded=0, lastLogIndex=296, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=195, type=Follower] is going to quit

2024-05-27 11:41:04,128 INFO Node <naming_persistent_service_v2/nacos3:7848> term 304 start preVote.

2024-05-27 11:41:04,145 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=304, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 11:41:04,149 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=311, currTerm=310, granted=true, requestLastLogId=LogId [index=301, term=310], lastLogId=LogId [index=301, term=310].

2024-05-27 11:41:04,151 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=311, currTerm=310, granted=true, requestLastLogId=LogId [index=301, term=310], lastLogId=LogId [index=301, term=310].

2024-05-27 11:41:04,153 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=306, currTerm=305, granted=true, requestLastLogId=LogId [index=296, term=305], lastLogId=LogId [index=296, term=305].

2024-05-27 11:41:04,159 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,185 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=306, currTerm=305, granted=true, requestLastLogId=LogId [index=296, term=305], lastLogId=LogId [index=296, term=305].

2024-05-27 11:41:04,190 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 11:41:04,193 INFO Node <naming_persistent_service_v2/nacos3:7848> term 304 start preVote.

2024-05-27 11:41:04,271 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=311, currTerm=310, granted=true, requestLastLogId=LogId [index=301, term=310], lastLogId=LogId [index=301, term=310].

2024-05-27 11:41:04,276 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=311, currTerm=310.

2024-05-27 11:41:04,274 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 11:41:04,276 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=305, currTerm=304, granted=true, requestLastLogId=LogId [index=293, term=304], lastLogId=LogId [index=293, term=304].

2024-05-27 11:41:04,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=311, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-27 11:41:04,286 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=311, currTerm=311.

2024-05-27 11:41:04,284 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 11:41:04,295 INFO The channel nacos2:7848 has successfully established.

2024-05-27 11:41:04,296 INFO Peer nacos2:7848 is connected.

2024-05-27 11:41:04,285 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=306, currTerm=305.

2024-05-27 11:41:04,298 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=311, votedFor=nacos1:7848, cost time=10 ms

2024-05-27 11:41:04,299 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,300 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=304, currTerm=303, because the leader nacos1:7848's lease is still valid.

2024-05-27 11:41:04,300 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=304, currTerm=303, because the leader nacos1:7848's lease is still valid.

2024-05-27 11:41:04,300 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=304, currTerm=303.

2024-05-27 11:41:04,301 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=303, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 11:41:04,302 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_296.

2024-05-27 11:41:04,302 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_296.

2024-05-27 11:41:04,302 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 11:41:04,303 INFO The channel nacos1:7848 has successfully established.

2024-05-27 11:41:04,304 INFO Peer nacos1:7848 is connected.

2024-05-27 11:41:04,311 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_293.

2024-05-27 11:41:04,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=306, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 11:41:04,315 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=305, currTerm=304.

2024-05-27 11:41:04,316 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,303 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_296.

2024-05-27 11:41:04,321 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_296.

2024-05-27 11:41:04,311 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_293.

2024-05-27 11:41:04,326 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_293.

2024-05-27 11:41:04,319 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=304, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-27 11:41:04,330 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_293.

2024-05-27 11:41:04,320 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 293 to 294, cost 0 ms.

2024-05-27 11:41:04,346 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 293 to 294, cost 0 ms.

2024-05-27 11:41:04,321 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=305, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-27 11:41:04,331 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=306, votedFor=nacos1:7848, cost time=17 ms

2024-05-27 11:41:04,331 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_291.

2024-05-27 11:41:04,332 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_301.

2024-05-27 11:41:04,353 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_301.

2024-05-27 11:41:04,336 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=304, votedFor=nacos2:7848, cost time=9 ms

2024-05-27 11:41:04,349 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=304, currTerm=305.

2024-05-27 11:41:04,355 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=304, currTerm=305.

2024-05-27 11:41:04,355 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_298.

2024-05-27 11:41:04,352 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=306, currTerm=306.

2024-05-27 11:41:04,357 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,358 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,355 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 291 to 292, cost 0 ms.

2024-05-27 11:41:04,359 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 11:41:04,364 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 298 to 299, cost 0 ms.

2024-05-27 11:41:04,366 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=305, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 11:41:04,368 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=304, currTerm=305.

2024-05-27 11:41:04,370 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=304, currTerm=305.

2024-05-27 11:57:32,118 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 11:57:32,119 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 11:57:32,119 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 11:57:32,751 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 11:57:32,785 INFO Node <naming_persistent_service_v2/nacos3:7848> term 305 start preVote.

2024-05-27 11:57:32,805 INFO Node <naming_persistent_service/nacos3:7848> term 311 start preVote.

2024-05-27 11:57:32,804 INFO Node <naming_instance_metadata/nacos3:7848> term 304 start preVote.

2024-05-27 11:57:32,897 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=304, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 11:57:32,904 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=307, currTerm=306, because the leader nacos1:7848's lease is still valid.

2024-05-27 11:57:32,804 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=305, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 11:57:32,934 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=305, currTerm=304, granted=true, requestLastLogId=LogId [index=297, term=304], lastLogId=LogId [index=297, term=304].

2024-05-27 11:57:32,936 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 11:57:32,805 INFO Node <naming_persistent_service_v2/nacos3:7848> term 305 start preVote.

2024-05-27 11:57:32,882 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=312, currTerm=311, granted=true, requestLastLogId=LogId [index=302, term=311], lastLogId=LogId [index=302, term=311].

2024-05-27 11:57:32,941 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=312, currTerm=311, granted=true, requestLastLogId=LogId [index=302, term=311], lastLogId=LogId [index=302, term=311].

2024-05-27 11:57:32,942 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=311, granted=true.

2024-05-27 11:57:32,942 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=311.

2024-05-27 11:57:32,943 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 11:57:32,898 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=311, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 11:57:32,940 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=306, currTerm=305, granted=true, requestLastLogId=LogId [index=294, term=305], lastLogId=LogId [index=294, term=305].

2024-05-27 11:57:32,950 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=306, currTerm=305.

2024-05-27 11:57:32,970 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 11:57:32,971 INFO The channel nacos1:7848 has successfully established.

2024-05-27 11:57:32,971 INFO Peer nacos1:7848 is connected.

2024-05-27 11:57:32,972 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 11:57:32,972 INFO The channel nacos2:7848 has successfully established.

2024-05-27 11:57:32,972 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=305, currTerm=304.

2024-05-27 11:57:32,973 INFO Peer nacos2:7848 is connected.

2024-05-27 11:57:32,983 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=312, votedFor=nacos3:7848, cost time=40 ms

2024-05-27 11:57:32,985 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=312, currTerm=312.

2024-05-27 11:57:32,986 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=306, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-27 11:57:32,988 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=305, currTerm=306.

2024-05-27 11:57:32,989 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=305, currTerm=306.

2024-05-27 11:57:32,987 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=305, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 11:57:32,987 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 11:57:32,990 WARN Node <naming_persistent_service_v2/nacos3:7848> raise term 306 when get lastLogId.

2024-05-27 11:57:33,018 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=305, votedFor=nacos1:7848, cost time=25 ms

2024-05-27 11:57:33,020 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=304, currTerm=305.

2024-05-27 11:57:33,022 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=304, currTerm=305.

2024-05-27 11:57:33,027 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 11:57:33,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=306, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 12:07:58,963 INFO Node <naming_instance_metadata/nacos3:7848> term 305 start preVote.

2024-05-27 12:07:58,963 INFO Node <naming_persistent_service_v2/nacos3:7848> term 306 start preVote.

2024-05-27 12:07:58,970 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=306, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:07:59,855 INFO Node <naming_persistent_service_v2/nacos3:7848> term 306 start preVote.

2024-05-27 12:07:58,966 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=306, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:07:58,970 INFO Node <naming_service_metadata/nacos3:7848> term 306 start preVote.

2024-05-27 12:07:58,968 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=305, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:07:59,973 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 12:07:59,976 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 12:07:59,979 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=307, currTerm=306, because the leader nacos1:7848's lease is still valid.

2024-05-27 12:07:59,982 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=307, currTerm=306, because the leader nacos1:7848's lease is still valid.

2024-05-27 12:07:59,982 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 12:07:59,991 INFO The channel nacos2:7848 has successfully established.

2024-05-27 12:07:59,992 INFO Peer nacos2:7848 is connected.

2024-05-27 12:07:59,986 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=305, granted=true.

2024-05-27 12:07:59,997 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=305.

2024-05-27 12:07:59,989 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=306, granted=true.

2024-05-27 12:08:00,011 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=306.

2024-05-27 12:07:59,997 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 12:08:00,014 INFO The channel nacos1:7848 has successfully established.

2024-05-27 12:08:00,015 INFO Peer nacos1:7848 is connected.

2024-05-27 12:08:00,008 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=305, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:08:00,011 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=307, currTerm=306.

2024-05-27 12:08:00,014 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=306, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:08:00,022 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=306, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 12:08:00,025 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=306, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 12:08:00,026 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=306, currTerm=306, granted=true, requestLastLogId=LogId [index=298, term=305], lastLogId=LogId [index=298, term=305].

2024-05-27 12:08:00,027 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:08:00,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=307, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 12:08:00,030 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=306, currTerm=306.

2024-05-27 12:08:00,033 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:08:00,038 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:08:00,039 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:08:00,041 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=307, currTerm=307.

2024-05-27 12:08:00,042 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=307, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-27 12:08:00,055 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=307, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 12:08:00,058 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=306, currTerm=307.

2024-05-27 12:08:00,060 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=306, currTerm=307.

2024-05-27 12:08:00,086 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=306, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 12:08:00,087 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 12:08:00,092 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 12:08:00,145 INFO onLeaderStart: term=306.

2024-05-27 12:08:05,548 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=313, currTerm=312, granted=true, requestLastLogId=LogId [index=303, term=312], lastLogId=LogId [index=303, term=312].

2024-05-27 12:08:05,552 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=313, currTerm=312.

2024-05-27 12:08:05,552 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=312, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 12:08:05,557 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=313, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-27 12:08:05,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=313, votedFor=nacos1:7848, cost time=2 ms

2024-05-27 12:25:09,678 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=307, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 12:25:09,672 INFO Node <naming_persistent_service_v2/nacos3:7848> term 307 start preVote.

2024-05-27 12:25:08,932 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=306, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 12:25:09,982 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=299, lastLogIncluded=0, lastLogIndex=299, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=208, type=Follower] is going to quit

2024-05-27 12:25:09,977 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=308, currTerm=307.

2024-05-27 12:25:09,978 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=314, currTerm=313, because the leader nacos1:7848's lease is still valid.

2024-05-27 12:25:09,983 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=299, lastLogIncluded=0, lastLogIndex=299, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=209, type=Follower] is going to quit

2024-05-27 12:25:09,985 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=307, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 12:25:09,985 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 12:25:09,990 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=308, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-27 12:25:09,991 INFO Node <naming_persistent_service_v2/nacos3:7848> term 307 start preVote.

2024-05-27 12:25:09,992 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=308, currTerm=308, granted=true, requestLastLogId=LogId [index=298, term=307], lastLogId=LogId [index=298, term=307].

2024-05-27 12:25:09,996 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=308, currTerm=307, granted=true, requestLastLogId=LogId [index=296, term=307], lastLogId=LogId [index=296, term=307].

2024-05-27 12:25:10,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=308, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 12:25:10,010 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=307, currTerm=308.

2024-05-27 12:25:10,010 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_298.

2024-05-27 12:25:10,011 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_298.

2024-05-27 12:25:10,019 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_296.

2024-05-27 12:25:10,021 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_296.

2024-05-27 12:25:10,021 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_304.

2024-05-27 12:25:10,023 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_304.

2024-05-27 12:25:10,022 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_299.

2024-05-27 12:25:10,025 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_299.

2024-05-27 12:25:10,022 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_296.

2024-05-27 12:25:10,024 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=307, currTerm=306, granted=true, requestLastLogId=LogId [index=299, term=306], lastLogId=LogId [index=299, term=306].

2024-05-27 12:25:10,028 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 294 to 297, cost 0 ms.

2024-05-27 12:25:10,025 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=307, granted=true.

2024-05-27 12:25:10,031 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=307.

2024-05-27 12:25:10,047 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=307, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:25:10,043 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=314, currTerm=313.

2024-05-27 12:25:10,044 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_301.

2024-05-27 12:25:10,046 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_296.

2024-05-27 12:25:10,046 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 12:25:10,047 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:25:10,050 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=307, currTerm=306.

2024-05-27 12:25:10,070 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 299 to 302, cost 0 ms.

2024-05-27 12:25:10,052 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_293.

2024-05-27 12:25:10,054 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=313, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 12:25:10,065 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 294 to 297, cost 1 ms.

2024-05-27 12:25:10,067 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=308, currTerm=308.

2024-05-27 12:25:10,074 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:25:10,075 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:25:10,069 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=314, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 12:25:10,082 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 292 to 294, cost 0 ms.

2024-05-27 12:25:10,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=307, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 12:25:10,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=314, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 12:25:10,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=308, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 12:25:10,096 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 12:25:10,096 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=307, votedFor=nacos1:7848, cost time=10 ms

2024-05-27 12:25:10,111 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 12:25:10,114 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 12:27:32,887 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 12:27:32,944 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 12:44:28,937 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 12:44:28,939 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 12:44:29,807 INFO Node <naming_instance_metadata/nacos3:7848> term 307 start preVote.

2024-05-27 12:44:29,936 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 12:44:28,937 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 12:44:29,799 INFO Node <naming_service_metadata/nacos3:7848> term 308 start preVote.

2024-05-27 12:44:29,806 INFO Node <naming_persistent_service_v2/nacos3:7848> term 308 start preVote.

2024-05-27 12:44:29,807 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=308, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:44:29,807 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=308, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:44:29,807 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=307, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 12:44:29,807 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=314, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 12:44:29,807 INFO Node <naming_persistent_service/nacos3:7848> term 314 start preVote.

2024-05-27 12:44:29,992 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 12:44:29,992 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 12:44:29,993 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 12:44:30,119 INFO The channel nacos1:7848 has successfully established.

2024-05-27 12:44:30,121 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 12:44:30,123 INFO The channel nacos1:7848 has successfully established.

2024-05-27 12:44:30,056 INFO Node <naming_persistent_service_v2/nacos3:7848> term 308 start preVote.

2024-05-27 12:44:30,126 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=309, currTerm=308, because the leader nacos1:7848's lease is still valid.

2024-05-27 12:44:30,099 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=315, currTerm=314, because the leader nacos2:7848's lease is still valid.

2024-05-27 12:44:30,122 INFO Peer nacos1:7848 is connected.

2024-05-27 12:44:30,126 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 12:44:30,131 INFO The channel nacos2:7848 has successfully established.

2024-05-27 12:44:30,128 INFO Peer nacos1:7848 is connected.

2024-05-27 12:44:30,133 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 12:44:30,133 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 12:44:30,133 INFO Peer nacos2:7848 is connected.

2024-05-27 12:44:30,134 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=308, granted=false.

2024-05-27 12:44:30,150 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=307, granted=true.

2024-05-27 12:44:30,151 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=307.

2024-05-27 12:44:30,154 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=307, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:44:30,155 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 12:44:30,157 INFO The channel nacos1:7848 has successfully established.

2024-05-27 12:44:30,157 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 12:44:30,158 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=315, currTerm=314.

2024-05-27 12:44:30,168 INFO The channel nacos2:7848 has successfully established.

2024-05-27 12:44:30,171 INFO Peer nacos2:7848 is connected.

2024-05-27 12:44:30,169 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=314, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 12:44:30,170 INFO Peer nacos1:7848 is connected.

2024-05-27 12:44:30,175 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=308, votedFor=nacos3:7848, cost time=23 ms

2024-05-27 12:44:30,177 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=308, granted=false.

2024-05-27 12:44:30,177 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:44:30,179 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=308, granted=true.

2024-05-27 12:44:30,182 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=308.

2024-05-27 12:44:30,181 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=308, granted=true.

2024-05-27 12:44:30,183 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=308, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:44:30,183 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=308.

2024-05-27 12:44:30,186 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:44:30,183 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=308, currTerm=308, granted=true, requestLastLogId=LogId [index=300, term=307], lastLogId=LogId [index=300, term=307].

2024-05-27 12:44:30,186 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=308, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 12:44:30,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=315, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-27 12:44:30,200 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=309, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 12:44:30,201 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 12:44:30,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=309, votedFor=nacos3:7848, cost time=16 ms

2024-05-27 12:44:30,219 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=315, votedFor=nacos1:7848, cost time=19 ms

2024-05-27 12:44:30,221 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=314, currTerm=315.

2024-05-27 12:44:30,224 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=308, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 12:44:30,224 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=314, currTerm=315.

2024-05-27 12:44:30,225 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 12:44:30,226 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 12:44:30,229 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 12:44:30,230 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=309, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 12:44:30,231 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 12:44:30,237 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=309, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 12:44:30,241 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 12:44:30,244 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 12:44:30,249 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 12:44:30,252 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 12:44:30,253 INFO onLeaderStart: term=308.

2024-05-27 12:44:30,258 INFO onLeaderStart: term=309.

2024-05-27 12:44:30,265 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 12:44:30,273 INFO onLeaderStart: term=309.

2024-05-27 12:44:33,952 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 12:44:33,953 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 12:44:33,953 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 12:44:33,954 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 12:45:15,918 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497022086s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 13:02:04,467 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=309, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:02:05,270 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=308, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:02:04,495 INFO Node <naming_persistent_service/nacos3:7848> term 315 start preVote.

2024-05-27 13:02:05,206 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=309, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:02:04,502 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=315, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:02:05,632 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:02:05,418 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_298.

2024-05-27 13:02:05,638 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_298.

2024-05-27 13:02:05,483 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_300.

2024-05-27 13:02:05,658 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_300.

2024-05-27 13:02:05,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=298, lastLogIncluded=0, lastLogIndex=298, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=162, type=Follower] is going to quit

2024-05-27 13:02:05,660 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=298, lastLogIncluded=0, lastLogIndex=298, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=161, type=Follower] is going to quit

2024-05-27 13:02:05,663 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_298.

2024-05-27 13:02:05,530 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:02:05,569 INFO Node <naming_persistent_service/nacos3:7848> term 315 start preVote.

2024-05-27 13:02:05,672 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=316, currTerm=315, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:02:05,676 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 297 to 299, cost 3 ms.

2024-05-27 13:02:05,631 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=301, lastLogIncluded=0, lastLogIndex=301, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=210, type=Follower] is going to quit

2024-05-27 13:02:05,631 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:02:05,634 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_306.

2024-05-27 13:02:05,632 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=300, lastLogIncluded=0, lastLogIndex=300, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=197, type=Follower] is going to quit

2024-05-27 13:02:05,692 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=300, lastLogIncluded=0, lastLogIndex=300, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=198, type=Follower] is going to quit

2024-05-27 13:02:05,645 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_301.

2024-05-27 13:02:05,658 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_296.

2024-05-27 13:02:05,664 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=310, currTerm=309, granted=true, requestLastLogId=LogId [index=298, term=309], lastLogId=LogId [index=298, term=309].

2024-05-27 13:02:05,680 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=316, currTerm=315.

2024-05-27 13:02:05,690 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=301, lastLogIncluded=0, lastLogIndex=301, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=211, type=Follower] is going to quit

2024-05-27 13:02:05,692 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_306.

2024-05-27 13:02:05,703 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=310, currTerm=309.

2024-05-27 13:02:05,693 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=310, currTerm=309, granted=true, requestLastLogId=LogId [index=300, term=309], lastLogId=LogId [index=300, term=309].

2024-05-27 13:02:05,708 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_304.

2024-05-27 13:02:05,694 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_301.

2024-05-27 13:02:05,698 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 294 to 297, cost 1 ms.

2024-05-27 13:02:05,699 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,704 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=309, currTerm=308, granted=true, requestLastLogId=LogId [index=301, term=308], lastLogId=LogId [index=301, term=308].

2024-05-27 13:02:05,705 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=316, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 13:02:05,713 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_299.

2024-05-27 13:02:05,710 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=310, currTerm=309.

2024-05-27 13:02:05,713 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=309, currTerm=308, granted=true, requestLastLogId=LogId [index=301, term=308], lastLogId=LogId [index=301, term=308].

2024-05-27 13:02:05,714 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=310, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 13:02:05,716 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=309, currTerm=308, granted=true, requestLastLogId=LogId [index=301, term=308], lastLogId=LogId [index=301, term=308].

2024-05-27 13:02:05,720 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=316, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 13:02:05,722 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=309, currTerm=308.

2024-05-27 13:02:05,718 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 302 to 305, cost 0 ms.

2024-05-27 13:02:05,722 WARN Node <naming_persistent_service/nacos3:7848> raise term 316 when get lastLogId.

2024-05-27 13:02:05,727 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=315, currTerm=316.

2024-05-27 13:02:05,722 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=315, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 13:02:05,723 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=310, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 13:02:05,734 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=310, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 13:02:05,737 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 297 to 300, cost 2 ms.

2024-05-27 13:02:05,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=309, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 13:02:05,745 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=315, currTerm=316.

2024-05-27 13:02:05,749 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=309, currTerm=309.

2024-05-27 13:02:05,754 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=310, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 13:02:05,755 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,756 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,767 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,769 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,771 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=309, votedFor=nacos1:7848, cost time=17 ms

2024-05-27 13:02:05,772 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,773 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:05,773 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:02:10,367 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 13:08:59,944 INFO Node <naming_persistent_service/nacos3:7848> term 316 start preVote.

2024-05-27 13:09:00,692 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=317, currTerm=316, granted=true, requestLastLogId=LogId [index=307, term=316], lastLogId=LogId [index=307, term=316].

2024-05-27 13:09:00,679 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=310, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:09:00,677 INFO Node <naming_persistent_service_v2/nacos3:7848> term 310 start preVote.

2024-05-27 13:09:00,677 INFO Node <naming_instance_metadata/nacos3:7848> term 309 start preVote.

2024-05-27 13:09:00,677 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=309, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:08:59,944 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=316, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 13:09:00,967 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=310, granted=false.

2024-05-27 13:09:00,800 INFO Node <naming_persistent_service/nacos3:7848> term 316 start preVote.

2024-05-27 13:09:00,979 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=310, currTerm=309, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:09:00,989 INFO Node <naming_persistent_service/nacos3:7848> term 316 start preVote.

2024-05-27 13:09:00,981 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=311, currTerm=310, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:09:00,995 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=316, granted=true.

2024-05-27 13:09:00,998 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=309, granted=true.

2024-05-27 13:09:01,005 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=309.

2024-05-27 13:09:01,003 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=316.

2024-05-27 13:09:01,007 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=310, granted=true.

2024-05-27 13:09:01,012 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=310, votedFor=nacos3:7848, cost time=5 ms

2024-05-27 13:09:01,019 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=310.

2024-05-27 13:09:01,024 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=310, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:09:01,021 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=309, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:09:01,021 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=317, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 13:09:01,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=311, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 13:09:01,039 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=310, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 13:09:01,060 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 13:09:01,061 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 13:09:01,084 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 13:09:01,085 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=317, currTerm=317.

2024-05-27 13:09:01,092 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,095 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,099 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,100 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,103 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:09:01,107 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-27 13:09:01,101 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=311, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 13:09:01,108 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 13:09:01,107 INFO onLeaderStart: term=310.

2024-05-27 13:09:01,110 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 13:09:01,115 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 13:09:01,126 INFO onLeaderStart: term=311.

2024-05-27 13:26:30,020 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=317, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:26:30,117 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=310, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:26:30,117 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=311, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:26:30,117 INFO Node <naming_service_metadata/nacos3:7848> term 310 start preVote.

2024-05-27 13:26:30,117 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=310, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:26:30,020 INFO Node <naming_persistent_service/nacos3:7848> term 317 start preVote.

2024-05-27 13:26:30,941 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:26:30,941 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=300, lastLogIncluded=0, lastLogIndex=300, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=164, type=Follower] is going to quit

2024-05-27 13:26:31,051 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=300, lastLogIncluded=0, lastLogIndex=300, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=165, type=Follower] is going to quit

2024-05-27 13:26:30,941 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=303, lastLogIncluded=0, lastLogIndex=303, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=212, type=Follower] is going to quit

2024-05-27 13:26:31,052 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=303, lastLogIncluded=0, lastLogIndex=303, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=213, type=Follower] is going to quit

2024-05-27 13:26:30,940 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:26:31,032 INFO Node <naming_persistent_service/nacos3:7848> term 317 start preVote.

2024-05-27 13:26:31,043 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=311, currTerm=310, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:26:31,052 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=312, currTerm=311.

2024-05-27 13:26:31,076 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=311, currTerm=310, granted=true, requestLastLogId=LogId [index=303, term=310], lastLogId=LogId [index=303, term=310].

2024-05-27 13:26:31,077 INFO Node <naming_persistent_service/nacos3:7848> term 317 start preVote.

2024-05-27 13:26:31,078 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=310, granted=true.

2024-05-27 13:26:31,083 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=310.

2024-05-27 13:26:31,082 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=311, currTerm=310.

2024-05-27 13:26:31,087 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=318, currTerm=317, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:26:31,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=312, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-27 13:26:31,087 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=310, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:26:31,087 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:26:31,090 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=312, currTerm=312, granted=true, requestLastLogId=LogId [index=300, term=311], lastLogId=LogId [index=300, term=311].

2024-05-27 13:26:31,090 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=318, currTerm=317.

2024-05-27 13:26:31,091 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=311, currTerm=311.

2024-05-27 13:26:31,092 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=312, currTerm=312, granted=true, requestLastLogId=LogId [index=300, term=311], lastLogId=LogId [index=300, term=311].

2024-05-27 13:26:31,096 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=311, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 13:26:31,098 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=311, currTerm=311, granted=true, requestLastLogId=LogId [index=303, term=310], lastLogId=LogId [index=303, term=310].

2024-05-27 13:26:31,103 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=318, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 13:26:31,105 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=312, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 13:26:31,105 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=311, votedFor=nacos3:7848, cost time=8 ms

2024-05-27 13:26:31,106 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=317, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 13:26:31,109 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=311, votedFor=nacos1:7848, cost time=10 ms

2024-05-27 13:26:31,111 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:26:31,111 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=311, currTerm=311, granted=true, requestLastLogId=LogId [index=303, term=310], lastLogId=LogId [index=303, term=310].

2024-05-27 13:26:31,115 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:26:31,118 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=318, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 13:26:31,122 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=317, currTerm=318.

2024-05-27 13:26:31,125 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=317, currTerm=318.

2024-05-27 13:26:31,126 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=317, currTerm=318.

2024-05-27 13:26:31,128 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=317, currTerm=318.

2024-05-27 13:26:31,130 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=317, currTerm=318.

2024-05-27 13:26:31,131 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=317, currTerm=318.

2024-05-27 13:26:31,132 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:42:55,726 INFO Node <naming_persistent_service/nacos3:7848> term 318 start preVote.

2024-05-27 13:42:56,249 INFO Node <naming_persistent_service/nacos3:7848> term 318 start preVote.

2024-05-27 13:42:56,258 INFO Node <naming_persistent_service/nacos3:7848> term 318 start preVote.

2024-05-27 13:42:55,729 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=318, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 13:42:55,728 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=311, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 13:42:55,726 INFO Node <naming_service_metadata/nacos3:7848> term 311 start preVote.

2024-05-27 13:42:56,271 INFO Node <naming_persistent_service/nacos3:7848> term 318 start preVote.

2024-05-27 13:42:56,541 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=311, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 13:42:56,536 INFO Node <naming_instance_metadata/nacos3:7848> term 311 start preVote.

2024-05-27 13:42:56,550 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_309.

2024-05-27 13:42:56,550 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_309.

2024-05-27 13:42:56,549 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_304.

2024-05-27 13:42:56,548 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_301.

2024-05-27 13:42:56,557 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_301.

2024-05-27 13:42:56,554 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_306.

2024-05-27 13:42:56,555 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_304.

2024-05-27 13:42:56,556 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_302.

2024-05-27 13:42:56,564 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_302.

2024-05-27 13:42:56,560 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=318, granted=true.

2024-05-27 13:42:56,566 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=318.

2024-05-27 13:42:56,557 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=311, granted=true.

2024-05-27 13:42:56,567 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=311.

2024-05-27 13:42:56,569 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=311, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:42:56,560 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_298.

2024-05-27 13:42:56,575 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_300.

2024-05-27 13:42:56,567 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=318, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:42:56,573 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_301.

2024-05-27 13:42:56,583 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=312, votedFor=nacos3:7848, cost time=15 ms

2024-05-27 13:42:56,577 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 305 to 307, cost 3 ms.

2024-05-27 13:42:56,577 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=312, currTerm=311, granted=true, requestLastLogId=LogId [index=304, term=311], lastLogId=LogId [index=304, term=311].

2024-05-27 13:42:56,578 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=313, currTerm=312, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:42:56,618 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 297 to 299, cost 1 ms.

2024-05-27 13:42:56,620 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=312, currTerm=311, because the leader nacos1:7848's lease is still valid.

2024-05-27 13:42:56,623 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 299 to 301, cost 0 ms.

2024-05-27 13:42:56,629 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 300 to 302, cost 0 ms.

2024-05-27 13:42:56,631 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=319, votedFor=nacos3:7848, cost time=55 ms

2024-05-27 13:42:56,632 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=311, granted=true.

2024-05-27 13:42:56,632 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:42:56,636 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:42:56,636 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=311.

2024-05-27 13:42:56,639 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=311, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 13:42:56,637 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=312, currTerm=312, granted=true, requestLastLogId=LogId [index=302, term=311], lastLogId=LogId [index=302, term=311].

2024-05-27 13:42:56,637 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:42:56,641 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:42:56,642 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=312, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 13:42:56,643 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 13:42:56,644 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 13:42:56,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=312, votedFor=nacos3:7848, cost time=11 ms

2024-05-27 13:42:56,654 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 13:42:56,658 INFO onLeaderStart: term=312.

2024-05-27 13:42:56,668 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=313, currTerm=312.

2024-05-27 13:42:56,669 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=312, currTerm=312.

2024-05-27 13:42:56,670 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=312, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 13:42:56,674 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=319, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 13:42:56,674 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 13:42:56,678 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 13:42:56,681 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=313, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 13:42:56,690 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 13:42:56,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=313, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 13:42:56,692 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 13:42:56,694 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 13:42:56,696 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 13:42:56,697 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=312, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 13:42:56,701 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 13:42:56,701 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 13:42:56,702 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 13:42:56,705 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 13:42:56,715 INFO onLeaderStart: term=319.

2024-05-27 13:42:56,725 INFO onLeaderStart: term=312.

2024-05-27 13:59:30,762 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 13:59:31,079 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=312, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:59:31,563 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=303, lastLogIncluded=0, lastLogIndex=303, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=199, type=Follower] is going to quit

2024-05-27 13:59:31,046 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=319, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:59:31,045 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=312, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 13:59:30,788 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=313, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 13:59:30,770 INFO Node <naming_persistent_service_v2/nacos3:7848> term 313 start preVote.

2024-05-27 13:59:30,777 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 13:59:31,563 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:59:31,725 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=303, lastLogIncluded=0, lastLogIndex=303, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=200, type=Follower] is going to quit

2024-05-27 13:59:31,832 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=310, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=206, type=Follower] is going to quit

2024-05-27 13:59:31,871 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=310, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=207, type=Follower] is going to quit

2024-05-27 13:59:31,833 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:59:31,841 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=305, lastLogIncluded=0, lastLogIndex=305, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=216, type=Follower] is going to quit

2024-05-27 13:59:31,878 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=305, lastLogIncluded=0, lastLogIndex=305, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=215, type=Follower] is going to quit

2024-05-27 13:59:32,005 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=313, currTerm=312, granted=true, requestLastLogId=LogId [index=305, term=312], lastLogId=LogId [index=305, term=312].

2024-05-27 13:59:31,841 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 13:59:31,868 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=314, currTerm=313, because the leader nacos2:7848's lease is still valid.

2024-05-27 13:59:32,011 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 13:59:31,872 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 13:59:32,013 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=314, currTerm=313.

2024-05-27 13:59:31,873 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 13:59:31,877 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=313, currTerm=312, granted=true, requestLastLogId=LogId [index=303, term=312], lastLogId=LogId [index=303, term=312].

2024-05-27 13:59:32,013 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 13:59:32,027 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=320, currTerm=319.

2024-05-27 13:59:32,014 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=313, currTerm=312.

2024-05-27 13:59:32,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=313, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 13:59:32,022 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,025 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 13:59:32,031 INFO The channel nacos2:7848 has successfully established.

2024-05-27 13:59:32,026 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 13:59:32,028 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=314, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 13:59:32,033 INFO Peer nacos2:7848 is connected.

2024-05-27 13:59:32,035 INFO The channel nacos1:7848 has successfully established.

2024-05-27 13:59:32,038 INFO Peer nacos1:7848 is connected.

2024-05-27 13:59:32,039 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=320, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 13:59:32,040 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,041 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=320, currTerm=320, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 13:59:32,044 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,047 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=313, currTerm=312.

2024-05-27 13:59:32,049 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=313, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-27 13:59:32,047 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,047 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=314, votedFor=nacos1:7848, cost time=10 ms

2024-05-27 13:59:32,060 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=313, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 13:59:32,060 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=320, votedFor=nacos1:7848, cost time=15 ms

2024-05-27 13:59:32,073 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=313, votedFor=nacos1:7848, cost time=21 ms

2024-05-27 13:59:32,076 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=313, currTerm=314.

2024-05-27 13:59:32,086 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,086 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,086 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,087 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=313, currTerm=314.

2024-05-27 13:59:32,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=313, votedFor=nacos2:7848, cost time=8 ms

2024-05-27 13:59:32,100 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:32,099 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 13:59:36,591 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 13:59:36,593 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 13:59:36,593 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 13:59:36,594 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 14:02:28,561 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=315, currTerm=314, because the leader nacos1:7848's lease is still valid.

2024-05-27 14:02:28,574 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=321, currTerm=320, because the leader nacos1:7848's lease is still valid.

2024-05-27 14:02:28,576 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=314, currTerm=313, because the leader nacos1:7848's lease is still valid.

2024-05-27 14:02:28,578 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=314, currTerm=313, because the leader nacos2:7848's lease is still valid.

2024-05-27 14:02:28,579 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=314, currTerm=313, because the leader nacos1:7848's lease is still valid.

2024-05-27 14:02:28,590 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=321, currTerm=320.

2024-05-27 14:02:28,590 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=320, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 14:02:28,594 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=315, currTerm=314.

2024-05-27 14:02:28,595 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=314, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 14:02:28,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=321, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-27 14:02:28,604 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=314, currTerm=313.

2024-05-27 14:02:28,605 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=313, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 14:02:28,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=315, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-27 14:02:28,611 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=314, currTerm=313.

2024-05-27 14:02:28,612 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=313, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 14:02:28,613 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=321, votedFor=nacos2:7848, cost time=13 ms

2024-05-27 14:02:28,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=314, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 14:02:28,623 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=314, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 14:02:28,627 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=315, votedFor=nacos2:7848, cost time=15 ms

2024-05-27 14:02:28,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=314, votedFor=nacos2:7848, cost time=18 ms

2024-05-27 14:02:28,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=314, votedFor=nacos1:7848, cost time=16 ms

2024-05-27 14:12:56,170 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_304.

2024-05-27 14:12:56,171 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_307.

2024-05-27 14:12:56,171 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_304.

2024-05-27 14:12:56,171 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_307.

2024-05-27 14:12:56,174 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_301.

2024-05-27 14:12:56,175 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_304.

2024-05-27 14:12:56,177 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 299 to 302, cost 0 ms.

2024-05-27 14:12:56,179 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 302 to 305, cost 0 ms.

2024-05-27 14:12:56,192 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_312.

2024-05-27 14:12:56,193 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_312.

2024-05-27 14:12:56,195 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_309.

2024-05-27 14:12:56,199 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 307 to 310, cost 0 ms.

2024-05-27 14:12:56,464 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_305.

2024-05-27 14:12:56,465 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_305.

2024-05-27 14:12:56,467 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_302.

2024-05-27 14:12:56,469 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 301 to 303, cost 0 ms.

2024-05-27 14:29:31,518 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 14:29:31,541 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 14:29:31,577 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 14:29:31,855 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 14:29:31,934 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 14:29:31,937 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 14:29:32,065 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 14:29:32,089 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 14:32:33,470 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 14:32:33,472 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 14:32:33,473 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 14:32:33,474 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 14:32:33,489 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 14:32:33,489 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 14:32:33,490 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 14:32:33,491 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 14:42:56,405 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 302 to 305, cost 1 ms.

2024-05-27 14:42:56,438 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 305 to 308, cost 4 ms.

2024-05-27 14:42:56,578 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 303 to 306, cost 2 ms.

2024-05-27 14:42:56,482 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 310 to 313, cost 44 ms.

2024-05-27 14:55:22,727 INFO Node <naming_persistent_service/nacos3:7848> term 321 start preVote.

2024-05-27 14:55:22,803 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=321, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 14:55:22,904 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=315, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 14:55:22,945 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=314, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 14:55:22,980 INFO Node <naming_service_metadata/nacos3:7848> term 314 start preVote.

2024-05-27 14:55:22,802 INFO Node <naming_instance_metadata/nacos3:7848> term 314 start preVote.

2024-05-27 14:55:22,981 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=314, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 14:55:27,176 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 14:55:22,899 INFO Node <naming_persistent_service_v2/nacos3:7848> term 315 start preVote.

2024-05-27 14:55:24,932 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 14:55:25,462 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 14:55:27,327 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 14:55:30,956 INFO Node <naming_persistent_service/nacos3:7848> term 321 start preVote.

2024-05-27 14:55:31,079 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=321, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 14:55:31,153 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 14:55:31,157 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 14:55:31,215 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 14:55:33,496 WARN Node <naming_instance_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.169793031s. [closed=[], open=[[buffered_nanos=1546616191, waiting_for_connection]]]].

2024-05-27 14:55:32,644 INFO Node <naming_persistent_service_v2/nacos3:7848> term 315 start preVote.

2024-05-27 14:55:33,552 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.522786198s. [closed=[], open=[[buffered_nanos=7759387717, waiting_for_connection]]]].

2024-05-27 14:55:32,683 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 14:55:33,575 WARN Node <naming_instance_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 3.998314809s. [closed=[], open=[[buffered_nanos=5989146657, waiting_for_connection]]]].

2024-05-27 14:55:34,265 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.616536775s. [closed=[], open=[[buffered_nanos=3703196370, waiting_for_connection]]]].

2024-05-27 14:55:34,115 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.080954559s. [closed=[], open=[[buffered_nanos=5982766703, waiting_for_connection]]]].

2024-05-27 14:55:33,695 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.673911739s. [closed=[], open=[[buffered_nanos=6620102058, waiting_for_connection]]]].

2024-05-27 14:55:34,130 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 0.229260585s. [closed=[], open=[[buffered_nanos=1030091578, waiting_for_connection]]]].

2024-05-27 14:55:34,178 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=315, currTerm=314, because the leader nacos2:7848's lease is still valid.

2024-05-27 14:55:35,551 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 14:55:35,681 INFO The channel nacos2:7848 has successfully established.

2024-05-27 14:55:35,795 INFO Node <naming_service_metadata/nacos3:7848> term 314 start preVote.

2024-05-27 14:55:35,779 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 14:55:35,756 INFO Peer nacos2:7848 is connected.

2024-05-27 14:55:35,882 INFO The channel nacos2:7848 has successfully established.

2024-05-27 14:55:35,751 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 14:55:36,026 INFO The channel nacos1:7848 has successfully established.

2024-05-27 14:55:35,900 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=312, term=321], lastLogId=LogId [index=312, term=321].

2024-05-27 14:55:35,882 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=314, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 14:55:36,031 INFO Peer nacos2:7848 is connected.

2024-05-27 14:55:36,111 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 14:55:36,180 INFO The channel nacos2:7848 has successfully established.

2024-05-27 14:55:36,165 INFO Peer nacos1:7848 is connected.

2024-05-27 14:55:36,167 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 14:55:36,238 INFO The channel nacos2:7848 has successfully established.

2024-05-27 14:55:36,241 INFO Peer nacos2:7848 is connected.

2024-05-27 14:55:36,264 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=312, term=321], lastLogId=LogId [index=312, term=321].

2024-05-27 14:55:36,169 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=316, currTerm=315, granted=true, requestLastLogId=LogId [index=304, term=315], lastLogId=LogId [index=304, term=315].

2024-05-27 14:55:36,183 INFO Peer nacos2:7848 is connected.

2024-05-27 14:55:36,185 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=315, currTerm=314, granted=true, requestLastLogId=LogId [index=305, term=314], lastLogId=LogId [index=305, term=314].

2024-05-27 14:55:36,186 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=315, currTerm=314, because the leader nacos2:7848's lease is still valid.

2024-05-27 14:55:36,285 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 14:55:36,337 INFO The channel nacos1:7848 has successfully established.

2024-05-27 14:55:36,343 INFO Peer nacos1:7848 is connected.

2024-05-27 14:55:36,351 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=316, currTerm=315.

2024-05-27 14:55:36,289 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.994502268s. [closed=[], open=[[buffered_nanos=6626655430, remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 14:55:36,326 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=315, currTerm=314, granted=true, requestLastLogId=LogId [index=305, term=314], lastLogId=LogId [index=305, term=314].

2024-05-27 14:55:36,349 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 14:55:36,362 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=315, currTerm=314.

2024-05-27 14:55:36,364 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=315, currTerm=314.

2024-05-27 14:55:36,365 INFO The channel nacos1:7848 has successfully established.

2024-05-27 14:55:36,369 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=314, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 14:55:36,376 INFO Peer nacos1:7848 is connected.

2024-05-27 14:55:36,381 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 14:55:36,397 INFO The channel nacos1:7848 has successfully established.

2024-05-27 14:55:36,403 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=316, votedFor=0.0.0.0:0, cost time=44 ms

2024-05-27 14:55:36,406 INFO Peer nacos1:7848 is connected.

2024-05-27 14:55:36,412 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=322, currTerm=321.

2024-05-27 14:55:36,433 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=315, votedFor=0.0.0.0:0, cost time=62 ms

2024-05-27 14:55:36,412 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=315, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-27 14:55:36,449 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=316, votedFor=nacos2:7848, cost time=38 ms

2024-05-27 14:55:36,484 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=322, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-27 14:55:36,488 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=315, votedFor=nacos2:7848, cost time=44 ms

2024-05-27 14:55:36,498 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=315, currTerm=315.

2024-05-27 14:55:36,486 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=315, currTerm=316.

2024-05-27 14:55:36,492 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=315, votedFor=nacos1:7848, cost time=42 ms

2024-05-27 14:55:36,509 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=316, currTerm=316.

2024-05-27 14:55:36,520 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=314, currTerm=315.

2024-05-27 14:55:36,530 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=314, currTerm=315.

2024-05-27 14:55:36,524 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=315, currTerm=316.

2024-05-27 14:55:36,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=322, votedFor=nacos2:7848, cost time=61 ms

2024-05-27 14:55:36,569 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=321, currTerm=322.

2024-05-27 14:55:36,575 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=321, currTerm=322.

2024-05-27 15:03:45,058 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=323, currTerm=322, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:03:45,518 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=317, currTerm=316, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:03:45,990 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=323, currTerm=322.

2024-05-27 15:03:46,412 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=322, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 15:03:46,977 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=317, currTerm=316.

2024-05-27 15:03:47,057 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=323, votedFor=0.0.0.0:0, cost time=566 ms

2024-05-27 15:03:47,067 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=316, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 15:03:48,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=317, votedFor=0.0.0.0:0, cost time=461 ms

2024-05-27 15:03:48,233 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=323, votedFor=nacos1:7848, cost time=835 ms

2024-05-27 15:03:49,832 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=317, votedFor=nacos1:7848, cost time=1618 ms

2024-05-27 15:03:49,944 WARN Node <naming_persistent_service/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=322, currTerm=323.

2024-05-27 15:03:50,156 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=316, currTerm=317.

2024-05-27 15:05:29,316 INFO Node <naming_persistent_service_v2/nacos3:7848> term 317 start preVote.

2024-05-27 15:05:29,407 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=317, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:05:30,408 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=317, granted=false.

2024-05-27 15:05:30,515 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=317, granted=true.

2024-05-27 15:05:30,524 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=317.

2024-05-27 15:05:30,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=317, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 15:05:30,911 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=318, votedFor=nacos3:7848, cost time=142 ms

2024-05-27 15:05:30,983 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=317, currTerm=318.

2024-05-27 15:05:31,393 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=318, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 15:05:31,404 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 15:05:31,427 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 15:05:31,473 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 15:05:33,024 INFO onLeaderStart: term=318.

2024-05-27 15:05:34,759 INFO Node <naming_instance_metadata/nacos3:7848> term 315 start preVote.

2024-05-27 15:05:34,763 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=315, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:05:35,198 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=315, granted=true.

2024-05-27 15:05:35,380 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=315.

2024-05-27 15:05:35,498 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 15:05:35,731 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=316, votedFor=nacos3:7848, cost time=156 ms

2024-05-27 15:05:35,798 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=316, currTerm=316, granted=true, requestLastLogId=LogId [index=308, term=315], lastLogId=LogId [index=308, term=315].

2024-05-27 15:05:35,950 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=316, currTerm=316.

2024-05-27 15:05:35,990 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=316, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 15:05:36,004 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 15:05:36,054 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 15:05:36,126 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 15:05:36,443 INFO onLeaderStart: term=316.

2024-05-27 15:12:58,271 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=316, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 15:12:58,343 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=318, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 15:12:59,091 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=309, lastLogIncluded=0, lastLogIndex=309, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=218, type=Follower] is going to quit

2024-05-27 15:13:01,272 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=323, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:12:59,105 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 15:12:59,804 INFO Node <naming_persistent_service/nacos3:7848> term 323 start preVote.

2024-05-27 15:13:00,153 INFO Node <naming_service_metadata/nacos3:7848> term 315 start preVote.

2024-05-27 15:13:00,259 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 15:13:00,211 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=307, lastLogIncluded=0, lastLogIndex=307, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=166, type=Follower] is going to quit

2024-05-27 15:13:01,511 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=309, lastLogIncluded=0, lastLogIndex=309, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=217, type=Follower] is going to quit

2024-05-27 15:13:00,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=315, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:13:03,222 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=307, lastLogIncluded=0, lastLogIndex=307, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=167, type=Follower] is going to quit

2024-05-27 15:13:05,352 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_314.

2024-05-27 15:13:04,860 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=319, currTerm=318, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:07,326 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=319, currTerm=318, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:07,295 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_309.

2024-05-27 15:13:05,875 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_307.

2024-05-27 15:13:05,861 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_314.

2024-05-27 15:13:07,215 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=315, granted=false.

2024-05-27 15:13:07,571 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:07,189 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:07,183 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=317, currTerm=316, granted=true, requestLastLogId=LogId [index=309, term=316], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:10,768 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=319, currTerm=318.

2024-05-27 15:13:05,961 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_306.

2024-05-27 15:13:07,676 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_307.

2024-05-27 15:13:10,880 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999912070s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 15:13:10,889 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_306.

2024-05-27 15:13:07,653 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_309.

2024-05-27 15:13:12,146 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:12,784 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=317, currTerm=316.

2024-05-27 15:13:07,178 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=323, granted=false.

2024-05-27 15:13:13,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=317, votedFor=0.0.0.0:0, cost time=570 ms

2024-05-27 15:13:14,562 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=317, currTerm=317, granted=true, requestLastLogId=LogId [index=309, term=316], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:10,490 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_312.

2024-05-27 15:13:10,566 INFO Node <naming_service_metadata/nacos3:7848> term 315 start preVote.

2024-05-27 15:13:10,575 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=315, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:13:10,874 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999924193s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 15:13:11,273 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=319, votedFor=0.0.0.0:0, cost time=457 ms

2024-05-27 15:13:17,135 INFO Node <naming_service_metadata/nacos3:7848> term 315 start preVote.

2024-05-27 15:13:12,793 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_307.

2024-05-27 15:13:12,797 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_304.

2024-05-27 15:13:13,058 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_305.

2024-05-27 15:13:14,670 INFO Node <naming_persistent_service/nacos3:7848> term 323 start preVote.

2024-05-27 15:13:14,673 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=323, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:13:16,220 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=317, currTerm=317, granted=true, requestLastLogId=LogId [index=309, term=316], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:17,278 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=319, currTerm=319.

2024-05-27 15:13:17,474 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 313 to 313, cost 152 ms.

2024-05-27 15:13:18,773 INFO Node <naming_persistent_service_v2/nacos3:7848> term 319 start preVote.

2024-05-27 15:13:17,395 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=316, currTerm=315, granted=true, requestLastLogId=LogId [index=306, term=315], lastLogId=LogId [index=306, term=315].

2024-05-27 15:13:18,769 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=317, currTerm=317, granted=true, requestLastLogId=LogId [index=309, term=316], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:19,859 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=319, votedFor=nacos2:7848, cost time=1074 ms

2024-05-27 15:13:18,820 INFO Node <naming_persistent_service/nacos3:7848> term 323 start preVote.

2024-05-27 15:13:19,317 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 306 to 306, cost 2 ms.

2024-05-27 15:13:19,695 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=316, currTerm=315, granted=true, requestLastLogId=LogId [index=306, term=315], lastLogId=LogId [index=306, term=315].

2024-05-27 15:13:20,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=317, votedFor=nacos2:7848, cost time=671 ms

2024-05-27 15:13:19,876 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 308 to 308, cost 4 ms.

2024-05-27 15:13:20,006 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:20,265 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 305 to 305, cost 218 ms.

2024-05-27 15:13:20,726 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=316, currTerm=315, granted=true, requestLastLogId=LogId [index=306, term=315], lastLogId=LogId [index=306, term=315].

2024-05-27 15:13:20,750 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=324, currTerm=323, granted=true, requestLastLogId=LogId [index=314, term=323], lastLogId=LogId [index=314, term=323].

2024-05-27 15:13:21,873 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=316, currTerm=315.

2024-05-27 15:13:20,935 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:22,334 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=320, currTerm=319.

2024-05-27 15:13:22,919 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=324, currTerm=323.

2024-05-27 15:13:25,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=324, votedFor=0.0.0.0:0, cost time=1681 ms

2024-05-27 15:13:25,386 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=320, votedFor=0.0.0.0:0, cost time=2123 ms

2024-05-27 15:13:25,498 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=316, votedFor=0.0.0.0:0, cost time=3255 ms

2024-05-27 15:13:26,920 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999777917s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 15:13:26,920 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=324, votedFor=nacos2:7848, cost time=1391 ms

2024-05-27 15:13:27,118 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999761975s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 15:13:27,995 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=323, currTerm=324.

2024-05-27 15:13:28,902 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=323, currTerm=324.

2024-05-27 15:13:28,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=320, votedFor=nacos1:7848, cost time=2699 ms

2024-05-27 15:13:28,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=316, votedFor=nacos1:7848, cost time=1894 ms

2024-05-27 15:13:29,927 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=315, currTerm=316.

2024-05-27 15:13:29,128 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=323, currTerm=324.

2024-05-27 15:13:30,391 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=315, currTerm=316.

2024-05-27 15:13:29,229 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=320, currTerm=320.

2024-05-27 15:13:30,546 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=323, currTerm=324.

2024-05-27 15:13:30,812 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=315, currTerm=316.

2024-05-27 15:13:31,011 INFO Node <naming_persistent_service_v2/nacos3:7848> term 320 start preVote.

2024-05-27 15:13:30,907 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:33,551 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=324, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:13:33,562 INFO Node <naming_persistent_service/nacos3:7848> term 324 start preVote.

2024-05-27 15:13:33,924 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=321, currTerm=320, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:34,404 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=325, currTerm=324, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:13:34,420 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=319, currTerm=320.

2024-05-27 15:13:34,663 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=321, currTerm=320, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:35,509 INFO Node <naming_persistent_service_v2/nacos3:7848> term 320 start preVote.

2024-05-27 15:13:36,359 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:36,360 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=321, currTerm=320.

2024-05-27 15:13:37,452 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=324, granted=false.

2024-05-27 15:13:38,490 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=325, currTerm=324, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:13:38,606 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=321, votedFor=0.0.0.0:0, cost time=457 ms

2024-05-27 15:13:37,846 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=317, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:13:37,846 INFO Node <naming_instance_metadata/nacos3:7848> term 317 start preVote.

2024-05-27 15:13:38,259 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=317, currTerm=316, because the leader nacos1:7848's lease is still valid.

2024-05-27 15:13:39,189 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=325, currTerm=324, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:13:40,716 INFO Node <naming_service_metadata/nacos3:7848> term 316 start preVote.

2024-05-27 15:13:39,392 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=318, currTerm=317, granted=true, requestLastLogId=LogId [index=310, term=317], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:42,405 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=318, currTerm=317, granted=true, requestLastLogId=LogId [index=310, term=317], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:40,266 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=321, votedFor=nacos1:7848, cost time=1576 ms

2024-05-27 15:13:40,738 INFO Node <naming_persistent_service/nacos3:7848> term 324 start preVote.

2024-05-27 15:13:40,742 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=324, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:13:40,726 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=316, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 15:13:40,769 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999783047s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 15:13:42,587 INFO Node <naming_service_metadata/nacos3:7848> term 316 start preVote.

2024-05-27 15:13:42,667 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=318, currTerm=317, granted=true, requestLastLogId=LogId [index=310, term=317], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:42,935 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=320, currTerm=321.

2024-05-27 15:13:44,679 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:43,332 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=324, granted=true, requestLastLogId=LogId [index=315, term=324], lastLogId=LogId [index=315, term=324].

2024-05-27 15:13:44,519 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=317, currTerm=316.

2024-05-27 15:13:44,686 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=318, currTerm=317.

2024-05-27 15:13:44,784 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=321, currTerm=321.

2024-05-27 15:13:44,843 INFO Node <naming_persistent_service/nacos3:7848> term 324 start preVote.

2024-05-27 15:13:45,257 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=325, currTerm=324.

2024-05-27 15:13:45,157 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=320, currTerm=321.

2024-05-27 15:13:45,338 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=320, currTerm=321.

2024-05-27 15:13:45,347 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=320, currTerm=321.

2024-05-27 15:13:45,469 INFO Node <naming_persistent_service_v2/nacos3:7848> term 321 start preVote.

2024-05-27 15:13:45,437 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=317, votedFor=0.0.0.0:0, cost time=561 ms

2024-05-27 15:13:46,695 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=318, votedFor=0.0.0.0:0, cost time=1801 ms

2024-05-27 15:13:47,097 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:47,250 INFO Node <naming_persistent_service_v2/nacos3:7848> term 321 start preVote.

2024-05-27 15:13:47,270 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=307, term=318], lastLogId=LogId [index=307, term=318].

2024-05-27 15:13:47,301 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=322, currTerm=321.

2024-05-27 15:13:47,440 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=325, votedFor=0.0.0.0:0, cost time=2160 ms

2024-05-27 15:13:47,457 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=317, votedFor=nacos1:7848, cost time=536 ms

2024-05-27 15:13:47,493 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=318, votedFor=nacos1:7848, cost time=420 ms

2024-05-27 15:13:47,783 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=317, currTerm=317, granted=true, requestLastLogId=LogId [index=307, term=316], lastLogId=LogId [index=306, term=315].

2024-05-27 15:13:47,862 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=317, currTerm=318.

2024-05-27 15:13:47,916 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=317, currTerm=318.

2024-05-27 15:13:47,961 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999783932s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 15:13:48,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=325, votedFor=nacos1:7848, cost time=207 ms

2024-05-27 15:13:48,108 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=325, currTerm=325.

2024-05-27 15:13:47,923 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=316, currTerm=317.

2024-05-27 15:13:47,967 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=322, votedFor=0.0.0.0:0, cost time=580 ms

2024-05-27 15:13:47,972 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=319, currTerm=318, granted=true, requestLastLogId=LogId [index=310, term=317], lastLogId=LogId [index=309, term=316].

2024-05-27 15:13:48,175 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=324, currTerm=325.

2024-05-27 15:13:48,877 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=316, currTerm=317.

2024-05-27 15:13:48,962 WARN Node <naming_persistent_service/nacos3:7848> raise term 325 when get lastLogId.

2024-05-27 15:13:49,114 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=322, votedFor=nacos2:7848, cost time=231 ms

2024-05-27 15:13:49,104 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=318, prevLogIndex=310, prevLogTerm=317, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:13:49,185 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=318, currTerm=317, granted=true, requestLastLogId=LogId [index=307, term=316], lastLogId=LogId [index=306, term=315].

2024-05-27 15:13:49,259 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=319, currTerm=318.

2024-05-27 15:13:49,190 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=324, currTerm=325.

2024-05-27 15:13:49,292 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=326, currTerm=325, granted=true, requestLastLogId=LogId [index=315, term=324], lastLogId=LogId [index=315, term=324].

2024-05-27 15:13:49,260 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=321, currTerm=322.

2024-05-27 15:13:49,297 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=318, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 15:13:49,360 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=326, currTerm=325, granted=true, requestLastLogId=LogId [index=315, term=324], lastLogId=LogId [index=315, term=324].

2024-05-27 15:13:49,276 WARN Node <naming_service_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=317, prevLogIndex=307, prevLogTerm=316, localPrevLogTerm=0, lastLogIndex=306, entriesSize=0.

2024-05-27 15:13:49,568 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=321, currTerm=322.

2024-05-27 15:13:49,587 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=326, currTerm=325.

2024-05-27 15:13:49,676 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=316, currTerm=317.

2024-05-27 15:13:49,707 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=322, currTerm=322.

2024-05-27 15:13:49,740 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=319, votedFor=0.0.0.0:0, cost time=462 ms

2024-05-27 15:13:49,761 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=318, currTerm=317.

2024-05-27 15:13:49,772 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=321, currTerm=322.

2024-05-27 15:13:49,981 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=321, currTerm=322.

2024-05-27 15:13:50,019 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=317, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 15:13:50,056 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:49,903 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=318, currTerm=319.

2024-05-27 15:13:50,198 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=326, votedFor=0.0.0.0:0, cost time=484 ms

2024-05-27 15:13:50,339 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=318, currTerm=319.

2024-05-27 15:13:50,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=318, votedFor=0.0.0.0:0, cost time=224 ms

2024-05-27 15:13:50,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=326, votedFor=nacos2:7848, cost time=466 ms

2024-05-27 15:13:50,821 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=319, votedFor=nacos2:7848, cost time=369 ms

2024-05-27 15:13:51,288 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=326, currTerm=326.

2024-05-27 15:13:51,736 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=318, votedFor=nacos2:7848, cost time=1184 ms

2024-05-27 15:13:51,843 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=317, currTerm=318.

2024-05-27 15:13:51,561 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 15:13:52,084 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=317, currTerm=318.

2024-05-27 15:13:52,294 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=317, currTerm=318.

2024-05-27 15:13:52,750 WARN Node <naming_service_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=318, prevLogIndex=308, prevLogTerm=317, localPrevLogTerm=0, lastLogIndex=306, entriesSize=0.

2024-05-27 15:13:55,799 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=319, prevLogIndex=311, prevLogTerm=318, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:13:56,471 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=319, prevLogIndex=311, prevLogTerm=318, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:13:57,224 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 15:13:59,355 INFO Node <naming_persistent_service_v2/nacos3:7848> term 322 start preVote.

2024-05-27 15:13:59,410 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=322, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:13:58,904 WARN Node <naming_service_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=318, prevLogIndex=308, prevLogTerm=317, localPrevLogTerm=0, lastLogIndex=306, entriesSize=0.

2024-05-27 15:14:02,943 INFO Node <naming_persistent_service_v2/nacos3:7848> term 322 start preVote.

2024-05-27 15:14:02,892 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=327, currTerm=326, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:14:02,055 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=319, prevLogIndex=311, prevLogTerm=318, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:14:03,072 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=319, prevLogIndex=311, prevLogTerm=318, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:14:03,852 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=322, granted=false.

2024-05-27 15:14:04,665 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=326, granted=false.

2024-05-27 15:14:04,364 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=322, granted=false.

2024-05-27 15:14:04,622 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=319, currTerm=318, because the leader nacos2:7848's lease is still valid.

2024-05-27 15:14:04,817 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=322, granted=true.

2024-05-27 15:14:04,868 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=322.

2024-05-27 15:14:04,904 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=322, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 15:14:05,077 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=323, votedFor=nacos3:7848, cost time=165 ms

2024-05-27 15:14:05,100 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 15:14:05,116 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=319, currTerm=318.

2024-05-27 15:14:05,130 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=318, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 15:14:05,253 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=319, votedFor=0.0.0.0:0, cost time=122 ms

2024-05-27 15:14:05,357 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=319, votedFor=nacos1:7848, cost time=88 ms

2024-05-27 15:14:05,444 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=326, granted=false.

2024-05-27 15:14:05,448 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=323, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 15:14:05,775 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 15:14:05,925 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 15:14:05,969 WARN Node <naming_service_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=319, prevLogIndex=309, prevLogTerm=318, localPrevLogTerm=0, lastLogIndex=306, entriesSize=0.

2024-05-27 15:14:06,013 WARN Node <naming_persistent_service_v2/nacos3:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=322, currTerm=323.

2024-05-27 15:14:06,186 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 15:14:06,224 INFO onLeaderStart: term=323.

2024-05-27 15:14:08,552 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=312, term=319], lastLogId=LogId [index=309, term=316].

2024-05-27 15:14:08,813 INFO Node <naming_instance_metadata/nacos3:7848> term 319 start preVote.

2024-05-27 15:14:08,816 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=319, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 15:14:08,894 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=320, currTerm=319.

2024-05-27 15:14:09,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=320, votedFor=0.0.0.0:0, cost time=149 ms

2024-05-27 15:14:09,819 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=320, votedFor=nacos2:7848, cost time=705 ms

2024-05-27 15:14:09,897 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=319, currTerm=320.

2024-05-27 15:14:09,983 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=319, currTerm=320.

2024-05-27 15:14:10,005 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos2:7848, term=320, prevLogIndex=312, prevLogTerm=319, localPrevLogTerm=0, lastLogIndex=309, entriesSize=0.

2024-05-27 15:27:48,375 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499759002s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 15:42:24,293 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499728473s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 15:42:59,609 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_316.

2024-05-27 15:42:59,665 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_310.

2024-05-27 15:42:59,673 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_316.

2024-05-27 15:42:59,710 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_310.

2024-05-27 15:42:59,837 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_314.

2024-05-27 15:42:59,891 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_306.

2024-05-27 15:42:59,996 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 313 to 315, cost 6 ms.

2024-05-27 15:43:00,145 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 306 to 307, cost 9 ms.

2024-05-27 15:43:05,593 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_313.

2024-05-27 15:43:05,717 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_313.

2024-05-27 15:43:06,193 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_309.

2024-05-27 15:43:06,205 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_309.

2024-05-27 15:43:07,023 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_309.

2024-05-27 15:43:07,127 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 308 to 310, cost 217 ms.

2024-05-27 15:43:07,201 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_307.

2024-05-27 15:43:08,116 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 305 to 308, cost 6 ms.

2024-05-27 15:43:44,901 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 15:43:49,837 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 15:43:55,507 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 15:43:55,993 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 15:43:56,358 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 15:43:56,456 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 15:44:04,670 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 15:44:05,427 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 15:44:06,587 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 15:44:06,635 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 15:44:06,690 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 15:44:06,737 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 15:44:07,840 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 15:44:09,722 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 15:44:09,778 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 15:44:11,279 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 15:44:11,472 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 16:06:11,897 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499727422s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 16:10:19,756 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=323, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 16:10:19,820 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=309, lastLogIncluded=0, lastLogIndex=309, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=169, type=Follower] is going to quit

2024-05-27 16:10:20,076 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=309, lastLogIncluded=0, lastLogIndex=309, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=168, type=Follower] is going to quit

2024-05-27 16:10:19,832 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 16:10:20,739 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=326, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 16:10:20,407 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 16:10:20,711 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 16:10:23,342 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=324, currTerm=323, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:10:25,388 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 16:10:25,866 INFO Node <naming_persistent_service_v2/nacos3:7848> term 323 start preVote.

2024-05-27 16:10:26,621 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 16:10:28,883 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 3.869082091s. [closed=[], open=[[buffered_nanos=4770335608, waiting_for_connection]]]].

2024-05-27 16:10:33,262 INFO Node <naming_persistent_service_v2/nacos3:7848> term 323 start preVote.

2024-05-27 16:10:33,412 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=319, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 16:10:33,463 INFO Node <naming_service_metadata/nacos3:7848> term 319 start preVote.

2024-05-27 16:10:34,954 INFO Node <naming_service_metadata/nacos3:7848> term 319 start preVote.

2024-05-27 16:10:34,978 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 16:10:35,027 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 16:10:35,036 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=326, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 16:10:35,161 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 16:10:36,542 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=324, currTerm=323, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:10:36,613 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:10:36,819 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.325652176s. [closed=[], open=[[buffered_nanos=10518230520, waiting_for_connection]]]].

2024-05-27 16:10:36,934 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999829719s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:36,952 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 16:10:37,026 INFO The channel nacos1:7848 has successfully established.

2024-05-27 16:10:37,081 INFO Peer nacos1:7848 is connected.

2024-05-27 16:10:37,741 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 16:10:37,820 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=323, granted=true.

2024-05-27 16:10:37,563 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.585245905s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:10:37,516 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 16:10:38,381 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=323.

2024-05-27 16:10:38,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=320, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 16:10:38,370 INFO The channel nacos2:7848 has successfully established.

2024-05-27 16:10:39,506 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999687377s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:10:38,765 INFO Node <naming_instance_metadata/nacos3:7848> term 320 start preVote.

2024-05-27 16:10:38,982 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=326, granted=false.

2024-05-27 16:10:41,026 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 16:10:41,302 INFO The channel nacos2:7848 has successfully established.

2024-05-27 16:10:41,310 INFO Peer nacos2:7848 is connected.

2024-05-27 16:10:39,453 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:10:39,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=324, votedFor=nacos3:7848, cost time=507 ms

2024-05-27 16:10:40,760 INFO Peer nacos2:7848 is connected.

2024-05-27 16:10:41,456 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=320, currTerm=319, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:10:40,903 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 16:10:41,071 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999751884s. [closed=[], open=[[buffered_nanos=5612242699, waiting_for_connection]]]].

2024-05-27 16:10:41,325 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 16:10:42,166 INFO Node <naming_persistent_service/nacos3:7848> term 326 start preVote.

2024-05-27 16:10:41,509 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=324, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:10:41,772 INFO Node <naming_instance_metadata/nacos3:7848> term 320 start preVote.

2024-05-27 16:10:41,775 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 16:10:41,502 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 16:10:41,796 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=320, currTerm=319.

2024-05-27 16:10:41,851 INFO The channel nacos1:7848 has successfully established.

2024-05-27 16:10:42,960 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 16:10:44,219 INFO Peer nacos1:7848 is connected.

2024-05-27 16:10:42,568 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:10:42,974 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=324, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:10:44,518 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=320, votedFor=0.0.0.0:0, cost time=410 ms

2024-05-27 16:10:44,678 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 16:10:45,773 INFO The channel nacos2:7848 has successfully established.

2024-05-27 16:10:44,450 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.911555506s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:44,454 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999578094s. [closed=[], open=[[buffered_nanos=2719499644, remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:10:45,969 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 16:10:46,011 INFO The channel nacos1:7848 has successfully established.

2024-05-27 16:10:46,255 INFO Peer nacos1:7848 is connected.

2024-05-27 16:10:44,454 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=326, granted=true.

2024-05-27 16:10:44,451 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=320, granted=true, requestLastLogId=LogId [index=313, term=320], lastLogId=LogId [index=313, term=320].

2024-05-27 16:10:44,451 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999777972s. [closed=[], open=[[buffered_nanos=2682203907, remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:10:51,407 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=320, granted=true.

2024-05-27 16:10:44,475 WARN Node <naming_persistent_service_v2/nacos3:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999182837s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:44,487 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999941545s. [closed=[], open=[[buffered_nanos=5918448612, remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:44,627 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999809480s. [closed=[], open=[[buffered_nanos=5820705013, remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:45,010 WARN Candidate node <naming_persistent_service_v2/nacos3:7848> term 324 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-27 16:10:45,227 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=320, votedFor=nacos1:7848, cost time=595 ms

2024-05-27 16:10:45,873 INFO Peer nacos2:7848 is connected.

2024-05-27 16:10:50,359 WARN Node <naming_instance_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: ClientCall was cancelled at or after deadline. [closed=[CANCELLED], committed=[buffered_nanos=2751568377, remote_addr=nacos1/172.25.0.5:7848]]].

2024-05-27 16:10:50,597 WARN Node <naming_instance_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.718398031s. [closed=[], open=[[buffered_nanos=4228666805, remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:50,772 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999913282s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:51,118 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999928665s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:10:51,559 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=320.

2024-05-27 16:10:57,281 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:10:51,462 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=326.

2024-05-27 16:10:51,930 INFO Node <naming_persistent_service_v2/nacos3:7848> term 324 start preVote.

2024-05-27 16:10:52,120 INFO Node <naming_service_metadata/nacos3:7848> term 320 start preVote.

2024-05-27 16:10:59,201 INFO Node <naming_service_metadata/nacos3:7848> term 320 start preVote.

2024-05-27 16:10:59,244 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=320, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:10:59,538 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=320, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:10:59,604 INFO Node <naming_service_metadata/nacos3:7848> term 320 start preVote.

2024-05-27 16:10:59,750 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=327, votedFor=nacos3:7848, cost time=209 ms

2024-05-27 16:10:59,631 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=324, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:10:59,793 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:00,901 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:01,232 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=327, currTerm=327, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:03,859 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=327, currTerm=327, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:00,687 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:04,370 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=324, currTerm=324.

2024-05-27 16:11:01,319 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=321, votedFor=nacos3:7848, cost time=2047 ms

2024-05-27 16:11:03,589 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=320, granted=true.

2024-05-27 16:11:04,115 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=327, currTerm=327, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:04,380 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:05,460 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=320.

2024-05-27 16:11:04,439 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=313, term=320], lastLogId=LogId [index=313, term=320].

2024-05-27 16:11:05,543 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=324, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:05,519 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=327, currTerm=327.

2024-05-27 16:11:06,829 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=313, term=320], lastLogId=LogId [index=313, term=320].

2024-05-27 16:11:05,531 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999850658s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:07,865 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999866503s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:06,905 INFO Node <naming_persistent_service_v2/nacos3:7848> term 324 start preVote.

2024-05-27 16:11:06,797 WARN Node <naming_instance_metadata/nacos3:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999683255s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:06,911 WARN Candidate node <naming_persistent_service/nacos3:7848> term 327 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-27 16:11:09,080 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 16:11:06,542 WARN Node <naming_persistent_service_v2/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.648890579s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:09,101 INFO Node <naming_persistent_service/nacos3:7848> term 327 start preVote.

2024-05-27 16:11:06,883 WARN Node <naming_persistent_service/nacos3:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999870790s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:06,472 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:07,251 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=321, currTerm=321.

2024-05-27 16:11:08,019 WARN Node <naming_service_metadata/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999957901s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:09,155 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=324, granted=true.

2024-05-27 16:11:09,634 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=324.

2024-05-27 16:11:09,144 WARN Node <naming_instance_metadata/nacos3:7848> RequestVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999656135s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:11:09,596 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:09,736 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=328, currTerm=327, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:09,631 WARN Candidate node <naming_instance_metadata/nacos3:7848> term 321 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-27 16:11:09,824 INFO Node <naming_instance_metadata/nacos3:7848> term 321 start preVote.

2024-05-27 16:11:09,738 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:09,915 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=313, term=320], lastLogId=LogId [index=313, term=320].

2024-05-27 16:11:10,184 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=321, currTerm=321.

2024-05-27 16:11:09,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=325, votedFor=nacos3:7848, cost time=118 ms

2024-05-27 16:11:10,332 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=327, granted=true.

2024-05-27 16:11:11,285 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=327.

2024-05-27 16:11:10,477 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=322, currTerm=321, granted=true, requestLastLogId=LogId [index=313, term=320], lastLogId=LogId [index=313, term=320].

2024-05-27 16:11:11,073 WARN Node <naming_persistent_service_v2/nacos3:7848> raise term 325 when get lastLogId.

2024-05-27 16:11:11,528 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:11,689 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:11,618 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=322, currTerm=321.

2024-05-27 16:11:13,660 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:14,090 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:14,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=328, votedFor=nacos3:7848, cost time=2718 ms

2024-05-27 16:11:14,217 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=321, votedFor=nacos3:7848, cost time=3819 ms

2024-05-27 16:11:14,369 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=328, currTerm=328, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:14,857 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=322, votedFor=0.0.0.0:0, cost time=1057 ms

2024-05-27 16:11:15,107 WARN Candidate node <naming_persistent_service_v2/nacos3:7848> term 325 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-27 16:11:14,393 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:16,760 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:15,012 WARN Node <naming_persistent_service_v2/nacos3:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999896344s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:16,617 INFO Node <naming_persistent_service_v2/nacos3:7848> term 325 start preVote.

2024-05-27 16:11:16,602 WARN Candidate node <naming_persistent_service/nacos3:7848> term 328 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-27 16:11:17,079 INFO Node <naming_persistent_service/nacos3:7848> term 328 start preVote.

2024-05-27 16:11:16,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=322, votedFor=nacos2:7848, cost time=1766 ms

2024-05-27 16:11:16,932 WARN Node <naming_persistent_service_v2/nacos3:7848> RequestVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999766850s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:11:17,376 WARN Node <naming_instance_metadata/nacos3:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999554401s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-27 16:11:16,798 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:17,273 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:17,436 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:17,420 WARN Node <naming_persistent_service/nacos3:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999874749s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:17,380 WARN Node <naming_persistent_service/nacos3:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999870941s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]].

2024-05-27 16:11:17,433 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:17,381 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=321, currTerm=322.

2024-05-27 16:11:17,467 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=309, term=323], lastLogId=LogId [index=309, term=323].

2024-05-27 16:11:17,492 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=325, granted=true.

2024-05-27 16:11:17,436 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=328, currTerm=328, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:17,491 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:17,491 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=322, currTerm=322, because the leader nacos2:7848's lease is still valid.

2024-05-27 16:11:17,493 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=325.

2024-05-27 16:11:17,495 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=328, currTerm=328.

2024-05-27 16:11:17,499 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=328, currTerm=328, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:17,495 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=321, granted=true, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=310, term=319].

2024-05-27 16:11:17,500 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=323, currTerm=322, because the leader nacos2:7848's lease is still valid.

2024-05-27 16:11:17,501 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:17,501 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=321, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 16:11:17,502 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 16:11:17,502 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 16:11:17,510 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 16:11:17,510 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=326, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 16:11:17,515 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=322, currTerm=321.

2024-05-27 16:11:17,614 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=316, term=326], lastLogId=LogId [index=316, term=326].

2024-05-27 16:11:17,618 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-27 16:11:17,670 INFO Replicator Replicator [state=Probe, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] is going to quit

2024-05-27 16:11:17,617 ERROR Fail to run ConfigurationChangeDone, status: Status[EPERM<1008>: Leader stepped down].

2024-05-27 16:11:17,639 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=325, currTerm=326.

2024-05-27 16:11:17,644 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=329, currTerm=328.

2024-05-27 16:11:17,668 INFO Replicator Replicator [state=Probe, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] is going to quit

2024-05-27 16:11:17,676 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=325, currTerm=326.

2024-05-27 16:11:17,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=322, votedFor=0.0.0.0:0, cost time=64 ms

2024-05-27 16:11:17,684 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] already destroyed, ignore error code: 1001

2024-05-27 16:11:17,684 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 16:11:17,685 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] already destroyed, ignore error code: 1001

2024-05-27 16:11:17,747 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=322, currTerm=322, granted=false, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=311, term=321].

2024-05-27 16:11:17,751 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=322, granted=false, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=311, term=321].

2024-05-27 16:11:17,761 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=321, currTerm=322, granted=false, requestLastLogId=LogId [index=310, term=319], lastLogId=LogId [index=311, term=321].

2024-05-27 16:11:17,752 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=329, votedFor=0.0.0.0:0, cost time=71 ms

2024-05-27 16:11:17,779 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=329, votedFor=nacos2:7848, cost time=17 ms

2024-05-27 16:11:17,781 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=326, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 16:11:17,781 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 16:11:17,783 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=329, currTerm=329.

2024-05-27 16:11:17,784 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=328, currTerm=329.

2024-05-27 16:11:17,788 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 16:11:17,864 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=328, currTerm=329.

2024-05-27 16:11:17,884 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 16:11:17,924 INFO onLeaderStart: term=326.

2024-05-27 16:11:18,025 WARN Replicator Replicator [state=Destroyed, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] id is null when timeout, maybe it's destroyed.

2024-05-27 16:11:18,028 WARN Replicator Replicator [state=Destroyed, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=311, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] id is null when timeout, maybe it's destroyed.

2024-05-27 16:11:18,177 WARN Truncating storage to lastIndexKept=310.

2024-05-27 16:11:22,137 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=323, currTerm=322, because the leader nacos2:7848's lease is still valid.

2024-05-27 16:11:23,172 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=323, currTerm=322, granted=true, requestLastLogId=LogId [index=314, term=322], lastLogId=LogId [index=313, term=320].

2024-05-27 16:11:23,179 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=323, currTerm=322.

2024-05-27 16:11:23,181 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=322, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 16:11:23,192 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=323, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 16:11:23,205 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=323, votedFor=nacos1:7848, cost time=12 ms

2024-05-27 16:11:23,218 WARN Node <naming_instance_metadata/nacos3:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=323, prevLogIndex=314, prevLogTerm=322, localPrevLogTerm=0, lastLogIndex=313, entriesSize=0.

2024-05-27 16:12:58,523 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_311.

2024-05-27 16:12:58,524 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_311.

2024-05-27 16:12:58,526 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_310.

2024-05-27 16:12:58,531 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 307 to 311, cost 1 ms.

2024-05-27 16:12:58,551 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_317.

2024-05-27 16:12:58,552 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_317.

2024-05-27 16:12:58,554 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_316.

2024-05-27 16:12:58,559 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 315 to 317, cost 2 ms.

2024-05-27 16:13:04,242 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_315.

2024-05-27 16:13:04,245 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_315.

2024-05-27 16:13:04,249 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_313.

2024-05-27 16:13:04,253 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 310 to 314, cost 0 ms.

2024-05-27 16:13:04,938 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_310.

2024-05-27 16:13:04,938 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_310.

2024-05-27 16:13:04,941 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_309.

2024-05-27 16:13:04,945 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 308 to 310, cost 0 ms.

2024-05-27 16:41:11,341 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 16:41:13,890 INFO Connection disconnected: /172.25.0.4:48356

2024-05-27 16:41:17,392 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 16:41:17,684 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 16:41:17,686 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 16:41:17,695 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 16:41:17,867 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 16:41:21,730 INFO Connection disconnected: /172.25.0.5:57772

2024-05-27 16:41:22,013 INFO Connection disconnected: /172.25.0.4:47902

2024-05-27 16:41:22,815 INFO Connection disconnected: /172.25.0.5:57782

2024-05-27 16:41:27,262 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 16:41:27,263 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 16:42:58,483 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 311 to 312, cost 0 ms.

2024-05-27 16:42:58,521 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 317 to 318, cost 0 ms.

2024-05-27 16:43:04,203 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 314 to 316, cost 1 ms.

2024-05-27 16:43:04,902 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 310 to 311, cost 0 ms.

2024-05-27 17:12:58,456 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 17:12:58,492 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 0 ms.

2024-05-27 17:13:04,170 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 17:13:04,868 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 0 ms.

2024-05-27 17:42:58,441 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 17:42:58,480 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 0 ms.

2024-05-27 17:43:04,165 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 17:43:04,865 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 0 ms.

2024-05-27 18:12:58,443 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 18:12:58,479 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 1 ms.

2024-05-27 18:13:04,163 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 18:13:04,859 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 0 ms.

2024-05-27 18:42:58,424 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 18:42:58,462 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 0 ms.

2024-05-27 18:43:04,061 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 18:43:04,762 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 0 ms.

2024-05-27 19:12:58,255 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 19:12:58,294 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 0 ms.

2024-05-27 19:13:03,976 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 19:13:04,675 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 0 ms.

2024-05-27 19:39:00,710 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=326, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 19:39:00,735 INFO Node <naming_service_metadata/nacos3:7848> term 322 start preVote.

2024-05-27 19:39:00,724 INFO Node <naming_instance_metadata/nacos3:7848> term 323 start preVote.

2024-05-27 19:39:00,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=322, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 19:39:00,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 19:39:00,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=323, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 19:39:00,735 INFO Node <naming_persistent_service/nacos3:7848> term 329 start preVote.

2024-05-27 19:39:01,503 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=310, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=172, type=Follower] is going to quit

2024-05-27 19:39:01,504 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 19:39:01,806 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 19:39:01,521 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 19:39:01,524 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 19:39:01,813 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=323, currTerm=322, because the leader nacos1:7848's lease is still valid.

2024-05-27 19:39:01,813 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=323, currTerm=322, because the leader nacos1:7848's lease is still valid.

2024-05-27 19:39:01,522 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 19:39:01,521 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 19:39:01,802 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=310, lastLogIncluded=0, lastLogIndex=310, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=171, type=Follower] is going to quit

2024-05-27 19:39:01,807 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 19:39:01,809 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 19:39:01,820 INFO The channel nacos1:7848 has successfully established.

2024-05-27 19:39:01,813 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=324, currTerm=323, because the leader nacos1:7848's lease is still valid.

2024-05-27 19:39:01,813 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 19:39:01,822 INFO The channel nacos2:7848 has successfully established.

2024-05-27 19:39:01,815 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 19:39:01,823 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 19:39:01,825 INFO The channel nacos2:7848 has successfully established.

2024-05-27 19:39:01,826 INFO Peer nacos2:7848 is connected.

2024-05-27 19:39:01,820 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=310, term=326], lastLogId=LogId [index=310, term=326].

2024-05-27 19:39:01,822 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 19:39:01,835 INFO The channel nacos2:7848 has successfully established.

2024-05-27 19:39:01,822 INFO Peer nacos2:7848 is connected.

2024-05-27 19:39:01,841 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=323, currTerm=322.

2024-05-27 19:39:01,824 INFO The channel nacos1:7848 has successfully established.

2024-05-27 19:39:01,844 INFO Peer nacos1:7848 is connected.

2024-05-27 19:39:01,825 INFO Peer nacos1:7848 is connected.

2024-05-27 19:39:01,828 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=310, term=326], lastLogId=LogId [index=310, term=326].

2024-05-27 19:39:01,828 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=329, granted=false.

2024-05-27 19:39:01,831 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 19:39:01,840 INFO Peer nacos2:7848 is connected.

2024-05-27 19:39:01,843 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=322, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 19:39:01,846 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=324, currTerm=323.

2024-05-27 19:39:01,853 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=323, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 19:39:01,847 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=310, term=326], lastLogId=LogId [index=310, term=326].

2024-05-27 19:39:01,849 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=329, granted=true.

2024-05-27 19:39:01,857 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=329.

2024-05-27 19:39:01,851 INFO The channel nacos1:7848 has successfully established.

2024-05-27 19:39:01,860 INFO Peer nacos1:7848 is connected.

2024-05-27 19:39:01,853 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=323, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 19:39:01,855 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=310, term=326], lastLogId=LogId [index=310, term=326].

2024-05-27 19:39:01,865 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=310, term=326], lastLogId=LogId [index=310, term=326].

2024-05-27 19:39:01,865 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=327, currTerm=326.

2024-05-27 19:39:01,859 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 19:39:01,863 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=324, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 19:39:01,865 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 19:39:01,874 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=323, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 19:39:01,885 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=322, currTerm=323.

2024-05-27 19:39:01,876 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=330, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 19:39:01,892 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=322, currTerm=323.

2024-05-27 19:39:01,934 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=324, votedFor=nacos2:7848, cost time=55 ms

2024-05-27 19:39:01,938 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=323, currTerm=324.

2024-05-27 19:39:01,935 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=327, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-27 19:39:01,946 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=330, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 19:39:01,947 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=323, currTerm=324.

2024-05-27 19:39:01,947 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 19:39:01,949 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 19:39:01,952 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=327, votedFor=nacos1:7848, cost time=7 ms

2024-05-27 19:39:01,953 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 19:39:01,954 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 19:39:01,958 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 19:39:01,980 INFO onLeaderStart: term=330.

2024-05-27 19:55:07,571 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=330, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 19:55:08,209 INFO Node <naming_instance_metadata/nacos3:7848> term 324 start preVote.

2024-05-27 19:55:08,211 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 19:55:08,212 INFO Node <naming_persistent_service_v2/nacos3:7848> term 327 start preVote.

2024-05-27 19:55:08,213 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=318, lastLogIncluded=0, lastLogIndex=318, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=209, type=Follower] is going to quit

2024-05-27 19:55:08,219 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=318, lastLogIncluded=0, lastLogIndex=318, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=208, type=Follower] is going to quit

2024-05-27 19:55:08,214 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=327, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 19:55:08,214 INFO Node <naming_service_metadata/nacos3:7848> term 323 start preVote.

2024-05-27 19:55:08,220 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=328, currTerm=327, because the leader nacos1:7848's lease is still valid.

2024-05-27 19:55:08,222 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=323, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 19:55:08,222 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=324, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 19:55:08,227 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=328, currTerm=327, because the leader nacos1:7848's lease is still valid.

2024-05-27 19:55:08,227 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=324, granted=true.

2024-05-27 19:55:08,229 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=324.

2024-05-27 19:55:08,231 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=324, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 19:55:08,235 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=323, granted=true.

2024-05-27 19:55:08,257 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=323.

2024-05-27 19:55:08,259 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_311.

2024-05-27 19:55:08,257 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_316.

2024-05-27 19:55:08,260 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=323, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 19:55:08,260 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_311.

2024-05-27 19:55:08,264 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=324, votedFor=nacos3:7848, cost time=5 ms

2024-05-27 19:55:08,265 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=325, votedFor=nacos3:7848, cost time=35 ms

2024-05-27 19:55:08,266 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_316.

2024-05-27 19:55:08,267 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_318.

2024-05-27 19:55:08,279 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_318.

2024-05-27 19:55:08,283 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=327, granted=false.

2024-05-27 19:55:08,288 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_310.

2024-05-27 19:55:08,285 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=327, granted=true.

2024-05-27 19:55:08,297 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=327.

2024-05-27 19:55:08,285 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 19:55:08,294 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_315.

2024-05-27 19:55:08,294 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_317.

2024-05-27 19:55:08,294 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_312.

2024-05-27 19:55:08,300 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=331, currTerm=330, granted=true, requestLastLogId=LogId [index=318, term=330], lastLogId=LogId [index=318, term=330].

2024-05-27 19:55:08,302 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 311, cost 1 ms.

2024-05-27 19:55:08,304 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=327, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 19:55:08,308 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=316, term=324], lastLogId=LogId [index=316, term=324].

2024-05-27 19:55:08,313 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_312.

2024-05-27 19:55:08,313 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=331, currTerm=330.

2024-05-27 19:55:08,318 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 316, cost 0 ms.

2024-05-27 19:55:08,325 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=328, votedFor=nacos3:7848, cost time=21 ms

2024-05-27 19:55:08,325 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 318, cost 0 ms.

2024-05-27 19:55:08,329 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=325, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 19:55:08,330 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 19:55:08,330 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 19:55:08,335 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_311.

2024-05-27 19:55:08,344 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=331, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-27 19:55:08,350 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 312, cost 0 ms.

2024-05-27 19:55:08,351 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 19:55:08,351 INFO onLeaderStart: term=325.

2024-05-27 19:55:08,352 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=324, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 19:55:08,353 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 19:55:08,356 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 19:55:08,358 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=328, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 19:55:08,362 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 19:55:08,363 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 19:55:08,363 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=331, votedFor=nacos2:7848, cost time=17 ms

2024-05-27 19:55:08,371 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=331, currTerm=331, granted=true, requestLastLogId=LogId [index=318, term=330], lastLogId=LogId [index=318, term=330].

2024-05-27 19:55:08,364 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 19:55:08,372 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 19:55:08,379 INFO onLeaderStart: term=324.

2024-05-27 19:55:08,387 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 19:55:08,414 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 19:55:08,419 INFO onLeaderStart: term=328.

2024-05-27 20:11:11,621 INFO Node <naming_persistent_service/nacos3:7848> term 331 start preVote.

2024-05-27 20:11:11,590 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=331, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 20:11:10,881 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=325, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 20:11:10,886 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=328, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 20:11:10,886 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=324, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 20:11:11,900 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=313, lastLogIncluded=0, lastLogIndex=313, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=201, type=Follower] is going to quit

2024-05-27 20:11:11,899 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=331, granted=true.

2024-05-27 20:11:11,901 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=331.

2024-05-27 20:11:11,900 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=312, lastLogIncluded=0, lastLogIndex=312, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=174, type=Follower] is going to quit

2024-05-27 20:11:11,903 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=312, lastLogIncluded=0, lastLogIndex=312, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=175, type=Follower] is going to quit

2024-05-27 20:11:11,903 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 20:11:11,901 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=313, lastLogIncluded=0, lastLogIndex=313, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=202, type=Follower] is going to quit

2024-05-27 20:11:11,900 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 20:11:11,902 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 20:11:11,903 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=317, lastLogIncluded=0, lastLogIndex=317, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=219, type=Follower] is going to quit

2024-05-27 20:11:11,910 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=317, lastLogIncluded=0, lastLogIndex=317, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=220, type=Follower] is going to quit

2024-05-27 20:11:11,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=331, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 20:11:11,904 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=312, term=328], lastLogId=LogId [index=312, term=328].

2024-05-27 20:11:11,908 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=325, currTerm=324, granted=true, requestLastLogId=LogId [index=313, term=324], lastLogId=LogId [index=313, term=324].

2024-05-27 20:11:11,914 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=312, term=328], lastLogId=LogId [index=312, term=328].

2024-05-27 20:11:11,916 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=312, term=328], lastLogId=LogId [index=312, term=328].

2024-05-27 20:11:11,916 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=326, currTerm=325.

2024-05-27 20:11:11,919 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=312, term=328], lastLogId=LogId [index=312, term=328].

2024-05-27 20:11:11,921 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=329, currTerm=328.

2024-05-27 20:11:11,923 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=325, currTerm=324.

2024-05-27 20:11:11,928 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=332, votedFor=nacos3:7848, cost time=14 ms

2024-05-27 20:11:11,933 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:11:11,934 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=325, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 20:11:11,931 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=329, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 20:11:11,932 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=326, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 20:11:11,935 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,934 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=332, currTerm=332.

2024-05-27 20:11:11,935 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=326, currTerm=326, granted=true, requestLastLogId=LogId [index=317, term=325], lastLogId=LogId [index=317, term=325].

2024-05-27 20:11:11,937 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=332, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 20:11:11,938 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 20:11:11,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=325, votedFor=nacos2:7848, cost time=5 ms

2024-05-27 20:11:11,937 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=326, currTerm=326, granted=true, requestLastLogId=LogId [index=317, term=325], lastLogId=LogId [index=317, term=325].

2024-05-27 20:11:11,941 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,941 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,945 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=329, votedFor=nacos2:7848, cost time=6 ms

2024-05-27 20:11:11,942 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=325, currTerm=325, granted=true, requestLastLogId=LogId [index=313, term=324], lastLogId=LogId [index=313, term=324].

2024-05-27 20:11:11,943 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 20:11:11,944 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,946 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=329, currTerm=329.

2024-05-27 20:11:11,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=326, votedFor=nacos2:7848, cost time=20 ms

2024-05-27 20:11:11,966 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,968 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 20:11:11,984 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=332, currTerm=332, granted=true, requestLastLogId=LogId [index=319, term=331], lastLogId=LogId [index=319, term=331].

2024-05-27 20:11:11,989 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 20:11:11,990 INFO onLeaderStart: term=332.

2024-05-27 20:11:15,934 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 20:11:15,935 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 20:11:15,936 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 20:29:45,730 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=332, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 20:29:46,489 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=326, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 20:29:45,757 INFO Node <naming_persistent_service_v2/nacos3:7848> term 329 start preVote.

2024-05-27 20:29:46,675 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=320, lastLogIncluded=0, lastLogIndex=320, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=210, type=Follower] is going to quit

2024-05-27 20:29:46,680 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=320, lastLogIncluded=0, lastLogIndex=320, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=211, type=Follower] is going to quit

2024-05-27 20:29:46,481 INFO Node <naming_instance_metadata/nacos3:7848> term 326 start preVote.

2024-05-27 20:29:46,481 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=325, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 20:29:46,775 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=333, currTerm=332, granted=true, requestLastLogId=LogId [index=320, term=332], lastLogId=LogId [index=320, term=332].

2024-05-27 20:29:46,776 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=333, currTerm=332, granted=true, requestLastLogId=LogId [index=320, term=332], lastLogId=LogId [index=320, term=332].

2024-05-27 20:29:46,480 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 20:29:45,762 INFO Node <naming_service_metadata/nacos3:7848> term 325 start preVote.

2024-05-27 20:29:46,754 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 20:29:46,809 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_313.

2024-05-27 20:29:46,814 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_313.

2024-05-27 20:29:46,815 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_318.

2024-05-27 20:29:46,816 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_318.

2024-05-27 20:29:46,816 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=327, currTerm=326, because the leader nacos2:7848's lease is still valid.

2024-05-27 20:29:46,817 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=333, currTerm=332.

2024-05-27 20:29:46,817 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_314.

2024-05-27 20:29:46,818 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_316.

2024-05-27 20:29:46,818 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_311.

2024-05-27 20:29:46,825 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=326, currTerm=325, granted=true, requestLastLogId=LogId [index=314, term=325], lastLogId=LogId [index=314, term=325].

2024-05-27 20:29:46,883 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=326, currTerm=325.

2024-05-27 20:29:46,884 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=325, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 20:29:46,828 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_314.

2024-05-27 20:29:46,870 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=330, currTerm=329, because the leader nacos2:7848's lease is still valid.

2024-05-27 20:29:46,879 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=326, granted=false.

2024-05-27 20:29:46,883 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_320.

2024-05-27 20:29:46,895 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_320.

2024-05-27 20:29:46,888 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=333, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-27 20:29:46,890 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_312.

2024-05-27 20:29:46,889 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 316 to 317, cost 0 ms.

2024-05-27 20:29:46,889 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=330, currTerm=329, because the leader nacos2:7848's lease is still valid.

2024-05-27 20:29:46,943 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=329, granted=true.

2024-05-27 20:29:46,957 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=329.

2024-05-27 20:29:46,962 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 20:29:46,893 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=326, granted=true.

2024-05-27 20:29:46,896 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 311 to 312, cost 0 ms.

2024-05-27 20:29:46,896 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=326, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 20:29:46,926 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=333, currTerm=333, granted=true, requestLastLogId=LogId [index=320, term=332], lastLogId=LogId [index=320, term=332].

2024-05-27 20:29:46,963 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_318.

2024-05-27 20:29:46,964 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 312 to 313, cost 1 ms.

2024-05-27 20:29:46,973 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=326.

2024-05-27 20:29:46,985 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=326, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 20:29:46,988 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=330, votedFor=nacos3:7848, cost time=23 ms

2024-05-27 20:29:46,988 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 318 to 319, cost 0 ms.

2024-05-27 20:29:46,990 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=330, currTerm=330.

2024-05-27 20:29:46,992 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:29:47,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=326, votedFor=nacos1:7848, cost time=29 ms

2024-05-27 20:29:47,009 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=325, currTerm=326.

2024-05-27 20:29:47,010 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=325, currTerm=326.

2024-05-27 20:29:47,011 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=333, votedFor=nacos2:7848, cost time=29 ms

2024-05-27 20:29:47,014 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=327, votedFor=nacos3:7848, cost time=29 ms

2024-05-27 20:29:47,016 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=327, currTerm=327.

2024-05-27 20:45:48,919 INFO Node <naming_instance_metadata/nacos3:7848> term 327 start preVote.

2024-05-27 20:45:48,919 INFO Node <naming_service_metadata/nacos3:7848> term 326 start preVote.

2024-05-27 20:45:49,768 INFO Node <naming_instance_metadata/nacos3:7848> term 327 start preVote.

2024-05-27 20:45:48,919 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=327, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 20:45:49,770 INFO Node <naming_persistent_service/nacos3:7848> term 333 start preVote.

2024-05-27 20:45:49,770 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=333, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 20:45:49,771 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=327, currTerm=326, granted=true, requestLastLogId=LogId [index=315, term=326], lastLogId=LogId [index=315, term=326].

2024-05-27 20:45:48,919 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=326, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 20:45:49,770 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=331, currTerm=330, granted=true, requestLastLogId=LogId [index=314, term=330], lastLogId=LogId [index=314, term=330].

2024-05-27 20:45:49,789 INFO Node <naming_persistent_service_v2/nacos3:7848> term 330 start preVote.

2024-05-27 20:45:49,777 INFO Node <naming_service_metadata/nacos3:7848> term 326 start preVote.

2024-05-27 20:45:49,794 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=330, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 20:45:49,817 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=328, currTerm=327, granted=true, requestLastLogId=LogId [index=319, term=327], lastLogId=LogId [index=319, term=327].

2024-05-27 20:45:49,883 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=326, granted=true.

2024-05-27 20:45:49,884 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=326.

2024-05-27 20:45:49,885 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=327, granted=true.

2024-05-27 20:45:49,887 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=327.

2024-05-27 20:45:49,896 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=327, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 20:45:49,897 WARN Node <naming_service_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=326, currTerm=327.

2024-05-27 20:45:49,898 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=328, votedFor=nacos3:7848, cost time=9 ms

2024-05-27 20:45:49,900 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=333, granted=true.

2024-05-27 20:45:49,900 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=333.

2024-05-27 20:45:49,900 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,902 WARN Node <naming_instance_metadata/nacos3:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=327, currTerm=328.

2024-05-27 20:45:49,905 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=331, currTerm=330.

2024-05-27 20:45:49,911 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=330, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 20:45:49,912 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,911 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=334, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 20:45:49,913 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=327, currTerm=327.

2024-05-27 20:45:49,914 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=328, currTerm=328.

2024-05-27 20:45:49,920 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=331, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-27 20:45:49,922 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=330, currTerm=331.

2024-05-27 20:45:49,922 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=334, currTerm=334, granted=true, requestLastLogId=LogId [index=321, term=333], lastLogId=LogId [index=321, term=333].

2024-05-27 20:45:49,924 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=334, currTerm=334, granted=true, requestLastLogId=LogId [index=321, term=333], lastLogId=LogId [index=321, term=333].

2024-05-27 20:45:49,928 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=334, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 20:45:49,931 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 20:45:49,932 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,932 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 20:45:49,933 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=331, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 20:45:49,933 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,938 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,938 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 20:45:49,943 INFO onLeaderStart: term=334.

2024-05-27 20:45:49,956 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=328, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 20:45:49,959 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=327, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 20:45:49,961 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 20:45:49,966 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 20:45:49,960 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 20:45:49,972 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 20:45:49,974 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 20:45:49,979 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=330, currTerm=331.

2024-05-27 20:45:49,988 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 20:45:49,991 INFO onLeaderStart: term=328.

2024-05-27 20:45:49,994 INFO onLeaderStart: term=327.

2024-05-27 21:02:32,052 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=327, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 21:02:32,053 INFO Node <naming_persistent_service_v2/nacos3:7848> term 331 start preVote.

2024-05-27 21:02:32,090 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=334, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 21:02:32,249 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=322, lastLogIncluded=0, lastLogIndex=322, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=212, type=Follower] is going to quit

2024-05-27 21:02:32,252 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=322, lastLogIncluded=0, lastLogIndex=322, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=213, type=Follower] is going to quit

2024-05-27 21:02:32,091 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=331, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 21:02:32,192 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=316, lastLogIncluded=0, lastLogIndex=316, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=203, type=Follower] is going to quit

2024-05-27 21:02:32,256 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=316, lastLogIncluded=0, lastLogIndex=316, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=204, type=Follower] is going to quit

2024-05-27 21:02:32,266 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:32,269 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_322.

2024-05-27 21:02:32,288 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_322.

2024-05-27 21:02:32,302 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_316.

2024-05-27 21:02:32,306 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_316.

2024-05-27 21:02:32,192 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 21:02:32,326 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=328, currTerm=327, granted=true, requestLastLogId=LogId [index=316, term=327], lastLogId=LogId [index=316, term=327].

2024-05-27 21:02:32,328 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_314.

2024-05-27 21:02:32,251 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 21:02:32,255 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=329, currTerm=328, because the leader nacos3:7848's lease is still valid.

2024-05-27 21:02:32,269 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=331, granted=true.

2024-05-27 21:02:32,341 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=331.

2024-05-27 21:02:32,305 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_315.

2024-05-27 21:02:32,342 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=332, currTerm=332, granted=true, requestLastLogId=LogId [index=315, term=331], lastLogId=LogId [index=315, term=331].

2024-05-27 21:02:32,346 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=328, currTerm=327.

2024-05-27 21:02:32,306 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_320.

2024-05-27 21:02:32,306 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_320.

2024-05-27 21:02:32,351 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_320.

2024-05-27 21:02:32,343 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_315.

2024-05-27 21:02:32,347 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 313 to 315, cost 3 ms.

2024-05-27 21:02:32,347 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=335, currTerm=334, granted=true, requestLastLogId=LogId [index=322, term=334], lastLogId=LogId [index=322, term=334].

2024-05-27 21:02:32,358 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:32,359 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:32,361 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:32,363 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_313.

2024-05-27 21:02:32,363 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 319 to 321, cost 1 ms.

2024-05-27 21:02:32,363 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=328, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-27 21:02:32,363 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_318.

2024-05-27 21:02:32,371 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 312 to 314, cost 0 ms.

2024-05-27 21:02:32,363 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=332, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 21:02:32,366 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=335, currTerm=334.

2024-05-27 21:02:32,367 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:32,372 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=332, currTerm=332.

2024-05-27 21:02:32,378 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 21:02:32,379 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 317 to 319, cost 0 ms.

2024-05-27 21:02:32,382 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=335, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 21:02:32,382 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=328, votedFor=nacos2:7848, cost time=11 ms

2024-05-27 21:02:32,391 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=335, votedFor=nacos2:7848, cost time=9 ms

2024-05-27 21:02:32,393 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 21:02:37,054 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:02:37,055 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:02:37,055 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:02:37,056 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:08:14,522 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=335, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 21:08:14,522 INFO Node <naming_persistent_service/nacos3:7848> term 335 start preVote.

2024-05-27 21:08:14,522 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=328, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 21:08:15,587 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=320, lastLogIncluded=0, lastLogIndex=320, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=221, type=Follower] is going to quit

2024-05-27 21:08:15,588 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=320, lastLogIncluded=0, lastLogIndex=320, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=222, type=Follower] is going to quit

2024-05-27 21:08:14,522 INFO Node <naming_service_metadata/nacos3:7848> term 328 start preVote.

2024-05-27 21:08:15,591 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 21:08:14,522 INFO Node <naming_persistent_service_v2/nacos3:7848> term 332 start preVote.

2024-05-27 21:08:15,591 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=328, granted=true, requestLastLogId=LogId [index=320, term=328], lastLogId=LogId [index=320, term=328].

2024-05-27 21:08:15,939 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=329, currTerm=328.

2024-05-27 21:08:15,596 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=328, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 21:08:15,596 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=332, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 21:08:15,873 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=329, currTerm=328, because the leader nacos2:7848's lease is still valid.

2024-05-27 21:08:15,989 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=329, currTerm=328.

2024-05-27 21:08:15,880 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=336, currTerm=335, because the leader nacos2:7848's lease is still valid.

2024-05-27 21:08:16,004 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=336, currTerm=335.

2024-05-27 21:08:15,939 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=333, currTerm=332, because the leader nacos1:7848's lease is still valid.

2024-05-27 21:08:16,013 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=329, votedFor=0.0.0.0:0, cost time=73 ms

2024-05-27 21:08:16,018 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=335, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 21:08:16,048 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=336, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-27 21:08:16,049 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=333, currTerm=332.

2024-05-27 21:08:16,050 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=335, currTerm=336.

2024-05-27 21:08:16,058 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=332, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 21:08:16,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=329, votedFor=0.0.0.0:0, cost time=59 ms

2024-05-27 21:08:16,074 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=329, votedFor=nacos2:7848, cost time=26 ms

2024-05-27 21:08:16,075 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=329, currTerm=329, granted=true, requestLastLogId=LogId [index=320, term=328], lastLogId=LogId [index=320, term=328].

2024-05-27 21:08:16,076 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=336, votedFor=nacos1:7848, cost time=19 ms

2024-05-27 21:08:16,081 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=329, currTerm=329, granted=true, requestLastLogId=LogId [index=320, term=328], lastLogId=LogId [index=320, term=328].

2024-05-27 21:08:16,082 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=329, votedFor=nacos1:7848, cost time=18 ms

2024-05-27 21:08:16,082 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=333, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-27 21:08:16,086 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=332, currTerm=333.

2024-05-27 21:08:16,084 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=336, currTerm=336, granted=true, requestLastLogId=LogId [index=323, term=335], lastLogId=LogId [index=323, term=335].

2024-05-27 21:08:16,089 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=335, currTerm=336.

2024-05-27 21:08:16,089 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=328, currTerm=329.

2024-05-27 21:08:16,089 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=332, currTerm=333.

2024-05-27 21:08:16,089 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=328, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 21:08:16,107 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=328, currTerm=329.

2024-05-27 21:08:16,111 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=333, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 21:32:31,747 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_324.

2024-05-27 21:32:31,748 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_317.

2024-05-27 21:32:31,748 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_318.

2024-05-27 21:32:31,748 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_321.

2024-05-27 21:32:31,749 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_321.

2024-05-27 21:32:31,748 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_324.

2024-05-27 21:32:31,748 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_317.

2024-05-27 21:32:31,749 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_318.

2024-05-27 21:32:31,751 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_320.

2024-05-27 21:32:31,751 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_322.

2024-05-27 21:32:31,751 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_315.

2024-05-27 21:32:31,752 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_316.

2024-05-27 21:32:31,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 319 to 321, cost 1 ms.

2024-05-27 21:32:31,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 315 to 317, cost 1 ms.

2024-05-27 21:32:31,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 314 to 316, cost 1 ms.

2024-05-27 21:32:31,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 321 to 323, cost 0 ms.

2024-05-27 21:38:15,618 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 21:38:15,913 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 21:38:15,949 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 21:38:15,966 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 21:38:15,997 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 21:38:15,997 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 21:38:16,005 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 21:38:16,019 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 21:38:20,833 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:38:20,836 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:38:20,836 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:38:20,837 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos2:7848]

2024-05-27 21:38:20,903 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 21:38:20,906 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 21:38:20,906 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 21:38:20,925 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 21:38:21,059 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos3:7848 -> nacos1:7848]

2024-05-27 22:02:31,750 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 323 to 325, cost 0 ms.

2024-05-27 22:02:31,750 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 317 to 319, cost 0 ms.

2024-05-27 22:02:31,750 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 316 to 318, cost 0 ms.

2024-05-27 22:02:31,750 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 321 to 322, cost 0 ms.

2024-05-27 22:30:54,149 INFO Node <naming_service_metadata/nacos3:7848> term 329 start preVote.

2024-05-27 22:30:54,941 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 22:30:54,941 INFO Node <naming_persistent_service/nacos3:7848> term 336 start preVote.

2024-05-27 22:30:55,172 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 22:30:55,288 INFO Node <naming_persistent_service_v2/nacos3:7848> term 333 start preVote.

2024-05-27 22:30:55,298 INFO Node <naming_service_metadata/nacos3:7848> term 329 start preVote.

2024-05-27 22:30:55,298 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=333, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 22:30:55,313 INFO Node <naming_instance_metadata/nacos3:7848> term 329 start preVote.

2024-05-27 22:30:55,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 22:30:55,348 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 22:30:55,352 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 22:30:55,364 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 22:30:55,383 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 22:30:55,375 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 22:30:55,405 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 22:30:55,406 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 22:30:55,406 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 22:30:55,436 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 22:30:55,438 INFO The channel nacos2:7848 has successfully established.

2024-05-27 22:30:55,438 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 22:30:55,441 INFO The channel nacos2:7848 has successfully established.

2024-05-27 22:30:55,440 INFO Peer nacos2:7848 is connected.

2024-05-27 22:30:55,478 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 22:30:55,483 INFO The channel nacos1:7848 has successfully established.

2024-05-27 22:30:55,440 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 22:30:55,490 INFO The channel nacos2:7848 has successfully established.

2024-05-27 22:30:55,492 INFO Peer nacos2:7848 is connected.

2024-05-27 22:30:55,443 INFO Peer nacos2:7848 is connected.

2024-05-27 22:30:55,484 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 22:30:55,489 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 22:30:55,489 INFO Peer nacos1:7848 is connected.

2024-05-27 22:30:55,489 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 22:30:55,500 INFO The channel nacos1:7848 has successfully established.

2024-05-27 22:30:55,497 INFO The channel nacos1:7848 has successfully established.

2024-05-27 22:30:55,498 INFO The channel nacos2:7848 has successfully established.

2024-05-27 22:30:55,500 INFO Peer nacos1:7848 is connected.

2024-05-27 22:30:55,502 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 22:30:55,505 INFO The channel nacos1:7848 has successfully established.

2024-05-27 22:30:55,502 INFO Peer nacos1:7848 is connected.

2024-05-27 22:30:55,503 INFO Peer nacos2:7848 is connected.

2024-05-27 22:30:55,507 INFO Peer nacos1:7848 is connected.

2024-05-27 22:30:55,509 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=329, granted=true.

2024-05-27 22:30:55,514 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=329.

2024-05-27 22:30:55,512 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=333, granted=false.

2024-05-27 22:30:55,516 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=330, currTerm=329, because the leader nacos2:7848's lease is still valid.

2024-05-27 22:30:55,518 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 22:30:55,520 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=336, granted=true.

2024-05-27 22:30:55,526 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=336.

2024-05-27 22:30:55,525 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=329, granted=false.

2024-05-27 22:30:55,530 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 22:30:55,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=330, votedFor=nacos3:7848, cost time=10 ms

2024-05-27 22:30:55,547 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=333, granted=true.

2024-05-27 22:30:55,558 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=333.

2024-05-27 22:30:55,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=337, votedFor=nacos3:7848, cost time=26 ms

2024-05-27 22:30:55,557 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:30:55,560 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=333, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 22:30:55,561 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=334, currTerm=334, granted=true, requestLastLogId=LogId [index=317, term=333], lastLogId=LogId [index=317, term=333].

2024-05-27 22:30:55,561 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=337, currTerm=337, granted=true, requestLastLogId=LogId [index=324, term=336], lastLogId=LogId [index=324, term=336].

2024-05-27 22:30:55,563 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:30:55,574 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=330, currTerm=330, granted=true, requestLastLogId=LogId [index=318, term=329], lastLogId=LogId [index=318, term=329].

2024-05-27 22:30:55,577 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:30:55,587 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:30:55,592 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=334, votedFor=nacos3:7848, cost time=23 ms

2024-05-27 22:30:55,597 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=330, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 22:30:55,597 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=334, currTerm=334.

2024-05-27 22:30:55,598 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 22:30:55,600 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=337, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 22:30:55,607 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=329, granted=true.

2024-05-27 22:30:55,606 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 22:30:55,607 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 22:30:55,614 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 22:30:55,611 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=329.

2024-05-27 22:30:55,623 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=329, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 22:30:55,641 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 22:30:55,645 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=330, votedFor=nacos3:7848, cost time=21 ms

2024-05-27 22:30:55,646 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=330, currTerm=330.

2024-05-27 22:30:55,648 INFO onLeaderStart: term=337.

2024-05-27 22:30:55,653 INFO onLeaderStart: term=330.

2024-05-27 22:30:55,655 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 22:47:23,213 INFO Node <naming_instance_metadata/nacos3:7848> term 330 start preVote.

2024-05-27 22:47:23,869 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=337, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 22:47:23,873 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=215, type=Follower] is going to quit

2024-05-27 22:47:23,875 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=214, type=Follower] is going to quit

2024-05-27 22:47:23,869 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=330, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 22:47:23,213 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=330, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 22:47:24,133 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 22:47:23,874 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 22:47:23,874 INFO Node <naming_instance_metadata/nacos3:7848> term 330 start preVote.

2024-05-27 22:47:23,904 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,211 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=319, lastLogIncluded=0, lastLogIndex=319, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=206, type=Follower] is going to quit

2024-05-27 22:47:24,221 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=338, currTerm=337, granted=true, requestLastLogId=LogId [index=325, term=337], lastLogId=LogId [index=325, term=337].

2024-05-27 22:47:24,242 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_318.

2024-05-27 22:47:24,264 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_318.

2024-05-27 22:47:24,253 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_325.

2024-05-27 22:47:24,265 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_325.

2024-05-27 22:47:24,258 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=319, lastLogIncluded=0, lastLogIndex=319, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=205, type=Follower] is going to quit

2024-05-27 22:47:24,267 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=338, currTerm=337, granted=true, requestLastLogId=LogId [index=325, term=337], lastLogId=LogId [index=325, term=337].

2024-05-27 22:47:24,285 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=338, currTerm=337.

2024-05-27 22:47:24,300 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_324.

2024-05-27 22:47:24,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=338, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-27 22:47:24,278 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_317.

2024-05-27 22:47:24,272 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=330, granted=true.

2024-05-27 22:47:24,307 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=330.

2024-05-27 22:47:24,308 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=331, currTerm=330, granted=true, requestLastLogId=LogId [index=319, term=330], lastLogId=LogId [index=319, term=330].

2024-05-27 22:47:24,310 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,312 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=331, currTerm=330, granted=true, requestLastLogId=LogId [index=319, term=330], lastLogId=LogId [index=319, term=330].

2024-05-27 22:47:24,313 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=331, currTerm=330.

2024-05-27 22:47:24,315 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 318 to 318, cost 0 ms.

2024-05-27 22:47:24,316 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 325 to 325, cost 0 ms.

2024-05-27 22:47:24,322 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=338, votedFor=nacos1:7848, cost time=18 ms

2024-05-27 22:47:24,328 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=331, votedFor=nacos3:7848, cost time=16 ms

2024-05-27 22:47:24,329 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=330, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 22:47:24,332 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=331, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-27 22:47:24,333 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:47:24,334 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_319.

2024-05-27 22:47:24,341 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:47:24,348 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=331, votedFor=nacos1:7848, cost time=14 ms

2024-05-27 22:47:24,346 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_319.

2024-05-27 22:47:24,348 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=331, currTerm=331, granted=true, requestLastLogId=LogId [index=322, term=330], lastLogId=LogId [index=322, term=330].

2024-05-27 22:47:24,349 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=331, currTerm=331.

2024-05-27 22:47:24,349 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_322.

2024-05-27 22:47:24,352 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_322.

2024-05-27 22:47:24,353 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 22:47:24,354 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_321.

2024-05-27 22:47:24,357 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_318.

2024-05-27 22:47:24,364 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=331, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 22:47:24,365 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 22:47:24,369 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 22:47:24,368 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 322 to 322, cost 0 ms.

2024-05-27 22:47:24,368 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,370 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 319 to 319, cost 0 ms.

2024-05-27 22:47:24,371 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,377 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,371 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 22:47:24,398 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 22:47:24,403 INFO onLeaderStart: term=331.

2024-05-27 22:47:29,393 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=335, currTerm=334, granted=true, requestLastLogId=LogId [index=318, term=334], lastLogId=LogId [index=318, term=334].

2024-05-27 22:47:29,396 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=335, currTerm=334.

2024-05-27 22:47:29,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=334, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 22:47:29,402 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=335, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-27 22:47:29,407 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=335, votedFor=nacos1:7848, cost time=4 ms

2024-05-27 23:03:50,795 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=331, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:03:50,897 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-27 23:03:50,911 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=323, lastLogIncluded=0, lastLogIndex=323, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=223, type=Follower] is going to quit

2024-05-27 23:03:50,987 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=323, lastLogIncluded=0, lastLogIndex=323, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=224, type=Follower] is going to quit

2024-05-27 23:03:50,926 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:03:51,593 INFO Node <naming_persistent_service/nacos3:7848> term 338 start preVote.

2024-05-27 23:03:51,593 INFO Node <naming_service_metadata/nacos3:7848> term 331 start preVote.

2024-05-27 23:03:51,594 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=336, currTerm=335, granted=true, requestLastLogId=LogId [index=319, term=335], lastLogId=LogId [index=319, term=335].

2024-05-27 23:03:51,594 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:03:51,596 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=331, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:03:51,795 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=331, granted=false.

2024-05-27 23:03:51,821 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=339, currTerm=338, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:03:51,609 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=332, currTerm=331, granted=true, requestLastLogId=LogId [index=323, term=331], lastLogId=LogId [index=323, term=331].

2024-05-27 23:03:51,616 INFO Node <naming_persistent_service_v2/nacos3:7848> term 335 start preVote.

2024-05-27 23:03:51,616 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=335, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:03:51,912 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=332, currTerm=331, granted=true, requestLastLogId=LogId [index=323, term=331], lastLogId=LogId [index=323, term=331].

2024-05-27 23:03:51,764 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 23:03:51,912 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=336, currTerm=335.

2024-05-27 23:03:51,922 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=336, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 23:03:51,923 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=335, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:03:51,923 WARN Node <naming_persistent_service_v2/nacos3:7848> raise term 336 when get lastLogId.

2024-05-27 23:03:51,931 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=338, granted=false.

2024-05-27 23:03:51,935 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=338, granted=true.

2024-05-27 23:03:51,941 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=338.

2024-05-27 23:03:51,943 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=331, granted=true.

2024-05-27 23:03:51,958 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=331.

2024-05-27 23:03:51,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=336, votedFor=nacos2:7848, cost time=10 ms

2024-05-27 23:03:51,956 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=332, currTerm=331.

2024-05-27 23:03:51,961 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:03:51,963 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=331, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:03:52,005 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=339, votedFor=nacos3:7848, cost time=47 ms

2024-05-27 23:03:52,006 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=339, currTerm=339.

2024-05-27 23:03:52,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=332, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 23:03:52,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=332, votedFor=nacos3:7848, cost time=46 ms

2024-05-27 23:03:52,010 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=332, currTerm=332.

2024-05-27 23:03:52,012 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:03:52,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=332, votedFor=nacos1:7848, cost time=20 ms

2024-05-27 23:03:52,033 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:03:52,034 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:03:52,039 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=332, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:03:52,044 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:03:52,049 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:03:52,051 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:03:52,055 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=339, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:03:52,059 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:03:52,060 INFO onLeaderStart: term=332.

2024-05-27 23:03:52,061 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:03:52,079 INFO onLeaderStart: term=339.

2024-05-27 23:04:25,140 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497230003s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-27 23:04:25,006 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499841229s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-27 23:20:20,089 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=332, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:20:20,267 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:20:20,267 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=321, lastLogIncluded=0, lastLogIndex=321, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=208, type=Follower] is going to quit

2024-05-27 23:20:20,089 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=339, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:20:20,092 INFO Node <naming_persistent_service_v2/nacos3:7848> term 336 start preVote.

2024-05-27 23:20:20,092 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:20:20,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=332, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:20:20,113 INFO Node <naming_instance_metadata/nacos3:7848> term 332 start preVote.

2024-05-27 23:20:20,090 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-27 23:20:20,474 INFO Node <naming_persistent_service_v2/nacos3:7848> term 336 start preVote.

2024-05-27 23:20:20,366 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:20:20,366 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=327, lastLogIncluded=0, lastLogIndex=327, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=217, type=Follower] is going to quit

2024-05-27 23:20:20,528 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=327, lastLogIncluded=0, lastLogIndex=327, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=216, type=Follower] is going to quit

2024-05-27 23:20:20,431 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=321, lastLogIncluded=0, lastLogIndex=321, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=207, type=Follower] is going to quit

2024-05-27 23:20:20,551 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=340, currTerm=339, granted=true, requestLastLogId=LogId [index=327, term=339], lastLogId=LogId [index=327, term=339].

2024-05-27 23:20:20,559 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-27 23:20:20,552 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 23:20:20,582 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_321.

2024-05-27 23:20:20,585 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_321.

2024-05-27 23:20:20,588 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=340, currTerm=339.

2024-05-27 23:20:20,553 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-27 23:20:20,556 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_324.

2024-05-27 23:20:20,558 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=333, currTerm=332, granted=true, requestLastLogId=LogId [index=324, term=332], lastLogId=LogId [index=324, term=332].

2024-05-27 23:20:20,584 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_327.

2024-05-27 23:20:20,593 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_327.

2024-05-27 23:20:20,601 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=340, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 23:20:20,584 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:20:20,626 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=332, granted=true.

2024-05-27 23:20:20,627 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=332.

2024-05-27 23:20:20,587 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_320.

2024-05-27 23:20:20,634 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_320.

2024-05-27 23:20:20,590 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_324.

2024-05-27 23:20:20,593 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_319.

2024-05-27 23:20:20,639 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=340, votedFor=nacos2:7848, cost time=15 ms

2024-05-27 23:20:20,596 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=337, currTerm=336, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:20:20,643 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 319 to 320, cost 0 ms.

2024-05-27 23:20:20,619 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 23:20:20,620 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_325.

2024-05-27 23:20:20,621 INFO The channel nacos1:7848 is in state: READY.

2024-05-27 23:20:20,629 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=332, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:20:20,642 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_318.

2024-05-27 23:20:20,642 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_322.

2024-05-27 23:20:20,644 INFO The channel nacos2:7848 has successfully established.

2024-05-27 23:20:20,644 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=333, votedFor=nacos3:7848, cost time=15 ms

2024-05-27 23:20:20,645 INFO The channel nacos1:7848 has successfully established.

2024-05-27 23:20:20,653 INFO Peer nacos1:7848 is connected.

2024-05-27 23:20:20,646 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 325 to 326, cost 0 ms.

2024-05-27 23:20:20,658 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=336, granted=false.

2024-05-27 23:20:20,651 INFO Peer nacos2:7848 is connected.

2024-05-27 23:20:20,654 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 318 to 319, cost 0 ms.

2024-05-27 23:20:20,654 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 322 to 323, cost 0 ms.

2024-05-27 23:20:20,654 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=340, currTerm=340, granted=true, requestLastLogId=LogId [index=327, term=339], lastLogId=LogId [index=327, term=339].

2024-05-27 23:20:20,679 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:20:20,661 INFO The channel nacos2:7848 is in state: READY.

2024-05-27 23:20:20,661 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:20:20,662 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=333, currTerm=333.

2024-05-27 23:20:20,682 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=333, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:20:20,683 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:20:20,669 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=336, granted=false.

2024-05-27 23:20:20,681 INFO The channel nacos2:7848 has successfully established.

2024-05-27 23:20:20,683 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=333, currTerm=332, granted=true, requestLastLogId=LogId [index=321, term=332], lastLogId=LogId [index=321, term=332].

2024-05-27 23:20:20,695 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=337, currTerm=336.

2024-05-27 23:20:20,698 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:20:20,695 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:20:20,698 INFO Peer nacos2:7848 is connected.

2024-05-27 23:20:20,697 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:20:20,705 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=333, currTerm=332.

2024-05-27 23:20:20,706 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=337, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 23:20:20,709 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-27 23:20:20,711 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:20:20,715 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=333, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-27 23:20:20,715 INFO onLeaderStart: term=333.

2024-05-27 23:20:20,715 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=337, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 23:20:20,719 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=336, currTerm=337.

2024-05-27 23:20:20,720 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=336, currTerm=337.

2024-05-27 23:20:20,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=333, votedFor=nacos2:7848, cost time=12 ms

2024-05-27 23:20:20,729 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:20:25,106 INFO Connection disconnected: /172.25.0.4:50590

2024-05-27 23:20:49,453 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499792008s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-27 23:20:58,558 INFO Node <naming_persistent_service/nacos3:7848> term 340 start preVote.

2024-05-27 23:20:58,563 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=340, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:20:58,815 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=340, granted=true.

2024-05-27 23:20:58,835 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=340.

2024-05-27 23:20:58,854 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:20:59,078 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=341, votedFor=nacos3:7848, cost time=165 ms

2024-05-27 23:20:59,340 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=334, currTerm=333, granted=true, requestLastLogId=LogId [index=322, term=333], lastLogId=LogId [index=322, term=333].

2024-05-27 23:20:59,498 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=334, currTerm=333, granted=true, requestLastLogId=LogId [index=322, term=333], lastLogId=LogId [index=322, term=333].

2024-05-27 23:20:59,731 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=341, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:20:59,762 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=334, currTerm=333.

2024-05-27 23:20:59,804 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:20:59,852 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=333, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:20:59,946 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:21:00,147 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=334, votedFor=0.0.0.0:0, cost time=287 ms

2024-05-27 23:21:00,738 INFO onLeaderStart: term=341.

2024-05-27 23:21:00,932 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=334, votedFor=nacos1:7848, cost time=244 ms

2024-05-27 23:21:01,093 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:36:49,340 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=341, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:36:49,981 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=334, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:36:49,969 INFO Node <naming_service_metadata/nacos3:7848> term 334 start preVote.

2024-05-27 23:36:50,087 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:36:50,087 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=329, lastLogIncluded=0, lastLogIndex=329, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=219, type=Follower] is going to quit

2024-05-27 23:36:50,104 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=329, lastLogIncluded=0, lastLogIndex=329, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=218, type=Follower] is going to quit

2024-05-27 23:36:50,191 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=334, currTerm=333, because the leader nacos3:7848's lease is still valid.

2024-05-27 23:36:50,290 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=329, term=341], lastLogId=LogId [index=329, term=341].

2024-05-27 23:36:50,299 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=338, currTerm=337, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:36:50,292 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=334, granted=true.

2024-05-27 23:36:50,300 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=329, term=341], lastLogId=LogId [index=329, term=341].

2024-05-27 23:36:50,305 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=334.

2024-05-27 23:36:50,309 WARN Node <naming_service_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:36:50,307 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:36:50,309 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=334, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:36:50,310 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:36:50,313 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=329, term=341], lastLogId=LogId [index=329, term=341].

2024-05-27 23:36:50,315 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=335, currTerm=335.

2024-05-27 23:36:50,325 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=329, term=341], lastLogId=LogId [index=329, term=341].

2024-05-27 23:36:50,327 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:36:50,340 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=338, currTerm=337.

2024-05-27 23:36:50,341 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=337, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:36:50,344 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=335, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 23:36:50,345 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=335, currTerm=335, granted=true, requestLastLogId=LogId [index=323, term=334], lastLogId=LogId [index=323, term=334].

2024-05-27 23:36:50,349 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=338, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-27 23:36:50,360 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=342, currTerm=341.

2024-05-27 23:36:50,368 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=338, votedFor=nacos2:7848, cost time=15 ms

2024-05-27 23:36:50,432 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=342, votedFor=0.0.0.0:0, cost time=71 ms

2024-05-27 23:36:50,435 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=342, currTerm=342.

2024-05-27 23:36:50,445 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=342, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 23:36:50,449 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:36:50,459 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:37:24,352 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.831852996s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-27 23:37:28,948 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=343, currTerm=342, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:37:29,102 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=343, currTerm=342.

2024-05-27 23:37:29,160 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=342, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:37:29,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=343, votedFor=0.0.0.0:0, cost time=186 ms

2024-05-27 23:37:29,648 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=343, votedFor=nacos2:7848, cost time=242 ms

2024-05-27 23:37:29,724 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=336, currTerm=335, granted=true, requestLastLogId=LogId [index=324, term=335], lastLogId=LogId [index=324, term=335].

2024-05-27 23:37:29,963 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=336, currTerm=335.

2024-05-27 23:37:30,175 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=335, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:37:30,502 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=336, votedFor=0.0.0.0:0, cost time=349 ms

2024-05-27 23:37:30,816 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=336, currTerm=336, granted=true, requestLastLogId=LogId [index=324, term=335], lastLogId=LogId [index=324, term=335].

2024-05-27 23:37:33,114 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=336, votedFor=nacos2:7848, cost time=2032 ms

2024-05-27 23:38:04,555 WARN Node <naming_instance_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=333, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:38:04,629 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:38:04,936 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=228, type=Follower] is going to quit

2024-05-27 23:38:04,582 INFO Node <naming_service_metadata/nacos3:7848> term 336 start preVote.

2024-05-27 23:38:04,892 INFO Node <naming_persistent_service_v2/nacos3:7848> term 338 start preVote.

2024-05-27 23:38:04,892 INFO Node <naming_persistent_service/nacos3:7848> term 343 start preVote.

2024-05-27 23:38:04,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:38:04,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:38:04,949 INFO Node <naming_persistent_service_v2/nacos3:7848> term 338 start preVote.

2024-05-27 23:38:05,002 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=343, granted=false.

2024-05-27 23:38:04,935 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:38:04,939 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=227, type=Follower] is going to quit

2024-05-27 23:38:04,993 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=336, granted=false.

2024-05-27 23:38:05,012 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=339, currTerm=338, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:38:05,047 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=337, currTerm=336, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:38:05,066 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=334, currTerm=333, granted=true, requestLastLogId=LogId [index=325, term=333], lastLogId=LogId [index=325, term=333].

2024-05-27 23:38:05,068 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=334, currTerm=333, granted=true, requestLastLogId=LogId [index=325, term=333], lastLogId=LogId [index=325, term=333].

2024-05-27 23:38:05,070 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=344, currTerm=343, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:38:05,104 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=338, granted=false.

2024-05-27 23:38:05,104 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:38:05,104 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:38:05,104 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:38:05,173 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=334, currTerm=333.

2024-05-27 23:38:05,139 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=336, granted=true.

2024-05-27 23:38:05,182 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=336.

2024-05-27 23:38:05,146 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=338, granted=false.

2024-05-27 23:38:05,193 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=344, currTerm=343.

2024-05-27 23:38:05,213 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=334, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-27 23:38:05,210 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:38:05,214 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=343, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:38:05,214 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=334, currTerm=334.

2024-05-27 23:38:05,218 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=338, granted=true.

2024-05-27 23:38:05,219 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=338.

2024-05-27 23:38:05,219 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:38:05,223 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=337, votedFor=nacos3:7848, cost time=13 ms

2024-05-27 23:38:05,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=344, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-27 23:38:05,227 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=334, votedFor=nacos1:7848, cost time=11 ms

2024-05-27 23:38:05,228 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=337, currTerm=337.

2024-05-27 23:38:05,229 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=339, votedFor=nacos3:7848, cost time=9 ms

2024-05-27 23:38:05,229 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:38:05,232 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=339, currTerm=339.

2024-05-27 23:38:05,235 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=344, votedFor=nacos1:7848, cost time=8 ms

2024-05-27 23:38:05,236 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=343, currTerm=344.

2024-05-27 23:38:05,236 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:38:05,236 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=337, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:38:05,241 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:38:05,242 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:38:05,245 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=339, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:38:05,248 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:38:05,254 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:38:05,253 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:38:05,262 INFO onLeaderStart: term=337.

2024-05-27 23:38:05,266 INFO onLeaderStart: term=339.

2024-05-27 23:38:57,370 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.498480105s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_service_metadata

2024-05-27 23:38:59,143 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499783906s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 23:39:00,446 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.495760425s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 23:39:06,627 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=335, currTerm=334, granted=true, requestLastLogId=LogId [index=326, term=334], lastLogId=LogId [index=326, term=334].

2024-05-27 23:39:06,660 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=335, currTerm=334.

2024-05-27 23:39:06,951 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=334, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:39:06,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=335, votedFor=0.0.0.0:0, cost time=316 ms

2024-05-27 23:39:06,998 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=335, votedFor=nacos1:7848, cost time=9 ms

2024-05-27 23:39:56,251 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499780495s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_service_metadata

2024-05-27 23:39:56,641 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.492578195s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 23:41:58,905 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499814488s. [closed=[], committed=[remote_addr=nacos1/172.25.0.5:7848]]], groupId=naming_persistent_service_v2

2024-05-27 23:43:51,636 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499738739s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-27 23:43:52,067 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499803014s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 23:44:06,166 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 0.331017364s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_service_metadata

2024-05-27 23:44:57,968 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499773811s. [closed=[], open=[[remote_addr=nacos1/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-27 23:45:44,573 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=337, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:45:44,611 INFO Node <naming_persistent_service/nacos3:7848> term 344 start preVote.

2024-05-27 23:45:44,612 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=344, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:45:44,589 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=335, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:45:44,574 INFO Node <naming_instance_metadata/nacos3:7848> term 335 start preVote.

2024-05-27 23:45:44,573 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=339, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:45:45,352 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=323, lastLogIncluded=0, lastLogIndex=323, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=177, type=Follower] is going to quit

2024-05-27 23:45:45,295 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=326, lastLogIncluded=0, lastLogIndex=326, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=210, type=Follower] is going to quit

2024-05-27 23:45:45,391 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=323, lastLogIncluded=0, lastLogIndex=323, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=176, type=Follower] is going to quit

2024-05-27 23:45:45,295 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:45:45,318 INFO Node <naming_persistent_service/nacos3:7848> term 344 start preVote.

2024-05-27 23:45:45,463 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=340, currTerm=339, granted=true, requestLastLogId=LogId [index=323, term=339], lastLogId=LogId [index=323, term=339].

2024-05-27 23:45:45,472 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=345, currTerm=344, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:45:45,349 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=336, currTerm=335, granted=true, requestLastLogId=LogId [index=327, term=335], lastLogId=LogId [index=327, term=335].

2024-05-27 23:45:45,353 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:45:45,451 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=326, lastLogIncluded=0, lastLogIndex=326, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=211, type=Follower] is going to quit

2024-05-27 23:45:45,495 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=340, currTerm=339.

2024-05-27 23:45:45,538 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=344, granted=false.

2024-05-27 23:45:45,574 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=344, granted=false.

2024-05-27 23:45:45,569 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=336, currTerm=335.

2024-05-27 23:45:45,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=335, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:45:45,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=336, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-27 23:45:45,615 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=340, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-27 23:45:45,629 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=336, votedFor=nacos2:7848, cost time=18 ms

2024-05-27 23:45:45,621 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=338, currTerm=337, granted=true, requestLastLogId=LogId [index=326, term=337], lastLogId=LogId [index=326, term=337].

2024-05-27 23:45:45,635 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=335, currTerm=336.

2024-05-27 23:45:45,641 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=335, currTerm=336.

2024-05-27 23:45:45,650 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos1:7848, term=344, granted=true.

2024-05-27 23:45:45,651 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=344.

2024-05-27 23:45:45,653 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=344, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:45:45,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=340, votedFor=nacos2:7848, cost time=35 ms

2024-05-27 23:45:45,675 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=345, votedFor=nacos3:7848, cost time=23 ms

2024-05-27 23:45:45,680 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:45:45,688 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=338, currTerm=337.

2024-05-27 23:45:45,676 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=340, currTerm=340, granted=true, requestLastLogId=LogId [index=323, term=339], lastLogId=LogId [index=323, term=339].

2024-05-27 23:45:45,709 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=338, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-27 23:45:45,710 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:45:45,719 INFO Node <naming_persistent_service/nacos3:7848> become leader of group, term=345, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:45:45,720 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:45:45,723 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:45:45,724 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=338, votedFor=nacos2:7848, cost time=13 ms

2024-05-27 23:45:45,726 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:45:45,741 INFO onLeaderStart: term=345.

2024-05-27 23:45:45,743 WARN Node <naming_persistent_service/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:46:53,885 WARN Node <naming_persistent_service/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=345, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:46:54,650 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=333, lastLogIncluded=0, lastLogIndex=333, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=220, type=Follower] is going to quit

2024-05-27 23:46:53,891 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=340, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:46:53,891 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:46:53,890 INFO Node <naming_persistent_service_v2/nacos3:7848> term 340 start preVote.

2024-05-27 23:46:54,684 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=341, currTerm=340, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:46:53,888 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:46:53,887 INFO Node <naming_service_metadata/nacos3:7848> term 338 start preVote.

2024-05-27 23:46:53,888 INFO Node <naming_instance_metadata/nacos3:7848> term 336 start preVote.

2024-05-27 23:46:54,651 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:46:54,678 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=333, lastLogIncluded=0, lastLogIndex=333, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=221, type=Follower] is going to quit

2024-05-27 23:46:54,690 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=340, granted=true.

2024-05-27 23:46:54,697 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=340.

2024-05-27 23:46:54,701 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=337, currTerm=336, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:46:54,701 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=337, currTerm=336.

2024-05-27 23:46:54,701 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteRequest from nacos2:7848, term=346, currTerm=345, granted=true, requestLastLogId=LogId [index=333, term=345], lastLogId=LogId [index=333, term=345].

2024-05-27 23:46:54,703 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=336, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:46:54,705 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=338, granted=false.

2024-05-27 23:46:54,704 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=340, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:46:54,710 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=341, votedFor=nacos3:7848, cost time=11 ms

2024-05-27 23:46:54,710 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=341, currTerm=341.

2024-05-27 23:46:54,711 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:46:54,710 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:46:54,711 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=346, currTerm=345.

2024-05-27 23:46:54,712 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=338, granted=true.

2024-05-27 23:46:54,720 INFO Node <naming_service_metadata/nacos3:7848> start vote and grant vote self, term=338.

2024-05-27 23:46:54,713 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=337, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-27 23:46:54,713 WARN Node <naming_persistent_service_v2/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:46:54,727 WARN Node <naming_instance_metadata/nacos3:7848> raise term 337 when get lastLogId.

2024-05-27 23:46:54,732 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=346, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 23:46:54,752 INFO Node <naming_persistent_service_v2/nacos3:7848> become leader of group, term=341, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:46:54,768 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:46:54,777 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:46:54,802 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=339, votedFor=nacos3:7848, cost time=71 ms

2024-05-27 23:46:54,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=337, votedFor=nacos1:7848, cost time=74 ms

2024-05-27 23:46:54,818 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=346, votedFor=nacos2:7848, cost time=51 ms

2024-05-27 23:46:54,820 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:46:54,836 INFO onLeaderStart: term=341.

2024-05-27 23:46:54,875 INFO Node <naming_service_metadata/nacos3:7848> become leader of group, term=339, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:46:54,876 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:46:54,877 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:46:54,879 WARN Node <naming_service_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:46:54,906 INFO onLeaderStart: term=339.

2024-05-27 23:48:07,304 WARN Node <naming_service_metadata/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=339, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:48:08,065 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=328, lastLogIncluded=0, lastLogIndex=328, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=213, type=Follower] is going to quit

2024-05-27 23:48:08,069 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=328, lastLogIncluded=0, lastLogIndex=328, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=212, type=Follower] is going to quit

2024-05-27 23:48:07,327 WARN Node <naming_persistent_service_v2/nacos3:7848> steps down when alive nodes don't satisfy quorum, term=341, deadNodes=nacos1:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-27 23:48:07,313 INFO Node <naming_persistent_service/nacos3:7848> term 346 start preVote.

2024-05-27 23:48:07,317 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=337, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:48:07,314 INFO Node <naming_instance_metadata/nacos3:7848> term 337 start preVote.

2024-05-27 23:48:07,316 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:48:08,065 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:48:08,071 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=340, currTerm=339, granted=true, requestLastLogId=LogId [index=328, term=339], lastLogId=LogId [index=328, term=339].

2024-05-27 23:48:08,073 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=180, type=Follower] is going to quit

2024-05-27 23:48:08,080 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=325, lastLogIncluded=0, lastLogIndex=325, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=181, type=Follower] is going to quit

2024-05-27 23:48:08,073 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-27 23:48:08,075 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=347, currTerm=346, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:48:08,077 INFO Node <naming_instance_metadata/nacos3:7848> term 337 start preVote.

2024-05-27 23:48:08,094 INFO Node <naming_persistent_service/nacos3:7848> received PreVoteResponse from nacos2:7848, term=346, granted=true.

2024-05-27 23:48:08,081 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=340, currTerm=339, granted=true, requestLastLogId=LogId [index=328, term=339], lastLogId=LogId [index=328, term=339].

2024-05-27 23:48:08,085 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos2:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=325, term=341], lastLogId=LogId [index=325, term=341].

2024-05-27 23:48:08,094 INFO Node <naming_instance_metadata/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=338, currTerm=337, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:48:08,096 INFO Node <naming_persistent_service/nacos3:7848> start vote and grant vote self, term=346.

2024-05-27 23:48:08,098 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,104 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=325, term=341], lastLogId=LogId [index=325, term=341].

2024-05-27 23:48:08,112 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,113 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=338, currTerm=337.

2024-05-27 23:48:08,126 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=346, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:48:08,130 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=340, currTerm=339.

2024-05-27 23:48:08,155 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteRequest from nacos1:7848, term=342, currTerm=341, granted=true, requestLastLogId=LogId [index=325, term=341], lastLogId=LogId [index=325, term=341].

2024-05-27 23:48:08,161 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=337, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:48:08,175 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,175 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,178 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=347, votedFor=nacos3:7848, cost time=64 ms

2024-05-27 23:48:08,176 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,176 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=342, currTerm=341.

2024-05-27 23:48:08,179 WARN Node <naming_persistent_service/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:48:08,185 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=347, currTerm=347.

2024-05-27 23:48:08,186 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=340, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 23:48:08,188 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=340, currTerm=340.

2024-05-27 23:48:08,186 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=338, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-27 23:48:08,195 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=337, currTerm=338.

2024-05-27 23:48:08,195 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=337, currTerm=338.

2024-05-27 23:48:08,196 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, term=337, currTerm=338.

2024-05-27 23:48:08,207 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=342, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-27 23:48:08,212 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=342, currTerm=342.

2024-05-27 23:48:08,233 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=340, votedFor=nacos2:7848, cost time=41 ms

2024-05-27 23:48:08,236 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,237 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=338, votedFor=nacos2:7848, cost time=35 ms

2024-05-27 23:48:08,240 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, term=337, currTerm=338.

2024-05-27 23:48:08,242 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=342, votedFor=nacos1:7848, cost time=26 ms

2024-05-27 23:48:08,249 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:48:08,257 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos3:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-27 23:50:20,443 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_330.

2024-05-27 23:50:20,444 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_330.

2024-05-27 23:50:20,447 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_324.

2024-05-27 23:50:20,450 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 323 to 325, cost 0 ms.

2024-05-27 23:50:20,486 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_326.

2024-05-27 23:50:20,487 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_326.

2024-05-27 23:50:20,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_320.

2024-05-27 23:50:20,490 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 319 to 321, cost 0 ms.

2024-05-27 23:50:20,506 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_329.

2024-05-27 23:50:20,506 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_335.

2024-05-27 23:50:20,506 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_329.

2024-05-27 23:50:20,507 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_335.

2024-05-27 23:50:20,509 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_321.

2024-05-27 23:50:20,511 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_327.

2024-05-27 23:50:20,512 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 320 to 322, cost 0 ms.

2024-05-27 23:50:20,514 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 326 to 328, cost 0 ms.

2024-05-27 23:52:29,235 INFO Node <naming_instance_metadata/nacos3:7848> term 338 start preVote.

2024-05-27 23:52:29,235 INFO Node <naming_persistent_service_v2/nacos3:7848> term 342 start preVote.

2024-05-27 23:52:29,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=338, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-27 23:52:29,236 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=342, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-27 23:52:29,499 INFO Node <naming_instance_metadata/nacos3:7848> term 338 start preVote.

2024-05-27 23:52:29,520 INFO Node <naming_persistent_service_v2/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=343, currTerm=342, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:52:29,537 INFO Node <naming_persistent_service/nacos3:7848> ignore PreVoteRequest from nacos2:7848, term=348, currTerm=347, because the leader nacos1:7848's lease is still valid.

2024-05-27 23:52:29,539 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=341, currTerm=340, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:52:29,540 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=341, currTerm=340, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:52:29,541 INFO Node <naming_service_metadata/nacos3:7848> ignore PreVoteRequest from nacos1:7848, term=341, currTerm=340, because the leader nacos2:7848's lease is still valid.

2024-05-27 23:52:29,542 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos2:7848, term=342, granted=false.

2024-05-27 23:52:29,633 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos1:7848, term=338, granted=false.

2024-05-27 23:52:29,662 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=339, currTerm=338, granted=true, requestLastLogId=LogId [index=330, term=338], lastLogId=LogId [index=330, term=338].

2024-05-27 23:52:29,711 INFO Node <naming_instance_metadata/nacos3:7848> received PreVoteResponse from nacos2:7848, term=338, granted=true.

2024-05-27 23:52:29,712 INFO Node <naming_instance_metadata/nacos3:7848> start vote and grant vote self, term=338.

2024-05-27 23:52:29,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=339, votedFor=nacos3:7848, cost time=16 ms

2024-05-27 23:52:29,752 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:52:29,756 WARN Node <naming_instance_metadata/nacos3:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-27 23:52:29,762 INFO Node <naming_instance_metadata/nacos3:7848> become leader of group, term=339, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-27 23:52:29,763 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-27 23:52:29,764 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-27 23:52:29,769 INFO Node <naming_instance_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=339, currTerm=339.

2024-05-27 23:52:29,783 INFO onLeaderStart: term=339.

2024-05-27 23:52:29,786 WARN Node <naming_instance_metadata/nacos3:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-27 23:52:29,791 INFO Node <naming_persistent_service_v2/nacos3:7848> received PreVoteResponse from nacos1:7848, term=342, granted=true.

2024-05-27 23:52:29,792 INFO Node <naming_persistent_service_v2/nacos3:7848> start vote and grant vote self, term=342.

2024-05-27 23:52:29,797 INFO Node <naming_persistent_service/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=348, currTerm=347.

2024-05-27 23:52:29,798 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=342, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-27 23:52:29,799 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=347, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:52:29,810 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=348, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-27 23:52:29,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=343, votedFor=nacos3:7848, cost time=17 ms

2024-05-27 23:52:29,814 INFO Node <naming_persistent_service_v2/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=343, currTerm=343.

2024-05-27 23:52:29,817 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=348, votedFor=nacos2:7848, cost time=7 ms

2024-05-27 23:53:10,689 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=341, currTerm=340, granted=true, requestLastLogId=LogId [index=329, term=340], lastLogId=LogId [index=329, term=340].

2024-05-27 23:53:10,961 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos2:7848, term=341, currTerm=340, granted=true, requestLastLogId=LogId [index=329, term=340], lastLogId=LogId [index=329, term=340].

2024-05-27 23:53:11,006 INFO Node <naming_service_metadata/nacos3:7848> received PreVoteRequest from nacos1:7848, term=341, currTerm=340, granted=true, requestLastLogId=LogId [index=329, term=340], lastLogId=LogId [index=329, term=340].

2024-05-27 23:53:11,570 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos2:7848, term=341, currTerm=340.

2024-05-27 23:53:11,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=340, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-27 23:53:12,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=341, votedFor=0.0.0.0:0, cost time=384 ms

2024-05-27 23:53:13,257 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=341, votedFor=nacos2:7848, cost time=995 ms

2024-05-27 23:53:13,587 INFO Node <naming_service_metadata/nacos3:7848> received RequestVoteRequest from nacos1:7848, term=341, currTerm=341.

