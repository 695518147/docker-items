2024-05-25 00:50:29,769 INFO Node <naming_persistent_service_v2/nacos1:7848> term 141 start preVote.

2024-05-25 00:50:30,537 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 00:50:30,535 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 00:50:31,078 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499750338s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 00:50:30,539 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 00:50:30,921 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 00:50:30,922 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 00:50:30,928 INFO Node <naming_service_metadata/nacos1:7848> term 139 start preVote.

2024-05-25 00:50:30,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 00:50:30,978 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-25 00:50:31,091 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-25 00:50:31,024 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=140, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 00:50:31,097 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=131, lastLogIncluded=0, lastLogIndex=131, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=90, type=Follower] is going to quit

2024-05-25 00:50:31,099 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 00:50:31,105 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 00:50:31,026 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_128.

2024-05-25 00:50:31,139 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_128.

2024-05-25 00:50:31,064 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-25 00:50:31,079 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 00:50:31,143 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_127.

2024-05-25 00:50:31,082 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 00:50:31,097 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 00:50:31,134 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_130.

2024-05-25 00:50:31,141 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-25 00:50:31,148 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=131, lastLogIncluded=0, lastLogIndex=131, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=89, type=Follower] is going to quit

2024-05-25 00:50:31,149 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_130.

2024-05-25 00:50:31,155 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_130.

2024-05-25 00:50:31,150 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 00:50:31,154 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=140, currTerm=139, granted=true, requestLastLogId=LogId [index=131, term=139], lastLogId=LogId [index=131, term=139].

2024-05-25 00:50:31,167 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 130 to 131, cost 6 ms.

2024-05-25 00:50:31,174 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 00:50:31,175 INFO The channel nacos2:7848 has successfully established.

2024-05-25 00:50:31,177 INFO Peer nacos2:7848 is connected.

2024-05-25 00:50:31,179 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 00:50:31,180 INFO The channel nacos2:7848 has successfully established.

2024-05-25 00:50:31,154 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=131, term=140], lastLogId=LogId [index=131, term=140].

2024-05-25 00:50:31,155 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 127 to 128, cost 2 ms.

2024-05-25 00:50:31,186 INFO Peer nacos2:7848 is connected.

2024-05-25 00:50:31,157 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_130.

2024-05-25 00:50:31,159 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=142, currTerm=141, granted=true, requestLastLogId=LogId [index=130, term=141], lastLogId=LogId [index=130, term=141].

2024-05-25 00:50:31,159 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 00:50:31,164 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_129.

2024-05-25 00:50:31,203 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 130 to 131, cost 1 ms.

2024-05-25 00:50:31,228 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=136, currTerm=135, because the leader nacos3:7848's lease is still valid.

2024-05-25 00:50:31,228 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=141, granted=false.

2024-05-25 00:50:31,237 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 129 to 130, cost 0 ms.

2024-05-25 00:50:31,259 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 00:50:31,261 INFO The channel nacos3:7848 has successfully established.

2024-05-25 00:50:31,260 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=131, term=140], lastLogId=LogId [index=131, term=140].

2024-05-25 00:50:31,268 INFO Peer nacos3:7848 is connected.

2024-05-25 00:50:31,270 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=140, currTerm=139.

2024-05-25 00:50:31,278 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 00:50:31,289 INFO The channel nacos3:7848 has successfully established.

2024-05-25 00:50:31,290 INFO Peer nacos3:7848 is connected.

2024-05-25 00:50:31,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=140, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-25 00:50:31,295 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=139, currTerm=140.

2024-05-25 00:50:31,296 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=141, currTerm=140.

2024-05-25 00:50:31,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=141, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 00:50:31,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=140, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 00:50:31,305 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=142, currTerm=141.

2024-05-25 00:50:31,309 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=141, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 00:50:31,311 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=142, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 00:50:31,320 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=142, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 00:50:31,321 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=139, currTerm=140.

2024-05-25 00:50:31,323 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=141, currTerm=142.

2024-05-25 00:50:31,337 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 00:50:31,339 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 00:50:31,340 INFO The channel nacos1:7848 has successfully established.

2024-05-25 00:50:31,342 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 00:50:31,346 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=141, currTerm=142.

2024-05-25 00:50:31,350 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 00:50:31,372 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 00:50:31,375 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=141, currTerm=141.

2024-05-25 00:50:31,381 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=136, currTerm=135.

2024-05-25 00:50:31,377 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=139, currTerm=140.

2024-05-25 00:50:31,379 INFO The channel nacos2:7848 has successfully established.

2024-05-25 00:50:31,381 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=135, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 00:50:31,387 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=136, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 00:50:31,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=136, votedFor=nacos2:7848, cost time=4 ms

2024-05-25 00:50:31,408 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 00:50:35,531 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 00:50:35,532 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 00:50:35,532 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 00:50:35,541 INFO Connection disconnected: /172.25.0.4:51852

2024-05-25 00:50:36,030 INFO Connection disconnected: /172.25.0.4:51866

2024-05-25 00:50:36,039 INFO Connection disconnected: /172.25.0.3:56166

2024-05-25 00:50:36,081 INFO Connection disconnected: /172.25.0.5:53332

2024-05-25 00:50:36,082 INFO Connection disconnected: /172.25.0.4:40212

2024-05-25 00:50:36,252 INFO Connection disconnected: /172.25.0.3:56148

2024-05-25 01:24:54,438 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 01:24:54,739 INFO Node <naming_persistent_service_v2/nacos1:7848> term 142 start preVote.

2024-05-25 01:24:54,756 INFO Node <naming_service_metadata/nacos1:7848> term 140 start preVote.

2024-05-25 01:24:54,764 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 01:24:54,782 INFO Node <naming_instance_metadata/nacos1:7848> term 136 start preVote.

2024-05-25 01:24:54,460 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 01:24:54,441 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 01:24:54,460 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 01:24:54,847 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 01:24:54,756 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=140, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 01:24:54,760 INFO Node <naming_persistent_service/nacos1:7848> term 141 start preVote.

2024-05-25 01:24:54,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 01:24:54,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 01:24:54,911 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 01:24:54,812 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_129.

2024-05-25 01:24:54,854 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=132, term=140], lastLogId=LogId [index=132, term=140].

2024-05-25 01:24:54,884 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 01:24:55,020 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_132.

2024-05-25 01:24:55,027 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_132.

2024-05-25 01:24:54,997 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 01:24:54,998 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_129.

2024-05-25 01:24:55,012 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_131.

2024-05-25 01:24:55,036 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_131.

2024-05-25 01:24:55,041 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_128.

2024-05-25 01:24:55,022 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 01:24:55,023 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 01:24:55,048 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-25 01:24:55,061 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-25 01:24:55,023 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 01:24:55,037 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-25 01:24:55,086 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-25 01:24:55,048 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_130.

2024-05-25 01:24:55,087 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 128 to 129, cost 0 ms.

2024-05-25 01:24:55,109 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 131 to 132, cost 0 ms.

2024-05-25 01:24:55,113 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 01:24:55,114 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 01:24:55,120 INFO The channel nacos2:7848 has successfully established.

2024-05-25 01:24:55,128 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 131 to 132, cost 8 ms.

2024-05-25 01:24:55,114 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 01:24:55,135 INFO The channel nacos3:7848 has successfully established.

2024-05-25 01:24:55,129 INFO Peer nacos2:7848 is connected.

2024-05-25 01:24:55,117 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 01:24:55,150 INFO The channel nacos3:7848 has successfully established.

2024-05-25 01:24:55,117 INFO The channel nacos3:7848 has successfully established.

2024-05-25 01:24:55,128 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=142, currTerm=141, granted=true, requestLastLogId=LogId [index=132, term=141], lastLogId=LogId [index=132, term=141].

2024-05-25 01:24:55,140 INFO Peer nacos3:7848 is connected.

2024-05-25 01:24:55,396 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=141, currTerm=140.

2024-05-25 01:24:55,205 INFO Peer nacos3:7848 is connected.

2024-05-25 01:24:55,226 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 130 to 131, cost 1 ms.

2024-05-25 01:24:55,229 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 01:24:55,402 INFO The channel nacos3:7848 has successfully established.

2024-05-25 01:24:55,404 INFO Peer nacos3:7848 is connected.

2024-05-25 01:24:55,396 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=142, granted=true.

2024-05-25 01:24:55,413 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=142.

2024-05-25 01:24:55,398 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=141, granted=true.

2024-05-25 01:24:55,442 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=141.

2024-05-25 01:24:55,412 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 01:24:55,453 INFO The channel nacos2:7848 has successfully established.

2024-05-25 01:24:55,439 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 01:24:55,454 INFO Peer nacos2:7848 is connected.

2024-05-25 01:24:55,457 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=136, granted=false.

2024-05-25 01:24:55,465 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=141, votedFor=0.0.0.0:0, cost time=68 ms

2024-05-25 01:24:55,473 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 01:24:55,476 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=143, votedFor=nacos1:7848, cost time=56 ms

2024-05-25 01:24:55,476 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=142, votedFor=nacos1:7848, cost time=31 ms

2024-05-25 01:24:55,479 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=143, granted=true, requestLastLogId=LogId [index=131, term=142], lastLogId=LogId [index=131, term=142].

2024-05-25 01:24:55,477 INFO The channel nacos1:7848 has successfully established.

2024-05-25 01:24:55,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=141, votedFor=nacos3:7848, cost time=14 ms

2024-05-25 01:24:55,488 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=140, currTerm=141.

2024-05-25 01:24:55,485 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 01:24:55,487 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=142, currTerm=142.

2024-05-25 01:24:55,489 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=140, currTerm=141.

2024-05-25 01:24:55,502 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=143, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 01:24:55,503 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 01:24:55,881 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 01:24:55,883 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 01:24:55,887 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=136, granted=true.

2024-05-25 01:24:55,911 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=136.

2024-05-25 01:24:55,917 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 01:24:55,919 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=137, votedFor=nacos1:7848, cost time=7 ms

2024-05-25 01:24:55,940 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=142, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 01:24:55,941 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 01:24:55,943 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 01:24:55,963 INFO onLeaderStart: term=143.

2024-05-25 01:24:55,965 INFO onLeaderStart: term=142.

2024-05-25 01:24:55,986 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=137, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 01:24:55,994 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 01:24:55,995 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 01:24:56,027 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 01:24:56,051 INFO onLeaderStart: term=137.

2024-05-25 01:24:59,491 INFO Connection disconnected: /172.25.0.3:40716

2024-05-25 01:24:59,725 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 01:24:59,726 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 01:24:59,726 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 01:24:59,727 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 01:24:59,768 INFO Connection disconnected: /172.25.0.4:33670

2024-05-25 01:24:59,783 INFO Connection disconnected: /172.25.0.3:40742

2024-05-25 01:24:59,848 INFO Connection disconnected: /172.25.0.5:58334

2024-05-25 01:24:59,854 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 01:25:00,022 INFO Connection disconnected: /172.25.0.3:40736

2024-05-25 01:54:54,149 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-25 01:54:54,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_133.

2024-05-25 01:54:54,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_133.

2024-05-25 01:54:54,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-25 01:54:54,151 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-25 01:54:54,150 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-25 01:54:54,150 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_133.

2024-05-25 01:54:54,150 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_133.

2024-05-25 01:54:54,152 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_131.

2024-05-25 01:54:54,153 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-25 01:54:54,153 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_129.

2024-05-25 01:54:54,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_132.

2024-05-25 01:54:54,160 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 131 to 132, cost 0 ms.

2024-05-25 01:54:54,160 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 129 to 130, cost 0 ms.

2024-05-25 01:54:54,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 132 to 133, cost 0 ms.

2024-05-25 01:54:54,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 132 to 133, cost 0 ms.

2024-05-25 01:54:55,076 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 01:54:55,153 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 01:54:55,678 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 01:55:00,167 INFO Connection disconnected: /172.25.0.3:36392

2024-05-25 01:55:00,173 INFO Connection disconnected: /172.25.0.3:36398

2024-05-25 02:24:54,093 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 133 to 134, cost 1 ms.

2024-05-25 02:24:54,093 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 133 to 134, cost 1 ms.

2024-05-25 02:24:54,094 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 130 to 131, cost 1 ms.

2024-05-25 02:24:54,094 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 132 to 133, cost 0 ms.

2024-05-25 02:54:54,026 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 134 to 134, cost 0 ms.

2024-05-25 02:54:54,026 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 134 to 134, cost 1 ms.

2024-05-25 02:54:54,026 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 133 to 133, cost 0 ms.

2024-05-25 02:54:54,026 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 131 to 131, cost 0 ms.

2024-05-25 03:24:53,982 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 134 to 134, cost 0 ms.

2024-05-25 03:24:53,983 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 133 to 133, cost 0 ms.

2024-05-25 03:24:53,983 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 131 to 131, cost 0 ms.

2024-05-25 03:24:53,982 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 134 to 134, cost 0 ms.

2024-05-25 03:50:31,063 INFO Node <naming_service_metadata/nacos1:7848> term 141 start preVote.

2024-05-25 03:50:35,007 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=143, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 03:50:40,926 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: ClientCall started after CallOptions deadline was exceeded .9-0.465556 seconds ago], groupId=naming_persistent_service_v2

2024-05-25 03:50:40,709 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499731920s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 03:50:40,148 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=137, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 03:50:41,553 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=94, type=Follower] is going to quit

2024-05-25 03:50:44,114 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 03:50:45,040 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 03:50:40,119 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=142, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 03:50:34,499 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 03:50:41,557 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=132, lastLogIncluded=0, lastLogIndex=132, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=108, type=Follower] is going to quit

2024-05-25 03:50:45,806 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=132, lastLogIncluded=0, lastLogIndex=132, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=107, type=Follower] is going to quit

2024-05-25 03:50:41,563 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 03:50:41,729 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 03:50:46,925 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=93, type=Follower] is going to quit

2024-05-25 03:50:46,938 WARN Node <naming_service_metadata/nacos1:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.742791471s. [closed=[], open=[[buffered_nanos=5963363177, waiting_for_connection]]]].

2024-05-25 03:50:43,032 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 03:50:45,777 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=91, type=Follower] is going to quit

2024-05-25 03:50:45,777 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 03:50:45,845 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.745647729s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 03:50:46,939 WARN Node <naming_service_metadata/nacos1:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.791402174s. [closed=[], open=[[buffered_nanos=5644431439, waiting_for_connection]]]].

2024-05-25 03:50:47,057 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=92, type=Follower] is going to quit

2024-05-25 03:50:47,099 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=138, currTerm=137, granted=true, requestLastLogId=LogId [index=130, term=137], lastLogId=LogId [index=130, term=137].

2024-05-25 03:50:47,101 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=133, term=142], lastLogId=LogId [index=133, term=142].

2024-05-25 03:50:47,101 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 03:50:47,104 INFO The channel nacos2:7848 has successfully established.

2024-05-25 03:50:47,107 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,109 INFO Peer nacos2:7848 is connected.

2024-05-25 03:50:47,110 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 03:50:47,124 INFO The channel nacos2:7848 has successfully established.

2024-05-25 03:50:47,113 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=142, currTerm=141, because the leader nacos3:7848's lease is still valid.

2024-05-25 03:50:47,116 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=138, currTerm=137.

2024-05-25 03:50:47,154 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=143, currTerm=142.

2024-05-25 03:50:47,155 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,173 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=138, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 03:50:47,174 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=143, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 03:50:47,184 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 03:50:47,243 INFO The channel nacos3:7848 has successfully established.

2024-05-25 03:50:47,244 INFO Peer nacos3:7848 is connected.

2024-05-25 03:50:47,245 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=142, currTerm=141.

2024-05-25 03:50:47,248 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=141, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 03:50:47,248 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=143, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 03:50:47,251 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,252 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=138, votedFor=nacos2:7848, cost time=14 ms

2024-05-25 03:50:47,255 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,261 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=142, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 03:50:47,261 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,269 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=143, granted=true, requestLastLogId=LogId [index=133, term=142], lastLogId=LogId [index=133, term=142].

2024-05-25 03:50:47,384 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=138, currTerm=138, granted=true, requestLastLogId=LogId [index=130, term=137], lastLogId=LogId [index=130, term=137].

2024-05-25 03:50:47,386 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=142, votedFor=nacos2:7848, cost time=119 ms

2024-05-25 03:50:47,422 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,423 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,425 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,432 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,436 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=144, currTerm=143, granted=true, requestLastLogId=LogId [index=132, term=143], lastLogId=LogId [index=132, term=143].

2024-05-25 03:50:47,444 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,487 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 03:50:47,493 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=144, currTerm=143.

2024-05-25 03:50:47,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=144, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 03:50:47,513 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=144, votedFor=nacos3:7848, cost time=7 ms

2024-05-25 03:50:47,521 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:00:29,526 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=139, currTerm=138, granted=true, requestLastLogId=LogId [index=131, term=138], lastLogId=LogId [index=131, term=138].

2024-05-25 04:00:29,544 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=143, currTerm=142, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:00:29,600 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_134.

2024-05-25 04:00:29,601 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_134.

2024-05-25 04:00:29,606 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_134.

2024-05-25 04:00:29,608 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_134.

2024-05-25 04:00:29,611 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_133.

2024-05-25 04:00:29,623 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 134 to 134, cost 0 ms.

2024-05-25 04:00:29,607 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_131.

2024-05-25 04:00:29,607 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_133.

2024-05-25 04:00:29,626 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_133.

2024-05-25 04:00:29,607 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=144, currTerm=143, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:00:29,609 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_133.

2024-05-25 04:00:29,625 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_131.

2024-05-25 04:00:29,628 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=139, currTerm=138.

2024-05-25 04:00:29,641 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=138, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:00:29,642 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-25 04:00:29,653 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 134 to 134, cost 0 ms.

2024-05-25 04:00:29,649 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-25 04:00:29,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=139, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 04:00:29,663 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 133 to 133, cost 0 ms.

2024-05-25 04:00:29,666 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 131 to 131, cost 1 ms.

2024-05-25 04:00:29,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=139, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 04:00:29,688 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=144, currTerm=143.

2024-05-25 04:00:29,702 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=143, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:00:29,711 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=144, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 04:00:29,725 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=145, currTerm=144, because the leader nacos3:7848's lease is still valid.

2024-05-25 04:00:29,727 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=144, votedFor=nacos3:7848, cost time=16 ms

2024-05-25 04:00:29,796 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=145, currTerm=144.

2024-05-25 04:00:29,804 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=144, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:00:29,818 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=145, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 04:00:29,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=145, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 04:16:56,699 INFO Node <naming_service_metadata/nacos1:7848> term 142 start preVote.

2024-05-25 04:16:55,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 04:16:55,886 INFO Node <naming_persistent_service_v2/nacos1:7848> term 145 start preVote.

2024-05-25 04:16:56,823 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 04:16:55,892 INFO Node <naming_instance_metadata/nacos1:7848> term 139 start preVote.

2024-05-25 04:16:56,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 04:16:56,940 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 04:16:56,959 INFO Node <naming_instance_metadata/nacos1:7848> term 139 start preVote.

2024-05-25 04:16:56,940 INFO Node <naming_persistent_service/nacos1:7848> term 144 start preVote.

2024-05-25 04:16:57,041 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=142, granted=true.

2024-05-25 04:16:57,043 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=146, currTerm=145, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:16:57,060 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=142.

2024-05-25 04:16:57,067 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 04:16:57,068 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=139, granted=true.

2024-05-25 04:16:57,069 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=139.

2024-05-25 04:16:57,070 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 04:16:57,070 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=145, granted=false.

2024-05-25 04:16:57,073 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=144, granted=true.

2024-05-25 04:16:57,078 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=144.

2024-05-25 04:16:57,079 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=140, votedFor=nacos1:7848, cost time=9 ms

2024-05-25 04:16:57,082 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 04:16:57,104 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=132, term=139], lastLogId=LogId [index=132, term=139].

2024-05-25 04:16:57,081 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 04:16:57,099 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 04:16:57,109 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=143, votedFor=nacos1:7848, cost time=35 ms

2024-05-25 04:16:57,115 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=143, granted=true, requestLastLogId=LogId [index=134, term=142], lastLogId=LogId [index=134, term=142].

2024-05-25 04:16:57,113 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=145, granted=true.

2024-05-25 04:16:57,116 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=145.

2024-05-25 04:16:57,125 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 04:16:57,114 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=140, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:16:57,127 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=143, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:16:57,130 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=146, currTerm=146.

2024-05-25 04:16:57,130 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:16:57,130 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:16:57,142 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:16:57,141 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:16:57,150 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=145, votedFor=nacos1:7848, cost time=37 ms

2024-05-25 04:16:57,157 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 04:16:57,160 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 04:16:57,157 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=146, votedFor=nacos1:7848, cost time=23 ms

2024-05-25 04:16:57,157 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 04:16:57,158 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=145, currTerm=145, granted=true, requestLastLogId=LogId [index=135, term=144], lastLogId=LogId [index=135, term=144].

2024-05-25 04:16:57,161 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 04:16:57,165 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=145, currTerm=145.

2024-05-25 04:16:57,185 INFO onLeaderStart: term=143.

2024-05-25 04:16:57,186 INFO onLeaderStart: term=140.

2024-05-25 04:16:57,191 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 04:16:57,205 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:16:57,212 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:16:57,215 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:16:57,235 INFO onLeaderStart: term=146.

2024-05-25 04:17:25,503 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499803983s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-25 04:17:29,533 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=146, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 04:17:29,544 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=140, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 04:17:29,627 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 04:17:29,536 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=143, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 04:17:29,681 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=92, type=Follower] is going to quit

2024-05-25 04:17:29,790 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=91, type=Follower] is going to quit

2024-05-25 04:17:29,630 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=109, type=Follower] is going to quit

2024-05-25 04:17:29,683 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499753031s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 04:17:29,682 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 04:17:29,791 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=96, type=Follower] is going to quit

2024-05-25 04:17:29,800 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 04:17:29,938 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=110, type=Follower] is going to quit

2024-05-25 04:17:29,999 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=97, type=Follower] is going to quit

2024-05-25 04:17:30,186 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,203 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=135, term=146], lastLogId=LogId [index=135, term=146].

2024-05-25 04:17:30,312 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=135, term=146], lastLogId=LogId [index=135, term=146].

2024-05-25 04:17:30,323 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,368 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,370 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,448 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,620 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:30,687 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=147, currTerm=146.

2024-05-25 04:17:30,698 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=133, term=140], lastLogId=LogId [index=133, term=140].

2024-05-25 04:17:30,860 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=147, votedFor=0.0.0.0:0, cost time=160 ms

2024-05-25 04:17:31,399 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:31,557 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=147, votedFor=nacos3:7848, cost time=368 ms

2024-05-25 04:17:31,520 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=141, currTerm=140.

2024-05-25 04:17:31,863 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:32,660 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=141, votedFor=0.0.0.0:0, cost time=288 ms

2024-05-25 04:17:32,992 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:33,207 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=141, votedFor=nacos2:7848, cost time=211 ms

2024-05-25 04:17:33,707 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:34,783 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:35,503 INFO Node <naming_service_metadata/nacos1:7848> term 143 start preVote.

2024-05-25 04:17:36,021 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=144, currTerm=143, granted=true, requestLastLogId=LogId [index=135, term=143], lastLogId=LogId [index=135, term=143].

2024-05-25 04:17:39,481 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=143, granted=true.

2024-05-25 04:17:39,570 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=143.

2024-05-25 04:17:39,608 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=144, currTerm=144.

2024-05-25 04:17:40,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=144, votedFor=nacos1:7848, cost time=730 ms

2024-05-25 04:17:41,025 WARN Node <naming_service_metadata/nacos1:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999753214s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]].

2024-05-25 04:17:43,077 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=135, term=143], lastLogId=LogId [index=135, term=143].

2024-05-25 04:17:43,347 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:17:43,429 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=145, currTerm=144.

2024-05-25 04:17:44,010 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=145, votedFor=0.0.0.0:0, cost time=258 ms

2024-05-25 04:17:44,342 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=145, votedFor=nacos2:7848, cost time=292 ms

2024-05-25 04:17:44,834 WARN Node <naming_service_metadata/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999147125s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]].

2024-05-25 04:17:44,856 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=136, term=147], lastLogId=LogId [index=136, term=147].

2024-05-25 04:17:45,214 INFO Node <naming_persistent_service_v2/nacos1:7848> term 147 start preVote.

2024-05-25 04:17:45,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 04:17:45,492 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=148, currTerm=147.

2024-05-25 04:17:45,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=148, votedFor=0.0.0.0:0, cost time=154 ms

2024-05-25 04:17:45,694 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=147, currTerm=148.

2024-05-25 04:17:45,982 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=148, votedFor=nacos2:7848, cost time=263 ms

2024-05-25 04:17:46,119 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=147, currTerm=148.

2024-05-25 04:17:46,564 INFO Node <naming_persistent_service/nacos1:7848> term 145 start preVote.

2024-05-25 04:17:46,567 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 04:17:46,719 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=145, granted=true.

2024-05-25 04:17:46,737 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=145.

2024-05-25 04:17:46,759 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 04:17:47,051 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=146, votedFor=nacos1:7848, cost time=196 ms

2024-05-25 04:17:47,274 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:17:47,319 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:17:47,347 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:17:47,544 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 04:17:48,888 INFO onLeaderStart: term=146.

2024-05-25 04:33:56,975 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=146, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 04:33:57,163 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=93, type=Follower] is going to quit

2024-05-25 04:33:57,167 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=94, type=Follower] is going to quit

2024-05-25 04:33:57,176 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-25 04:33:57,156 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_137.

2024-05-25 04:33:56,975 INFO Node <naming_service_metadata/nacos1:7848> term 145 start preVote.

2024-05-25 04:33:56,979 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 04:33:57,176 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-25 04:33:57,230 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-25 04:33:57,136 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_137.

2024-05-25 04:33:57,231 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_137.

2024-05-25 04:33:57,163 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 04:33:57,263 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_134.

2024-05-25 04:33:57,270 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_134.

2024-05-25 04:33:57,226 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=137, term=146], lastLogId=LogId [index=137, term=146].

2024-05-25 04:33:57,227 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-25 04:33:57,228 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_137.

2024-05-25 04:33:57,283 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=145, granted=true.

2024-05-25 04:33:57,293 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_133.

2024-05-25 04:33:57,293 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=145.

2024-05-25 04:33:57,295 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 04:33:57,293 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_131.

2024-05-25 04:33:57,310 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 133 to 134, cost 0 ms.

2024-05-25 04:33:57,312 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=147, currTerm=146.

2024-05-25 04:33:57,320 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 134 to 135, cost 0 ms.

2024-05-25 04:33:57,320 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 131 to 132, cost 0 ms.

2024-05-25 04:33:57,320 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=149, currTerm=148, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:33:57,327 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=146, votedFor=nacos1:7848, cost time=24 ms

2024-05-25 04:33:57,342 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=147, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-25 04:33:57,359 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 134 to 135, cost 0 ms.

2024-05-25 04:33:57,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=147, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 04:33:57,375 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 04:33:57,378 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=142, currTerm=141, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:33:57,384 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:33:57,385 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:33:57,386 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:33:57,391 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=149, currTerm=148.

2024-05-25 04:33:57,392 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=148, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:33:57,400 INFO onLeaderStart: term=146.

2024-05-25 04:33:57,402 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=149, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 04:33:57,409 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=149, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 04:33:57,420 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 04:33:57,421 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=142, currTerm=141.

2024-05-25 04:33:57,424 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=141, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:33:57,435 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=142, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 04:33:57,450 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=142, votedFor=nacos3:7848, cost time=14 ms

2024-05-25 04:49:54,652 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=146, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 04:49:54,664 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 04:49:54,664 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=93, type=Follower] is going to quit

2024-05-25 04:49:55,369 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=94, type=Follower] is going to quit

2024-05-25 04:49:55,372 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 04:49:55,372 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 04:49:55,406 INFO Node <naming_persistent_service/nacos1:7848> term 147 start preVote.

2024-05-25 04:49:55,408 INFO Node <naming_instance_metadata/nacos1:7848> term 142 start preVote.

2024-05-25 04:49:55,410 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 04:49:55,420 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 04:49:55,445 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 04:49:55,456 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 04:49:55,716 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 04:49:55,718 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=147, granted=true.

2024-05-25 04:49:55,719 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 04:49:55,719 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=137, term=146], lastLogId=LogId [index=137, term=146].

2024-05-25 04:49:55,722 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=150, currTerm=149, because the leader nacos3:7848's lease is still valid.

2024-05-25 04:49:55,719 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=147.

2024-05-25 04:49:55,721 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=143, currTerm=142, because the leader nacos3:7848's lease is still valid.

2024-05-25 04:49:55,726 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=147, currTerm=148.

2024-05-25 04:49:55,728 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 04:49:55,728 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=147, currTerm=146.

2024-05-25 04:49:55,742 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 04:49:55,743 INFO The channel nacos2:7848 has successfully established.

2024-05-25 04:49:55,744 INFO Peer nacos2:7848 is connected.

2024-05-25 04:49:55,747 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 04:49:55,748 INFO The channel nacos3:7848 has successfully established.

2024-05-25 04:49:55,749 INFO Peer nacos3:7848 is connected.

2024-05-25 04:49:55,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=147, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 04:49:55,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=148, votedFor=nacos1:7848, cost time=21 ms

2024-05-25 04:49:55,755 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 04:49:55,760 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=143, currTerm=142.

2024-05-25 04:49:55,761 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=142, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:49:55,767 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=143, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 04:49:55,771 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=147, votedFor=nacos2:7848, cost time=16 ms

2024-05-25 04:49:55,796 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=148, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 04:49:55,797 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 04:49:55,800 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 04:49:55,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=143, votedFor=nacos2:7848, cost time=31 ms

2024-05-25 04:49:55,814 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=142, currTerm=143.

2024-05-25 04:49:55,816 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=142, currTerm=143.

2024-05-25 04:49:55,817 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 04:49:55,821 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=148, currTerm=148, granted=false, requestLastLogId=LogId [index=138, term=147], lastLogId=LogId [index=139, term=148].

2024-05-25 04:49:55,822 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=148, currTerm=148, granted=false, requestLastLogId=LogId [index=138, term=147], lastLogId=LogId [index=139, term=148].

2024-05-25 04:49:55,832 INFO onLeaderStart: term=148.

2024-05-25 04:49:55,838 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=150, currTerm=149.

2024-05-25 04:49:55,845 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=149, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:49:55,854 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=150, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 04:49:55,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=150, votedFor=nacos2:7848, cost time=12 ms

2024-05-25 04:50:00,376 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 04:50:00,378 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 04:50:00,379 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 04:50:00,380 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 04:50:56,763 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=148, currTerm=147, because the leader nacos2:7848's lease is still valid.

2024-05-25 04:50:56,899 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=148, currTerm=147.

2024-05-25 04:50:56,909 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=147, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 04:50:56,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=148, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-25 04:50:56,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=148, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 05:06:24,531 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=148, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:06:25,346 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=148, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 05:06:25,591 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-25 05:06:25,591 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_136.

2024-05-25 05:06:25,346 INFO Node <naming_service_metadata/nacos1:7848> term 148 start preVote.

2024-05-25 05:06:25,346 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=143, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:06:25,346 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:06:24,562 INFO Node <naming_persistent_service_v2/nacos1:7848> term 150 start preVote.

2024-05-25 05:06:24,561 INFO Node <naming_instance_metadata/nacos1:7848> term 143 start preVote.

2024-05-25 05:06:25,731 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=97, type=Follower] is going to quit

2024-05-25 05:06:25,760 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 05:06:25,760 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_139.

2024-05-25 05:06:25,826 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_139.

2024-05-25 05:06:25,689 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=148, granted=true.

2024-05-25 05:06:25,828 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=148.

2024-05-25 05:06:25,667 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_139.

2024-05-25 05:06:25,830 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 05:06:25,832 INFO The channel nacos3:7848 has successfully established.

2024-05-25 05:06:25,649 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 05:06:25,835 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 05:06:25,638 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:06:25,640 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=96, type=Follower] is going to quit

2024-05-25 05:06:25,762 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 05:06:25,629 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_136.

2024-05-25 05:06:25,624 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-25 05:06:25,855 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-25 05:06:25,830 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_139.

2024-05-25 05:06:25,831 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_137.

2024-05-25 05:06:25,860 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_137.

2024-05-25 05:06:25,863 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 05:06:25,866 INFO The channel nacos2:7848 has successfully established.

2024-05-25 05:06:25,833 INFO Peer nacos3:7848 is connected.

2024-05-25 05:06:25,840 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=150, granted=false.

2024-05-25 05:06:25,843 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=143, granted=false.

2024-05-25 05:06:25,848 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=97, type=Follower] already destroyed, ignore error code: 1001

2024-05-25 05:06:25,849 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 05:06:25,879 INFO The channel nacos3:7848 has successfully established.

2024-05-25 05:06:25,849 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=149, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 05:06:25,865 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 132 to 135, cost 0 ms.

2024-05-25 05:06:25,866 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-25 05:06:25,869 INFO Peer nacos2:7848 is connected.

2024-05-25 05:06:25,871 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 135 to 138, cost 1 ms.

2024-05-25 05:06:25,873 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 134 to 138, cost 1 ms.

2024-05-25 05:06:25,875 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:06:25,875 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=149, currTerm=148, granted=true, requestLastLogId=LogId [index=139, term=148], lastLogId=LogId [index=139, term=148].

2024-05-25 05:06:25,882 INFO Peer nacos3:7848 is connected.

2024-05-25 05:06:25,882 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=143, granted=true.

2024-05-25 05:06:25,883 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=149, currTerm=149, granted=true, requestLastLogId=LogId [index=139, term=148], lastLogId=LogId [index=139, term=148].

2024-05-25 05:06:25,886 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=150, granted=true.

2024-05-25 05:06:25,890 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 135 to 137, cost 0 ms.

2024-05-25 05:06:25,891 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=149, currTerm=148.

2024-05-25 05:06:25,892 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=143.

2024-05-25 05:06:25,894 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=150.

2024-05-25 05:06:25,894 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=149, currTerm=149.

2024-05-25 05:06:25,900 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 05:06:25,899 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=143, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:06:25,902 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:06:25,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=149, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 05:06:25,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=144, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 05:06:25,913 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=151, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 05:06:25,916 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=149, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 05:06:25,919 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:06:25,925 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=144, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 05:06:25,927 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 05:06:25,928 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 05:06:25,921 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=97, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send6,5,main].

2024-05-25 05:06:25,926 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=151, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 05:06:25,934 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 05:06:25,934 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 05:06:25,935 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 05:06:25,936 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 05:06:25,942 INFO onLeaderStart: term=144.

2024-05-25 05:06:25,968 INFO onLeaderStart: term=151.

2024-05-25 05:23:57,687 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 05:23:58,519 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:23:58,415 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=151, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:23:58,654 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=140, lastLogIncluded=0, lastLogIndex=140, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=112, type=Follower] is going to quit

2024-05-25 05:23:58,664 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=140, lastLogIncluded=0, lastLogIndex=140, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=111, type=Follower] is going to quit

2024-05-25 05:23:58,519 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:23:58,519 INFO Node <naming_persistent_service/nacos1:7848> term 149 start preVote.

2024-05-25 05:23:58,519 INFO Node <naming_service_metadata/nacos1:7848> term 149 start preVote.

2024-05-25 05:23:58,415 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=144, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:23:58,663 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:23:58,812 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:23:58,806 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=99, type=Follower] is going to quit

2024-05-25 05:23:58,825 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=98, type=Follower] is going to quit

2024-05-25 05:23:58,828 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=137, term=144], lastLogId=LogId [index=137, term=144].

2024-05-25 05:23:58,854 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=140, term=151], lastLogId=LogId [index=140, term=151].

2024-05-25 05:23:58,872 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 05:23:58,879 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 05:23:58,886 INFO The channel nacos2:7848 has successfully established.

2024-05-25 05:23:58,886 INFO Peer nacos2:7848 is connected.

2024-05-25 05:23:58,889 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=145, currTerm=144.

2024-05-25 05:23:58,890 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=152, currTerm=151.

2024-05-25 05:23:58,894 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=149, granted=true.

2024-05-25 05:23:58,895 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=149, granted=true.

2024-05-25 05:23:58,896 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=149.

2024-05-25 05:23:58,897 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=149.

2024-05-25 05:23:58,900 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:23:58,902 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:23:58,907 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=145, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-25 05:23:58,907 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=152, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-25 05:23:58,912 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=150, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 05:23:58,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=150, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 05:23:58,925 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=152, votedFor=nacos2:7848, cost time=12 ms

2024-05-25 05:23:58,936 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=140, term=149], lastLogId=LogId [index=140, term=149].

2024-05-25 05:23:58,927 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=145, votedFor=nacos2:7848, cost time=16 ms

2024-05-25 05:23:58,937 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:23:58,947 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=145, currTerm=145, granted=true, requestLastLogId=LogId [index=137, term=144], lastLogId=LogId [index=137, term=144].

2024-05-25 05:23:58,952 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:23:58,967 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 05:23:58,972 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=140, term=149], lastLogId=LogId [index=140, term=149].

2024-05-25 05:23:58,973 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=140, term=149], lastLogId=LogId [index=140, term=149].

2024-05-25 05:23:58,973 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=140, term=149], lastLogId=LogId [index=140, term=149].

2024-05-25 05:23:58,977 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=150, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 05:23:58,978 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=150, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 05:23:58,979 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 05:23:58,991 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 05:23:58,995 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 05:23:58,992 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 05:23:59,006 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=152, currTerm=152, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:23:59,007 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 05:23:59,017 INFO onLeaderStart: term=150.

2024-05-25 05:23:59,031 INFO onLeaderStart: term=150.

2024-05-25 05:23:59,041 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 05:23:59,051 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 05:24:02,662 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 05:24:03,855 INFO Connection disconnected: /172.25.0.3:52200

2024-05-25 05:40:30,225 INFO Node <naming_persistent_service_v2/nacos1:7848> term 152 start preVote.

2024-05-25 05:40:30,498 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:40:30,389 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 05:40:30,389 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=150, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:40:30,519 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=98, type=Follower] is going to quit

2024-05-25 05:40:30,288 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=150, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:40:30,520 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=99, type=Follower] is going to quit

2024-05-25 05:40:30,520 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=96, type=Follower] is going to quit

2024-05-25 05:40:30,245 INFO Node <naming_instance_metadata/nacos1:7848> term 145 start preVote.

2024-05-25 05:40:30,521 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:40:30,522 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=97, type=Follower] is going to quit

2024-05-25 05:40:30,547 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-25 05:40:30,550 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:40:30,570 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-25 05:40:30,626 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-25 05:40:30,567 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-25 05:40:30,574 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,634 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_136.

2024-05-25 05:40:30,640 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-25 05:40:30,637 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_141.

2024-05-25 05:40:30,656 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_141.

2024-05-25 05:40:30,707 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 138 to 140, cost 0 ms.

2024-05-25 05:40:30,642 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_141.

2024-05-25 05:40:30,712 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_141.

2024-05-25 05:40:30,645 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:40:30,708 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_139.

2024-05-25 05:40:30,711 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,711 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 135 to 137, cost 1 ms.

2024-05-25 05:40:30,711 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,717 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=153, currTerm=152, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:40:30,717 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_139.

2024-05-25 05:40:30,721 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=146, currTerm=145, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:40:30,727 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,744 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=151, currTerm=150.

2024-05-25 05:40:30,751 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 137 to 140, cost 0 ms.

2024-05-25 05:40:30,730 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=151, currTerm=150.

2024-05-25 05:40:30,752 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=145, granted=true.

2024-05-25 05:40:30,753 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 138 to 140, cost 0 ms.

2024-05-25 05:40:30,758 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=151, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 05:40:30,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=151, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 05:40:30,760 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=151, currTerm=151, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,754 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=152, granted=true.

2024-05-25 05:40:30,755 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=145.

2024-05-25 05:40:30,769 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:40:30,761 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=152.

2024-05-25 05:40:30,767 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=151, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 05:40:30,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=151, votedFor=nacos2:7848, cost time=5 ms

2024-05-25 05:40:30,775 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 05:40:30,775 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 05:40:30,775 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:40:30,778 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=151, currTerm=151, granted=true, requestLastLogId=LogId [index=141, term=150], lastLogId=LogId [index=141, term=150].

2024-05-25 05:40:30,787 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:40:30,779 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=153, currTerm=153.

2024-05-25 05:40:30,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=146, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 05:40:30,795 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 05:40:30,797 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=146, currTerm=146.

2024-05-25 05:40:30,788 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:40:30,789 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=151, currTerm=151.

2024-05-25 05:40:30,810 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=153, votedFor=nacos1:7848, cost time=14 ms

2024-05-25 05:40:30,814 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 05:40:30,816 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 05:40:30,817 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 05:40:30,840 INFO onLeaderStart: term=146.

2024-05-25 05:52:41,586 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=146, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 05:52:41,593 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=154, currTerm=153.

2024-05-25 05:52:41,598 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 05:52:41,598 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=101, type=Follower] is going to quit

2024-05-25 05:52:41,599 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=153, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 05:52:41,600 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=100, type=Follower] is going to quit

2024-05-25 05:52:41,604 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=154, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 05:52:41,608 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:52:41,608 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=147, currTerm=146.

2024-05-25 05:52:41,614 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=152, currTerm=151, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:52:41,615 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=152, currTerm=151, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:52:41,625 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=152, currTerm=151, because the leader nacos2:7848's lease is still valid.

2024-05-25 05:52:41,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=147, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-25 05:52:41,639 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=153, currTerm=154.

2024-05-25 05:52:41,639 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=139, term=146], lastLogId=LogId [index=139, term=146].

2024-05-25 05:52:41,657 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=147, votedFor=nacos3:7848, cost time=15 ms

2024-05-25 05:52:41,659 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=139, term=146], lastLogId=LogId [index=139, term=146].

2024-05-25 05:52:41,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=154, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 05:52:41,661 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=147, currTerm=147.

2024-05-25 05:52:41,662 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=154, currTerm=154, granted=true, requestLastLogId=LogId [index=142, term=153], lastLogId=LogId [index=142, term=153].

2024-05-25 05:52:41,675 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:52:41,729 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:52:41,730 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=152, currTerm=151.

2024-05-25 05:52:41,733 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=151, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 05:52:41,741 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=152, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 05:52:41,741 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 05:52:41,748 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=152, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 05:52:47,024 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=142, term=151], lastLogId=LogId [index=142, term=151].

2024-05-25 05:52:47,027 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=152, currTerm=151.

2024-05-25 05:52:47,030 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=151, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 05:52:47,034 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=152, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 05:52:47,039 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=152, votedFor=nacos3:7848, cost time=4 ms

2024-05-25 05:53:14,261 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=143, term=152], lastLogId=LogId [index=143, term=152].

2024-05-25 05:53:14,774 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=153, currTerm=152.

2024-05-25 05:53:14,813 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=152, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 05:53:14,978 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=153, votedFor=0.0.0.0:0, cost time=174 ms

2024-05-25 05:53:15,153 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=153, votedFor=nacos3:7848, cost time=164 ms

2024-05-25 05:53:18,238 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=143, term=152], lastLogId=LogId [index=143, term=152].

2024-05-25 05:53:18,752 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=153, currTerm=152.

2024-05-25 05:53:19,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=152, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 05:53:19,343 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=153, votedFor=0.0.0.0:0, cost time=541 ms

2024-05-25 05:53:20,056 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=153, votedFor=nacos3:7848, cost time=193 ms

2024-05-25 06:10:10,918 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:10:10,918 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 06:10:10,917 INFO Node <naming_persistent_service_v2/nacos1:7848> term 154 start preVote.

2024-05-25 06:10:10,918 INFO Node <naming_persistent_service/nacos1:7848> term 153 start preVote.

2024-05-25 06:10:10,921 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=153, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:10:10,918 INFO Node <naming_instance_metadata/nacos1:7848> term 147 start preVote.

2024-05-25 06:10:11,702 INFO Node <naming_persistent_service_v2/nacos1:7848> term 154 start preVote.

2024-05-25 06:10:11,705 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=154, currTerm=153, granted=true, requestLastLogId=LogId [index=144, term=153], lastLogId=LogId [index=144, term=153].

2024-05-25 06:10:11,777 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=153, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:10:11,778 INFO Node <naming_service_metadata/nacos1:7848> term 153 start preVote.

2024-05-25 06:10:11,794 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-25 06:10:12,001 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=155, currTerm=154, because the leader nacos2:7848's lease is still valid.

2024-05-25 06:10:12,049 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=154, granted=true.

2024-05-25 06:10:12,051 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=154.

2024-05-25 06:10:12,065 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:10:12,065 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=154, currTerm=153, because the leader nacos3:7848's lease is still valid.

2024-05-25 06:10:12,066 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=153, granted=true.

2024-05-25 06:10:12,066 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=147, granted=true.

2024-05-25 06:10:12,067 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=147.

2024-05-25 06:10:12,067 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=153.

2024-05-25 06:10:12,070 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=153, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:10:12,068 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 154, expect=153.

2024-05-25 06:10:12,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:10:12,078 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=155, votedFor=nacos1:7848, cost time=14 ms

2024-05-25 06:10:12,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=154, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 06:10:12,081 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:10:12,082 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=153, currTerm=154.

2024-05-25 06:10:12,085 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:10:12,088 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=148, votedFor=nacos1:7848, cost time=16 ms

2024-05-25 06:10:12,089 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=154, currTerm=154.

2024-05-25 06:10:12,090 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:10:12,088 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=154, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 06:10:12,090 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=148, currTerm=148.

2024-05-25 06:10:12,098 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:10:12,114 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:10:12,132 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=154, votedFor=nacos2:7848, cost time=43 ms

2024-05-25 06:10:12,151 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=155, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:10:12,156 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:10:12,162 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:10:12,174 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=148, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:10:12,197 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:10:12,200 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=154, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:10:12,206 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:10:12,200 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:10:12,210 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:10:12,203 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:10:12,214 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:10:12,215 INFO onLeaderStart: term=155.

2024-05-25 06:10:12,221 INFO onLeaderStart: term=148.

2024-05-25 06:10:12,227 INFO onLeaderStart: term=154.

2024-05-25 06:10:30,612 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_145.

2024-05-25 06:10:30,804 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_145.

2024-05-25 06:10:30,821 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_144.

2024-05-25 06:10:31,064 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-25 06:10:31,105 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-25 06:10:31,197 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_144.

2024-05-25 06:10:31,237 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_141.

2024-05-25 06:10:31,004 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_141.

2024-05-25 06:10:31,386 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_141.

2024-05-25 06:10:31,426 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-25 06:10:31,433 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_141.

2024-05-25 06:10:31,779 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-25 06:10:31,983 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 140 to 142, cost 1 ms.

2024-05-25 06:10:32,059 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 140 to 142, cost 41 ms.

2024-05-25 06:10:32,239 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 137 to 139, cost 1 ms.

2024-05-25 06:10:32,672 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 140 to 142, cost 17 ms.

2024-05-25 06:26:41,121 INFO Node <naming_service_metadata/nacos1:7848> term 154 start preVote.

2024-05-25 06:26:41,238 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=154, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:26:41,311 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=100, type=Follower] is going to quit

2024-05-25 06:26:41,312 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=101, type=Follower] is going to quit

2024-05-25 06:26:41,128 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=148, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:26:41,355 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=103, type=Follower] is going to quit

2024-05-25 06:26:41,356 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=104, type=Follower] is going to quit

2024-05-25 06:26:41,359 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:26:41,123 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 06:26:41,127 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=155, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:26:41,311 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:26:41,361 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=154, granted=true.

2024-05-25 06:26:41,378 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=154.

2024-05-25 06:26:41,368 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=113, type=Follower] is going to quit

2024-05-25 06:26:41,372 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:26:41,379 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=149, currTerm=148, granted=true, requestLastLogId=LogId [index=141, term=148], lastLogId=LogId [index=141, term=148].

2024-05-25 06:26:41,379 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=114, type=Follower] is going to quit

2024-05-25 06:26:41,396 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,402 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,458 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=149, currTerm=148.

2024-05-25 06:26:41,409 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=155, currTerm=154, granted=true, requestLastLogId=LogId [index=145, term=154], lastLogId=LogId [index=145, term=154].

2024-05-25 06:26:41,478 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=155, currTerm=154.

2024-05-25 06:26:41,416 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=155, votedFor=nacos1:7848, cost time=37 ms

2024-05-25 06:26:41,437 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,446 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=144, term=155], lastLogId=LogId [index=144, term=155].

2024-05-25 06:26:41,480 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:26:41,480 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:26:41,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=149, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 06:26:41,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=155, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-25 06:26:41,498 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=155, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:26:41,502 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:26:41,499 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=144, term=155], lastLogId=LogId [index=144, term=155].

2024-05-25 06:26:41,509 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=155, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 06:26:41,504 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:26:41,509 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=149, votedFor=nacos3:7848, cost time=10 ms

2024-05-25 06:26:41,510 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=156, currTerm=155.

2024-05-25 06:26:41,508 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,520 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:26:41,516 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=149, currTerm=149, granted=true, requestLastLogId=LogId [index=141, term=148], lastLogId=LogId [index=141, term=148].

2024-05-25 06:26:41,526 INFO onLeaderStart: term=155.

2024-05-25 06:26:41,543 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=156, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-25 06:26:41,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=156, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 06:26:41,557 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=156, currTerm=156.

2024-05-25 06:26:41,558 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,559 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,559 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,570 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:41,571 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:26:45,484 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 06:26:45,485 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 06:26:45,485 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 06:26:45,486 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 06:43:41,656 INFO Node <naming_persistent_service/nacos1:7848> term 155 start preVote.

2024-05-25 06:43:42,359 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=155, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:43:41,661 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:43:41,661 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:43:42,490 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=99, type=Follower] is going to quit

2024-05-25 06:43:42,493 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=100, type=Follower] is going to quit

2024-05-25 06:43:42,489 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:43:41,659 INFO Node <naming_instance_metadata/nacos1:7848> term 149 start preVote.

2024-05-25 06:43:41,659 INFO Node <naming_persistent_service_v2/nacos1:7848> term 156 start preVote.

2024-05-25 06:43:41,658 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:43:42,573 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,640 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_146.

2024-05-25 06:43:42,644 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_146.

2024-05-25 06:43:42,641 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,654 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_146.

2024-05-25 06:43:42,657 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_145.

2024-05-25 06:43:42,669 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_142.

2024-05-25 06:43:42,687 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_142.

2024-05-25 06:43:42,688 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,669 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_145.

2024-05-25 06:43:42,670 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=156, granted=false.

2024-05-25 06:43:42,670 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=146, term=155], lastLogId=LogId [index=146, term=155].

2024-05-25 06:43:42,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_141.

2024-05-25 06:43:42,681 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_146.

2024-05-25 06:43:42,691 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_145.

2024-05-25 06:43:42,701 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=150, currTerm=149, because the leader nacos3:7848's lease is still valid.

2024-05-25 06:43:42,701 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=156, currTerm=155, because the leader nacos3:7848's lease is still valid.

2024-05-25 06:43:42,733 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=149, granted=false.

2024-05-25 06:43:42,734 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=149, granted=true.

2024-05-25 06:43:42,735 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=149.

2024-05-25 06:43:42,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:43:42,704 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-25 06:43:42,740 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_144.

2024-05-25 06:43:42,712 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 139 to 142, cost 0 ms.

2024-05-25 06:43:42,725 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=156, granted=true.

2024-05-25 06:43:42,744 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=156.

2024-05-25 06:43:42,745 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=146, term=155], lastLogId=LogId [index=146, term=155].

2024-05-25 06:43:42,728 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 142 to 146, cost 1 ms.

2024-05-25 06:43:42,733 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=155, granted=false.

2024-05-25 06:43:42,743 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 142 to 146, cost 0 ms.

2024-05-25 06:43:42,743 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=150, votedFor=nacos1:7848, cost time=8 ms

2024-05-25 06:43:42,745 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:43:42,748 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=155, granted=true.

2024-05-25 06:43:42,754 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=155.

2024-05-25 06:43:42,755 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:43:42,752 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=146, term=155], lastLogId=LogId [index=146, term=155].

2024-05-25 06:43:42,755 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=157, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 06:43:42,757 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,761 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,758 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 142 to 145, cost 3 ms.

2024-05-25 06:43:42,759 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,763 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=156, currTerm=155.

2024-05-25 06:43:42,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=156, votedFor=nacos1:7848, cost time=8 ms

2024-05-25 06:43:42,767 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=156, currTerm=156.

2024-05-25 06:43:42,772 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=156, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 06:43:42,776 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=150, currTerm=150.

2024-05-25 06:43:42,779 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=150, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:43:42,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=156, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 06:43:42,785 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:43:42,787 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:43:42,791 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=157, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:43:42,793 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:43:42,793 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:43:42,796 INFO onLeaderStart: term=150.

2024-05-25 06:43:42,802 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=156, currTerm=156.

2024-05-25 06:43:42,810 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 06:43:42,810 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:43:42,812 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:43:42,828 INFO onLeaderStart: term=157.

2024-05-25 06:43:42,830 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,837 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:42,839 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:43:47,362 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 06:43:47,363 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 06:43:47,363 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 06:43:47,364 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 06:53:41,520 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=150, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:53:42,249 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 06:53:42,249 INFO Node <naming_persistent_service/nacos1:7848> term 156 start preVote.

2024-05-25 06:53:41,598 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 06:53:41,594 INFO Node <naming_service_metadata/nacos1:7848> term 156 start preVote.

2024-05-25 06:53:41,525 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=157, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 06:53:42,527 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=115, type=Follower] is going to quit

2024-05-25 06:53:42,446 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:53:42,427 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=106, type=Follower] is going to quit

2024-05-25 06:53:42,458 INFO Node <naming_persistent_service/nacos1:7848> term 156 start preVote.

2024-05-25 06:53:42,527 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 06:53:42,531 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=116, type=Follower] is going to quit

2024-05-25 06:53:42,558 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,532 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=156, granted=false.

2024-05-25 06:53:42,567 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=157, currTerm=156, because the leader nacos3:7848's lease is still valid.

2024-05-25 06:53:42,559 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=105, type=Follower] is going to quit

2024-05-25 06:53:42,569 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=157, currTerm=156, because the leader nacos3:7848's lease is still valid.

2024-05-25 06:53:42,559 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,572 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=156, granted=true.

2024-05-25 06:53:42,573 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=156.

2024-05-25 06:53:42,573 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 06:53:42,568 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,568 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=146, term=157], lastLogId=LogId [index=146, term=157].

2024-05-25 06:53:42,569 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=157, currTerm=156, because the leader nacos2:7848's lease is still valid.

2024-05-25 06:53:42,570 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,570 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=143, term=150], lastLogId=LogId [index=143, term=150].

2024-05-25 06:53:42,571 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,593 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=157, currTerm=156.

2024-05-25 06:53:42,597 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,597 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=157, votedFor=nacos1:7848, cost time=23 ms

2024-05-25 06:53:42,598 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=156, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 06:53:42,603 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=157, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 06:53:42,610 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=158, currTerm=157.

2024-05-25 06:53:42,613 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=157, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:53:42,613 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:53:42,614 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,614 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:53:42,616 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=157, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 06:53:42,620 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=158, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 06:53:42,624 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,622 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=151, currTerm=150.

2024-05-25 06:53:42,622 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=156, currTerm=157.

2024-05-25 06:53:42,634 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=156, currTerm=157.

2024-05-25 06:53:42,632 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:53:42,632 INFO onLeaderStart: term=157.

2024-05-25 06:53:42,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=158, votedFor=nacos2:7848, cost time=13 ms

2024-05-25 06:53:42,639 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=156, currTerm=157.

2024-05-25 06:53:42,650 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=156, currTerm=157.

2024-05-25 06:53:42,646 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,646 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,656 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=151, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 06:53:42,660 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 06:53:42,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=151, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 06:54:20,774 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499779859s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 06:54:22,735 INFO Node <naming_instance_metadata/nacos1:7848> term 151 start preVote.

2024-05-25 06:54:22,740 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=151, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 06:54:26,879 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=151, granted=true.

2024-05-25 06:54:27,301 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=151.

2024-05-25 06:54:27,523 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 06:54:27,632 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=152, granted=true, requestLastLogId=LogId [index=144, term=151], lastLogId=LogId [index=144, term=151].

2024-05-25 06:54:27,445 INFO Node <naming_persistent_service_v2/nacos1:7848> term 158 start preVote.

2024-05-25 06:54:28,142 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=159, currTerm=158, granted=true, requestLastLogId=LogId [index=147, term=158], lastLogId=LogId [index=147, term=158].

2024-05-25 06:54:28,268 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=152, votedFor=nacos1:7848, cost time=331 ms

2024-05-25 06:54:28,339 WARN Node <naming_instance_metadata/nacos1:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 3.269303733s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-25 06:54:28,830 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=158, granted=true.

2024-05-25 06:54:28,976 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=158.

2024-05-25 06:54:29,678 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=151, currTerm=152.

2024-05-25 06:54:29,885 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=152, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:54:30,082 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:54:29,894 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=159, votedFor=nacos1:7848, cost time=210 ms

2024-05-25 06:54:30,160 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 06:54:30,398 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=159, currTerm=159.

2024-05-25 06:54:30,455 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=157], lastLogId=LogId [index=148, term=157].

2024-05-25 06:54:30,261 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=158, currTerm=157, because the leader nacos1:7848's lease is still valid.

2024-05-25 06:54:30,186 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:54:30,752 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=158, currTerm=157, because the leader nacos1:7848's lease is still valid.

2024-05-25 06:54:30,866 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=158, currTerm=157, because the leader nacos1:7848's lease is still valid.

2024-05-25 06:54:31,452 INFO onLeaderStart: term=152.

2024-05-25 06:54:32,179 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 06:54:32,328 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=158, currTerm=157.

2024-05-25 06:54:32,456 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=157, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 06:54:32,714 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=158, votedFor=0.0.0.0:0, cost time=197 ms

2024-05-25 06:54:33,035 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=158, votedFor=nacos2:7848, cost time=179 ms

2024-05-25 06:54:33,138 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 06:54:33,156 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 06:54:33,192 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 06:54:33,896 INFO onLeaderStart: term=159.

2024-05-25 06:54:44,526 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499916651s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 06:54:44,727 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499797456s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-25 07:12:50,231 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:12:51,250 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 07:12:50,240 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=157, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:12:50,247 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=152, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:12:51,043 INFO Node <naming_persistent_service/nacos1:7848> term 158 start preVote.

2024-05-25 07:12:51,261 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:12:51,259 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=148, lastLogIncluded=0, lastLogIndex=148, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=117, type=Follower] is going to quit

2024-05-25 07:12:51,258 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:12:51,259 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=148, lastLogIncluded=0, lastLogIndex=148, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=101, type=Follower] is going to quit

2024-05-25 07:12:51,265 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=148, lastLogIncluded=0, lastLogIndex=148, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=102, type=Follower] is going to quit

2024-05-25 07:12:51,259 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:12:51,261 INFO Node <naming_persistent_service/nacos1:7848> term 158 start preVote.

2024-05-25 07:12:51,272 INFO Node <naming_persistent_service/nacos1:7848> term 158 start preVote.

2024-05-25 07:12:51,261 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=108, type=Follower] is going to quit

2024-05-25 07:12:51,278 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=107, type=Follower] is going to quit

2024-05-25 07:12:51,278 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,263 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=148, lastLogIncluded=0, lastLogIndex=148, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=118, type=Follower] is going to quit

2024-05-25 07:12:51,284 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=160, currTerm=159.

2024-05-25 07:12:51,287 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,288 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,288 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,289 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=157], lastLogId=LogId [index=148, term=157].

2024-05-25 07:12:51,292 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,292 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=160, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 07:12:51,295 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-25 07:12:51,296 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=157], lastLogId=LogId [index=148, term=157].

2024-05-25 07:12:51,300 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=153, currTerm=152.

2024-05-25 07:12:51,300 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=157], lastLogId=LogId [index=148, term=157].

2024-05-25 07:12:51,304 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=158, granted=false.

2024-05-25 07:12:51,316 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=158, granted=false.

2024-05-25 07:12:51,321 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=157], lastLogId=LogId [index=148, term=157].

2024-05-25 07:12:51,324 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=158, granted=false.

2024-05-25 07:12:51,325 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=153, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-25 07:12:51,324 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=160, votedFor=nacos3:7848, cost time=24 ms

2024-05-25 07:12:51,336 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=158, currTerm=157.

2024-05-25 07:12:51,338 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=158, granted=true.

2024-05-25 07:12:51,350 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=158.

2024-05-25 07:12:51,340 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=153, currTerm=153.

2024-05-25 07:12:51,344 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=148, term=159], lastLogId=LogId [index=148, term=159].

2024-05-25 07:12:51,358 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=148, term=159], lastLogId=LogId [index=148, term=159].

2024-05-25 07:12:51,354 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 07:12:51,354 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 07:12:51,355 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=153, currTerm=153, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-25 07:12:51,369 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 07:12:51,385 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=158, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-25 07:12:51,386 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=158, currTerm=158.

2024-05-25 07:12:51,387 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,398 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=153, votedFor=nacos2:7848, cost time=29 ms

2024-05-25 07:12:51,401 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,402 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,402 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,404 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=159, votedFor=nacos1:7848, cost time=32 ms

2024-05-25 07:12:51,408 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=158, votedFor=nacos3:7848, cost time=20 ms

2024-05-25 07:12:51,410 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,410 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,410 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:12:51,453 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 07:12:51,457 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 07:12:51,459 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 07:12:51,460 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 07:12:51,477 INFO onLeaderStart: term=159.

2024-05-25 07:13:42,226 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_149.

2024-05-25 07:13:42,276 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_149.

2024-05-25 07:13:42,274 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-25 07:13:42,272 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_149.

2024-05-25 07:13:42,511 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_149.

2024-05-25 07:13:42,452 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-25 07:13:43,597 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_146.

2024-05-25 07:13:43,793 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_150.

2024-05-25 07:13:43,805 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_145.

2024-05-25 07:13:43,737 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_142.

2024-05-25 07:13:43,890 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_150.

2024-05-25 07:13:43,956 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 146 to 147, cost 2 ms.

2024-05-25 07:13:44,152 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_146.

2024-05-25 07:13:44,320 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 146 to 147, cost 59 ms.

2024-05-25 07:13:44,525 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 145 to 146, cost 2 ms.

2024-05-25 07:13:44,871 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 142 to 143, cost 160 ms.

2024-05-25 07:29:16,659 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:29:17,429 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=103, type=Follower] is going to quit

2024-05-25 07:29:17,443 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=102, type=Follower] is going to quit

2024-05-25 07:29:17,397 INFO Node <naming_instance_metadata/nacos1:7848> term 153 start preVote.

2024-05-25 07:29:17,397 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 07:29:16,661 INFO Node <naming_service_metadata/nacos1:7848> term 158 start preVote.

2024-05-25 07:29:17,397 INFO Node <naming_persistent_service_v2/nacos1:7848> term 160 start preVote.

2024-05-25 07:29:17,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 07:29:17,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=153, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 07:29:17,429 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:29:17,464 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 07:29:17,745 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 07:29:17,748 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=158, granted=true.

2024-05-25 07:29:17,749 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=158.

2024-05-25 07:29:17,748 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=160, granted=true.

2024-05-25 07:29:17,786 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=160.

2024-05-25 07:29:17,792 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 07:29:17,788 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=159, votedFor=nacos1:7848, cost time=31 ms

2024-05-25 07:29:17,804 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=161, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 07:29:17,812 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 07:29:17,815 INFO The channel nacos2:7848 has successfully established.

2024-05-25 07:29:17,816 INFO Peer nacos2:7848 is connected.

2024-05-25 07:29:17,833 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 07:29:17,834 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=153, granted=true.

2024-05-25 07:29:17,835 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=153.

2024-05-25 07:29:17,834 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 07:29:17,836 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 07:29:17,841 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=161, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 07:29:17,845 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 07:29:17,848 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 07:29:17,853 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=158, currTerm=159.

2024-05-25 07:29:17,870 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=154, votedFor=nacos1:7848, cost time=33 ms

2024-05-25 07:29:17,872 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 07:29:17,861 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=160, currTerm=161.

2024-05-25 07:29:17,874 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=154, currTerm=154, granted=true, requestLastLogId=LogId [index=146, term=153], lastLogId=LogId [index=146, term=153].

2024-05-25 07:29:17,874 INFO onLeaderStart: term=159.

2024-05-25 07:29:17,876 INFO onLeaderStart: term=161.

2024-05-25 07:29:17,877 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=154, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 07:29:17,878 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 07:29:17,881 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 07:29:17,893 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 07:29:17,895 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 07:29:17,895 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,904 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 07:29:17,897 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,904 INFO onLeaderStart: term=154.

2024-05-25 07:29:17,916 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 07:29:17,917 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,917 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=150, term=159], lastLogId=LogId [index=150, term=159].

2024-05-25 07:29:17,918 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 07:29:17,918 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=150, term=159], lastLogId=LogId [index=150, term=159].

2024-05-25 07:29:17,918 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,925 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=160, currTerm=159.

2024-05-25 07:29:17,933 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=160, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 07:29:17,940 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=160, votedFor=nacos3:7848, cost time=5 ms

2024-05-25 07:29:17,942 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,946 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:17,947 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:29:22,809 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 07:29:22,810 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 07:29:22,810 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 07:29:22,810 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 07:46:16,545 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:46:17,406 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 07:46:17,387 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=154, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:46:17,424 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=109, type=Follower] is going to quit

2024-05-25 07:46:17,425 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=110, type=Follower] is going to quit

2024-05-25 07:46:17,427 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,429 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:46:17,429 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=103, type=Follower] is going to quit

2024-05-25 07:46:17,431 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=104, type=Follower] is going to quit

2024-05-25 07:46:17,432 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,480 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=150, term=159], lastLogId=LogId [index=150, term=159].

2024-05-25 07:46:17,297 INFO Node <naming_persistent_service/nacos1:7848> term 160 start preVote.

2024-05-25 07:46:17,387 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=161, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 07:46:17,549 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=155, currTerm=154, granted=true, requestLastLogId=LogId [index=147, term=154], lastLogId=LogId [index=147, term=154].

2024-05-25 07:46:17,425 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:46:17,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=119, type=Follower] is going to quit

2024-05-25 07:46:17,671 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=120, type=Follower] is going to quit

2024-05-25 07:46:17,579 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 07:46:17,583 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=160, currTerm=159.

2024-05-25 07:46:17,651 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_151.

2024-05-25 07:46:17,683 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_151.

2024-05-25 07:46:17,651 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_147.

2024-05-25 07:46:17,652 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-25 07:46:17,689 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-25 07:46:17,654 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_150.

2024-05-25 07:46:17,697 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_150.

2024-05-25 07:46:17,652 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=155, currTerm=154.

2024-05-25 07:46:17,652 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=160, granted=true.

2024-05-25 07:46:17,715 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=160.

2024-05-25 07:46:17,678 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,681 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=162, currTerm=161, granted=true, requestLastLogId=LogId [index=150, term=161], lastLogId=LogId [index=150, term=161].

2024-05-25 07:46:17,764 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,688 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_147.

2024-05-25 07:46:17,689 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_150.

2024-05-25 07:46:17,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=160, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 07:46:17,769 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,709 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_149.

2024-05-25 07:46:17,773 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,722 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=155, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 07:46:17,777 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,740 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 07:46:17,750 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_149.

2024-05-25 07:46:17,760 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=161, votedFor=nacos1:7848, cost time=19 ms

2024-05-25 07:46:17,769 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-25 07:46:17,784 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 147 to 151, cost 7 ms.

2024-05-25 07:46:17,773 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=150, term=159], lastLogId=LogId [index=150, term=159].

2024-05-25 07:46:17,799 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 147 to 150, cost 2 ms.

2024-05-25 07:46:17,773 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-25 07:46:17,785 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 07:46:17,803 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=161, currTerm=161, granted=true, requestLastLogId=LogId [index=151, term=160], lastLogId=LogId [index=151, term=160].

2024-05-25 07:46:17,804 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=161, currTerm=161.

2024-05-25 07:46:17,798 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 143 to 147, cost 0 ms.

2024-05-25 07:46:17,800 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 146 to 150, cost 0 ms.

2024-05-25 07:46:17,803 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=155, votedFor=nacos3:7848, cost time=23 ms

2024-05-25 07:46:17,811 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=155, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 07:46:17,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=160, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 07:46:17,808 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=162, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 07:46:17,811 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:17,823 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=162, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 07:46:17,826 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 07:46:21,518 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 07:46:21,519 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 07:46:21,519 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 07:46:22,355 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 07:53:26,831 INFO Node <naming_service_metadata/nacos1:7848> term 160 start preVote.

2024-05-25 07:53:26,833 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 07:53:27,269 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=162, currTerm=161, because the leader nacos2:7848's lease is still valid.

2024-05-25 07:53:27,356 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=160, granted=false.

2024-05-25 07:53:27,411 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=161, currTerm=160, because the leader nacos3:7848's lease is still valid.

2024-05-25 07:53:27,414 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=161, currTerm=160, because the leader nacos3:7848's lease is still valid.

2024-05-25 07:53:27,420 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-25 07:53:27,422 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=161, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 07:53:27,430 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=161, currTerm=160, because the leader nacos3:7848's lease is still valid.

2024-05-25 07:53:27,431 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=162, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 07:53:27,437 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=162, votedFor=nacos3:7848, cost time=5 ms

2024-05-25 07:53:27,448 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=156, currTerm=155, because the leader nacos3:7848's lease is still valid.

2024-05-25 07:53:27,452 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=160, granted=true.

2024-05-25 07:53:27,468 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=160.

2024-05-25 07:53:27,478 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 07:53:27,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=161, votedFor=nacos1:7848, cost time=4 ms

2024-05-25 07:53:27,512 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=163, currTerm=162, because the leader nacos3:7848's lease is still valid.

2024-05-25 07:53:27,517 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=163, currTerm=162.

2024-05-25 07:53:27,518 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 07:53:27,531 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=163, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 07:53:27,546 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=161, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 07:53:27,547 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 07:53:27,547 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=163, votedFor=nacos2:7848, cost time=14 ms

2024-05-25 07:53:27,549 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 07:53:27,555 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 07:53:27,571 INFO onLeaderStart: term=161.

2024-05-25 08:04:29,972 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 08:04:29,971 INFO Node <naming_instance_metadata/nacos1:7848> term 155 start preVote.

2024-05-25 08:04:29,655 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=161, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 08:04:30,487 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=152, lastLogIncluded=0, lastLogIndex=152, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=105, type=Follower] is going to quit

2024-05-25 08:04:29,971 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 08:04:29,972 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=163, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 08:04:29,972 INFO Node <naming_persistent_service/nacos1:7848> term 162 start preVote.

2024-05-25 08:04:30,566 INFO Node <naming_persistent_service/nacos1:7848> term 162 start preVote.

2024-05-25 08:04:30,491 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=152, lastLogIncluded=0, lastLogIndex=152, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=106, type=Follower] is going to quit

2024-05-25 08:04:29,971 INFO Node <naming_persistent_service_v2/nacos1:7848> term 163 start preVote.

2024-05-25 08:04:30,569 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 08:04:30,588 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=162, currTerm=161, granted=true, requestLastLogId=LogId [index=152, term=161], lastLogId=LogId [index=152, term=161].

2024-05-25 08:04:30,603 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=163, granted=true, requestLastLogId=LogId [index=152, term=163], lastLogId=LogId [index=152, term=163].

2024-05-25 08:04:30,604 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:04:30,629 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=155, granted=true.

2024-05-25 08:04:30,638 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=163, granted=false.

2024-05-25 08:04:30,630 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-25 08:04:30,660 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=155.

2024-05-25 08:04:30,665 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=164, currTerm=163.

2024-05-25 08:04:30,638 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=162, granted=true.

2024-05-25 08:04:30,703 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=162.

2024-05-25 08:04:30,710 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 08:04:30,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=162, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 08:04:30,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 08:04:30,710 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-25 08:04:30,714 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-25 08:04:30,721 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=164, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-25 08:04:30,725 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=163, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 08:04:30,726 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=162, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 08:04:30,727 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=156, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 08:04:30,728 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 08:04:30,731 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=162, currTerm=162, granted=true, requestLastLogId=LogId [index=152, term=161], lastLogId=LogId [index=152, term=161].

2024-05-25 08:04:30,737 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=164, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 08:04:30,740 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-25 08:04:30,746 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 08:04:30,761 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=163, currTerm=163, granted=true, requestLastLogId=LogId [index=153, term=162], lastLogId=LogId [index=153, term=162].

2024-05-25 08:04:30,754 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=163, currTerm=164.

2024-05-25 08:04:30,759 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 08:04:30,762 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 08:04:30,771 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=163, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 08:04:30,773 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 08:04:30,776 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 08:04:30,783 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=163, currTerm=164.

2024-05-25 08:04:30,784 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=156, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 08:04:30,796 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 08:04:30,797 INFO onLeaderStart: term=163.

2024-05-25 08:04:30,798 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 08:04:30,801 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 08:04:30,803 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=156, currTerm=156.

2024-05-25 08:04:30,814 INFO onLeaderStart: term=156.

2024-05-25 08:04:30,815 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:04:30,817 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 08:16:16,475 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_154.

2024-05-25 08:16:16,476 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_154.

2024-05-25 08:16:16,475 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-25 08:16:16,477 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-25 08:16:16,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_149.

2024-05-25 08:16:16,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_153.

2024-05-25 08:16:16,479 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_149.

2024-05-25 08:16:16,479 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_153.

2024-05-25 08:16:16,482 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_151.

2024-05-25 08:16:16,483 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-25 08:16:16,484 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_147.

2024-05-25 08:16:16,484 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_150.

2024-05-25 08:16:16,490 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 151 to 152, cost 0 ms.

2024-05-25 08:16:16,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 150 to 151, cost 0 ms.

2024-05-25 08:16:16,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 150 to 151, cost 0 ms.

2024-05-25 08:16:16,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 147 to 148, cost 0 ms.

2024-05-25 08:22:54,009 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 08:22:54,009 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=156, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 08:22:54,009 INFO Node <naming_persistent_service_v2/nacos1:7848> term 164 start preVote.

2024-05-25 08:22:53,269 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=163, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 08:22:54,111 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=154, lastLogIncluded=0, lastLogIndex=154, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=105, type=Follower] is going to quit

2024-05-25 08:22:54,113 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=154, lastLogIncluded=0, lastLogIndex=154, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=104, type=Follower] is going to quit

2024-05-25 08:22:53,273 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 08:22:53,271 INFO Node <naming_service_metadata/nacos1:7848> term 162 start preVote.

2024-05-25 08:22:54,101 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=149, lastLogIncluded=0, lastLogIndex=149, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=112, type=Follower] is going to quit

2024-05-25 08:22:54,178 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=149, lastLogIncluded=0, lastLogIndex=149, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=111, type=Follower] is going to quit

2024-05-25 08:22:54,103 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 08:22:54,124 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 08:22:54,163 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=153, term=164], lastLogId=LogId [index=153, term=164].

2024-05-25 08:22:54,189 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=163, currTerm=162, because the leader nacos3:7848's lease is still valid.

2024-05-25 08:22:54,164 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,164 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=163, granted=true, requestLastLogId=LogId [index=154, term=163], lastLogId=LogId [index=154, term=163].

2024-05-25 08:22:54,164 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,185 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=157, currTerm=156, granted=true, requestLastLogId=LogId [index=149, term=156], lastLogId=LogId [index=149, term=156].

2024-05-25 08:22:54,189 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=164, granted=true.

2024-05-25 08:22:54,202 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=163, currTerm=162, because the leader nacos3:7848's lease is still valid.

2024-05-25 08:22:54,260 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=163, currTerm=162.

2024-05-25 08:22:54,262 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 08:22:54,253 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,255 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,256 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=164.

2024-05-25 08:22:54,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=163, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 08:22:54,282 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=164, currTerm=163.

2024-05-25 08:22:54,300 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=164, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 08:22:54,301 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=163, votedFor=nacos2:7848, cost time=14 ms

2024-05-25 08:22:54,300 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=165, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 08:22:54,302 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=157, currTerm=156.

2024-05-25 08:22:54,302 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=164, currTerm=165.

2024-05-25 08:22:54,302 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=162, currTerm=163.

2024-05-25 08:22:54,304 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 08:22:54,308 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=162, currTerm=163.

2024-05-25 08:22:54,308 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=165, currTerm=165.

2024-05-25 08:22:54,308 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=164, votedFor=nacos3:7848, cost time=7 ms

2024-05-25 08:22:54,308 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=157, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-25 08:22:54,318 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,325 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=157, votedFor=nacos3:7848, cost time=12 ms

2024-05-25 08:22:54,326 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,326 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,326 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:22:54,326 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 08:34:35,714 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 08:34:35,716 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 08:34:35,716 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 08:34:35,757 INFO Connection disconnected: /172.25.0.4:49660

2024-05-25 08:46:16,477 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-25 08:46:16,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-25 08:46:16,479 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-25 08:46:16,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-25 08:46:16,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_154.

2024-05-25 08:46:16,479 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-25 08:46:16,480 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-25 08:46:16,481 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_153.

2024-05-25 08:46:16,481 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_154.

2024-05-25 08:46:16,484 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_154.

2024-05-25 08:46:16,490 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_149.

2024-05-25 08:46:16,490 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-25 08:46:16,490 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 151 to 154, cost 0 ms.

2024-05-25 08:46:16,494 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 152 to 155, cost 0 ms.

2024-05-25 08:46:16,497 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 148 to 150, cost 0 ms.

2024-05-25 08:46:16,497 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 151 to 154, cost 0 ms.

2024-05-25 08:52:54,052 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 08:52:54,068 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 08:52:54,113 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 08:52:54,162 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 08:52:54,290 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 08:52:54,291 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 08:52:54,314 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 08:52:54,334 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 08:52:54,334 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 08:52:59,198 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 08:52:59,199 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 08:52:59,200 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 08:52:59,200 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 08:52:59,335 INFO Connection disconnected: /172.25.0.5:59552

2024-05-25 08:52:59,339 INFO Connection disconnected: /172.25.0.4:48748

2024-05-25 08:52:59,340 INFO Connection disconnected: /172.25.0.3:36412

2024-05-25 09:20:30,901 INFO Node <naming_persistent_service/nacos1:7848> term 164 start preVote.

2024-05-25 09:20:30,901 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 09:20:30,939 INFO Node <naming_instance_metadata/nacos1:7848> term 157 start preVote.

2024-05-25 09:20:30,944 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=163, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 09:20:31,620 INFO Node <naming_persistent_service_v2/nacos1:7848> term 165 start preVote.

2024-05-25 09:20:30,944 INFO Node <naming_service_metadata/nacos1:7848> term 163 start preVote.

2024-05-25 09:20:30,944 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=157, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 09:20:31,670 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 09:20:31,674 INFO Node <naming_service_metadata/nacos1:7848> term 163 start preVote.

2024-05-25 09:20:31,676 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 150 to 151, cost 0 ms.

2024-05-25 09:20:31,676 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 154 to 155, cost 0 ms.

2024-05-25 09:20:31,621 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 09:20:31,964 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 09:20:31,985 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 09:20:31,966 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 09:20:31,676 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 154 to 155, cost 0 ms.

2024-05-25 09:20:31,968 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 09:20:31,676 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 155 to 156, cost 0 ms.

2024-05-25 09:20:31,968 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 09:20:31,967 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 09:20:31,986 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 09:20:32,026 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 09:20:32,035 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 09:20:32,073 INFO The channel nacos2:7848 has successfully established.

2024-05-25 09:20:32,063 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 09:20:32,075 INFO The channel nacos2:7848 has successfully established.

2024-05-25 09:20:32,066 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 09:20:32,079 INFO The channel nacos3:7848 has successfully established.

2024-05-25 09:20:32,071 INFO The channel nacos2:7848 has successfully established.

2024-05-25 09:20:32,074 INFO Peer nacos2:7848 is connected.

2024-05-25 09:20:32,074 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=158, currTerm=157, because the leader nacos3:7848's lease is still valid.

2024-05-25 09:20:32,079 INFO Peer nacos2:7848 is connected.

2024-05-25 09:20:32,086 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 09:20:32,098 INFO The channel nacos3:7848 has successfully established.

2024-05-25 09:20:32,081 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=165, granted=true.

2024-05-25 09:20:32,100 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=165.

2024-05-25 09:20:32,087 INFO Peer nacos3:7848 is connected.

2024-05-25 09:20:32,090 INFO Peer nacos2:7848 is connected.

2024-05-25 09:20:32,091 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=165, currTerm=164, because the leader nacos3:7848's lease is still valid.

2024-05-25 09:20:32,093 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 09:20:32,106 INFO The channel nacos3:7848 has successfully established.

2024-05-25 09:20:32,094 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=158, currTerm=157.

2024-05-25 09:20:32,095 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 09:20:32,108 INFO The channel nacos2:7848 has successfully established.

2024-05-25 09:20:32,110 INFO Peer nacos2:7848 is connected.

2024-05-25 09:20:32,101 INFO Peer nacos3:7848 is connected.

2024-05-25 09:20:32,102 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 09:20:32,103 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 09:20:32,105 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=165, currTerm=164.

2024-05-25 09:20:32,107 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=157, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:20:32,108 INFO Peer nacos3:7848 is connected.

2024-05-25 09:20:32,110 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 09:20:32,111 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=166, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 09:20:32,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:20:32,116 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 09:20:32,117 INFO The channel nacos1:7848 has successfully established.

2024-05-25 09:20:32,115 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=164, currTerm=163, because the leader nacos2:7848's lease is still valid.

2024-05-25 09:20:32,115 INFO The channel nacos3:7848 has successfully established.

2024-05-25 09:20:32,115 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=158, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 09:20:32,116 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:20:32,118 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=164, currTerm=163.

2024-05-25 09:20:32,119 INFO Peer nacos3:7848 is connected.

2024-05-25 09:20:32,122 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=165, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-25 09:20:32,119 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=158, granted=true, requestLastLogId=LogId [index=150, term=157], lastLogId=LogId [index=150, term=157].

2024-05-25 09:20:32,120 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=166, currTerm=166, granted=true, requestLastLogId=LogId [index=154, term=165], lastLogId=LogId [index=154, term=165].

2024-05-25 09:20:32,121 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=163, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:20:32,125 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=158, currTerm=158, granted=true, requestLastLogId=LogId [index=150, term=157], lastLogId=LogId [index=150, term=157].

2024-05-25 09:20:32,127 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=166, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 09:20:32,131 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 09:20:32,131 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 09:20:32,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=164, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 09:20:32,129 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=157, currTerm=158.

2024-05-25 09:20:32,131 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=165, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 09:20:32,137 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=165, currTerm=165, granted=true, requestLastLogId=LogId [index=155, term=164], lastLogId=LogId [index=155, term=164].

2024-05-25 09:20:32,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=164, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 09:20:32,140 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 09:20:32,145 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=164, currTerm=165.

2024-05-25 09:20:32,145 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=163, currTerm=164.

2024-05-25 09:20:32,147 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=163, currTerm=164.

2024-05-25 09:20:32,147 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=163, currTerm=164.

2024-05-25 09:20:32,146 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=158, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 09:20:32,147 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=164, currTerm=165.

2024-05-25 09:20:32,148 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=163, currTerm=164.

2024-05-25 09:20:32,152 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=157, currTerm=158.

2024-05-25 09:20:32,159 INFO onLeaderStart: term=166.

2024-05-25 09:36:58,223 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=166, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 09:36:58,594 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=121, type=Follower] is going to quit

2024-05-25 09:36:58,599 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=122, type=Follower] is going to quit

2024-05-25 09:36:58,465 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 09:36:58,465 INFO Node <naming_persistent_service/nacos1:7848> term 165 start preVote.

2024-05-25 09:36:58,464 INFO Node <naming_instance_metadata/nacos1:7848> term 158 start preVote.

2024-05-25 09:36:58,597 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 09:36:58,627 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=166, currTerm=165, because the leader nacos2:7848's lease is still valid.

2024-05-25 09:36:58,627 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=155, term=166], lastLogId=LogId [index=155, term=166].

2024-05-25 09:36:58,630 INFO Node <naming_service_metadata/nacos1:7848> term 164 start preVote.

2024-05-25 09:36:58,654 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=155, term=164], lastLogId=LogId [index=155, term=164].

2024-05-25 09:36:58,645 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=159, currTerm=158.

2024-05-25 09:36:58,648 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 09:36:58,652 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=166, currTerm=165.

2024-05-25 09:36:58,653 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:36:58,653 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=155, term=166], lastLogId=LogId [index=155, term=166].

2024-05-25 09:36:58,715 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:36:58,655 INFO Node <naming_service_metadata/nacos1:7848> term 164 start preVote.

2024-05-25 09:36:58,700 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 09:36:58,731 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 165, expect=164.

2024-05-25 09:36:58,702 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:36:58,703 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=159, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-25 09:36:58,715 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=166, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 09:36:58,716 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=167, currTerm=166.

2024-05-25 09:36:58,737 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=165, currTerm=166.

2024-05-25 09:36:58,745 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=165, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 09:36:58,746 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=165, currTerm=165.

2024-05-25 09:36:58,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-25 09:36:58,746 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=159, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 09:36:58,748 WARN Node <naming_instance_metadata/nacos1:7848> raise term 159 when get lastLogId.

2024-05-25 09:36:58,746 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=166, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 09:36:58,749 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=159, currTerm=159, granted=true, requestLastLogId=LogId [index=151, term=158], lastLogId=LogId [index=151, term=158].

2024-05-25 09:36:58,746 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=167, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 09:36:58,747 WARN Node <naming_service_metadata/nacos1:7848> raise term 165 when get lastLogId.

2024-05-25 09:36:58,749 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=166, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 09:36:58,750 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:36:58,751 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=158, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:36:58,754 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=165, currTerm=166.

2024-05-25 09:36:58,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=167, votedFor=nacos3:7848, cost time=10 ms

2024-05-25 09:36:58,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=165, votedFor=nacos2:7848, cost time=13 ms

2024-05-25 09:36:58,763 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=167, currTerm=167.

2024-05-25 09:36:58,777 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=164, currTerm=165.

2024-05-25 09:36:58,782 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:36:58,782 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:36:58,800 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 09:54:28,998 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 09:54:29,719 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=159, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 09:54:29,043 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=166, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 09:54:29,036 INFO Node <naming_persistent_service/nacos1:7848> term 166 start preVote.

2024-05-25 09:54:29,035 INFO Node <naming_instance_metadata/nacos1:7848> term 159 start preVote.

2024-05-25 09:54:29,831 INFO Node <naming_instance_metadata/nacos1:7848> term 159 start preVote.

2024-05-25 09:54:29,830 INFO Node <naming_persistent_service/nacos1:7848> term 166 start preVote.

2024-05-25 09:54:29,850 INFO Node <naming_service_metadata/nacos1:7848> term 165 start preVote.

2024-05-25 09:54:29,850 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 09:54:29,852 INFO Node <naming_service_metadata/nacos1:7848> term 165 start preVote.

2024-05-25 09:54:29,855 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=166, granted=true.

2024-05-25 09:54:29,857 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=166.

2024-05-25 09:54:29,863 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:29,001 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 09:54:29,999 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=167, votedFor=nacos1:7848, cost time=131 ms

2024-05-25 09:54:30,010 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-25 09:54:30,123 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-25 09:54:30,011 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_157.

2024-05-25 09:54:30,017 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_156.

2024-05-25 09:54:30,132 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_157.

2024-05-25 09:54:30,066 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=168, currTerm=167, because the leader nacos3:7848's lease is still valid.

2024-05-25 09:54:30,130 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_156.

2024-05-25 09:54:30,066 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=165, granted=true.

2024-05-25 09:54:30,152 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=165.

2024-05-25 09:54:30,087 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-25 09:54:30,175 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-25 09:54:30,132 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-25 09:54:30,147 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=166, currTerm=167.

2024-05-25 09:54:30,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-25 09:54:30,154 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_154.

2024-05-25 09:54:30,185 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 155 to 155, cost 0 ms.

2024-05-25 09:54:30,158 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 09:54:30,173 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 09:54:30,209 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 155 to 155, cost 0 ms.

2024-05-25 09:54:30,174 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,179 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-25 09:54:30,179 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=167, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 09:54:30,209 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 156 to 156, cost 0 ms.

2024-05-25 09:54:30,216 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=166, currTerm=166, granted=true, requestLastLogId=LogId [index=156, term=165], lastLogId=LogId [index=156, term=165].

2024-05-25 09:54:30,219 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 09:54:30,234 INFO The channel nacos3:7848 has successfully established.

2024-05-25 09:54:30,220 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=168, currTerm=167.

2024-05-25 09:54:30,236 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=167, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 09:54:30,229 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 09:54:30,245 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 09:54:30,248 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=168, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 09:54:30,232 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 09:54:30,252 INFO The channel nacos2:7848 has successfully established.

2024-05-25 09:54:30,253 INFO Peer nacos2:7848 is connected.

2024-05-25 09:54:30,235 INFO Peer nacos3:7848 is connected.

2024-05-25 09:54:30,238 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 151 to 151, cost 1 ms.

2024-05-25 09:54:30,246 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=159, granted=true.

2024-05-25 09:54:30,261 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=159.

2024-05-25 09:54:30,263 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=159, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 09:54:30,252 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=166, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 09:54:30,254 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=168, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 09:54:30,259 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 09:54:30,264 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,266 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 09:54:30,268 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 09:54:30,267 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=160, votedFor=nacos1:7848, cost time=5 ms

2024-05-25 09:54:30,269 INFO onLeaderStart: term=167.

2024-05-25 09:54:30,271 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,271 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=166, currTerm=166.

2024-05-25 09:54:30,272 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,273 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,274 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 09:54:30,285 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 09:54:30,296 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=160, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 09:54:30,297 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 09:54:30,299 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 09:54:30,312 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 09:54:30,314 INFO onLeaderStart: term=160.

2024-05-25 10:10:58,538 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 10:10:58,654 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 10:10:58,784 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=160, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:10:59,586 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=113, type=Follower] is going to quit

2024-05-25 10:10:58,786 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=167, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:10:59,282 INFO Node <naming_service_metadata/nacos1:7848> term 166 start preVote.

2024-05-25 10:10:59,587 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:10:59,588 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=114, type=Follower] is going to quit

2024-05-25 10:10:59,590 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:10:59,589 INFO Node <naming_service_metadata/nacos1:7848> term 166 start preVote.

2024-05-25 10:10:59,589 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=107, type=Follower] is going to quit

2024-05-25 10:10:59,596 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=108, type=Follower] is going to quit

2024-05-25 10:10:59,596 INFO Node <naming_persistent_service_v2/nacos1:7848> term 168 start preVote.

2024-05-25 10:10:59,596 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 10:10:59,597 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=166, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:10:59,605 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 10:10:59,607 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 10:10:59,615 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,615 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,621 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=161, currTerm=160, granted=true, requestLastLogId=LogId [index=153, term=160], lastLogId=LogId [index=153, term=160].

2024-05-25 10:10:59,624 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=169, currTerm=168, because the leader nacos2:7848's lease is still valid.

2024-05-25 10:10:59,625 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=168, currTerm=167, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-25 10:10:59,638 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,636 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 10:10:59,640 INFO The channel nacos3:7848 has successfully established.

2024-05-25 10:10:59,641 INFO Peer nacos3:7848 is connected.

2024-05-25 10:10:59,640 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=166, granted=true.

2024-05-25 10:10:59,642 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=166.

2024-05-25 10:10:59,644 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=166, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:10:59,655 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 10:10:59,702 INFO The channel nacos2:7848 has successfully established.

2024-05-25 10:10:59,720 INFO Peer nacos2:7848 is connected.

2024-05-25 10:10:59,720 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=168, currTerm=167, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-25 10:10:59,723 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,728 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=168, currTerm=167, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-25 10:10:59,736 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=168, currTerm=167.

2024-05-25 10:10:59,728 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=169, currTerm=168.

2024-05-25 10:10:59,732 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=167, votedFor=nacos1:7848, cost time=86 ms

2024-05-25 10:10:59,736 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=161, currTerm=160.

2024-05-25 10:10:59,745 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=168, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 10:10:59,749 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:10:59,757 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:10:59,766 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:10:59,771 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=168, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-25 10:10:59,771 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=169, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-25 10:10:59,777 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=168, currTerm=169.

2024-05-25 10:10:59,775 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,777 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=161, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-25 10:10:59,783 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=161, currTerm=161, granted=true, requestLastLogId=LogId [index=153, term=160], lastLogId=LogId [index=153, term=160].

2024-05-25 10:10:59,784 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,788 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=168, votedFor=nacos3:7848, cost time=13 ms

2024-05-25 10:10:59,788 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=167, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:10:59,788 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=169, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 10:10:59,791 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=168, currTerm=169.

2024-05-25 10:10:59,789 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=168, currTerm=168.

2024-05-25 10:10:59,793 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,790 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:10:59,794 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=161, votedFor=nacos3:7848, cost time=10 ms

2024-05-25 10:10:59,804 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,803 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:10:59,807 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:10:59,811 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 10:10:59,837 INFO onLeaderStart: term=167.

2024-05-25 10:11:03,637 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 10:11:03,639 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 10:11:03,639 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 10:11:03,640 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 10:27:29,288 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=167, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:27:30,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=169, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:27:30,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:27:30,241 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:27:30,063 INFO Node <naming_persistent_service_v2/nacos1:7848> term 169 start preVote.

2024-05-25 10:27:30,066 INFO Node <naming_persistent_service/nacos1:7848> term 168 start preVote.

2024-05-25 10:27:29,544 INFO Node <naming_instance_metadata/nacos1:7848> term 161 start preVote.

2024-05-25 10:27:29,315 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 10:27:30,066 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:27:30,099 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=107, type=Follower] is going to quit

2024-05-25 10:27:30,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=108, type=Follower] is going to quit

2024-05-25 10:27:30,536 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 10:27:30,536 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:27:30,628 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 10:27:30,588 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:27:30,594 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_158.

2024-05-25 10:27:30,631 INFO The channel nacos3:7848 has successfully established.

2024-05-25 10:27:30,646 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_158.

2024-05-25 10:27:30,660 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=169, currTerm=168, because the leader nacos3:7848's lease is still valid.

2024-05-25 10:27:30,670 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-25 10:27:30,712 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=162, currTerm=161, because the leader nacos3:7848's lease is still valid.

2024-05-25 10:27:30,670 INFO Peer nacos3:7848 is connected.

2024-05-25 10:27:30,673 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=168, currTerm=167, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-25 10:27:30,723 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:27:30,676 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-25 10:27:30,731 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-25 10:27:30,677 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_158.

2024-05-25 10:27:30,735 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_158.

2024-05-25 10:27:30,701 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-25 10:27:30,711 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=168, granted=true.

2024-05-25 10:27:30,713 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-25 10:27:30,723 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:27:30,731 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=161, granted=true.

2024-05-25 10:27:30,746 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=161.

2024-05-25 10:27:30,740 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=168.

2024-05-25 10:27:30,744 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=170, currTerm=169, because the leader nacos3:7848's lease is still valid.

2024-05-25 10:27:30,744 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_157.

2024-05-25 10:27:30,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:27:30,753 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-25 10:27:30,751 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:27:30,752 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=169, granted=true.

2024-05-25 10:27:30,764 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=169.

2024-05-25 10:27:30,768 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:27:30,753 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_156.

2024-05-25 10:27:30,761 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 155 to 157, cost 0 ms.

2024-05-25 10:27:30,765 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=168, currTerm=167.

2024-05-25 10:27:30,768 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=169, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:27:30,775 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 156 to 158, cost 0 ms.

2024-05-25 10:27:30,777 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 151 to 153, cost 1 ms.

2024-05-25 10:27:30,779 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=162, votedFor=nacos1:7848, cost time=28 ms

2024-05-25 10:27:30,781 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:27:30,782 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=169, votedFor=nacos1:7848, cost time=31 ms

2024-05-25 10:27:30,784 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 155 to 157, cost 2 ms.

2024-05-25 10:27:30,783 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=162, currTerm=162.

2024-05-25 10:27:30,784 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=169, currTerm=169, granted=true, requestLastLogId=LogId [index=159, term=168], lastLogId=LogId [index=159, term=168].

2024-05-25 10:27:30,786 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:27:30,785 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=170, votedFor=nacos1:7848, cost time=14 ms

2024-05-25 10:27:30,788 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=168, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 10:27:30,789 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=170, currTerm=170.

2024-05-25 10:27:30,801 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=169, currTerm=169.

2024-05-25 10:27:30,804 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=168, votedFor=nacos3:7848, cost time=14 ms

2024-05-25 10:27:30,807 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=168, currTerm=168, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-25 10:27:30,807 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=169, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:27:30,810 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=162, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:27:30,812 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:27:30,812 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:27:30,819 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:27:30,819 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:27:30,826 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=170, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:27:30,827 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:27:30,833 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:27:30,845 INFO onLeaderStart: term=162.

2024-05-25 10:27:30,863 INFO onLeaderStart: term=170.

2024-05-25 10:27:30,866 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:27:30,874 INFO onLeaderStart: term=169.

2024-05-25 10:43:35,150 INFO Node <naming_service_metadata/nacos1:7848> term 168 start preVote.

2024-05-25 10:43:35,180 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=170, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:43:35,371 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=159, lastLogIncluded=0, lastLogIndex=159, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=124, type=Follower] is going to quit

2024-05-25 10:43:35,403 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=159, lastLogIncluded=0, lastLogIndex=159, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=123, type=Follower] is going to quit

2024-05-25 10:43:35,165 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=162, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:43:35,165 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:43:35,165 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=169, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 10:43:35,152 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 10:43:35,403 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:43:35,448 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=160, lastLogIncluded=0, lastLogIndex=160, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=110, type=Follower] is going to quit

2024-05-25 10:43:35,462 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=160, lastLogIncluded=0, lastLogIndex=160, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=109, type=Follower] is going to quit

2024-05-25 10:43:35,449 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 10:43:35,427 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=116, type=Follower] is going to quit

2024-05-25 10:43:35,470 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=117, type=Follower] is going to quit

2024-05-25 10:43:35,454 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:43:35,461 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 10:43:35,471 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=159, term=170], lastLogId=LogId [index=159, term=170].

2024-05-25 10:43:35,473 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=159, term=170], lastLogId=LogId [index=159, term=170].

2024-05-25 10:43:35,493 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=170, currTerm=169, granted=true, requestLastLogId=LogId [index=160, term=169], lastLogId=LogId [index=160, term=169].

2024-05-25 10:43:35,495 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=155, term=162], lastLogId=LogId [index=155, term=162].

2024-05-25 10:43:35,496 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=170, currTerm=169, granted=true, requestLastLogId=LogId [index=160, term=169], lastLogId=LogId [index=160, term=169].

2024-05-25 10:43:35,499 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=171, currTerm=170.

2024-05-25 10:43:35,515 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 10:43:35,518 INFO The channel nacos2:7848 has successfully established.

2024-05-25 10:43:35,517 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=171, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-25 10:43:35,523 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,519 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,520 INFO Peer nacos2:7848 is connected.

2024-05-25 10:43:35,520 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=169, currTerm=168, because the leader nacos3:7848's lease is still valid.

2024-05-25 10:43:35,524 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=170, currTerm=169.

2024-05-25 10:43:35,526 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=163, currTerm=162.

2024-05-25 10:43:35,529 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=168, granted=true.

2024-05-25 10:43:35,531 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=168.

2024-05-25 10:43:35,532 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:43:35,532 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:43:35,535 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=169, currTerm=169.

2024-05-25 10:43:35,542 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=171, votedFor=nacos2:7848, cost time=17 ms

2024-05-25 10:43:35,543 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=171, currTerm=171, granted=true, requestLastLogId=LogId [index=159, term=170], lastLogId=LogId [index=159, term=170].

2024-05-25 10:43:35,544 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=163, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 10:43:35,545 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=170, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-25 10:43:35,545 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,550 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=169, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 10:43:35,548 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,556 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=163, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 10:43:35,558 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,560 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,561 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:43:35,563 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=170, votedFor=nacos2:7848, cost time=17 ms

2024-05-25 10:43:35,569 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=170, currTerm=170.

2024-05-25 10:43:35,571 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 10:44:21,012 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=172, currTerm=171, because the leader nacos2:7848's lease is still valid.

2024-05-25 10:44:39,234 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=163, granted=true, requestLastLogId=LogId [index=156, term=163], lastLogId=LogId [index=156, term=163].

2024-05-25 10:44:39,250 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=164, currTerm=163.

2024-05-25 10:44:39,253 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=163, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 10:44:39,274 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=164, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-25 10:44:39,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=164, votedFor=nacos3:7848, cost time=16 ms

2024-05-25 10:55:30,422 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:55:30,421 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 10:55:30,421 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=170, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 10:55:30,421 INFO Node <naming_instance_metadata/nacos1:7848> term 164 start preVote.

2024-05-25 10:55:30,411 INFO Node <naming_service_metadata/nacos1:7848> term 169 start preVote.

2024-05-25 10:55:30,418 INFO Node <naming_persistent_service_v2/nacos1:7848> term 171 start preVote.

2024-05-25 10:55:30,418 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=169, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 10:55:30,418 INFO Node <naming_persistent_service/nacos1:7848> term 170 start preVote.

2024-05-25 10:55:31,176 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=157, term=164], lastLogId=LogId [index=157, term=164].

2024-05-25 10:55:31,402 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=157, term=164], lastLogId=LogId [index=157, term=164].

2024-05-25 10:55:31,413 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=161, term=170], lastLogId=LogId [index=161, term=170].

2024-05-25 10:55:31,432 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=161, term=170], lastLogId=LogId [index=161, term=170].

2024-05-25 10:55:31,439 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=172, currTerm=171, granted=true, requestLastLogId=LogId [index=160, term=171], lastLogId=LogId [index=160, term=171].

2024-05-25 10:55:31,454 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=172, currTerm=171, granted=true, requestLastLogId=LogId [index=160, term=171], lastLogId=LogId [index=160, term=171].

2024-05-25 10:55:31,462 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=170, currTerm=169, because the leader nacos2:7848's lease is still valid.

2024-05-25 10:55:31,465 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=171, currTerm=170.

2024-05-25 10:55:31,466 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=170, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 10:55:31,468 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=165, currTerm=164.

2024-05-25 10:55:31,470 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 10:55:31,473 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=171, granted=true.

2024-05-25 10:55:31,473 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=171.

2024-05-25 10:55:31,475 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:55:31,478 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=171, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 10:55:31,489 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=170, currTerm=171.

2024-05-25 10:55:31,480 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=165, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-25 10:55:31,481 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=169, granted=true.

2024-05-25 10:55:31,531 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=169.

2024-05-25 10:55:31,553 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=169, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 10:55:31,524 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=164, currTerm=165.

2024-05-25 10:55:31,580 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=164, currTerm=165.

2024-05-25 10:55:31,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=172, votedFor=nacos1:7848, cost time=48 ms

2024-05-25 10:55:31,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=171, votedFor=nacos3:7848, cost time=44 ms

2024-05-25 10:55:31,609 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=172, currTerm=172.

2024-05-25 10:55:31,629 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=170, votedFor=nacos1:7848, cost time=76 ms

2024-05-25 10:55:31,630 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:55:31,631 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=165, votedFor=nacos2:7848, cost time=41 ms

2024-05-25 10:55:31,631 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=170, currTerm=171.

2024-05-25 10:55:31,632 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=170, currTerm=170.

2024-05-25 10:55:31,655 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:55:31,680 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=170, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:55:31,681 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:55:31,685 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:55:31,717 INFO onLeaderStart: term=170.

2024-05-25 10:56:33,697 INFO Node <naming_persistent_service/nacos1:7848> term 171 start preVote.

2024-05-25 10:56:33,697 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 10:56:33,707 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=171, granted=true.

2024-05-25 10:56:33,709 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=171.

2024-05-25 10:56:33,710 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 10:56:33,738 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=172, votedFor=nacos1:7848, cost time=23 ms

2024-05-25 10:56:33,829 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=172, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 10:56:33,831 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 10:56:33,833 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 10:56:33,838 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 10:56:33,873 INFO onLeaderStart: term=172.

2024-05-25 10:57:29,327 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-25 10:57:29,327 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-25 10:57:29,328 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_158.

2024-05-25 10:57:29,328 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_158.

2024-05-25 10:57:29,329 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-25 10:57:29,330 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-25 10:57:29,335 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 158 to 160, cost 0 ms.

2024-05-25 10:57:29,335 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 153 to 155, cost 0 ms.

2024-05-25 10:57:30,309 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_161.

2024-05-25 10:57:30,309 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_161.

2024-05-25 10:57:30,311 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_158.

2024-05-25 10:57:30,314 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 157 to 159, cost 0 ms.

2024-05-25 10:57:30,556 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_161.

2024-05-25 10:57:30,556 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_161.

2024-05-25 10:57:30,557 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_158.

2024-05-25 10:57:30,559 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 157 to 159, cost 0 ms.

2024-05-25 11:15:04,293 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=172, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 11:15:05,221 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=112, type=Follower] is going to quit

2024-05-25 11:15:05,228 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=111, type=Follower] is going to quit

2024-05-25 11:15:05,232 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=170, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 11:15:05,233 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=161, lastLogIncluded=0, lastLogIndex=161, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=109, type=Follower] is going to quit

2024-05-25 11:15:05,234 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=161, lastLogIncluded=0, lastLogIndex=161, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=110, type=Follower] is going to quit

2024-05-25 11:15:04,331 INFO Node <naming_instance_metadata/nacos1:7848> term 165 start preVote.

2024-05-25 11:15:05,237 INFO Node <naming_persistent_service_v2/nacos1:7848> term 172 start preVote.

2024-05-25 11:15:05,236 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 11:15:05,234 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 11:15:05,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=172, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 11:15:05,254 INFO Node <naming_persistent_service_v2/nacos1:7848> term 172 start preVote.

2024-05-25 11:15:05,259 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 11:15:05,279 INFO Node <naming_instance_metadata/nacos1:7848> term 165 start preVote.

2024-05-25 11:15:05,346 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=161, term=170], lastLogId=LogId [index=161, term=170].

2024-05-25 11:15:05,356 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=173, currTerm=172, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-25 11:15:05,362 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=173, currTerm=172, granted=true, requestLastLogId=LogId [index=161, term=172], lastLogId=LogId [index=161, term=172].

2024-05-25 11:15:05,364 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=171, currTerm=170.

2024-05-25 11:15:05,369 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=172, granted=true.

2024-05-25 11:15:05,369 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=172.

2024-05-25 11:15:05,373 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=172, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:15:05,375 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=166, currTerm=165, granted=true, requestLastLogId=LogId [index=158, term=165], lastLogId=LogId [index=158, term=165].

2024-05-25 11:15:05,375 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=171, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 11:15:05,377 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=165, granted=true.

2024-05-25 11:15:05,380 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=165.

2024-05-25 11:15:05,382 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=173, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 11:15:05,404 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,387 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=173, currTerm=172, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-25 11:15:05,408 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=166, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 11:15:05,401 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=171, votedFor=nacos2:7848, cost time=22 ms

2024-05-25 11:15:05,407 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,411 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=173, currTerm=172.

2024-05-25 11:15:05,414 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,416 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=171, currTerm=171, granted=true, requestLastLogId=LogId [index=161, term=170], lastLogId=LogId [index=161, term=170].

2024-05-25 11:15:05,417 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,424 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,428 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=173, currTerm=173.

2024-05-25 11:15:05,431 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:15:05,436 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=166, currTerm=166.

2024-05-25 11:15:05,443 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=173, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-25 11:15:05,445 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:15:05,461 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=173, votedFor=nacos2:7848, cost time=16 ms

2024-05-25 11:15:05,461 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=166, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 11:15:05,464 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 11:15:05,466 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 11:15:05,495 INFO onLeaderStart: term=166.

2024-05-25 11:30:02,518 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 11:30:03,744 INFO Node <naming_persistent_service_v2/nacos1:7848> term 173 start preVote.

2024-05-25 11:30:03,788 INFO Node <naming_persistent_service_v2/nacos1:7848> term 173 start preVote.

2024-05-25 11:30:03,746 INFO Node <naming_service_metadata/nacos1:7848> term 171 start preVote.

2024-05-25 11:30:03,795 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=173, granted=false.

2024-05-25 11:30:03,746 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 11:30:03,747 INFO Node <naming_persistent_service/nacos1:7848> term 173 start preVote.

2024-05-25 11:30:03,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 11:30:03,806 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=174, currTerm=173, because the leader nacos2:7848's lease is still valid.

2024-05-25 11:30:03,808 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=174, currTerm=173, granted=true, requestLastLogId=LogId [index=164, term=173], lastLogId=LogId [index=164, term=173].

2024-05-25 11:30:03,811 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 11:30:03,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 11:30:03,747 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 11:30:03,818 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=173, granted=false.

2024-05-25 11:30:03,764 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=166, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 11:30:03,768 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_159.

2024-05-25 11:30:03,822 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_159.

2024-05-25 11:30:03,821 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=159, lastLogIncluded=0, lastLogIndex=159, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=118, type=Follower] is going to quit

2024-05-25 11:30:03,824 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=159, lastLogIncluded=0, lastLogIndex=159, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=119, type=Follower] is going to quit

2024-05-25 11:30:03,824 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 11:30:03,829 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_158.

2024-05-25 11:30:03,831 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=159, term=166], lastLogId=LogId [index=159, term=166].

2024-05-25 11:30:03,840 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_162.

2024-05-25 11:30:03,841 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_162.

2024-05-25 11:30:03,827 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 11:30:03,835 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_164.

2024-05-25 11:30:03,852 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_164.

2024-05-25 11:30:03,870 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:30:03,836 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 155 to 159, cost 0 ms.

2024-05-25 11:30:03,838 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_162.

2024-05-25 11:30:03,844 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_161.

2024-05-25 11:30:03,846 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=173, granted=true.

2024-05-25 11:30:03,897 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=173.

2024-05-25 11:30:03,846 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 11:30:03,900 INFO The channel nacos3:7848 has successfully established.

2024-05-25 11:30:03,901 INFO Peer nacos3:7848 is connected.

2024-05-25 11:30:03,851 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=174, currTerm=173.

2024-05-25 11:30:03,904 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 11:30:03,851 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:30:03,880 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 11:30:03,907 INFO The channel nacos2:7848 has successfully established.

2024-05-25 11:30:03,908 INFO Peer nacos2:7848 is connected.

2024-05-25 11:30:03,884 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-25 11:30:03,885 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_162.

2024-05-25 11:30:03,896 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=167, currTerm=166.

2024-05-25 11:30:03,899 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:30:03,925 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_161.

2024-05-25 11:30:03,901 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 162, cost 2 ms.

2024-05-25 11:30:03,905 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=171, granted=false.

2024-05-25 11:30:03,928 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=171, granted=true.

2024-05-25 11:30:03,929 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=171.

2024-05-25 11:30:03,929 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 160 to 164, cost 1 ms.

2024-05-25 11:30:03,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=174, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 11:30:03,912 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=174, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 11:30:03,937 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 162, cost 6 ms.

2024-05-25 11:30:03,928 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=167, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 11:30:03,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:30:03,934 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=174, currTerm=174.

2024-05-25 11:30:03,944 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=173, currTerm=174.

2024-05-25 11:30:03,945 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 11:30:03,946 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 11:30:03,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=172, votedFor=nacos1:7848, cost time=22 ms

2024-05-25 11:30:03,955 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=174, votedFor=nacos3:7848, cost time=20 ms

2024-05-25 11:30:03,956 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=167, votedFor=nacos3:7848, cost time=12 ms

2024-05-25 11:30:03,957 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=173, currTerm=174.

2024-05-25 11:30:03,957 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=167, currTerm=167, because the leader nacos3:7848's lease is still valid.

2024-05-25 11:30:03,957 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=173, currTerm=174.

2024-05-25 11:30:03,961 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=172, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 11:30:03,961 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 11:30:03,963 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 11:30:03,966 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 11:30:03,978 INFO onLeaderStart: term=172.

2024-05-25 11:30:08,273 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 11:30:08,274 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 11:30:08,275 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 11:30:08,275 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 11:45:10,320 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 11:45:10,328 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 11:45:10,328 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 11:45:10,330 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 11:54:54,334 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=172, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 11:54:55,200 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=167, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 11:54:55,205 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=112, type=Follower] is going to quit

2024-05-25 11:54:55,205 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=111, type=Follower] is going to quit

2024-05-25 11:54:55,076 INFO Node <naming_persistent_service_v2/nacos1:7848> term 174 start preVote.

2024-05-25 11:54:55,242 INFO Node <naming_persistent_service_v2/nacos1:7848> term 174 start preVote.

2024-05-25 11:54:55,103 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 11:54:55,102 INFO Node <naming_instance_metadata/nacos1:7848> term 167 start preVote.

2024-05-25 11:54:55,090 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 11:54:55,078 INFO Node <naming_persistent_service/nacos1:7848> term 174 start preVote.

2024-05-25 11:54:55,273 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=175, currTerm=174, because the leader nacos3:7848's lease is still valid.

2024-05-25 11:54:55,274 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 11:54:55,288 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=175, currTerm=174, because the leader nacos3:7848's lease is still valid.

2024-05-25 11:54:55,379 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=168, currTerm=167, because the leader nacos3:7848's lease is still valid.

2024-05-25 11:54:55,388 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=168, currTerm=167, because the leader nacos3:7848's lease is still valid.

2024-05-25 11:54:55,390 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=173, currTerm=172, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-25 11:54:55,414 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=174, granted=true.

2024-05-25 11:54:55,437 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=174.

2024-05-25 11:54:55,415 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=174, granted=true.

2024-05-25 11:54:55,507 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=174.

2024-05-25 11:54:55,507 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:54:55,513 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:54:55,437 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:54:55,440 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:54:55,442 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:54:55,510 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:54:55,513 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=167, granted=true.

2024-05-25 11:54:55,533 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=167.

2024-05-25 11:54:55,538 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=175, votedFor=nacos1:7848, cost time=32 ms

2024-05-25 11:54:55,544 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=167, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 11:54:55,568 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=175, currTerm=175.

2024-05-25 11:54:55,613 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=173, currTerm=172.

2024-05-25 11:54:55,619 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=175, votedFor=nacos1:7848, cost time=64 ms

2024-05-25 11:54:55,620 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:54:55,620 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=168, votedFor=nacos1:7848, cost time=69 ms

2024-05-25 11:54:55,621 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=168, currTerm=168.

2024-05-25 11:54:55,627 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=175, currTerm=175.

2024-05-25 11:54:55,628 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:54:55,629 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 11:54:55,630 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=173, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-25 11:54:55,631 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=173, currTerm=173, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-25 11:54:55,632 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=173, currTerm=173, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-25 11:54:55,644 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=173, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 11:54:55,647 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 11:54:55,661 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=168, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 11:54:55,663 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 11:54:55,667 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=175, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 11:54:55,673 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 11:54:55,681 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 11:54:55,692 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 11:54:55,724 INFO onLeaderStart: term=168.

2024-05-25 11:54:55,735 INFO onLeaderStart: term=175.

2024-05-25 12:03:13,575 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=175, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:03:13,790 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:03:13,586 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=168, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:03:13,607 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 12:03:13,796 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=161, lastLogIncluded=0, lastLogIndex=161, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=121, type=Follower] is going to quit

2024-05-25 12:03:13,813 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=161, lastLogIncluded=0, lastLogIndex=161, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=122, type=Follower] is going to quit

2024-05-25 12:03:13,603 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=175, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 12:03:13,839 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=169, currTerm=168, granted=true, requestLastLogId=LogId [index=161, term=168], lastLogId=LogId [index=161, term=168].

2024-05-25 12:03:13,807 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=113, type=Follower] is going to quit

2024-05-25 12:03:13,864 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=114, type=Follower] is going to quit

2024-05-25 12:03:13,602 INFO Node <naming_persistent_service_v2/nacos1:7848> term 175 start preVote.

2024-05-25 12:03:13,905 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=176, currTerm=175, granted=true, requestLastLogId=LogId [index=166, term=175], lastLogId=LogId [index=166, term=175].

2024-05-25 12:03:13,602 INFO Node <naming_service_metadata/nacos1:7848> term 173 start preVote.

2024-05-25 12:03:13,796 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:03:13,851 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:03:13,865 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_161.

2024-05-25 12:03:13,974 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_161.

2024-05-25 12:03:13,980 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_159.

2024-05-25 12:03:13,865 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_164.

2024-05-25 12:03:13,982 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_164.

2024-05-25 12:03:13,890 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_164.

2024-05-25 12:03:13,990 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_164.

2024-05-25 12:03:13,925 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:03:13,991 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:03:13,925 INFO Node <naming_persistent_service_v2/nacos1:7848> term 175 start preVote.

2024-05-25 12:03:13,925 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_166.

2024-05-25 12:03:13,982 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:03:13,983 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=176, currTerm=175, granted=true, requestLastLogId=LogId [index=166, term=175], lastLogId=LogId [index=166, term=175].

2024-05-25 12:03:13,988 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=174, currTerm=173, granted=true, requestLastLogId=LogId [index=164, term=173], lastLogId=LogId [index=164, term=173].

2024-05-25 12:03:13,991 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_162.

2024-05-25 12:03:14,085 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=174, currTerm=173, because the leader nacos2:7848's lease is still valid.

2024-05-25 12:03:13,992 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 159 to 160, cost 0 ms.

2024-05-25 12:03:13,992 INFO Node <naming_persistent_service_v2/nacos1:7848> term 175 start preVote.

2024-05-25 12:03:13,992 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=169, currTerm=168.

2024-05-25 12:03:13,999 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_162.

2024-05-25 12:03:13,999 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_166.

2024-05-25 12:03:14,069 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=176, currTerm=175.

2024-05-25 12:03:14,087 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=173, granted=false.

2024-05-25 12:03:14,089 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 162 to 163, cost 0 ms.

2024-05-25 12:03:14,117 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=176, currTerm=175, granted=true, requestLastLogId=LogId [index=164, term=175], lastLogId=LogId [index=164, term=175].

2024-05-25 12:03:14,136 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_164.

2024-05-25 12:03:14,232 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=176, currTerm=175.

2024-05-25 12:03:14,160 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=176, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-25 12:03:14,160 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=169, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-25 12:03:14,166 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 162 to 163, cost 3 ms.

2024-05-25 12:03:14,215 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=174, currTerm=173.

2024-05-25 12:03:14,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=173, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 12:03:14,238 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 164 to 165, cost 0 ms.

2024-05-25 12:03:14,240 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=176, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 12:03:14,245 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=176, votedFor=nacos3:7848, cost time=10 ms

2024-05-25 12:03:14,246 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=169, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 12:03:14,247 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=174, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 12:03:14,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=176, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 12:03:14,251 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=175, currTerm=176.

2024-05-25 12:03:14,254 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=175, currTerm=176.

2024-05-25 12:03:14,255 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=175, currTerm=176.

2024-05-25 12:03:14,256 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=174, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 12:03:14,269 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=169, currTerm=169, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:03:14,271 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=169, currTerm=169, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:03:14,273 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=175, currTerm=176.

2024-05-25 12:03:14,274 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=173, currTerm=174.

2024-05-25 12:03:14,315 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=175, currTerm=176.

2024-05-25 12:03:14,316 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=175, currTerm=176.

2024-05-25 12:19:35,688 INFO Node <naming_instance_metadata/nacos1:7848> term 169 start preVote.

2024-05-25 12:19:35,703 INFO Node <naming_persistent_service/nacos1:7848> term 176 start preVote.

2024-05-25 12:19:35,703 INFO Node <naming_persistent_service_v2/nacos1:7848> term 176 start preVote.

2024-05-25 12:19:35,831 INFO Node <naming_persistent_service_v2/nacos1:7848> term 176 start preVote.

2024-05-25 12:19:35,840 INFO Node <naming_persistent_service_v2/nacos1:7848> term 176 start preVote.

2024-05-25 12:19:35,703 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=176, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:19:35,703 INFO Node <naming_service_metadata/nacos1:7848> term 174 start preVote.

2024-05-25 12:19:35,703 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=176, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:19:35,704 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:19:35,731 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=169, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:19:35,914 INFO Node <naming_service_metadata/nacos1:7848> term 174 start preVote.

2024-05-25 12:19:35,976 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=169, granted=true.

2024-05-25 12:19:35,980 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=169.

2024-05-25 12:19:36,036 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=170, votedFor=nacos1:7848, cost time=41 ms

2024-05-25 12:19:36,084 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=176, granted=true.

2024-05-25 12:19:36,084 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=176, granted=true.

2024-05-25 12:19:36,101 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=176.

2024-05-25 12:19:36,102 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=170, currTerm=170, granted=true, requestLastLogId=LogId [index=162, term=169], lastLogId=LogId [index=162, term=169].

2024-05-25 12:19:36,100 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=176.

2024-05-25 12:19:36,114 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=175, currTerm=174, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:19:36,116 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=170, currTerm=170, granted=true, requestLastLogId=LogId [index=162, term=169], lastLogId=LogId [index=162, term=169].

2024-05-25 12:19:36,117 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=177, votedFor=nacos1:7848, cost time=14 ms

2024-05-25 12:19:36,117 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=174, granted=true.

2024-05-25 12:19:36,118 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=174.

2024-05-25 12:19:36,120 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:19:36,118 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=177, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 12:19:36,122 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=177, currTerm=177, granted=true, requestLastLogId=LogId [index=165, term=176], lastLogId=LogId [index=165, term=176].

2024-05-25 12:19:36,127 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,136 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=177, currTerm=177, granted=true, requestLastLogId=LogId [index=167, term=176], lastLogId=LogId [index=167, term=176].

2024-05-25 12:19:36,142 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,143 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,143 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,145 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=175, votedFor=nacos1:7848, cost time=20 ms

2024-05-25 12:19:36,151 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,152 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=175, currTerm=175.

2024-05-25 12:19:36,152 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,152 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,153 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,159 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=170, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:19:36,160 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:19:36,163 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:19:36,164 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=177, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:19:36,168 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:19:36,167 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:19:36,171 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=177, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:19:36,171 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:19:36,172 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:19:36,176 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:19:36,178 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:19:36,181 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=175, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:19:36,179 INFO onLeaderStart: term=170.

2024-05-25 12:19:36,189 INFO onLeaderStart: term=177.

2024-05-25 12:19:36,186 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:19:36,192 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:19:36,188 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:19:36,189 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:19:36,202 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 12:19:36,206 INFO onLeaderStart: term=177.

2024-05-25 12:19:36,209 INFO onLeaderStart: term=175.

2024-05-25 12:30:38,308 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=170, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:30:39,187 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=124, type=Follower] is going to quit

2024-05-25 12:30:39,516 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=163, lastLogIncluded=0, lastLogIndex=163, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=123, type=Follower] is going to quit

2024-05-25 12:30:39,514 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:30:39,507 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=177, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:30:39,523 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=125, type=Follower] is going to quit

2024-05-25 12:30:39,524 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=126, type=Follower] is going to quit

2024-05-25 12:30:38,310 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=177, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:30:39,525 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=115, type=Follower] is going to quit

2024-05-25 12:30:39,525 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=116, type=Follower] is going to quit

2024-05-25 12:30:39,469 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=176, currTerm=175, granted=true, requestLastLogId=LogId [index=166, term=175], lastLogId=LogId [index=166, term=175].

2024-05-25 12:30:39,527 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,524 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=163, term=170], lastLogId=LogId [index=163, term=170].

2024-05-25 12:30:39,526 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:30:39,523 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:30:39,527 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:30:39,528 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=166, term=177], lastLogId=LogId [index=166, term=177].

2024-05-25 12:30:39,531 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=166, term=177], lastLogId=LogId [index=166, term=177].

2024-05-25 12:30:39,530 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=171, currTerm=170, granted=true, requestLastLogId=LogId [index=163, term=170], lastLogId=LogId [index=163, term=170].

2024-05-25 12:30:39,531 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:30:39,531 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,532 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,535 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,533 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,533 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,536 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=176, currTerm=175, because the leader nacos1:7848's lease is still valid.

2024-05-25 12:30:39,544 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=171, currTerm=170.

2024-05-25 12:30:39,544 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=176, currTerm=175.

2024-05-25 12:30:39,548 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-25 12:30:39,555 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,570 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=171, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-25 12:30:39,572 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,576 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=176, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-25 12:30:39,576 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=178, currTerm=177.

2024-05-25 12:30:39,576 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=113, type=Follower] is going to quit

2024-05-25 12:30:39,577 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=178, currTerm=177.

2024-05-25 12:30:39,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=178, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 12:30:39,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=171, votedFor=nacos3:7848, cost time=16 ms

2024-05-25 12:30:39,589 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=171, currTerm=171.

2024-05-25 12:30:39,592 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,588 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=178, currTerm=178.

2024-05-25 12:30:39,599 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=178, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 12:30:39,588 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=166, lastLogIncluded=0, lastLogIndex=166, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=114, type=Follower] is going to quit

2024-05-25 12:30:39,607 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=178, votedFor=nacos3:7848, cost time=4 ms

2024-05-25 12:30:39,607 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=178, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 12:30:39,609 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,610 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,610 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=178, currTerm=178.

2024-05-25 12:30:39,612 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,612 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,616 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:30:39,615 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=176, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 12:30:39,621 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:31:38,077 INFO Node <naming_persistent_service/nacos1:7848> term 178 start preVote.

2024-05-25 12:31:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:31:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=176, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:31:38,078 INFO Node <naming_service_metadata/nacos1:7848> term 176 start preVote.

2024-05-25 12:31:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:31:38,078 INFO Node <naming_instance_metadata/nacos1:7848> term 171 start preVote.

2024-05-25 12:31:38,510 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=179, currTerm=178, because the leader nacos2:7848's lease is still valid.

2024-05-25 12:31:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 12:31:38,078 INFO Node <naming_persistent_service_v2/nacos1:7848> term 178 start preVote.

2024-05-25 12:31:38,519 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=172, currTerm=171, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:31:38,529 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=171, granted=true.

2024-05-25 12:31:38,537 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=171.

2024-05-25 12:31:38,538 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=171, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:31:38,542 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=177, currTerm=176, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:31:38,569 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=178, granted=true.

2024-05-25 12:31:38,579 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=178.

2024-05-25 12:31:38,540 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=179, currTerm=178, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:31:38,570 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=177, currTerm=176, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:31:38,571 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=172, votedFor=nacos1:7848, cost time=32 ms

2024-05-25 12:31:38,635 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:31:38,646 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=178, granted=true.

2024-05-25 12:31:38,654 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=176, granted=false.

2024-05-25 12:31:38,662 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=172, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:31:38,664 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:31:38,662 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=178.

2024-05-25 12:31:38,665 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:31:38,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=179, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 12:31:38,668 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:31:38,675 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=179, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 12:31:38,678 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 12:31:38,678 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=179, currTerm=179.

2024-05-25 12:31:38,680 INFO onLeaderStart: term=172.

2024-05-25 12:31:38,680 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=179, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:31:38,681 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:31:38,681 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=176, granted=true.

2024-05-25 12:31:38,681 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:31:38,684 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:31:38,683 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=176.

2024-05-25 12:31:38,685 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=179, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:31:38,687 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:31:38,686 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=176, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:31:38,687 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=177, currTerm=177.

2024-05-25 12:31:38,687 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 12:31:38,695 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:31:38,705 INFO onLeaderStart: term=179.

2024-05-25 12:31:38,691 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:31:38,701 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:31:38,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=177, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 12:31:38,710 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 12:31:38,712 INFO onLeaderStart: term=179.

2024-05-25 12:31:38,716 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=177, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 12:31:38,718 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 12:31:38,721 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 12:31:38,726 INFO onLeaderStart: term=177.

2024-05-25 12:47:43,627 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=172, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:47:44,501 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=179, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:47:44,677 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=128, type=Follower] is going to quit

2024-05-25 12:47:44,679 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:47:44,680 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=165, lastLogIncluded=0, lastLogIndex=165, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=125, type=Follower] is going to quit

2024-05-25 12:47:44,681 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=165, lastLogIncluded=0, lastLogIndex=165, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=126, type=Follower] is going to quit

2024-05-25 12:47:44,680 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:47:44,501 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=177, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:47:44,723 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=180, currTerm=179, because the leader nacos1:7848's lease is still valid.

2024-05-25 12:47:44,724 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,724 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=173, currTerm=172, granted=true, requestLastLogId=LogId [index=165, term=172], lastLogId=LogId [index=165, term=172].

2024-05-25 12:47:44,726 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:47:44,726 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=115, type=Follower] is going to quit

2024-05-25 12:47:44,679 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=129, type=Follower] is going to quit

2024-05-25 12:47:44,730 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=168, lastLogIncluded=0, lastLogIndex=168, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=116, type=Follower] is going to quit

2024-05-25 12:47:44,730 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,732 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:47:44,735 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:47:44,735 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,736 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:47:44,736 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=168, term=179], lastLogId=LogId [index=168, term=179].

2024-05-25 12:47:44,737 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=168, term=179], lastLogId=LogId [index=168, term=179].

2024-05-25 12:47:44,737 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=168, term=177], lastLogId=LogId [index=168, term=177].

2024-05-25 12:47:44,779 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,782 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=173, currTerm=172.

2024-05-25 12:47:44,782 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_165.

2024-05-25 12:47:44,783 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_165.

2024-05-25 12:47:44,784 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_168.

2024-05-25 12:47:44,786 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_168.

2024-05-25 12:47:44,783 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_170.

2024-05-25 12:47:44,788 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_170.

2024-05-25 12:47:44,788 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_161.

2024-05-25 12:47:44,789 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=173, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 12:47:44,796 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,789 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,790 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_166.

2024-05-25 12:47:44,802 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=173, votedFor=nacos3:7848, cost time=7 ms

2024-05-25 12:47:44,790 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_164.

2024-05-25 12:47:44,793 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,797 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=178, currTerm=177.

2024-05-25 12:47:44,801 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 160 to 162, cost 0 ms.

2024-05-25 12:47:44,803 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,808 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 165 to 167, cost 0 ms.

2024-05-25 12:47:44,809 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 163 to 165, cost 0 ms.

2024-05-25 12:47:44,810 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=180, currTerm=179.

2024-05-25 12:47:44,811 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_168.

2024-05-25 12:47:44,813 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_168.

2024-05-25 12:47:44,814 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=178, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 12:47:44,815 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,815 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_164.

2024-05-25 12:47:44,819 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=180, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 12:47:44,820 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=178, votedFor=nacos3:7848, cost time=4 ms

2024-05-25 12:47:44,823 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 163 to 165, cost 0 ms.

2024-05-25 12:47:44,826 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=178, currTerm=178.

2024-05-25 12:47:44,839 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=180, votedFor=nacos2:7848, cost time=17 ms

2024-05-25 12:47:44,853 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,855 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,859 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:47:44,863 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:48:24,952 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=179, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 12:48:25,655 INFO Node <naming_service_metadata/nacos1:7848> term 178 start preVote.

2024-05-25 12:48:25,655 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 12:48:25,745 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 12:48:25,745 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=170, lastLogIncluded=0, lastLogIndex=170, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=117, type=Follower] is going to quit

2024-05-25 12:48:25,789 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=170, lastLogIncluded=0, lastLogIndex=170, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=118, type=Follower] is going to quit

2024-05-25 12:48:25,884 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=179, currTerm=178, granted=true, requestLastLogId=LogId [index=169, term=178], lastLogId=LogId [index=169, term=178].

2024-05-25 12:48:25,885 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=179, currTerm=178, granted=true, requestLastLogId=LogId [index=169, term=178], lastLogId=LogId [index=169, term=178].

2024-05-25 12:48:25,886 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=179, currTerm=178, granted=true, requestLastLogId=LogId [index=169, term=178], lastLogId=LogId [index=169, term=178].

2024-05-25 12:48:25,887 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=174, currTerm=173, because the leader nacos3:7848's lease is still valid.

2024-05-25 12:48:25,966 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=181, currTerm=180, because the leader nacos2:7848's lease is still valid.

2024-05-25 12:48:26,015 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=174, currTerm=173.

2024-05-25 12:48:25,979 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=170, term=179], lastLogId=LogId [index=170, term=179].

2024-05-25 12:48:26,004 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=178, granted=true.

2024-05-25 12:48:26,039 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=173, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 12:48:26,044 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=178.

2024-05-25 12:48:26,044 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:48:26,044 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=170, term=179], lastLogId=LogId [index=170, term=179].

2024-05-25 12:48:26,045 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:48:26,048 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 12:48:26,048 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=174, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 12:48:26,050 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 12:48:26,051 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=180, currTerm=179.

2024-05-25 12:48:26,064 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=179, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 12:48:26,065 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 12:48:26,066 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=179, currTerm=179.

2024-05-25 12:48:26,067 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=180, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 12:48:26,068 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=174, votedFor=nacos2:7848, cost time=12 ms

2024-05-25 12:48:26,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=180, votedFor=nacos2:7848, cost time=21 ms

2024-05-25 13:04:51,986 INFO Node <naming_instance_metadata/nacos1:7848> term 174 start preVote.

2024-05-25 13:04:51,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=179, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:04:51,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=180, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:04:51,987 INFO Node <naming_persistent_service/nacos1:7848> term 180 start preVote.

2024-05-25 13:04:51,987 INFO Node <naming_service_metadata/nacos1:7848> term 179 start preVote.

2024-05-25 13:04:51,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=174, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:04:51,987 INFO Node <naming_persistent_service_v2/nacos1:7848> term 180 start preVote.

2024-05-25 13:04:51,988 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=180, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:04:52,013 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=181, currTerm=180, because the leader nacos2:7848's lease is still valid.

2024-05-25 13:04:52,015 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=181, currTerm=180.

2024-05-25 13:04:52,014 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=181, currTerm=180, because the leader nacos2:7848's lease is still valid.

2024-05-25 13:04:52,016 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=179, granted=true.

2024-05-25 13:04:52,063 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=179.

2024-05-25 13:04:52,058 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=174, granted=false.

2024-05-25 13:04:52,058 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=180, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 13:04:52,061 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=180, granted=true.

2024-05-25 13:04:52,080 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=179, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 13:04:52,081 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:04:52,081 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=174, granted=false.

2024-05-25 13:04:52,082 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=181, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 13:04:52,091 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=180, currTerm=181.

2024-05-25 13:04:52,083 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=180.

2024-05-25 13:04:52,093 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=180, currTerm=181.

2024-05-25 13:04:52,094 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=180, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 13:04:52,099 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=180, votedFor=nacos1:7848, cost time=9 ms

2024-05-25 13:04:52,094 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=181, currTerm=181.

2024-05-25 13:04:52,101 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:04:52,120 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=181, votedFor=nacos3:7848, cost time=15 ms

2024-05-25 13:04:52,121 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=181, votedFor=nacos1:7848, cost time=14 ms

2024-05-25 13:04:52,123 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=181, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 13:04:52,125 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 13:04:52,125 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=180, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:04:52,134 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:04:52,136 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:04:52,138 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:04:52,137 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 13:04:52,149 INFO onLeaderStart: term=180.

2024-05-25 13:21:23,535 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=180, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 13:21:23,976 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 13:21:23,928 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_167.

2024-05-25 13:21:23,734 INFO Node <naming_persistent_service_v2/nacos1:7848> term 181 start preVote.

2024-05-25 13:21:23,734 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=181, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 13:21:23,734 INFO Node <naming_persistent_service/nacos1:7848> term 181 start preVote.

2024-05-25 13:21:24,003 INFO Node <naming_persistent_service/nacos1:7848> term 181 start preVote.

2024-05-25 13:21:23,734 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=181, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 13:21:23,719 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499786476s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 13:21:24,001 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_167.

2024-05-25 13:21:24,056 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=181, granted=false.

2024-05-25 13:21:24,061 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=181, granted=true.

2024-05-25 13:21:24,094 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=181.

2024-05-25 13:21:24,081 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_170.

2024-05-25 13:21:24,096 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_170.

2024-05-25 13:21:24,084 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=171, lastLogIncluded=0, lastLogIndex=171, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=118, type=Follower] is going to quit

2024-05-25 13:21:24,092 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=181, granted=false.

2024-05-25 13:21:24,094 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_165.

2024-05-25 13:21:24,099 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=171, lastLogIncluded=0, lastLogIndex=171, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=117, type=Follower] is going to quit

2024-05-25 13:21:24,111 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:21:24,103 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=182, currTerm=181, because the leader nacos3:7848's lease is still valid.

2024-05-25 13:21:24,104 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_168.

2024-05-25 13:21:24,113 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=181, currTerm=180, granted=true, requestLastLogId=LogId [index=171, term=180], lastLogId=LogId [index=171, term=180].

2024-05-25 13:21:24,120 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=182, votedFor=nacos1:7848, cost time=24 ms

2024-05-25 13:21:24,124 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 162 to 166, cost 3 ms.

2024-05-25 13:21:24,134 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:21:24,135 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=182, currTerm=182, granted=true, requestLastLogId=LogId [index=170, term=181], lastLogId=LogId [index=170, term=181].

2024-05-25 13:21:24,138 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=181, currTerm=180.

2024-05-25 13:21:24,143 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 165 to 169, cost 0 ms.

2024-05-25 13:21:24,146 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_172.

2024-05-25 13:21:24,151 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_172.

2024-05-25 13:21:24,152 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=181, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 13:21:24,146 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_171.

2024-05-25 13:21:24,160 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_171.

2024-05-25 13:21:24,150 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=182, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:21:24,162 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:21:24,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_170.

2024-05-25 13:21:24,163 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_168.

2024-05-25 13:21:24,167 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:21:24,175 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=181, votedFor=nacos2:7848, cost time=15 ms

2024-05-25 13:21:24,177 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 167 to 171, cost 0 ms.

2024-05-25 13:21:24,177 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:21:24,178 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:21:24,178 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 165 to 169, cost 0 ms.

2024-05-25 13:21:24,188 INFO onLeaderStart: term=182.

2024-05-25 13:21:24,202 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=175, currTerm=174, because the leader nacos2:7848's lease is still valid.

2024-05-25 13:21:24,221 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=182, currTerm=181.

2024-05-25 13:21:24,222 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=181, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 13:21:24,228 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=175, currTerm=174.

2024-05-25 13:21:24,229 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 13:21:24,234 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=174, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 13:21:24,235 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 13:21:24,239 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=175, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 13:21:24,239 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 13:21:24,248 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=181, currTerm=182.

2024-05-25 13:21:24,249 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=181, currTerm=182.

2024-05-25 13:21:24,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=175, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 13:21:24,256 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:21:28,814 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 13:21:28,815 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 13:21:28,816 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 13:21:28,817 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 13:37:46,717 INFO Node <naming_instance_metadata/nacos1:7848> term 175 start preVote.

2024-05-25 13:37:46,798 INFO Node <naming_instance_metadata/nacos1:7848> term 175 start preVote.

2024-05-25 13:37:46,746 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 13:37:46,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=182, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:37:46,718 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=175, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 13:37:46,718 INFO Node <naming_persistent_service/nacos1:7848> term 182 start preVote.

2024-05-25 13:37:46,809 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=182, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 13:37:46,810 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=171, lastLogIncluded=0, lastLogIndex=171, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=130, type=Follower] is going to quit

2024-05-25 13:37:46,810 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=171, lastLogIncluded=0, lastLogIndex=171, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=131, type=Follower] is going to quit

2024-05-25 13:37:46,802 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=176, currTerm=175, granted=true, requestLastLogId=LogId [index=168, term=175], lastLogId=LogId [index=168, term=175].

2024-05-25 13:37:47,480 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=182, granted=true.

2024-05-25 13:37:46,810 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 13:37:47,509 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=183, currTerm=182, granted=true, requestLastLogId=LogId [index=171, term=182], lastLogId=LogId [index=171, term=182].

2024-05-25 13:37:47,513 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=182.

2024-05-25 13:37:47,823 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=182, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 13:37:47,800 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 13:37:47,811 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=176, currTerm=175.

2024-05-25 13:37:47,880 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=183, currTerm=182.

2024-05-25 13:37:47,886 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 13:37:47,891 INFO The channel nacos2:7848 has successfully established.

2024-05-25 13:37:47,891 INFO Peer nacos2:7848 is connected.

2024-05-25 13:37:47,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=176, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-25 13:37:47,928 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=183, votedFor=nacos1:7848, cost time=105 ms

2024-05-25 13:37:47,943 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=183, currTerm=183, granted=true, requestLastLogId=LogId [index=173, term=182], lastLogId=LogId [index=173, term=182].

2024-05-25 13:37:47,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=183, votedFor=0.0.0.0:0, cost time=61 ms

2024-05-25 13:37:47,952 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:37:47,953 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:37:47,960 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:37:47,962 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=183, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:37:47,964 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:37:47,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=176, votedFor=nacos2:7848, cost time=29 ms

2024-05-25 13:37:47,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=183, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 13:37:47,965 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:37:47,965 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=175, currTerm=176.

2024-05-25 13:37:47,968 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=175, currTerm=176.

2024-05-25 13:37:47,969 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=175, currTerm=176.

2024-05-25 13:37:47,969 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=175, currTerm=176.

2024-05-25 13:37:47,972 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=183, currTerm=183, granted=true, requestLastLogId=LogId [index=171, term=182], lastLogId=LogId [index=171, term=182].

2024-05-25 13:37:47,992 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:37:48,004 INFO onLeaderStart: term=183.

2024-05-25 13:37:52,579 INFO Node <naming_service_metadata/nacos1:7848> term 181 start preVote.

2024-05-25 13:37:52,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=181, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:37:52,582 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=181, granted=true.

2024-05-25 13:37:52,583 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=181.

2024-05-25 13:37:52,583 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:37:52,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=182, votedFor=nacos1:7848, cost time=5 ms

2024-05-25 13:37:52,596 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=182, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:37:52,597 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:37:52,597 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:37:52,598 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:37:52,601 INFO onLeaderStart: term=182.

2024-05-25 13:37:52,685 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 13:38:25,753 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=183, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 13:38:25,811 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499786493s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 13:38:25,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=176, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:38:25,780 INFO Node <naming_instance_metadata/nacos1:7848> term 176 start preVote.

2024-05-25 13:38:25,782 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=183, currTerm=182, granted=true, requestLastLogId=LogId [index=173, term=182], lastLogId=LogId [index=173, term=182].

2024-05-25 13:38:25,818 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499783229s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 13:38:25,840 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 13:38:25,852 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=183, currTerm=182, because the leader nacos1:7848's lease is still valid.

2024-05-25 13:38:25,849 INFO Node <naming_instance_metadata/nacos1:7848> term 176 start preVote.

2024-05-25 13:38:25,852 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=174, lastLogIncluded=0, lastLogIndex=174, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=119, type=Follower] is going to quit

2024-05-25 13:38:25,853 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=177, currTerm=176, granted=true, requestLastLogId=LogId [index=169, term=176], lastLogId=LogId [index=169, term=176].

2024-05-25 13:38:25,855 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=174, lastLogIncluded=0, lastLogIndex=174, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=120, type=Follower] is going to quit

2024-05-25 13:38:25,857 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:25,857 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=184, currTerm=183, granted=true, requestLastLogId=LogId [index=174, term=183], lastLogId=LogId [index=174, term=183].

2024-05-25 13:38:25,856 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:25,858 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:25,862 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 177, expect=176.

2024-05-25 13:38:25,863 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=176, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-25 13:38:25,870 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:25,873 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=183, currTerm=182.

2024-05-25 13:38:25,877 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-25 13:38:25,878 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=184, currTerm=183.

2024-05-25 13:38:26,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=184, votedFor=0.0.0.0:0, cost time=625 ms

2024-05-25 13:38:26,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=183, votedFor=0.0.0.0:0, cost time=630 ms

2024-05-25 13:38:26,509 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=120, type=Follower] is going to quit

2024-05-25 13:38:26,510 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=119, type=Follower] is going to quit

2024-05-25 13:38:26,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=177, votedFor=0.0.0.0:0, cost time=644 ms

2024-05-25 13:38:26,512 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:26,512 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:26,513 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=176, currTerm=177.

2024-05-25 13:38:26,516 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=177, currTerm=177.

2024-05-25 13:38:26,518 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=184, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 13:38:26,520 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:26,521 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:26,521 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:38:26,527 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=183, votedFor=nacos2:7848, cost time=14 ms

2024-05-25 13:38:26,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=177, votedFor=nacos3:7848, cost time=29 ms

2024-05-25 13:38:26,592 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=176, currTerm=177.

2024-05-25 13:38:26,598 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=176, currTerm=177.

2024-05-25 13:38:30,961 INFO Node <naming_persistent_service_v2/nacos1:7848> term 183 start preVote.

2024-05-25 13:38:30,961 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=183, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:38:30,964 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=183, granted=true.

2024-05-25 13:38:30,964 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=183.

2024-05-25 13:38:30,965 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:38:30,969 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=184, votedFor=nacos1:7848, cost time=4 ms

2024-05-25 13:38:30,976 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=184, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:38:30,976 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:38:30,976 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:38:30,977 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:38:30,981 INFO onLeaderStart: term=184.

2024-05-25 13:39:20,070 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.461663229s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 13:54:52,482 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=184, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 13:54:53,221 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=132, type=Follower] is going to quit

2024-05-25 13:54:53,215 INFO Node <naming_persistent_service/nacos1:7848> term 184 start preVote.

2024-05-25 13:54:53,216 INFO Node <naming_instance_metadata/nacos1:7848> term 177 start preVote.

2024-05-25 13:54:53,216 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=184, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:54:53,216 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=177, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 13:54:53,216 INFO Node <naming_service_metadata/nacos1:7848> term 183 start preVote.

2024-05-25 13:54:53,218 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=183, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 13:54:53,221 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 13:54:53,224 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=133, type=Follower] is going to quit

2024-05-25 13:54:53,249 INFO Node <naming_instance_metadata/nacos1:7848> term 177 start preVote.

2024-05-25 13:54:53,307 INFO Node <naming_instance_metadata/nacos1:7848> term 177 start preVote.

2024-05-25 13:54:53,313 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=170, term=177], lastLogId=LogId [index=170, term=177].

2024-05-25 13:54:53,426 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_173.

2024-05-25 13:54:53,428 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_173.

2024-05-25 13:54:53,433 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=185, currTerm=184, granted=true, requestLastLogId=LogId [index=173, term=184], lastLogId=LogId [index=173, term=184].

2024-05-25 13:54:53,442 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_170.

2024-05-25 13:54:53,461 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_170.

2024-05-25 13:54:53,467 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_170.

2024-05-25 13:54:53,471 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=185, currTerm=184, granted=true, requestLastLogId=LogId [index=173, term=184], lastLogId=LogId [index=173, term=184].

2024-05-25 13:54:53,486 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=183, granted=true.

2024-05-25 13:54:53,488 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=184, granted=true.

2024-05-25 13:54:53,487 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_175.

2024-05-25 13:54:53,487 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_167.

2024-05-25 13:54:53,487 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=185, currTerm=184, granted=true, requestLastLogId=LogId [index=173, term=184], lastLogId=LogId [index=173, term=184].

2024-05-25 13:54:53,487 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=183.

2024-05-25 13:54:53,489 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 178, expect=177.

2024-05-25 13:54:53,491 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=184.

2024-05-25 13:54:53,492 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_175.

2024-05-25 13:54:53,497 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=183, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 13:54:53,497 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=177, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-25 13:54:53,498 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=184, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 13:54:53,498 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 169 to 171, cost 3 ms.

2024-05-25 13:54:53,509 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=185, currTerm=184.

2024-05-25 13:54:53,513 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_174.

2024-05-25 13:54:53,514 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=184, votedFor=nacos1:7848, cost time=8 ms

2024-05-25 13:54:53,522 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=184, currTerm=184, granted=true, requestLastLogId=LogId [index=174, term=183], lastLogId=LogId [index=174, term=183].

2024-05-25 13:54:53,514 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_172.

2024-05-25 13:54:53,514 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=185, votedFor=nacos1:7848, cost time=9 ms

2024-05-25 13:54:53,520 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=178, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 13:54:53,548 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=178, currTerm=178.

2024-05-25 13:54:53,522 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 166 to 168, cost 1 ms.

2024-05-25 13:54:53,522 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_174.

2024-05-25 13:54:53,523 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=184, currTerm=184, granted=true, requestLastLogId=LogId [index=174, term=183], lastLogId=LogId [index=174, term=183].

2024-05-25 13:54:53,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=178, votedFor=nacos2:7848, cost time=12 ms

2024-05-25 13:54:53,537 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=185, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-25 13:54:53,547 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 171 to 173, cost 0 ms.

2024-05-25 13:54:53,558 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:54:53,560 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_171.

2024-05-25 13:54:53,577 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=177, currTerm=178.

2024-05-25 13:54:53,582 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 13:54:53,582 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=177, currTerm=178.

2024-05-25 13:54:53,590 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=185, votedFor=nacos2:7848, cost time=27 ms

2024-05-25 13:54:53,597 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=185, currTerm=185.

2024-05-25 13:54:53,599 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=184, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:54:53,600 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:54:53,603 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:54:53,606 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 169 to 172, cost 0 ms.

2024-05-25 13:54:53,606 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 13:54:53,610 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=185, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 13:54:53,614 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 13:54:53,615 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 13:54:53,641 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:54:53,644 INFO onLeaderStart: term=184.

2024-05-25 13:54:53,646 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 13:54:53,647 INFO onLeaderStart: term=185.

2024-05-25 13:54:53,650 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=177, currTerm=178.

2024-05-25 13:54:53,651 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=177, currTerm=178.

2024-05-25 13:54:53,652 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=177, currTerm=178.

2024-05-25 14:11:11,130 INFO Node <naming_instance_metadata/nacos1:7848> term 178 start preVote.

2024-05-25 14:11:11,142 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=185, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:11:11,142 INFO Node <naming_persistent_service_v2/nacos1:7848> term 185 start preVote.

2024-05-25 14:11:11,142 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:11:11,875 INFO Node <naming_instance_metadata/nacos1:7848> term 178 start preVote.

2024-05-25 14:11:11,876 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=185, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:11:11,934 INFO Node <naming_instance_metadata/nacos1:7848> term 178 start preVote.

2024-05-25 14:11:11,945 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:11:11,945 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=176, lastLogIncluded=0, lastLogIndex=176, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=122, type=Follower] is going to quit

2024-05-25 14:11:11,960 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=176, lastLogIncluded=0, lastLogIndex=176, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=121, type=Follower] is going to quit

2024-05-25 14:11:12,137 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=186, currTerm=185, granted=true, requestLastLogId=LogId [index=174, term=185], lastLogId=LogId [index=174, term=185].

2024-05-25 14:11:12,270 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=185, currTerm=184, because the leader nacos1:7848's lease is still valid.

2024-05-25 14:11:12,293 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=186, currTerm=185, granted=true, requestLastLogId=LogId [index=176, term=185], lastLogId=LogId [index=176, term=185].

2024-05-25 14:11:12,317 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=186, currTerm=185, because the leader nacos2:7848's lease is still valid.

2024-05-25 14:11:12,318 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=178, granted=true.

2024-05-25 14:11:12,323 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=186, currTerm=185.

2024-05-25 14:11:12,340 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=178.

2024-05-25 14:11:12,343 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:11:12,343 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=185, granted=true.

2024-05-25 14:11:12,347 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=185.

2024-05-25 14:11:12,343 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,350 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=186, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 14:11:12,348 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=185, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:11:12,359 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=179, votedFor=nacos1:7848, cost time=9 ms

2024-05-25 14:11:12,359 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=186, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 14:11:12,360 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,361 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=186, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 14:11:12,361 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:11:12,361 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=186, currTerm=186, granted=true, requestLastLogId=LogId [index=176, term=185], lastLogId=LogId [index=176, term=185].

2024-05-25 14:11:12,361 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:11:12,362 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,365 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:11:12,365 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=179, currTerm=179, granted=true, requestLastLogId=LogId [index=171, term=178], lastLogId=LogId [index=171, term=178].

2024-05-25 14:11:12,367 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,369 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,368 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:11:12,373 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=186, currTerm=186.

2024-05-25 14:11:12,372 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=179, currTerm=179.

2024-05-25 14:11:12,379 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=179, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:11:12,380 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:11:12,381 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:11:12,387 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=186, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:11:12,394 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:11:12,401 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:11:12,407 INFO onLeaderStart: term=179.

2024-05-25 14:11:12,412 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:11:12,427 INFO onLeaderStart: term=186.

2024-05-25 14:11:16,916 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 14:27:41,750 INFO Node <naming_persistent_service/nacos1:7848> term 186 start preVote.

2024-05-25 14:27:41,751 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=186, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:27:41,833 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=184, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:27:42,376 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=186, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:27:42,537 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:27:42,540 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=179, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:27:42,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=175, lastLogIncluded=0, lastLogIndex=175, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=121, type=Follower] is going to quit

2024-05-25 14:27:42,761 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=175, lastLogIncluded=0, lastLogIndex=175, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=122, type=Follower] is going to quit

2024-05-25 14:27:42,605 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=175, lastLogIncluded=0, lastLogIndex=175, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=135, type=Follower] is going to quit

2024-05-25 14:27:42,764 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=175, lastLogIncluded=0, lastLogIndex=175, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=134, type=Follower] is going to quit

2024-05-25 14:27:42,607 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:27:42,674 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_172.

2024-05-25 14:27:42,683 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_175.

2024-05-25 14:27:42,686 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_177.

2024-05-25 14:27:42,718 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=186, granted=true.

2024-05-25 14:27:42,730 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_175.

2024-05-25 14:27:42,764 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,765 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=172, lastLogIncluded=0, lastLogIndex=172, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=127, type=Follower] is going to quit

2024-05-25 14:27:42,765 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=187, currTerm=186, granted=true, requestLastLogId=LogId [index=175, term=186], lastLogId=LogId [index=175, term=186].

2024-05-25 14:27:42,775 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=187, currTerm=186, granted=true, requestLastLogId=LogId [index=175, term=186], lastLogId=LogId [index=175, term=186].

2024-05-25 14:27:42,766 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:27:42,778 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=187, currTerm=186.

2024-05-25 14:27:42,766 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=185, currTerm=184, granted=true, requestLastLogId=LogId [index=175, term=184], lastLogId=LogId [index=175, term=184].

2024-05-25 14:27:42,766 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,769 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_172.

2024-05-25 14:27:42,769 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_175.

2024-05-25 14:27:42,770 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_177.

2024-05-25 14:27:42,774 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=186.

2024-05-25 14:27:42,775 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=172, lastLogIncluded=0, lastLogIndex=172, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=128, type=Follower] is going to quit

2024-05-25 14:27:42,786 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,774 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_175.

2024-05-25 14:27:42,788 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=172, term=179], lastLogId=LogId [index=172, term=179].

2024-05-25 14:27:42,788 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_170.

2024-05-25 14:27:42,789 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_174.

2024-05-25 14:27:42,789 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_175.

2024-05-25 14:27:42,789 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=187, currTerm=187, granted=true, requestLastLogId=LogId [index=177, term=186], lastLogId=LogId [index=177, term=186].

2024-05-25 14:27:42,796 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=172, term=179], lastLogId=LogId [index=172, term=179].

2024-05-25 14:27:42,812 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=180, currTerm=179, granted=true, requestLastLogId=LogId [index=172, term=179], lastLogId=LogId [index=172, term=179].

2024-05-25 14:27:42,796 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_173.

2024-05-25 14:27:42,810 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:27:42,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=187, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 14:27:42,817 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=180, currTerm=179.

2024-05-25 14:27:42,817 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 172 to 175, cost 0 ms.

2024-05-25 14:27:42,815 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 168 to 171, cost 1 ms.

2024-05-25 14:27:42,817 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=185, currTerm=184.

2024-05-25 14:27:42,817 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 173 to 176, cost 0 ms.

2024-05-25 14:27:42,817 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=187, currTerm=187, granted=true, requestLastLogId=LogId [index=175, term=186], lastLogId=LogId [index=175, term=186].

2024-05-25 14:27:42,826 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=187, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 14:27:42,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=187, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 14:27:42,827 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 171 to 174, cost 0 ms.

2024-05-25 14:27:42,830 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=180, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 14:27:42,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=185, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-25 14:27:42,843 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,845 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=187, currTerm=187.

2024-05-25 14:27:42,854 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=185, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 14:27:42,855 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,856 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=180, votedFor=nacos3:7848, cost time=13 ms

2024-05-25 14:27:42,856 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,859 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,860 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,856 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=185, currTerm=185, granted=true, requestLastLogId=LogId [index=175, term=184], lastLogId=LogId [index=175, term=184].

2024-05-25 14:27:42,871 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=185, currTerm=185, granted=true, requestLastLogId=LogId [index=175, term=184], lastLogId=LogId [index=175, term=184].

2024-05-25 14:27:42,859 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,858 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,871 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=187, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:27:42,875 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:27:42,871 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:27:42,878 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:27:42,938 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:27:42,943 INFO onLeaderStart: term=187.

2024-05-25 14:27:46,668 INFO Connection disconnected: /172.25.0.3:52560

2024-05-25 14:28:28,947 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499800384s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 14:44:05,409 INFO Node <naming_instance_metadata/nacos1:7848> term 180 start preVote.

2024-05-25 14:44:05,414 INFO Node <naming_service_metadata/nacos1:7848> term 185 start preVote.

2024-05-25 14:44:05,415 INFO Node <naming_persistent_service_v2/nacos1:7848> term 187 start preVote.

2024-05-25 14:44:05,506 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=187, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:44:05,508 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=178, lastLogIncluded=0, lastLogIndex=178, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=124, type=Follower] is going to quit

2024-05-25 14:44:05,529 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=178, lastLogIncluded=0, lastLogIndex=178, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=125, type=Follower] is going to quit

2024-05-25 14:44:05,411 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=180, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 14:44:05,415 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=187, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 14:44:05,417 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=185, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:44:05,508 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:44:05,541 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:44:05,561 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:44:05,562 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=181, currTerm=180, because the leader nacos3:7848's lease is still valid.

2024-05-25 14:44:05,570 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:44:05,584 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=188, currTerm=187, granted=true, requestLastLogId=LogId [index=178, term=187], lastLogId=LogId [index=178, term=187].

2024-05-25 14:44:05,588 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=180, granted=false.

2024-05-25 14:44:05,603 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=188, currTerm=187, because the leader nacos3:7848's lease is still valid.

2024-05-25 14:44:05,611 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=188, currTerm=187.

2024-05-25 14:44:05,620 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=185, granted=true.

2024-05-25 14:44:05,621 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=185.

2024-05-25 14:44:05,625 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=180, granted=true.

2024-05-25 14:44:05,625 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=180.

2024-05-25 14:44:05,626 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=180, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:44:05,632 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=185, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:44:05,634 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=187, granted=true.

2024-05-25 14:44:05,635 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=187.

2024-05-25 14:44:05,636 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=187, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:44:05,636 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:44:05,643 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=188, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-25 14:44:05,644 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:44:05,644 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=181, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 14:44:05,646 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=181, currTerm=181.

2024-05-25 14:44:05,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=188, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 14:44:05,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=186, votedFor=nacos1:7848, cost time=24 ms

2024-05-25 14:44:05,657 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=186, currTerm=186, granted=true, requestLastLogId=LogId [index=176, term=185], lastLogId=LogId [index=176, term=185].

2024-05-25 14:44:05,657 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=186, currTerm=186.

2024-05-25 14:44:05,660 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:44:05,667 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=188, votedFor=nacos2:7848, cost time=23 ms

2024-05-25 14:44:05,684 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=181, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:44:05,684 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:44:05,686 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=188, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:44:05,690 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:44:05,690 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:44:05,687 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:44:05,691 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:44:05,693 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=186, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:44:05,693 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:44:05,696 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:44:05,724 INFO onLeaderStart: term=181.

2024-05-25 14:44:05,752 INFO onLeaderStart: term=186.

2024-05-25 14:44:05,755 INFO onLeaderStart: term=188.

2024-05-25 14:44:37,563 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499793382s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-25 14:45:05,364 INFO Node <naming_persistent_service/nacos1:7848> term 188 start preVote.

2024-05-25 14:45:05,460 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497792497s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 14:45:05,364 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=188, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:45:05,349 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=188, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:45:05,516 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=188, granted=true.

2024-05-25 14:45:05,353 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=186, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:45:05,461 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.497462257s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 14:45:05,349 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=181, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 14:45:05,517 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=188.

2024-05-25 14:45:05,518 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:45:05,518 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=123, type=Follower] is going to quit

2024-05-25 14:45:05,519 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=124, type=Follower] is going to quit

2024-05-25 14:45:05,518 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=137, type=Follower] is going to quit

2024-05-25 14:45:05,521 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=136, type=Follower] is going to quit

2024-05-25 14:45:05,518 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:45:05,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=188, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:45:05,518 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=174, lastLogIncluded=0, lastLogIndex=174, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=130, type=Follower] is going to quit

2024-05-25 14:45:05,530 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=174, lastLogIncluded=0, lastLogIndex=174, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=131, type=Follower] is going to quit

2024-05-25 14:45:05,518 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 14:45:05,524 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=189, currTerm=188, granted=true, requestLastLogId=LogId [index=177, term=188], lastLogId=LogId [index=177, term=188].

2024-05-25 14:45:06,112 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,129 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,129 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=189, currTerm=188, granted=true, requestLastLogId=LogId [index=177, term=188], lastLogId=LogId [index=177, term=188].

2024-05-25 14:45:06,128 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=187, currTerm=186, granted=true, requestLastLogId=LogId [index=177, term=186], lastLogId=LogId [index=177, term=186].

2024-05-25 14:45:06,143 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,133 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=182, currTerm=181, granted=true, requestLastLogId=LogId [index=174, term=181], lastLogId=LogId [index=174, term=181].

2024-05-25 14:45:06,138 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=189, votedFor=nacos1:7848, cost time=619 ms

2024-05-25 14:45:06,139 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,140 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=189, currTerm=188.

2024-05-25 14:45:06,144 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,152 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,147 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,147 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=182, currTerm=181, granted=true, requestLastLogId=LogId [index=174, term=181], lastLogId=LogId [index=174, term=181].

2024-05-25 14:45:06,149 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 14:45:06,157 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=187, currTerm=186.

2024-05-25 14:45:06,160 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=182, currTerm=181, granted=true, requestLastLogId=LogId [index=174, term=181], lastLogId=LogId [index=174, term=181].

2024-05-25 14:45:06,160 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=189, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:45:06,167 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=182, currTerm=181.

2024-05-25 14:45:06,167 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,169 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:45:06,179 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:45:06,174 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=189, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 14:45:06,202 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:45:06,210 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,210 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,233 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=187, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-25 14:45:06,259 INFO onLeaderStart: term=189.

2024-05-25 14:45:06,266 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=182, votedFor=0.0.0.0:0, cost time=94 ms

2024-05-25 14:45:06,277 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=189, votedFor=nacos2:7848, cost time=68 ms

2024-05-25 14:45:06,287 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,290 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=187, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 14:45:06,291 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,292 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,292 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:45:06,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=182, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 14:55:54,350 INFO Node <naming_persistent_service_v2/nacos1:7848> term 189 start preVote.

2024-05-25 14:55:55,210 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=190, currTerm=189, granted=true, requestLastLogId=LogId [index=180, term=189], lastLogId=LogId [index=180, term=189].

2024-05-25 14:55:54,350 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=189, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 14:55:55,270 INFO Node <naming_service_metadata/nacos1:7848> term 187 start preVote.

2024-05-25 14:55:55,318 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=190, currTerm=189.

2024-05-25 14:55:55,329 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-25 14:55:55,270 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=187, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 14:55:55,362 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=187, granted=true.

2024-05-25 14:55:55,362 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=187.

2024-05-25 14:55:55,355 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=189, granted=true.

2024-05-25 14:55:55,364 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=189.

2024-05-25 14:55:55,365 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=189, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 14:55:55,369 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=188, votedFor=nacos1:7848, cost time=4 ms

2024-05-25 14:55:55,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=190, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-25 14:55:55,371 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=180, lastLogIncluded=0, lastLogIndex=180, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=127, type=Follower] is going to quit

2024-05-25 14:55:55,371 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=180, lastLogIncluded=0, lastLogIndex=180, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=128, type=Follower] is going to quit

2024-05-25 14:55:55,370 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=190, votedFor=nacos1:7848, cost time=4 ms

2024-05-25 14:55:55,387 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=188, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:55:55,388 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:55:55,387 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=190, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 14:55:55,394 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 14:55:55,388 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=190, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 14:55:55,397 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:55:55,399 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:55:55,394 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 14:55:55,405 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=188, currTerm=188, granted=true, requestLastLogId=LogId [index=178, term=187], lastLogId=LogId [index=178, term=187].

2024-05-25 14:55:55,409 INFO onLeaderStart: term=190.

2024-05-25 14:55:55,410 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 14:55:55,413 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 14:55:55,433 INFO onLeaderStart: term=188.

2024-05-25 14:55:55,449 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 14:55:55,471 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:55:55,475 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 14:56:00,679 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=183, currTerm=182, granted=true, requestLastLogId=LogId [index=175, term=182], lastLogId=LogId [index=175, term=182].

2024-05-25 14:56:00,683 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=183, currTerm=182.

2024-05-25 14:56:00,683 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=182, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 14:56:00,688 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=183, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 14:56:00,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=183, votedFor=nacos3:7848, cost time=2 ms

2024-05-25 15:12:18,121 INFO Node <naming_instance_metadata/nacos1:7848> term 183 start preVote.

2024-05-25 15:12:18,121 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=188, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:12:18,873 INFO Node <naming_persistent_service/nacos1:7848> term 190 start preVote.

2024-05-25 15:12:18,873 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=183, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 15:12:18,870 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.490914498s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 15:12:18,909 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=190, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:12:18,912 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:12:19,051 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_179.

2024-05-25 15:12:19,054 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_179.

2024-05-25 15:12:19,071 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_175.

2024-05-25 15:12:19,078 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.498820193s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 15:12:19,081 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_176.

2024-05-25 15:12:19,082 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_176.

2024-05-25 15:12:18,915 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=179, lastLogIncluded=0, lastLogIndex=179, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=126, type=Follower] is going to quit

2024-05-25 15:12:19,156 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=179, lastLogIncluded=0, lastLogIndex=179, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=127, type=Follower] is going to quit

2024-05-25 15:12:18,913 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=190, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:12:18,920 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:12:18,919 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=179, lastLogIncluded=0, lastLogIndex=179, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=138, type=Follower] is going to quit

2024-05-25 15:12:19,199 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=179, lastLogIncluded=0, lastLogIndex=179, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=139, type=Follower] is going to quit

2024-05-25 15:12:19,102 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_172.

2024-05-25 15:12:19,102 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 174 to 176, cost 0 ms.

2024-05-25 15:12:19,204 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=189, currTerm=188, granted=true, requestLastLogId=LogId [index=179, term=188], lastLogId=LogId [index=179, term=188].

2024-05-25 15:12:19,197 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_181.

2024-05-25 15:12:19,210 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_181.

2024-05-25 15:12:19,199 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_179.

2024-05-25 15:12:19,211 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_179.

2024-05-25 15:12:19,213 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_177.

2024-05-25 15:12:19,208 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=191, currTerm=190, granted=true, requestLastLogId=LogId [index=179, term=190], lastLogId=LogId [index=179, term=190].

2024-05-25 15:12:19,214 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_175.

2024-05-25 15:12:19,216 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=189, currTerm=188, granted=true, requestLastLogId=LogId [index=179, term=188], lastLogId=LogId [index=179, term=188].

2024-05-25 15:12:19,219 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=191, currTerm=190, granted=true, requestLastLogId=LogId [index=179, term=190], lastLogId=LogId [index=179, term=190].

2024-05-25 15:12:19,243 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 175 to 176, cost 0 ms.

2024-05-25 15:12:19,242 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 171 to 173, cost 4 ms.

2024-05-25 15:12:19,250 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=191, currTerm=190, granted=true, requestLastLogId=LogId [index=179, term=190], lastLogId=LogId [index=179, term=190].

2024-05-25 15:12:19,243 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 176 to 178, cost 11 ms.

2024-05-25 15:12:19,260 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=183, granted=true.

2024-05-25 15:12:19,291 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=183.

2024-05-25 15:12:19,292 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=183, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:12:19,293 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=190, granted=true.

2024-05-25 15:12:19,299 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=190.

2024-05-25 15:12:19,290 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:19,304 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=190, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:12:19,300 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=184, votedFor=nacos1:7848, cost time=7 ms

2024-05-25 15:12:19,322 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=191, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 15:12:19,329 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=184, currTerm=184, granted=true, requestLastLogId=LogId [index=176, term=183], lastLogId=LogId [index=176, term=183].

2024-05-25 15:12:19,337 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:19,351 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=189, currTerm=188.

2024-05-25 15:12:19,352 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=191, currTerm=190.

2024-05-25 15:12:19,353 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:12:19,376 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=189, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 15:12:19,379 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=191, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-25 15:12:19,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=189, votedFor=nacos3:7848, cost time=15 ms

2024-05-25 15:12:19,397 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=191, votedFor=nacos2:7848, cost time=17 ms

2024-05-25 15:12:19,398 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=189, currTerm=189.

2024-05-25 15:12:19,398 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:19,402 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=191, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:12:19,406 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:12:19,408 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:12:19,409 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:12:19,410 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:19,411 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=184, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:12:19,413 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=191, currTerm=191, because the leader nacos1:7848's lease is still valid.

2024-05-25 15:12:19,415 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=191, currTerm=191, because the leader nacos1:7848's lease is still valid.

2024-05-25 15:12:19,415 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:12:19,416 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=191, currTerm=191, because the leader nacos1:7848's lease is still valid.

2024-05-25 15:12:19,417 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:12:19,421 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=191, currTerm=191.

2024-05-25 15:12:19,423 INFO onLeaderStart: term=191.

2024-05-25 15:12:19,426 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:19,427 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:12:19,433 INFO onLeaderStart: term=184.

2024-05-25 15:12:19,445 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:12:23,914 INFO Connection disconnected: /172.25.0.3:44700

2024-05-25 15:12:57,173 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=191, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:12:57,189 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=184, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:12:57,216 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=132, type=Follower] is going to quit

2024-05-25 15:12:57,221 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=177, lastLogIncluded=0, lastLogIndex=177, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=133, type=Follower] is going to quit

2024-05-25 15:12:57,203 INFO Node <naming_service_metadata/nacos1:7848> term 189 start preVote.

2024-05-25 15:12:57,203 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=189, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 15:12:57,210 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=182, lastLogIncluded=0, lastLogIndex=182, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=129, type=Follower] is going to quit

2024-05-25 15:12:57,243 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=182, lastLogIncluded=0, lastLogIndex=182, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=130, type=Follower] is going to quit

2024-05-25 15:12:57,210 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:12:57,216 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:12:57,305 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,308 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=189, granted=true.

2024-05-25 15:12:57,309 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=189.

2024-05-25 15:12:57,309 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=192, currTerm=191, because the leader nacos2:7848's lease is still valid.

2024-05-25 15:12:57,309 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=189, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:12:57,314 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=185, currTerm=184, granted=true, requestLastLogId=LogId [index=177, term=184], lastLogId=LogId [index=177, term=184].

2024-05-25 15:12:57,314 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=192, currTerm=191, granted=true, requestLastLogId=LogId [index=182, term=191], lastLogId=LogId [index=182, term=191].

2024-05-25 15:12:57,315 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=192, currTerm=191, granted=true, requestLastLogId=LogId [index=182, term=191], lastLogId=LogId [index=182, term=191].

2024-05-25 15:12:57,318 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=185, currTerm=184.

2024-05-25 15:12:57,326 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=192, currTerm=191.

2024-05-25 15:12:57,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=190, votedFor=nacos1:7848, cost time=620 ms

2024-05-25 15:12:57,930 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=185, votedFor=0.0.0.0:0, cost time=612 ms

2024-05-25 15:12:57,931 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=192, votedFor=0.0.0.0:0, cost time=604 ms

2024-05-25 15:12:57,932 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,938 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=190, currTerm=190, granted=true, requestLastLogId=LogId [index=180, term=189], lastLogId=LogId [index=180, term=189].

2024-05-25 15:12:57,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=185, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 15:12:57,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=192, votedFor=nacos3:7848, cost time=6 ms

2024-05-25 15:12:57,942 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,940 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,942 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,943 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:57,944 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:12:57,965 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=190, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:12:57,965 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:12:57,945 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=185, currTerm=185, granted=true, requestLastLogId=LogId [index=177, term=184], lastLogId=LogId [index=177, term=184].

2024-05-25 15:12:57,966 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:12:57,987 INFO onLeaderStart: term=190.

2024-05-25 15:12:57,998 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:12:58,018 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=192, currTerm=191.

2024-05-25 15:12:58,025 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=191, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 15:12:58,032 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:12:58,033 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=192, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 15:12:58,039 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=192, votedFor=nacos3:7848, cost time=4 ms

2024-05-25 15:13:20,913 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499778549s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 15:13:26,240 INFO Node <naming_persistent_service/nacos1:7848> term 192 start preVote.

2024-05-25 15:13:26,428 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=192, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 15:13:30,853 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499239123s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 15:13:31,141 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=190, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:13:31,657 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=193, currTerm=192, because the leader nacos3:7848's lease is still valid.

2024-05-25 15:13:31,787 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:13:32,155 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=193, currTerm=192.

2024-05-25 15:13:31,767 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=181, lastLogIncluded=0, lastLogIndex=181, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=129, type=Follower] is going to quit

2024-05-25 15:13:33,241 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=181, lastLogIncluded=0, lastLogIndex=181, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=128, type=Follower] is going to quit

2024-05-25 15:13:32,624 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=186, currTerm=185.

2024-05-25 15:13:32,320 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=193, currTerm=192, granted=true, requestLastLogId=LogId [index=183, term=192], lastLogId=LogId [index=183, term=192].

2024-05-25 15:13:33,898 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=193, currTerm=192.

2024-05-25 15:13:33,302 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=192, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 15:13:33,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=193, votedFor=0.0.0.0:0, cost time=826 ms

2024-05-25 15:13:33,894 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=185, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 15:13:33,900 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:13:34,005 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=191, currTerm=190, granted=true, requestLastLogId=LogId [index=181, term=190], lastLogId=LogId [index=181, term=190].

2024-05-25 15:13:34,337 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=193, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 15:13:34,099 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=186, votedFor=0.0.0.0:0, cost time=348 ms

2024-05-25 15:13:34,382 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:13:34,435 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=186, currTerm=186, granted=true, requestLastLogId=LogId [index=178, term=185], lastLogId=LogId [index=178, term=185].

2024-05-25 15:13:34,437 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:13:34,437 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=193, votedFor=0.0.0.0:0, cost time=277 ms

2024-05-25 15:13:34,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=193, votedFor=nacos2:7848, cost time=358 ms

2024-05-25 15:13:35,152 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=186, votedFor=nacos2:7848, cost time=390 ms

2024-05-25 15:13:36,149 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=191, currTerm=190.

2024-05-25 15:13:36,384 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=193, votedFor=nacos3:7848, cost time=414 ms

2024-05-25 15:13:36,425 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=192, currTerm=193.

2024-05-25 15:13:36,453 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=191, votedFor=0.0.0.0:0, cost time=160 ms

2024-05-25 15:13:36,433 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=192, currTerm=193.

2024-05-25 15:13:36,904 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=193, currTerm=193, granted=true, requestLastLogId=LogId [index=183, term=192], lastLogId=LogId [index=183, term=192].

2024-05-25 15:13:36,800 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:13:37,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=191, votedFor=nacos2:7848, cost time=696 ms

2024-05-25 15:13:37,633 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:29:24,060 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=191, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:29:24,059 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=193, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 15:29:24,059 INFO Node <naming_persistent_service/nacos1:7848> term 193 start preVote.

2024-05-25 15:29:24,057 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=186, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:29:25,018 INFO Node <naming_persistent_service/nacos1:7848> term 193 start preVote.

2024-05-25 15:29:24,060 INFO Node <naming_service_metadata/nacos1:7848> term 191 start preVote.

2024-05-25 15:29:24,057 INFO Node <naming_instance_metadata/nacos1:7848> term 186 start preVote.

2024-05-25 15:29:25,165 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=193, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:29:25,089 INFO Node <naming_persistent_service_v2/nacos1:7848> term 193 start preVote.

2024-05-25 15:29:25,160 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=194, currTerm=193, granted=true, requestLastLogId=LogId [index=184, term=193], lastLogId=LogId [index=184, term=193].

2024-05-25 15:29:25,162 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=191, granted=true.

2024-05-25 15:29:25,189 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=191.

2024-05-25 15:29:25,190 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=191, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:29:25,205 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=186, granted=false.

2024-05-25 15:29:25,210 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=186, granted=true.

2024-05-25 15:29:25,211 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=186.

2024-05-25 15:29:25,212 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=193, granted=true.

2024-05-25 15:29:25,224 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=193, granted=true.

2024-05-25 15:29:25,225 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=193.

2024-05-25 15:29:25,226 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:29:25,213 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=186, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:29:25,213 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=192, votedFor=nacos1:7848, cost time=7 ms

2024-05-25 15:29:25,213 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=193.

2024-05-25 15:29:25,226 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:29:25,229 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=193, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:29:25,232 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=192, currTerm=192.

2024-05-25 15:29:25,244 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:29:25,236 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=194, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 15:29:25,245 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:29:25,239 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=187, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 15:29:25,245 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=192, currTerm=192, granted=true, requestLastLogId=LogId [index=182, term=191], lastLogId=LogId [index=182, term=191].

2024-05-25 15:29:25,248 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=194, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 15:29:25,250 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:29:25,256 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=194, currTerm=194.

2024-05-25 15:29:25,256 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=192, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:29:25,264 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:29:25,262 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=187, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:29:25,263 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=194, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:29:25,270 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:29:25,268 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:29:25,269 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:29:25,271 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:29:25,272 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:29:25,272 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:29:25,278 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:29:25,282 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:29:25,286 INFO onLeaderStart: term=187.

2024-05-25 15:29:25,288 INFO onLeaderStart: term=192.

2024-05-25 15:29:25,294 INFO onLeaderStart: term=194.

2024-05-25 15:29:59,140 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.494098700s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 15:45:53,441 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=194, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:45:54,887 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=183, lastLogIncluded=0, lastLogIndex=183, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=140, type=Follower] is going to quit

2024-05-25 15:45:54,892 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=183, lastLogIncluded=0, lastLogIndex=183, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=141, type=Follower] is going to quit

2024-05-25 15:45:54,894 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=195, currTerm=194, granted=true, requestLastLogId=LogId [index=183, term=194], lastLogId=LogId [index=183, term=194].

2024-05-25 15:45:53,635 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=194, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:45:53,634 INFO Node <naming_persistent_service/nacos1:7848> term 194 start preVote.

2024-05-25 15:45:54,909 INFO Node <naming_persistent_service/nacos1:7848> term 194 start preVote.

2024-05-25 15:45:54,980 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_185.

2024-05-25 15:45:54,981 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_185.

2024-05-25 15:45:54,985 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_181.

2024-05-25 15:45:54,886 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=193, currTerm=192, granted=true, requestLastLogId=LogId [index=183, term=192], lastLogId=LogId [index=183, term=192].

2024-05-25 15:45:54,886 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=188, currTerm=187, granted=true, requestLastLogId=LogId [index=180, term=187], lastLogId=LogId [index=180, term=187].

2024-05-25 15:45:54,887 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:45:55,011 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 178 to 182, cost 1 ms.

2024-05-25 15:45:55,027 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=187, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:45:55,041 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=180, lastLogIncluded=0, lastLogIndex=180, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=135, type=Follower] is going to quit

2024-05-25 15:45:55,043 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=180, lastLogIncluded=0, lastLogIndex=180, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=134, type=Follower] is going to quit

2024-05-25 15:45:55,014 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=195, currTerm=194.

2024-05-25 15:45:55,057 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,038 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=194, granted=false.

2024-05-25 15:45:55,044 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:45:55,044 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=193, currTerm=192.

2024-05-25 15:45:55,057 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=188, currTerm=187, granted=true, requestLastLogId=LogId [index=180, term=187], lastLogId=LogId [index=180, term=187].

2024-05-25 15:45:55,063 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=194, granted=true.

2024-05-25 15:45:55,064 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-25 15:45:55,064 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=188, currTerm=187.

2024-05-25 15:45:55,070 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=195, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-25 15:45:55,070 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_183.

2024-05-25 15:45:55,095 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_183.

2024-05-25 15:45:55,074 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_183.

2024-05-25 15:45:55,098 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_183.

2024-05-25 15:45:55,078 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=193, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-25 15:45:55,087 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_180.

2024-05-25 15:45:55,101 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_180.

2024-05-25 15:45:55,090 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=194.

2024-05-25 15:45:55,102 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=188, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 15:45:55,103 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=188, currTerm=188.

2024-05-25 15:45:55,094 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,100 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=183, lastLogIncluded=0, lastLogIndex=183, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=131, type=Follower] is going to quit

2024-05-25 15:45:55,102 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_179.

2024-05-25 15:45:55,105 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_179.

2024-05-25 15:45:55,105 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=195, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 15:45:55,128 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,129 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 176 to 180, cost 1 ms.

2024-05-25 15:45:55,105 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=194, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 15:45:55,105 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_176.

2024-05-25 15:45:55,106 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:45:55,112 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=183, lastLogIncluded=0, lastLogIndex=183, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=132, type=Follower] is going to quit

2024-05-25 15:45:55,112 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=188, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 15:45:55,130 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=195, currTerm=195, granted=true, requestLastLogId=LogId [index=183, term=194], lastLogId=LogId [index=183, term=194].

2024-05-25 15:45:55,132 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 176 to 180, cost 0 ms.

2024-05-25 15:45:55,136 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:45:55,138 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,138 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,139 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 173 to 177, cost 0 ms.

2024-05-25 15:45:55,139 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,148 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,174 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:45:55,175 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=195, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 15:45:55,185 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=195, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:45:55,186 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:45:55,189 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:45:55,202 INFO onLeaderStart: term=195.

2024-05-25 15:45:55,217 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:45:58,442 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 15:45:58,444 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 15:45:58,444 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 15:45:58,444 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 15:45:59,774 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 15:46:25,618 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.765083572s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 15:46:27,241 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499754566s. [closed=[], committed=[remote_addr=nacos2/172.25.0.4:7848]]], groupId=naming_persistent_service

2024-05-25 15:46:28,349 INFO Node <naming_instance_metadata/nacos1:7848> term 188 start preVote.

2024-05-25 15:46:28,350 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=188, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 15:46:28,523 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=188, granted=true.

2024-05-25 15:46:28,530 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=188.

2024-05-25 15:46:28,553 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:46:28,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=189, votedFor=nacos1:7848, cost time=110 ms

2024-05-25 15:46:29,157 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=189, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 15:46:29,190 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 15:46:29,391 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 15:46:29,665 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 15:46:29,994 INFO onLeaderStart: term=189.

2024-05-25 15:46:40,766 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499631242s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 15:56:57,047 INFO Node <naming_service_metadata/nacos1:7848> term 193 start preVote.

2024-05-25 15:56:57,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=193, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:56:57,047 INFO Node <naming_persistent_service_v2/nacos1:7848> term 195 start preVote.

2024-05-25 15:56:57,047 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=195, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 15:56:57,270 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=189, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:56:57,270 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=195, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 15:56:57,299 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=186, lastLogIncluded=0, lastLogIndex=186, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=131, type=Follower] is going to quit

2024-05-25 15:56:57,299 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=182, lastLogIncluded=0, lastLogIndex=182, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=137, type=Follower] is going to quit

2024-05-25 15:56:57,308 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=186, lastLogIncluded=0, lastLogIndex=186, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=132, type=Follower] is going to quit

2024-05-25 15:56:57,307 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:56:57,310 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=182, lastLogIncluded=0, lastLogIndex=182, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=138, type=Follower] is going to quit

2024-05-25 15:56:57,348 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=196, currTerm=195, granted=true, requestLastLogId=LogId [index=186, term=195], lastLogId=LogId [index=186, term=195].

2024-05-25 15:56:57,429 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 15:56:57,439 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=190, currTerm=189, granted=true, requestLastLogId=LogId [index=182, term=189], lastLogId=LogId [index=182, term=189].

2024-05-25 15:56:57,428 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,421 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=195, granted=true.

2024-05-25 15:56:57,440 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=190, currTerm=189, granted=true, requestLastLogId=LogId [index=182, term=189], lastLogId=LogId [index=182, term=189].

2024-05-25 15:56:57,440 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=195.

2024-05-25 15:56:57,441 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=190, currTerm=189, granted=true, requestLastLogId=LogId [index=182, term=189], lastLogId=LogId [index=182, term=189].

2024-05-25 15:56:57,447 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=194, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-25 15:56:57,447 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=196, currTerm=195, granted=true, requestLastLogId=LogId [index=186, term=195], lastLogId=LogId [index=186, term=195].

2024-05-25 15:56:57,447 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=196, currTerm=196, granted=true, requestLastLogId=LogId [index=184, term=195], lastLogId=LogId [index=184, term=195].

2024-05-25 15:56:57,448 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=194, currTerm=194, because the leader nacos3:7848's lease is still valid.

2024-05-25 15:56:57,454 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=196, currTerm=196.

2024-05-25 15:56:57,455 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=194, currTerm=194.

2024-05-25 15:56:57,456 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 15:56:57,457 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=193, currTerm=194.

2024-05-25 15:56:57,458 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,461 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=193, currTerm=194.

2024-05-25 15:56:57,464 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,468 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,470 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=194, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 15:56:57,476 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=196, currTerm=195.

2024-05-25 15:56:57,485 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=196, votedFor=nacos1:7848, cost time=26 ms

2024-05-25 15:56:57,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=194, votedFor=nacos3:7848, cost time=20 ms

2024-05-25 15:56:57,493 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=190, currTerm=189.

2024-05-25 15:56:57,510 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=193, currTerm=194.

2024-05-25 15:56:57,523 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=196, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-25 15:56:57,529 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 15:56:57,530 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 15:56:57,533 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=190, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-25 15:56:57,534 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=190, currTerm=190.

2024-05-25 15:56:57,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=196, votedFor=nacos2:7848, cost time=15 ms

2024-05-25 15:56:57,547 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,547 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,547 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=196, currTerm=196.

2024-05-25 15:56:57,548 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=190, votedFor=nacos2:7848, cost time=13 ms

2024-05-25 15:56:57,552 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,552 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 15:56:57,557 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:13:12,569 INFO Node <naming_service_metadata/nacos1:7848> term 194 start preVote.

2024-05-25 16:13:12,569 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=194, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:13:12,603 INFO Node <naming_instance_metadata/nacos1:7848> term 190 start preVote.

2024-05-25 16:13:12,635 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=190, granted=true.

2024-05-25 16:13:12,635 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=190.

2024-05-25 16:13:12,644 INFO Node <naming_persistent_service_v2/nacos1:7848> term 196 start preVote.

2024-05-25 16:13:12,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=191, votedFor=nacos1:7848, cost time=26 ms

2024-05-25 16:13:12,668 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=196, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:13:12,679 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=190, currTerm=191.

2024-05-25 16:13:12,722 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=197, currTerm=196, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:13:12,749 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:13:12,754 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=194, granted=false.

2024-05-25 16:13:12,754 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=190, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:13:12,757 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=191, currTerm=191, granted=true, requestLastLogId=LogId [index=183, term=190], lastLogId=LogId [index=183, term=190].

2024-05-25 16:13:12,760 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=197, currTerm=196, granted=true, requestLastLogId=LogId [index=185, term=196], lastLogId=LogId [index=185, term=196].

2024-05-25 16:13:12,766 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=196, granted=true.

2024-05-25 16:13:12,767 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=196.

2024-05-25 16:13:12,770 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:13:12,776 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=197, currTerm=196.

2024-05-25 16:13:12,780 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=194, granted=true.

2024-05-25 16:13:12,795 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=194.

2024-05-25 16:13:12,787 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=196, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:13:12,798 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=191, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:13:12,798 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=194, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:13:12,800 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=197, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 16:13:12,800 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:13:12,811 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:13:12,811 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=195, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 16:13:12,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=197, votedFor=nacos1:7848, cost time=28 ms

2024-05-25 16:13:12,830 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:13:12,832 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=197, currTerm=197.

2024-05-25 16:13:12,832 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=197, votedFor=nacos3:7848, cost time=19 ms

2024-05-25 16:13:12,836 INFO onLeaderStart: term=191.

2024-05-25 16:13:12,844 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=195, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:13:12,852 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:13:12,855 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:13:12,862 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:13:12,868 INFO onLeaderStart: term=195.

2024-05-25 16:13:25,790 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.292311746s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 16:13:55,525 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:13:55,524 INFO Node <naming_persistent_service_v2/nacos1:7848> term 197 start preVote.

2024-05-25 16:13:55,522 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:13:55,425 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=195, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:13:55,423 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=191, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:13:55,522 INFO Node <naming_persistent_service/nacos1:7848> term 197 start preVote.

2024-05-25 16:13:56,250 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=186, lastLogIncluded=0, lastLogIndex=186, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=133, type=Follower] is going to quit

2024-05-25 16:13:56,250 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:13:56,250 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:13:56,250 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=184, lastLogIncluded=0, lastLogIndex=184, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=139, type=Follower] is going to quit

2024-05-25 16:13:56,254 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=184, lastLogIncluded=0, lastLogIndex=184, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=140, type=Follower] is going to quit

2024-05-25 16:13:56,252 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=186, lastLogIncluded=0, lastLogIndex=186, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=134, type=Follower] is going to quit

2024-05-25 16:13:56,271 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=196, currTerm=195, granted=true, requestLastLogId=LogId [index=186, term=195], lastLogId=LogId [index=186, term=195].

2024-05-25 16:13:56,273 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=192, currTerm=191, granted=true, requestLastLogId=LogId [index=184, term=191], lastLogId=LogId [index=184, term=191].

2024-05-25 16:13:56,282 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=198, currTerm=197, granted=true, requestLastLogId=LogId [index=188, term=197], lastLogId=LogId [index=188, term=197].

2024-05-25 16:13:56,291 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=197, granted=true.

2024-05-25 16:13:56,296 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=197.

2024-05-25 16:13:56,296 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=197, granted=true.

2024-05-25 16:13:56,311 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=197.

2024-05-25 16:13:56,296 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=196, currTerm=195.

2024-05-25 16:13:56,297 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:13:56,312 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=192, currTerm=191.

2024-05-25 16:13:56,317 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=198, votedFor=nacos1:7848, cost time=19 ms

2024-05-25 16:13:56,406 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=192, votedFor=0.0.0.0:0, cost time=88 ms

2024-05-25 16:13:56,408 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=198, votedFor=nacos1:7848, cost time=96 ms

2024-05-25 16:13:56,331 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=196, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-25 16:13:56,421 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=198, currTerm=198.

2024-05-25 16:13:56,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=192, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 16:13:56,426 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=192, currTerm=192, granted=true, requestLastLogId=LogId [index=184, term=191], lastLogId=LogId [index=184, term=191].

2024-05-25 16:13:56,429 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=197, currTerm=198.

2024-05-25 16:13:56,429 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:13:56,431 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=196, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 16:13:56,439 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=196, currTerm=196, granted=true, requestLastLogId=LogId [index=186, term=195], lastLogId=LogId [index=186, term=195].

2024-05-25 16:13:56,460 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=198, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:13:56,463 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:13:56,465 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:13:56,466 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 16:13:56,476 INFO onLeaderStart: term=198.

2024-05-25 16:13:56,501 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:13:56,508 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:13:56,512 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 16:30:06,578 INFO Node <naming_instance_metadata/nacos1:7848> term 192 start preVote.

2024-05-25 16:30:07,451 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=196, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:30:07,451 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=192, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:30:07,454 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=198, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:30:07,451 INFO Node <naming_service_metadata/nacos1:7848> term 196 start preVote.

2024-05-25 16:30:06,609 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=198, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:30:07,451 INFO Node <naming_persistent_service/nacos1:7848> term 198 start preVote.

2024-05-25 16:30:07,503 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=193, currTerm=192.

2024-05-25 16:30:07,546 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=199, currTerm=198, granted=true, requestLastLogId=LogId [index=189, term=198], lastLogId=LogId [index=189, term=198].

2024-05-25 16:30:07,547 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_187.

2024-05-25 16:30:07,547 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_187.

2024-05-25 16:30:07,533 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=197, currTerm=196, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:30:07,551 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_185.

2024-05-25 16:30:07,547 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_187.

2024-05-25 16:30:07,552 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_187.

2024-05-25 16:30:07,535 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=187, lastLogIncluded=0, lastLogIndex=187, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=142, type=Follower] is going to quit

2024-05-25 16:30:07,535 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:30:07,554 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=187, lastLogIncluded=0, lastLogIndex=187, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=143, type=Follower] is going to quit

2024-05-25 16:30:07,550 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 199, expect=198.

2024-05-25 16:30:07,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=193, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 16:30:07,552 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_185.

2024-05-25 16:30:07,553 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_183.

2024-05-25 16:30:07,554 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 197, expect=196.

2024-05-25 16:30:07,555 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_189.

2024-05-25 16:30:07,556 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_183.

2024-05-25 16:30:07,558 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=198, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-25 16:30:07,561 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=199, currTerm=198, granted=true, requestLastLogId=LogId [index=187, term=198], lastLogId=LogId [index=187, term=198].

2024-05-25 16:30:07,573 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=196, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-25 16:30:07,574 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_189.

2024-05-25 16:30:07,577 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=199, currTerm=198.

2024-05-25 16:30:07,577 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_180.

2024-05-25 16:30:07,582 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=199, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-25 16:30:07,584 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 180 to 184, cost 0 ms.

2024-05-25 16:30:07,584 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 180 to 184, cost 1 ms.

2024-05-25 16:30:07,585 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_185.

2024-05-25 16:30:07,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=193, votedFor=nacos3:7848, cost time=26 ms

2024-05-25 16:30:07,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=197, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-25 16:30:07,588 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=196, currTerm=197.

2024-05-25 16:30:07,586 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 177 to 181, cost 0 ms.

2024-05-25 16:30:07,586 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=199, currTerm=199.

2024-05-25 16:30:07,587 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=192, currTerm=193.

2024-05-25 16:30:07,589 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=197, currTerm=197.

2024-05-25 16:30:07,589 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=198, currTerm=199.

2024-05-25 16:30:07,590 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=193, currTerm=193, granted=true, requestLastLogId=LogId [index=185, term=192], lastLogId=LogId [index=185, term=192].

2024-05-25 16:30:07,593 WARN Node <naming_instance_metadata/nacos1:7848> raise term 193 when get lastLogId.

2024-05-25 16:30:07,595 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=199, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-25 16:30:07,595 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 182 to 186, cost 0 ms.

2024-05-25 16:30:07,596 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:30:07,596 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=199, currTerm=199, granted=true, requestLastLogId=LogId [index=187, term=198], lastLogId=LogId [index=187, term=198].

2024-05-25 16:30:07,597 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=199, currTerm=199, granted=true, requestLastLogId=LogId [index=187, term=198], lastLogId=LogId [index=187, term=198].

2024-05-25 16:30:07,597 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=193, currTerm=193, granted=true, requestLastLogId=LogId [index=185, term=192], lastLogId=LogId [index=185, term=192].

2024-05-25 16:30:07,601 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=197, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 16:30:07,603 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=199, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 16:30:07,603 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=199, votedFor=nacos2:7848, cost time=4 ms

2024-05-25 16:30:07,603 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=199, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 16:30:07,603 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=197, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 16:30:07,604 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=199, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 16:30:41,364 INFO Node <naming_service_metadata/nacos1:7848> term 197 start preVote.

2024-05-25 16:30:41,371 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:30:42,753 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=194, currTerm=193, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:30:42,795 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=197, granted=false.

2024-05-25 16:30:42,905 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=197, granted=true.

2024-05-25 16:30:42,931 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=197.

2024-05-25 16:30:42,964 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:30:43,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=198, votedFor=nacos1:7848, cost time=117 ms

2024-05-25 16:30:43,197 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=197, currTerm=198.

2024-05-25 16:30:43,723 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=198, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:30:43,745 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=194, currTerm=193.

2024-05-25 16:30:43,831 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=193, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:30:43,783 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:30:43,879 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:30:44,062 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=194, votedFor=0.0.0.0:0, cost time=244 ms

2024-05-25 16:30:44,239 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:30:44,273 INFO onLeaderStart: term=198.

2024-05-25 16:30:44,332 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=194, votedFor=nacos2:7848, cost time=213 ms

2024-05-25 16:30:47,477 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=200, currTerm=199, granted=true, requestLastLogId=LogId [index=188, term=199], lastLogId=LogId [index=188, term=199].

2024-05-25 16:30:47,622 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=200, currTerm=199.

2024-05-25 16:30:47,681 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=199, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:30:48,148 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=200, votedFor=0.0.0.0:0, cost time=477 ms

2024-05-25 16:30:48,343 INFO Node <naming_persistent_service/nacos1:7848> term 199 start preVote.

2024-05-25 16:30:48,399 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=199, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:30:48,546 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=200, votedFor=nacos3:7848, cost time=151 ms

2024-05-25 16:30:48,631 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=199, granted=true.

2024-05-25 16:30:48,677 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=199.

2024-05-25 16:30:48,887 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=200, votedFor=nacos1:7848, cost time=153 ms

2024-05-25 16:30:49,111 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=200, currTerm=200, granted=true, requestLastLogId=LogId [index=190, term=199], lastLogId=LogId [index=190, term=199].

2024-05-25 16:30:50,327 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=200, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:30:50,460 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:30:50,488 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:30:50,647 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 16:30:51,520 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:30:51,931 INFO onLeaderStart: term=200.

2024-05-25 16:46:36,294 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 16:46:36,591 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=194, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:46:36,591 INFO Node <naming_instance_metadata/nacos1:7848> term 194 start preVote.

2024-05-25 16:46:36,589 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=200, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:46:36,541 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=200, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:46:37,067 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=133, type=Follower] is going to quit

2024-05-25 16:46:36,541 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=198, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:46:37,018 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 16:46:37,073 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=189, lastLogIncluded=0, lastLogIndex=189, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=135, type=Follower] is going to quit

2024-05-25 16:46:36,591 INFO Node <naming_persistent_service_v2/nacos1:7848> term 200 start preVote.

2024-05-25 16:46:37,074 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:46:37,062 INFO Node <naming_instance_metadata/nacos1:7848> term 194 start preVote.

2024-05-25 16:46:37,067 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=134, type=Follower] is going to quit

2024-05-25 16:46:37,070 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:46:37,077 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=189, lastLogIncluded=0, lastLogIndex=189, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=136, type=Follower] is going to quit

2024-05-25 16:46:37,078 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=201, currTerm=200, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:46:37,211 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 16:46:37,308 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=201, currTerm=200, granted=true, requestLastLogId=LogId [index=191, term=200], lastLogId=LogId [index=191, term=200].

2024-05-25 16:46:37,309 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=199, currTerm=198, granted=true, requestLastLogId=LogId [index=189, term=198], lastLogId=LogId [index=189, term=198].

2024-05-25 16:46:37,313 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=195, currTerm=194, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:46:37,316 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 16:46:37,324 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,326 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 16:46:37,328 INFO The channel nacos2:7848 has successfully established.

2024-05-25 16:46:37,320 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=201, currTerm=200, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:46:37,322 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,323 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=199, currTerm=198, granted=true, requestLastLogId=LogId [index=189, term=198], lastLogId=LogId [index=189, term=198].

2024-05-25 16:46:37,323 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=201, currTerm=200, granted=true, requestLastLogId=LogId [index=191, term=200], lastLogId=LogId [index=191, term=200].

2024-05-25 16:46:37,328 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=195, currTerm=194.

2024-05-25 16:46:37,330 INFO Peer nacos2:7848 is connected.

2024-05-25 16:46:37,334 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 16:46:37,336 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=201, currTerm=200.

2024-05-25 16:46:37,344 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=200, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:46:37,342 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,342 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=194, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:46:37,343 INFO The channel nacos3:7848 has successfully established.

2024-05-25 16:46:37,344 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=199, currTerm=198.

2024-05-25 16:46:37,350 INFO Peer nacos3:7848 is connected.

2024-05-25 16:46:37,349 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=195, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 16:46:37,351 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=201, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 16:46:37,356 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=200, currTerm=201.

2024-05-25 16:46:37,352 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=201, currTerm=200.

2024-05-25 16:46:37,355 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=199, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 16:46:37,357 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=200, currTerm=201.

2024-05-25 16:46:37,362 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=195, votedFor=nacos3:7848, cost time=7 ms

2024-05-25 16:46:37,363 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=194, currTerm=195.

2024-05-25 16:46:37,367 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=194, currTerm=195.

2024-05-25 16:46:37,367 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=194, currTerm=195.

2024-05-25 16:46:37,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=201, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 16:46:37,368 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=194, currTerm=195.

2024-05-25 16:46:37,371 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=199, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 16:46:37,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=201, votedFor=nacos2:7848, cost time=14 ms

2024-05-25 16:46:37,377 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,375 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=201, currTerm=201.

2024-05-25 16:46:37,378 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,379 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=201, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 16:46:37,382 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,386 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=201, votedFor=nacos3:7848, cost time=5 ms

2024-05-25 16:46:37,389 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:46:37,396 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:47:21,220 INFO Node <naming_instance_metadata/nacos1:7848> term 195 start preVote.

2024-05-25 16:47:21,221 INFO Node <naming_service_metadata/nacos1:7848> term 199 start preVote.

2024-05-25 16:47:21,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=195, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:47:21,221 INFO Node <naming_persistent_service/nacos1:7848> term 201 start preVote.

2024-05-25 16:47:21,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=199, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:47:21,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 16:47:21,221 INFO Node <naming_persistent_service_v2/nacos1:7848> term 201 start preVote.

2024-05-25 16:47:21,224 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:47:21,998 INFO Node <naming_instance_metadata/nacos1:7848> term 195 start preVote.

2024-05-25 16:47:22,015 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=202, currTerm=201, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:47:22,020 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=200, currTerm=199, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:47:22,036 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=202, currTerm=201, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:47:22,025 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=195, granted=false.

2024-05-25 16:47:22,054 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=196, currTerm=195, because the leader nacos3:7848's lease is still valid.

2024-05-25 16:47:22,026 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=202, currTerm=201, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:47:22,066 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=200, currTerm=199, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:47:22,102 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=195, granted=false.

2024-05-25 16:47:22,104 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=201, granted=false.

2024-05-25 16:47:22,106 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=201, granted=true.

2024-05-25 16:47:22,108 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=201.

2024-05-25 16:47:22,154 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:47:22,156 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:47:22,182 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=195, granted=true.

2024-05-25 16:47:22,184 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=195.

2024-05-25 16:47:22,185 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=195, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:47:22,184 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=199, granted=true.

2024-05-25 16:47:22,188 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=199.

2024-05-25 16:47:22,188 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=199, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:47:22,185 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=202, votedFor=nacos1:7848, cost time=30 ms

2024-05-25 16:47:22,190 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=201, granted=true.

2024-05-25 16:47:22,191 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=201.

2024-05-25 16:47:22,190 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=202, currTerm=202.

2024-05-25 16:47:22,192 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:47:22,193 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=196, votedFor=nacos1:7848, cost time=7 ms

2024-05-25 16:47:22,194 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:47:22,199 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=196, currTerm=196.

2024-05-25 16:47:22,201 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=200, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 16:47:22,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=202, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 16:47:22,206 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:47:22,212 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=202, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:47:22,213 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:47:22,214 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=202, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:47:22,215 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:47:22,217 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=200, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:47:22,222 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:47:22,225 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:47:22,214 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=196, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:47:22,227 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:47:22,218 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:47:22,232 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:47:22,228 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:47:22,232 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:47:22,236 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:47:22,256 INFO onLeaderStart: term=200.

2024-05-25 16:47:22,260 INFO onLeaderStart: term=202.

2024-05-25 16:47:22,263 INFO onLeaderStart: term=202.

2024-05-25 16:47:22,266 INFO onLeaderStart: term=196.

2024-05-25 16:58:00,890 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499656885s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 16:58:01,063 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=200, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:58:01,063 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=196, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:58:01,183 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=189, lastLogIncluded=0, lastLogIndex=189, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=142, type=Follower] is going to quit

2024-05-25 16:58:01,185 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=189, lastLogIncluded=0, lastLogIndex=189, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=143, type=Follower] is going to quit

2024-05-25 16:58:01,183 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:58:01,183 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=138, type=Follower] is going to quit

2024-05-25 16:58:01,184 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:58:01,196 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,062 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=202, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:58:01,058 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=202, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 16:58:01,373 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=136, type=Follower] is going to quit

2024-05-25 16:58:01,198 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=197, currTerm=196, granted=true, requestLastLogId=LogId [index=189, term=196], lastLogId=LogId [index=189, term=196].

2024-05-25 16:58:01,412 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=197, currTerm=196, granted=true, requestLastLogId=LogId [index=189, term=196], lastLogId=LogId [index=189, term=196].

2024-05-25 16:58:01,273 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=137, type=Follower] is going to quit

2024-05-25 16:58:01,367 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=145, type=Follower] is going to quit

2024-05-25 16:58:01,453 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=201, currTerm=200, granted=true, requestLastLogId=LogId [index=191, term=200], lastLogId=LogId [index=191, term=200].

2024-05-25 16:58:01,367 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:58:01,373 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 16:58:01,381 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=135, type=Follower] is going to quit

2024-05-25 16:58:01,452 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,453 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=144, type=Follower] is going to quit

2024-05-25 16:58:01,453 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,457 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=203, currTerm=202.

2024-05-25 16:58:01,458 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,459 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=197, currTerm=196.

2024-05-25 16:58:01,459 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,459 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,460 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=191, term=202], lastLogId=LogId [index=191, term=202].

2024-05-25 16:58:01,460 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,464 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=201, currTerm=200.

2024-05-25 16:58:01,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=203, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 16:58:01,474 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=197, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 16:58:01,474 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=201, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 16:58:01,475 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=203, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 16:58:01,476 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=203, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 16:58:01,475 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,477 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,475 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,476 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=203, currTerm=203, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 16:58:01,477 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=203, currTerm=202.

2024-05-25 16:58:01,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=197, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 16:58:01,486 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=201, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 16:58:01,486 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=203, votedFor=nacos2:7848, cost time=8 ms

2024-05-25 16:58:01,487 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=203, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 16:58:01,493 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:01,505 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=203, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 16:58:01,506 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 16:58:32,686 INFO Node <naming_instance_metadata/nacos1:7848> term 197 start preVote.

2024-05-25 16:58:32,714 INFO Node <naming_service_metadata/nacos1:7848> term 201 start preVote.

2024-05-25 16:58:32,715 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=197, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:58:32,727 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 16:58:33,135 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=197, granted=true.

2024-05-25 16:58:33,149 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=197.

2024-05-25 16:58:33,154 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=197, currTerm=198.

2024-05-25 16:58:33,182 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=197, currTerm=198.

2024-05-25 16:58:33,220 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=201, granted=true.

2024-05-25 16:58:33,274 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=201.

2024-05-25 16:58:33,295 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 16:58:33,553 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=198, votedFor=nacos1:7848, cost time=335 ms

2024-05-25 16:58:33,517 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:58:33,626 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 16:58:33,868 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=202, votedFor=nacos1:7848, cost time=151 ms

2024-05-25 16:58:33,879 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=204, currTerm=203, because the leader nacos2:7848's lease is still valid.

2024-05-25 16:58:34,113 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=204, currTerm=203.

2024-05-25 16:58:34,135 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=198, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:58:34,160 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=203, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 16:58:34,280 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:58:34,457 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=202, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 16:58:34,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=204, votedFor=0.0.0.0:0, cost time=462 ms

2024-05-25 16:58:34,777 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:58:34,968 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 16:58:35,256 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:58:35,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=204, votedFor=nacos3:7848, cost time=498 ms

2024-05-25 16:58:35,345 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 16:58:35,401 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 16:58:35,683 INFO onLeaderStart: term=198.

2024-05-25 16:58:35,775 INFO onLeaderStart: term=202.

2024-05-25 17:14:25,971 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=198, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:14:26,948 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=204, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 17:14:26,539 INFO Node <naming_persistent_service_v2/nacos1:7848> term 203 start preVote.

2024-05-25 17:14:26,942 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_192.

2024-05-25 17:14:26,588 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=202, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:14:26,587 INFO Node <naming_persistent_service/nacos1:7848> term 204 start preVote.

2024-05-25 17:14:26,998 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_195.

2024-05-25 17:14:26,998 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_195.

2024-05-25 17:14:27,006 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_189.

2024-05-25 17:14:27,010 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_191.

2024-05-25 17:14:27,011 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_191.

2024-05-25 17:14:27,017 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=195, term=204], lastLogId=LogId [index=195, term=204].

2024-05-25 17:14:26,993 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_193.

2024-05-25 17:14:27,019 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_193.

2024-05-25 17:14:27,010 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:14:26,539 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=203, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 17:14:27,025 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=205, currTerm=204.

2024-05-25 17:14:27,014 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=145, type=Follower] is going to quit

2024-05-25 17:14:27,029 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=191, lastLogIncluded=0, lastLogIndex=191, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=146, type=Follower] is going to quit

2024-05-25 17:14:27,038 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:26,978 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_192.

2024-05-25 17:14:27,026 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_187.

2024-05-25 17:14:27,026 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_185.

2024-05-25 17:14:27,041 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 186 to 190, cost 16 ms.

2024-05-25 17:14:27,049 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=140, type=Follower] is going to quit

2024-05-25 17:14:27,049 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=139, type=Follower] is going to quit

2024-05-25 17:14:27,050 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 17:14:27,050 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 17:14:27,050 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=193, term=202], lastLogId=LogId [index=193, term=202].

2024-05-25 17:14:27,052 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 184 to 188, cost 0 ms.

2024-05-25 17:14:27,054 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=203, granted=false.

2024-05-25 17:14:27,047 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_187.

2024-05-25 17:14:27,049 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:14:27,047 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=199, currTerm=198, granted=true, requestLastLogId=LogId [index=191, term=198], lastLogId=LogId [index=191, term=198].

2024-05-25 17:14:27,066 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=204, currTerm=203, because the leader nacos2:7848's lease is still valid.

2024-05-25 17:14:27,051 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=205, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-25 17:14:27,067 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,061 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 181 to 186, cost 0 ms.

2024-05-25 17:14:27,066 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=204, currTerm=203, because the leader nacos2:7848's lease is still valid.

2024-05-25 17:14:27,067 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,071 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 184 to 188, cost 0 ms.

2024-05-25 17:14:27,076 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=205, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 17:14:27,078 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=204, currTerm=205.

2024-05-25 17:14:27,079 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,074 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,084 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=204, currTerm=205.

2024-05-25 17:14:27,074 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,080 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=203, currTerm=202.

2024-05-25 17:14:27,081 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=203, granted=true.

2024-05-25 17:14:27,084 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=199, currTerm=198.

2024-05-25 17:14:27,089 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=203.

2024-05-25 17:14:27,091 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=203, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 17:14:27,097 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=203, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-25 17:14:27,109 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=204, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 17:14:27,109 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=199, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-25 17:14:27,115 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=203, votedFor=nacos3:7848, cost time=18 ms

2024-05-25 17:14:27,119 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=203, currTerm=203.

2024-05-25 17:14:27,123 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=204, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:14:27,123 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:14:27,124 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:14:27,124 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=199, votedFor=nacos3:7848, cost time=8 ms

2024-05-25 17:14:27,134 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,137 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:14:27,144 INFO onLeaderStart: term=204.

2024-05-25 17:14:27,151 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 17:30:59,480 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=204, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:31:00,434 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=147, type=Follower] is going to quit

2024-05-25 17:31:00,435 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=146, type=Follower] is going to quit

2024-05-25 17:30:59,487 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=199, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 17:30:59,486 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=203, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 17:30:59,482 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 17:30:59,482 INFO Node <naming_instance_metadata/nacos1:7848> term 199 start preVote.

2024-05-25 17:30:59,481 INFO Node <naming_persistent_service/nacos1:7848> term 205 start preVote.

2024-05-25 17:31:00,442 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=193, term=204], lastLogId=LogId [index=193, term=204].

2024-05-25 17:30:59,486 INFO Node <naming_service_metadata/nacos1:7848> term 203 start preVote.

2024-05-25 17:31:00,435 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:31:00,481 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=204, currTerm=203, because the leader nacos3:7848's lease is still valid.

2024-05-25 17:31:00,508 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:31:00,510 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=199, granted=false.

2024-05-25 17:31:00,512 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=200, currTerm=199, because the leader nacos3:7848's lease is still valid.

2024-05-25 17:31:00,515 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=199, granted=true.

2024-05-25 17:31:00,529 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=199.

2024-05-25 17:31:00,513 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=193, term=204], lastLogId=LogId [index=193, term=204].

2024-05-25 17:31:00,530 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=205, granted=false.

2024-05-25 17:31:00,531 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=199, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 17:31:00,532 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:31:00,532 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=193, term=204], lastLogId=LogId [index=193, term=204].

2024-05-25 17:31:00,541 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=203, granted=true.

2024-05-25 17:31:00,542 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=205, granted=true.

2024-05-25 17:31:00,545 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=205.

2024-05-25 17:31:00,543 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=205, currTerm=204.

2024-05-25 17:31:00,543 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=203.

2024-05-25 17:31:00,544 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=200, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 17:31:00,549 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 17:31:00,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=203, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 17:31:00,551 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 17:31:00,562 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=205, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 17:31:00,564 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=206, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 17:31:00,572 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=204, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 17:31:00,583 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=206, currTerm=206, granted=true, requestLastLogId=LogId [index=196, term=205], lastLogId=LogId [index=196, term=205].

2024-05-25 17:31:00,583 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=204, currTerm=204.

2024-05-25 17:31:00,586 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=205, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 17:31:00,592 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=206, currTerm=206.

2024-05-25 17:31:00,603 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=200, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:31:00,604 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:31:00,604 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:31:00,606 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:31:00,607 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:31:00,613 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 17:31:00,620 INFO onLeaderStart: term=200.

2024-05-25 17:31:00,624 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=204, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:31:00,625 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:31:00,626 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:31:00,639 INFO onLeaderStart: term=204.

2024-05-25 17:31:04,554 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 17:31:04,555 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 17:31:04,556 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 17:31:04,556 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 17:31:05,357 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 17:31:05,358 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 17:31:05,358 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 17:31:05,359 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 17:31:42,541 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499779375s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 17:31:44,861 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499788412s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 17:31:45,741 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499772995s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-25 17:31:45,773 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.498512587s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-25 17:31:49,141 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=206, currTerm=205, because the leader nacos3:7848's lease is still valid.

2024-05-25 17:31:49,388 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=206, currTerm=205.

2024-05-25 17:31:49,572 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=205, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 17:31:49,847 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=206, votedFor=0.0.0.0:0, cost time=292 ms

2024-05-25 17:31:49,994 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=206, votedFor=nacos2:7848, cost time=78 ms

2024-05-25 17:31:51,647 INFO Node <naming_persistent_service/nacos1:7848> term 206 start preVote.

2024-05-25 17:31:51,659 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=206, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 17:31:51,925 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=206, granted=true.

2024-05-25 17:31:51,941 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=206.

2024-05-25 17:31:52,021 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 17:31:52,397 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=207, votedFor=nacos1:7848, cost time=258 ms

2024-05-25 17:31:53,003 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=207, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:31:53,209 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:31:53,325 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:31:53,346 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 17:31:55,766 INFO onLeaderStart: term=207.

2024-05-25 17:47:28,768 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=206, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 17:47:28,769 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=207, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:47:29,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=198, lastLogIncluded=0, lastLogIndex=198, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=137, type=Follower] is going to quit

2024-05-25 17:47:28,769 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=204, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:47:29,626 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=195, lastLogIncluded=0, lastLogIndex=195, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=142, type=Follower] is going to quit

2024-05-25 17:47:29,629 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=195, lastLogIncluded=0, lastLogIndex=195, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=141, type=Follower] is going to quit

2024-05-25 17:47:29,652 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:47:28,768 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=200, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:47:29,668 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=147, type=Follower] is going to quit

2024-05-25 17:47:29,669 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=193, lastLogIncluded=0, lastLogIndex=193, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=148, type=Follower] is going to quit

2024-05-25 17:47:28,766 INFO Node <naming_persistent_service_v2/nacos1:7848> term 206 start preVote.

2024-05-25 17:47:29,530 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:47:29,547 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=198, lastLogIncluded=0, lastLogIndex=198, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=138, type=Follower] is going to quit

2024-05-25 17:47:29,660 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,677 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=195, term=204], lastLogId=LogId [index=195, term=204].

2024-05-25 17:47:29,694 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_195.

2024-05-25 17:47:29,717 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:47:29,755 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=201, currTerm=200, granted=true, requestLastLogId=LogId [index=193, term=200], lastLogId=LogId [index=193, term=200].

2024-05-25 17:47:29,750 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=198, term=207], lastLogId=LogId [index=198, term=207].

2024-05-25 17:47:29,755 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_195.

2024-05-25 17:47:29,781 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=198, term=207], lastLogId=LogId [index=198, term=207].

2024-05-25 17:47:29,784 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=207, currTerm=206, because the leader nacos2:7848's lease is still valid.

2024-05-25 17:47:29,779 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_195.

2024-05-25 17:47:29,784 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=198, term=207], lastLogId=LogId [index=198, term=207].

2024-05-25 17:47:29,787 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_195.

2024-05-25 17:47:29,788 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,790 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_193.

2024-05-25 17:47:29,790 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=206, granted=true.

2024-05-25 17:47:29,797 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=206.

2024-05-25 17:47:29,791 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,791 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,797 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=206, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 17:47:29,797 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,798 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_192.

2024-05-25 17:47:29,817 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 188 to 194, cost 0 ms.

2024-05-25 17:47:29,819 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_198.

2024-05-25 17:47:29,821 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_198.

2024-05-25 17:47:29,821 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_193.

2024-05-25 17:47:29,823 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_193.

2024-05-25 17:47:29,824 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_195.

2024-05-25 17:47:29,826 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_191.

2024-05-25 17:47:29,828 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 190 to 196, cost 0 ms.

2024-05-25 17:47:29,830 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 186 to 192, cost 0 ms.

2024-05-25 17:47:29,833 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=205, currTerm=204.

2024-05-25 17:47:29,835 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 188 to 193, cost 0 ms.

2024-05-25 17:47:29,836 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=201, currTerm=200.

2024-05-25 17:47:29,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=205, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 17:47:29,844 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=207, votedFor=nacos1:7848, cost time=37 ms

2024-05-25 17:47:29,848 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 17:47:29,851 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=207, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:47:29,853 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:47:29,852 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=208, currTerm=207.

2024-05-25 17:47:29,852 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,855 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=201, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-25 17:47:29,856 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=205, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 17:47:29,860 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,863 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,867 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:47:29,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=201, votedFor=nacos3:7848, cost time=12 ms

2024-05-25 17:47:29,870 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=207, currTerm=207.

2024-05-25 17:47:29,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=208, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-25 17:47:29,871 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,879 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 17:47:29,888 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=208, votedFor=nacos3:7848, cost time=15 ms

2024-05-25 17:47:29,889 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=208, currTerm=208.

2024-05-25 17:47:29,888 INFO onLeaderStart: term=207.

2024-05-25 17:47:29,895 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,920 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:47:29,933 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 17:48:01,791 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499780528s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 17:58:59,169 INFO Node <naming_instance_metadata/nacos1:7848> term 201 start preVote.

2024-05-25 17:58:59,170 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=201, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 17:59:00,035 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=207, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 17:59:00,090 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=196, lastLogIncluded=0, lastLogIndex=196, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=149, type=Follower] is going to quit

2024-05-25 17:59:00,181 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=196, lastLogIncluded=0, lastLogIndex=196, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=150, type=Follower] is going to quit

2024-05-25 17:59:00,205 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 17:59:00,389 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=196, term=207], lastLogId=LogId [index=196, term=207].

2024-05-25 17:59:00,459 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=196, term=207], lastLogId=LogId [index=196, term=207].

2024-05-25 17:59:00,465 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=208, currTerm=207, granted=true, requestLastLogId=LogId [index=196, term=207], lastLogId=LogId [index=196, term=207].

2024-05-25 17:59:00,467 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=208, currTerm=207.

2024-05-25 17:59:00,473 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=201, granted=true.

2024-05-25 17:59:00,475 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=201.

2024-05-25 17:59:00,486 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=208, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-25 17:59:00,490 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=208, currTerm=208.

2024-05-25 17:59:00,493 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=202, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 17:59:00,505 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 17:59:00,509 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=209, currTerm=208, because the leader nacos3:7848's lease is still valid.

2024-05-25 17:59:00,515 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=208, votedFor=nacos2:7848, cost time=23 ms

2024-05-25 17:59:00,540 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=202, currTerm=202, granted=true, requestLastLogId=LogId [index=194, term=201], lastLogId=LogId [index=194, term=201].

2024-05-25 17:59:00,541 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=202, currTerm=202.

2024-05-25 17:59:00,542 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=202, currTerm=202, granted=true, requestLastLogId=LogId [index=194, term=201], lastLogId=LogId [index=194, term=201].

2024-05-25 17:59:00,562 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=206, currTerm=205, because the leader nacos2:7848's lease is still valid.

2024-05-25 17:59:00,611 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=209, currTerm=208.

2024-05-25 17:59:00,613 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=208, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 17:59:00,618 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=209, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 17:59:00,624 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=209, votedFor=nacos2:7848, cost time=5 ms

2024-05-25 17:59:00,634 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=202, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 17:59:00,635 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 17:59:00,637 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 17:59:00,649 INFO onLeaderStart: term=202.

2024-05-25 18:15:28,597 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=202, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 18:15:28,597 INFO Node <naming_service_metadata/nacos1:7848> term 205 start preVote.

2024-05-25 18:15:29,382 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=195, lastLogIncluded=0, lastLogIndex=195, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=150, type=Follower] is going to quit

2024-05-25 18:15:29,383 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=195, lastLogIncluded=0, lastLogIndex=195, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=149, type=Follower] is going to quit

2024-05-25 18:15:29,384 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=195, term=202], lastLogId=LogId [index=195, term=202].

2024-05-25 18:15:29,385 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=195, term=202], lastLogId=LogId [index=195, term=202].

2024-05-25 18:15:28,598 INFO Node <naming_persistent_service/nacos1:7848> term 209 start preVote.

2024-05-25 18:15:29,388 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=203, currTerm=202, granted=true, requestLastLogId=LogId [index=195, term=202], lastLogId=LogId [index=195, term=202].

2024-05-25 18:15:29,389 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=210, currTerm=209, because the leader nacos2:7848's lease is still valid.

2024-05-25 18:15:29,276 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=208, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 18:15:29,250 INFO Node <naming_persistent_service_v2/nacos1:7848> term 208 start preVote.

2024-05-25 18:15:28,599 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 18:15:28,599 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=209, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 18:15:29,482 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 18:15:29,488 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=203, currTerm=202.

2024-05-25 18:15:29,489 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=209, granted=true.

2024-05-25 18:15:29,551 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=206, currTerm=205, because the leader nacos2:7848's lease is still valid.

2024-05-25 18:15:29,559 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=206, currTerm=205, because the leader nacos2:7848's lease is still valid.

2024-05-25 18:15:29,561 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=205, granted=true.

2024-05-25 18:15:29,562 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=205.

2024-05-25 18:15:29,554 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=209.

2024-05-25 18:15:29,565 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=209, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 18:15:29,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=203, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 18:15:29,569 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=208, granted=true.

2024-05-25 18:15:29,571 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=208.

2024-05-25 18:15:29,564 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 18:15:29,573 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=208, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 18:15:29,576 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=206, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 18:15:29,579 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=210, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 18:15:29,581 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=203, votedFor=nacos3:7848, cost time=13 ms

2024-05-25 18:15:29,582 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 18:15:29,583 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 18:15:29,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=209, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 18:15:29,586 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=209, currTerm=209, granted=true, requestLastLogId=LogId [index=197, term=208], lastLogId=LogId [index=197, term=208].

2024-05-25 18:15:29,586 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=209, currTerm=209, granted=true, requestLastLogId=LogId [index=197, term=208], lastLogId=LogId [index=197, term=208].

2024-05-25 18:15:29,590 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=210, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 18:15:29,591 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 18:15:29,592 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 18:15:29,616 INFO onLeaderStart: term=210.

2024-05-25 18:15:29,620 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=206, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 18:15:29,621 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 18:15:29,622 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 18:15:29,624 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 18:15:29,625 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=209, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 18:15:29,632 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 18:15:29,634 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 18:15:29,636 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 18:15:29,647 INFO onLeaderStart: term=206.

2024-05-25 18:15:29,657 INFO onLeaderStart: term=209.

2024-05-25 18:15:29,660 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=203, currTerm=203.

2024-05-25 18:15:29,663 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 18:15:29,677 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 18:15:29,686 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 18:15:29,695 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 18:16:01,396 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.222674663s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 18:16:01,486 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499726712s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 18:16:01,718 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.789256949s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 18:16:06,882 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=204, currTerm=203, granted=true, requestLastLogId=LogId [index=196, term=203], lastLogId=LogId [index=196, term=203].

2024-05-25 18:16:07,058 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=204, currTerm=203.

2024-05-25 18:16:07,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=203, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 18:16:07,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=204, votedFor=0.0.0.0:0, cost time=114 ms

2024-05-25 18:16:07,372 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=204, votedFor=nacos3:7848, cost time=116 ms

2024-05-25 19:00:01,902 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 19:00:01,934 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 19:00:01,942 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=206, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 19:00:02,060 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=209, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 19:00:02,376 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=198, lastLogIncluded=0, lastLogIndex=198, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=152, type=Follower] is going to quit

2024-05-25 19:00:02,377 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 19:00:02,392 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_198.

2024-05-25 19:00:02,060 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=210, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 19:00:02,066 INFO Node <naming_instance_metadata/nacos1:7848> term 204 start preVote.

2024-05-25 19:00:01,942 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 19:00:02,376 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=197, lastLogIncluded=0, lastLogIndex=197, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=144, type=Follower] is going to quit

2024-05-25 19:00:02,404 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 19:00:02,406 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=204, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 19:00:02,406 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 19:00:02,433 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 19:00:02,435 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_197.

2024-05-25 19:00:02,436 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_197.

2024-05-25 19:00:02,422 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 19:00:02,426 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_201.

2024-05-25 19:00:02,439 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_201.

2024-05-25 19:00:02,427 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_198.

2024-05-25 19:00:02,430 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 19:00:02,430 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=140, type=Follower] is going to quit

2024-05-25 19:00:02,430 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=197, lastLogIncluded=0, lastLogIndex=197, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=143, type=Follower] is going to quit

2024-05-25 19:00:02,445 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=197, term=204], lastLogId=LogId [index=197, term=204].

2024-05-25 19:00:02,446 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=205, currTerm=204, granted=true, requestLastLogId=LogId [index=197, term=204], lastLogId=LogId [index=197, term=204].

2024-05-25 19:00:02,445 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=139, type=Follower] is going to quit

2024-05-25 19:00:02,450 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 19:00:02,449 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=198, lastLogIncluded=0, lastLogIndex=198, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=151, type=Follower] is going to quit

2024-05-25 19:00:02,454 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_197.

2024-05-25 19:00:02,454 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_197.

2024-05-25 19:00:02,455 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 19:00:02,458 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_195.

2024-05-25 19:00:02,473 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 19:00:02,478 INFO The channel nacos3:7848 has successfully established.

2024-05-25 19:00:02,482 INFO Peer nacos3:7848 is connected.

2024-05-25 19:00:02,454 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_195.

2024-05-25 19:00:02,455 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=207, currTerm=206, granted=true, requestLastLogId=LogId [index=197, term=206], lastLogId=LogId [index=197, term=206].

2024-05-25 19:00:02,457 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_198.

2024-05-25 19:00:02,492 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 193 to 196, cost 0 ms.

2024-05-25 19:00:02,458 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_193.

2024-05-25 19:00:02,460 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 19:00:02,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 196 to 199, cost 0 ms.

2024-05-25 19:00:02,460 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 19:00:02,500 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 19:00:02,474 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 19:00:02,482 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 19:00:02,508 INFO The channel nacos3:7848 has successfully established.

2024-05-25 19:00:02,487 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=207, currTerm=206, granted=true, requestLastLogId=LogId [index=197, term=206], lastLogId=LogId [index=197, term=206].

2024-05-25 19:00:02,514 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=207, currTerm=206, granted=true, requestLastLogId=LogId [index=197, term=206], lastLogId=LogId [index=197, term=206].

2024-05-25 19:00:02,487 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=211, currTerm=210, granted=true, requestLastLogId=LogId [index=201, term=210], lastLogId=LogId [index=201, term=210].

2024-05-25 19:00:02,489 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=210, currTerm=209, granted=true, requestLastLogId=LogId [index=198, term=209], lastLogId=LogId [index=198, term=209].

2024-05-25 19:00:02,499 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 194 to 196, cost 0 ms.

2024-05-25 19:00:02,500 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 192 to 194, cost 1 ms.

2024-05-25 19:00:02,505 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 19:00:02,519 INFO The channel nacos3:7848 has successfully established.

2024-05-25 19:00:02,508 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=204, granted=true.

2024-05-25 19:00:02,521 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=204.

2024-05-25 19:00:02,513 INFO Peer nacos3:7848 is connected.

2024-05-25 19:00:02,516 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=207, currTerm=206, granted=true, requestLastLogId=LogId [index=197, term=206], lastLogId=LogId [index=197, term=206].

2024-05-25 19:00:02,521 INFO Peer nacos3:7848 is connected.

2024-05-25 19:00:02,524 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 19:00:02,529 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=211, currTerm=210.

2024-05-25 19:00:02,530 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 19:00:02,535 INFO The channel nacos2:7848 has successfully established.

2024-05-25 19:00:02,536 INFO Peer nacos2:7848 is connected.

2024-05-25 19:00:02,536 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 19:00:02,537 INFO The channel nacos2:7848 has successfully established.

2024-05-25 19:00:02,538 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=205, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 19:00:02,539 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=205, currTerm=205.

2024-05-25 19:00:02,541 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=211, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 19:00:02,537 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=210, currTerm=209.

2024-05-25 19:00:02,538 INFO Peer nacos2:7848 is connected.

2024-05-25 19:00:02,542 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 19:00:02,542 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=207, currTerm=206.

2024-05-25 19:00:02,543 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 19:00:02,544 INFO The channel nacos1:7848 has successfully established.

2024-05-25 19:00:02,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=211, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 19:00:02,554 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=211, currTerm=211, granted=true, requestLastLogId=LogId [index=201, term=210], lastLogId=LogId [index=201, term=210].

2024-05-25 19:00:02,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=210, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 19:00:02,557 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=207, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-25 19:00:02,558 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 19:00:02,558 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 19:00:02,566 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 19:00:02,566 INFO The channel nacos2:7848 has successfully established.

2024-05-25 19:00:02,569 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=210, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 19:00:02,570 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 19:00:02,571 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=207, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 19:00:02,572 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=207, currTerm=207.

2024-05-25 19:00:02,573 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 19:00:02,574 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=204, currTerm=205.

2024-05-25 19:00:02,574 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 19:00:02,588 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 19:00:02,599 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=210, currTerm=210, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:00:02,599 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=210, currTerm=210, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:00:06,898 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 19:00:06,899 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 19:00:06,900 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 19:00:06,907 INFO Connection disconnected: /172.25.0.3:59788

2024-05-25 19:00:06,954 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:06,955 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:06,955 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:06,956 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:07,186 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:07,187 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:07,187 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:07,187 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 19:00:07,424 INFO Connection disconnected: /172.25.0.4:38936

2024-05-25 19:00:07,462 INFO Connection disconnected: /172.25.0.5:49686

2024-05-25 19:16:33,532 INFO Node <naming_service_metadata/nacos1:7848> term 207 start preVote.

2024-05-25 19:16:33,537 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=207, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 19:16:33,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 19:16:33,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=210, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 19:16:33,549 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=211, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 19:16:33,549 INFO Node <naming_persistent_service_v2/nacos1:7848> term 210 start preVote.

2024-05-25 19:16:33,538 INFO Node <naming_instance_metadata/nacos1:7848> term 205 start preVote.

2024-05-25 19:16:33,549 INFO Node <naming_persistent_service/nacos1:7848> term 211 start preVote.

2024-05-25 19:16:34,285 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=208, currTerm=207, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:16:34,346 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=211, currTerm=210, granted=true, requestLastLogId=LogId [index=199, term=210], lastLogId=LogId [index=199, term=210].

2024-05-25 19:16:34,392 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=207, granted=false.

2024-05-25 19:16:34,404 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=211, granted=false.

2024-05-25 19:16:34,446 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=212, currTerm=211, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:16:34,469 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=211, granted=true.

2024-05-25 19:16:34,555 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=211.

2024-05-25 19:16:34,408 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=211, currTerm=210, granted=true, requestLastLogId=LogId [index=199, term=210], lastLogId=LogId [index=199, term=210].

2024-05-25 19:16:34,404 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=206, currTerm=205, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:16:34,432 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=208, currTerm=207, because the leader nacos2:7848's lease is still valid.

2024-05-25 19:16:34,563 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=211, currTerm=210.

2024-05-25 19:16:34,556 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=211, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 19:16:34,563 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=205, granted=false.

2024-05-25 19:16:34,570 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=207, granted=true.

2024-05-25 19:16:34,609 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=207.

2024-05-25 19:16:34,577 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=212, votedFor=nacos1:7848, cost time=20 ms

2024-05-25 19:16:34,611 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=212, currTerm=212.

2024-05-25 19:16:34,609 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=205, granted=true.

2024-05-25 19:16:34,614 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=205.

2024-05-25 19:16:34,615 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=205, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 19:16:34,619 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=211, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-25 19:16:34,610 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=207, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 19:16:34,631 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=206, votedFor=nacos1:7848, cost time=15 ms

2024-05-25 19:16:34,611 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=208, currTerm=208.

2024-05-25 19:16:34,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=210, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 19:16:34,632 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=206, currTerm=206.

2024-05-25 19:16:34,642 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=211, votedFor=nacos3:7848, cost time=16 ms

2024-05-25 19:16:34,646 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=210, currTerm=211.

2024-05-25 19:16:34,670 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=208, votedFor=nacos1:7848, cost time=24 ms

2024-05-25 19:16:34,674 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 19:16:34,675 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=210, currTerm=211.

2024-05-25 19:16:34,686 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 19:16:34,695 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=206, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 19:16:34,695 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 19:16:34,696 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 19:16:34,698 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 19:16:34,715 INFO onLeaderStart: term=206.

2024-05-25 20:01:03,210 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 20:01:03,969 INFO Node <naming_persistent_service/nacos1:7848> term 212 start preVote.

2024-05-25 20:01:03,970 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=206, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:01:03,970 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=212, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:01:03,243 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 20:01:03,985 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 20:01:03,992 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 20:01:04,266 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 20:01:04,268 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 20:01:04,105 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_200.

2024-05-25 20:01:04,022 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:01:04,022 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=199, lastLogIncluded=0, lastLogIndex=199, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=151, type=Follower] is going to quit

2024-05-25 20:01:04,289 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=199, lastLogIncluded=0, lastLogIndex=199, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=152, type=Follower] is going to quit

2024-05-25 20:01:04,134 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 20:01:04,266 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 20:01:04,282 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_199.

2024-05-25 20:01:04,297 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_199.

2024-05-25 20:01:04,302 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 20:01:04,341 INFO The channel nacos1:7848 has successfully established.

2024-05-25 20:01:04,287 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_200.

2024-05-25 20:01:04,354 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_198.

2024-05-25 20:01:04,380 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,293 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 20:01:04,398 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,440 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 196 to 199, cost 0 ms.

2024-05-25 20:01:04,298 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 20:01:04,309 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_197.

2024-05-25 20:01:04,315 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_203.

2024-05-25 20:01:04,557 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_203.

2024-05-25 20:01:04,351 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=212, granted=true.

2024-05-25 20:01:04,560 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=212.

2024-05-25 20:01:04,561 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 196 to 198, cost 0 ms.

2024-05-25 20:01:04,561 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_201.

2024-05-25 20:01:04,533 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 20:01:04,549 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,566 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,567 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,550 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_199.

2024-05-25 20:01:04,553 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=209, currTerm=208, because the leader nacos3:7848's lease is still valid.

2024-05-25 20:01:04,568 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=209, currTerm=208.

2024-05-25 20:01:04,558 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 20:01:04,570 INFO The channel nacos3:7848 has successfully established.

2024-05-25 20:01:04,571 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=213, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 20:01:04,565 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 199 to 202, cost 1 ms.

2024-05-25 20:01:04,574 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:01:04,575 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=213, currTerm=213, granted=true, requestLastLogId=LogId [index=203, term=212], lastLogId=LogId [index=203, term=212].

2024-05-25 20:01:04,568 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_199.

2024-05-25 20:01:04,569 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=208, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 20:01:04,580 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_197.

2024-05-25 20:01:04,571 INFO Peer nacos3:7848 is connected.

2024-05-25 20:01:04,574 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 20:01:04,583 INFO The channel nacos2:7848 has successfully established.

2024-05-25 20:01:04,584 INFO Peer nacos2:7848 is connected.

2024-05-25 20:01:04,585 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 194 to 198, cost 0 ms.

2024-05-25 20:01:04,574 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=207, currTerm=206, granted=true, requestLastLogId=LogId [index=199, term=206], lastLogId=LogId [index=199, term=206].

2024-05-25 20:01:04,586 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,575 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 20:01:04,577 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=209, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 20:01:04,580 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=213, currTerm=213.

2024-05-25 20:01:04,590 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 20:01:04,592 INFO The channel nacos2:7848 has successfully established.

2024-05-25 20:01:04,591 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,596 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:01:04,596 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=207, currTerm=206.

2024-05-25 20:01:04,601 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=209, votedFor=nacos2:7848, cost time=11 ms

2024-05-25 20:01:04,607 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=207, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 20:01:04,615 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=207, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 20:01:08,214 INFO Connection disconnected: /172.25.0.5:38714

2024-05-25 20:01:08,217 INFO Connection disconnected: /172.25.0.3:59162

2024-05-25 20:01:09,006 INFO Connection disconnected: /172.25.0.3:59146

2024-05-25 20:01:09,022 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:01:09,023 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:01:09,025 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:01:09,028 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:01:09,121 INFO Node <naming_persistent_service_v2/nacos1:7848> term 211 start preVote.

2024-05-25 20:01:09,121 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=211, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:01:09,122 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 20:01:09,122 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 20:01:09,124 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 20:01:09,124 INFO The channel nacos2:7848 has successfully established.

2024-05-25 20:01:09,124 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 20:01:09,125 INFO The channel nacos3:7848 has successfully established.

2024-05-25 20:01:09,125 INFO Peer nacos3:7848 is connected.

2024-05-25 20:01:09,125 INFO Peer nacos2:7848 is connected.

2024-05-25 20:01:09,126 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=211, granted=true.

2024-05-25 20:01:09,126 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=211.

2024-05-25 20:01:09,133 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=212, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 20:01:09,133 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:01:09,137 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=212, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:01:09,137 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:01:09,137 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:01:09,138 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 20:01:09,143 INFO onLeaderStart: term=212.

2024-05-25 20:01:09,143 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:01:09,144 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:17:32,955 INFO Node <naming_instance_metadata/nacos1:7848> term 207 start preVote.

2024-05-25 20:17:32,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=213, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:17:32,989 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=209, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:17:32,987 INFO Node <naming_persistent_service/nacos1:7848> term 213 start preVote.

2024-05-25 20:17:32,971 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=207, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:17:32,971 INFO Node <naming_service_metadata/nacos1:7848> term 209 start preVote.

2024-05-25 20:17:34,033 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=214, currTerm=213, granted=true, requestLastLogId=LogId [index=204, term=213], lastLogId=LogId [index=204, term=213].

2024-05-25 20:17:34,052 INFO Node <naming_service_metadata/nacos1:7848> term 209 start preVote.

2024-05-25 20:17:34,064 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 20:17:34,112 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=210, currTerm=209, granted=true, requestLastLogId=LogId [index=200, term=209], lastLogId=LogId [index=200, term=209].

2024-05-25 20:17:34,121 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=214, currTerm=213.

2024-05-25 20:17:34,123 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=212, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:17:34,121 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 20:17:34,131 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=207, granted=false.

2024-05-25 20:17:34,146 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=207, granted=true.

2024-05-25 20:17:34,147 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=207.

2024-05-25 20:17:34,148 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=207, currTerm=208.

2024-05-25 20:17:34,134 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=154, type=Follower] is going to quit

2024-05-25 20:17:34,151 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=153, type=Follower] is going to quit

2024-05-25 20:17:34,136 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:17:34,148 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=214, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-25 20:17:34,187 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=213, currTerm=214.

2024-05-25 20:17:34,162 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 20:17:34,188 INFO The channel nacos3:7848 has successfully established.

2024-05-25 20:17:34,189 INFO Peer nacos3:7848 is connected.

2024-05-25 20:17:34,167 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=213, currTerm=212, granted=true, requestLastLogId=LogId [index=201, term=212], lastLogId=LogId [index=201, term=212].

2024-05-25 20:17:34,192 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=213, currTerm=212.

2024-05-25 20:17:34,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=208, votedFor=nacos1:7848, cost time=38 ms

2024-05-25 20:17:34,188 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=213, currTerm=214.

2024-05-25 20:17:34,197 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=213, currTerm=214.

2024-05-25 20:17:34,189 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 20:17:34,199 INFO The channel nacos2:7848 has successfully established.

2024-05-25 20:17:34,190 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=210, currTerm=209.

2024-05-25 20:17:34,197 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=208, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:17:34,203 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:17:34,208 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:17:34,200 INFO Peer nacos2:7848 is connected.

2024-05-25 20:17:34,200 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=213, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 20:17:34,201 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=214, votedFor=nacos3:7848, cost time=3 ms

2024-05-25 20:17:34,209 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=210, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 20:17:34,213 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:17:34,214 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=209, currTerm=210.

2024-05-25 20:17:34,215 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=213, currTerm=213, granted=true, requestLastLogId=LogId [index=201, term=212], lastLogId=LogId [index=201, term=212].

2024-05-25 20:17:34,217 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 20:17:34,218 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=209, currTerm=210.

2024-05-25 20:17:34,220 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=209, currTerm=210.

2024-05-25 20:17:34,220 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=208, currTerm=208, granted=false, requestLastLogId=LogId [index=200, term=207], lastLogId=LogId [index=201, term=208].

2024-05-25 20:17:34,222 INFO onLeaderStart: term=208.

2024-05-25 20:17:34,223 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=209, currTerm=210.

2024-05-25 20:17:34,223 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=213, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 20:17:34,231 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=213, votedFor=nacos3:7848, cost time=10 ms

2024-05-25 20:17:34,232 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=210, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 20:17:34,233 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=210, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-25 20:18:12,047 INFO Node <naming_persistent_service/nacos1:7848> term 214 start preVote.

2024-05-25 20:18:12,106 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=214, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:18:12,883 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=214, granted=true.

2024-05-25 20:18:12,932 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=214.

2024-05-25 20:18:13,004 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:18:13,268 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=215, votedFor=nacos1:7848, cost time=224 ms

2024-05-25 20:18:14,299 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=215, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:18:14,437 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:18:14,534 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:18:15,345 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 20:18:18,206 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499536259s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 20:18:18,670 INFO onLeaderStart: term=215.

2024-05-25 20:18:29,571 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499792239s. [closed=[], committed=[remote_addr=nacos3/172.25.0.3:7848]]], groupId=naming_instance_metadata

2024-05-25 20:18:29,897 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499788262s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 20:18:30,553 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499740875s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-25 20:18:31,498 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=208, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:18:31,638 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=154, type=Follower] is going to quit

2024-05-25 20:18:31,812 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:18:32,526 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=201, lastLogIncluded=0, lastLogIndex=201, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=153, type=Follower] is going to quit

2024-05-25 20:18:33,895 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:18:34,511 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:18:34,527 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:18:35,473 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:18:36,236 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:18:36,902 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=209, currTerm=208, granted=true, requestLastLogId=LogId [index=201, term=208], lastLogId=LogId [index=201, term=208].

2024-05-25 20:18:36,916 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=209, currTerm=208.

2024-05-25 20:18:36,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=209, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-25 20:18:36,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=209, votedFor=nacos3:7848, cost time=23 ms

2024-05-25 20:18:40,272 INFO Node <naming_service_metadata/nacos1:7848> term 210 start preVote.

2024-05-25 20:18:40,272 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=210, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:18:40,274 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=210, granted=true.

2024-05-25 20:18:40,275 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=210.

2024-05-25 20:18:40,275 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:18:40,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=211, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 20:18:40,286 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=211, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:18:40,287 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:18:40,287 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:18:40,288 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 20:18:40,294 INFO onLeaderStart: term=211.

2024-05-25 20:19:13,810 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.416990082s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 20:19:14,655 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=215, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:19:15,349 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=206, lastLogIncluded=0, lastLogIndex=206, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=141, type=Follower] is going to quit

2024-05-25 20:19:15,383 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=206, lastLogIncluded=0, lastLogIndex=206, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=142, type=Follower] is going to quit

2024-05-25 20:19:15,588 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:19:16,344 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:19:16,465 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499687259s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 20:19:16,734 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:19:16,907 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:19:17,266 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:19:20,014 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=216, currTerm=215, granted=true, requestLastLogId=LogId [index=206, term=215], lastLogId=LogId [index=206, term=215].

2024-05-25 20:19:20,138 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=216, currTerm=215.

2024-05-25 20:19:20,471 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=216, votedFor=0.0.0.0:0, cost time=291 ms

2024-05-25 20:19:20,621 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=216, votedFor=nacos3:7848, cost time=134 ms

2024-05-25 20:19:29,202 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499237050s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-25 20:19:34,007 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.436665197s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 20:19:36,621 INFO Node <naming_persistent_service/nacos1:7848> term 216 start preVote.

2024-05-25 20:19:36,657 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=216, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:19:37,763 INFO Node <naming_instance_metadata/nacos1:7848> term 209 start preVote.

2024-05-25 20:19:39,072 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499775193s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-25 20:19:39,236 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=217, currTerm=216, granted=true, requestLastLogId=LogId [index=207, term=216], lastLogId=LogId [index=207, term=216].

2024-05-25 20:19:39,256 INFO Node <naming_persistent_service_v2/nacos1:7848> term 213 start preVote.

2024-05-25 20:19:39,363 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=213, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:35:05,805 INFO Node <naming_persistent_service/nacos1:7848> term 216 start preVote.

2024-05-25 20:35:05,806 INFO Node <naming_instance_metadata/nacos1:7848> term 209 start preVote.

2024-05-25 20:35:05,960 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=211, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:35:05,960 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=202, lastLogIncluded=0, lastLogIndex=202, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=145, type=Follower] is going to quit

2024-05-25 20:35:05,961 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=202, lastLogIncluded=0, lastLogIndex=202, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=146, type=Follower] is going to quit

2024-05-25 20:35:06,547 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:35:06,717 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:35:06,571 WARN Node <naming_instance_metadata/nacos1:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999706113s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]].

2024-05-25 20:35:06,803 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_207.

2024-05-25 20:35:06,803 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_207.

2024-05-25 20:35:06,804 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_202.

2024-05-25 20:35:06,807 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_202.

2024-05-25 20:35:06,811 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_199.

2024-05-25 20:35:06,571 WARN Node <naming_persistent_service/nacos1:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: ClientCall was cancelled at or after deadline. [closed=[CANCELLED], committed=[remote_addr=nacos2/172.25.0.4:7848]]].

2024-05-25 20:35:06,572 WARN Node <naming_instance_metadata/nacos1:7848> PreVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.997064436s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-25 20:35:06,573 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=214, currTerm=213, granted=true, requestLastLogId=LogId [index=202, term=213], lastLogId=LogId [index=202, term=213].

2024-05-25 20:35:06,877 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=213, granted=true.

2024-05-25 20:35:06,880 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=213.

2024-05-25 20:35:06,577 WARN Node <naming_persistent_service/nacos1:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999828915s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]].

2024-05-25 20:35:06,889 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=212, currTerm=211, granted=true, requestLastLogId=LogId [index=202, term=211], lastLogId=LogId [index=202, term=211].

2024-05-25 20:35:06,577 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=209, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:35:06,890 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=212, currTerm=211, granted=true, requestLastLogId=LogId [index=202, term=211], lastLogId=LogId [index=202, term=211].

2024-05-25 20:35:06,795 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_202.

2024-05-25 20:35:06,892 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_202.

2024-05-25 20:35:06,806 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_203.

2024-05-25 20:35:06,821 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 198 to 200, cost 0 ms.

2024-05-25 20:35:06,822 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 217, expect=216.

2024-05-25 20:35:06,840 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=210, currTerm=209, granted=true, requestLastLogId=LogId [index=202, term=209], lastLogId=LogId [index=202, term=209].

2024-05-25 20:35:06,840 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:35:06,844 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:35:06,894 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=209, granted=true.

2024-05-25 20:35:06,895 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_200.

2024-05-25 20:35:06,895 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=209.

2024-05-25 20:35:06,896 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=214, votedFor=nacos1:7848, cost time=10 ms

2024-05-25 20:35:06,896 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 202 to 204, cost 0 ms.

2024-05-25 20:35:06,900 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=217, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 20:35:06,901 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=216, currTerm=217.

2024-05-25 20:35:06,902 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 199 to 201, cost 0 ms.

2024-05-25 20:35:06,902 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=217, currTerm=217.

2024-05-25 20:35:06,906 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=212, currTerm=211.

2024-05-25 20:35:06,907 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=214, currTerm=214, granted=true, requestLastLogId=LogId [index=202, term=213], lastLogId=LogId [index=202, term=213].

2024-05-25 20:35:06,910 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_202.

2024-05-25 20:35:06,911 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=214, currTerm=214.

2024-05-25 20:35:06,913 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_202.

2024-05-25 20:35:06,915 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=210, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 20:35:06,922 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:35:06,922 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:35:06,924 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=212, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-25 20:35:06,924 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=217, votedFor=nacos2:7848, cost time=21 ms

2024-05-25 20:35:06,925 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=210, currTerm=210.

2024-05-25 20:35:06,937 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_199.

2024-05-25 20:35:06,939 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=210, currTerm=210, granted=true, requestLastLogId=LogId [index=202, term=209], lastLogId=LogId [index=202, term=209].

2024-05-25 20:35:06,952 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 198 to 200, cost 2 ms.

2024-05-25 20:35:06,959 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=212, votedFor=nacos2:7848, cost time=33 ms

2024-05-25 20:35:06,964 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:35:06,964 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=212, currTerm=212.

2024-05-25 20:35:06,987 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=214, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:35:06,988 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:35:06,990 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:35:06,991 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=210, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:35:06,993 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:35:06,994 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:35:06,996 INFO onLeaderStart: term=214.

2024-05-25 20:35:07,003 INFO onLeaderStart: term=210.

2024-05-25 20:35:10,821 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:35:10,825 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:35:10,826 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 20:43:40,004 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=210, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:43:40,108 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=217, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:43:40,107 INFO Node <naming_persistent_service/nacos1:7848> term 217 start preVote.

2024-05-25 20:43:40,106 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=212, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:43:40,106 INFO Node <naming_service_metadata/nacos1:7848> term 212 start preVote.

2024-05-25 20:43:40,747 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=203, lastLogIncluded=0, lastLogIndex=203, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=156, type=Follower] is going to quit

2024-05-25 20:43:40,894 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=203, lastLogIncluded=0, lastLogIndex=203, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=157, type=Follower] is going to quit

2024-05-25 20:43:40,895 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=211, currTerm=210, granted=true, requestLastLogId=LogId [index=203, term=210], lastLogId=LogId [index=203, term=210].

2024-05-25 20:43:40,898 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=218, currTerm=217, because the leader nacos2:7848's lease is still valid.

2024-05-25 20:43:40,748 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:43:40,894 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=213, currTerm=212, because the leader nacos2:7848's lease is still valid.

2024-05-25 20:43:40,898 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=215, currTerm=214, because the leader nacos1:7848's lease is still valid.

2024-05-25 20:43:40,899 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=211, currTerm=210, granted=true, requestLastLogId=LogId [index=203, term=210], lastLogId=LogId [index=203, term=210].

2024-05-25 20:43:40,919 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=211, currTerm=210.

2024-05-25 20:43:40,917 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=212, granted=false.

2024-05-25 20:43:40,928 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=218, currTerm=217, because the leader nacos2:7848's lease is still valid.

2024-05-25 20:43:40,931 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=211, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 20:43:40,932 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:43:40,942 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=211, votedFor=nacos2:7848, cost time=9 ms

2024-05-25 20:43:40,932 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:43:40,933 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=217, granted=false.

2024-05-25 20:43:41,043 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=212, granted=true.

2024-05-25 20:43:41,046 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=212.

2024-05-25 20:43:41,050 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=212, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 20:43:41,051 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=218, currTerm=217.

2024-05-25 20:43:41,053 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=217, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 20:43:41,083 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=213, votedFor=nacos1:7848, cost time=33 ms

2024-05-25 20:43:41,085 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=213, currTerm=213.

2024-05-25 20:43:41,116 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=218, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-25 20:43:41,117 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=213, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:43:41,118 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=217, currTerm=218.

2024-05-25 20:43:41,119 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:43:41,128 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:43:41,153 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=218, votedFor=nacos3:7848, cost time=33 ms

2024-05-25 20:43:41,158 INFO onLeaderStart: term=213.

2024-05-25 20:44:44,751 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499802958s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 20:44:45,195 INFO Node <naming_persistent_service/nacos1:7848> term 218 start preVote.

2024-05-25 20:44:45,195 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=214, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:44:45,195 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=213, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 20:44:45,517 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=204, lastLogIncluded=0, lastLogIndex=204, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=148, type=Follower] is going to quit

2024-05-25 20:44:45,517 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=204, lastLogIncluded=0, lastLogIndex=204, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=147, type=Follower] is going to quit

2024-05-25 20:44:45,330 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=218, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 20:44:45,331 INFO Node <naming_instance_metadata/nacos1:7848> term 211 start preVote.

2024-05-25 20:44:45,331 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=211, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 20:44:45,515 INFO Node <naming_persistent_service/nacos1:7848> term 218 start preVote.

2024-05-25 20:44:45,517 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:44:45,546 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=219, currTerm=218, granted=true, requestLastLogId=LogId [index=209, term=218], lastLogId=LogId [index=209, term=218].

2024-05-25 20:44:45,518 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=203, lastLogIncluded=0, lastLogIndex=203, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=155, type=Follower] is going to quit

2024-05-25 20:44:45,609 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=203, lastLogIncluded=0, lastLogIndex=203, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=156, type=Follower] is going to quit

2024-05-25 20:44:45,518 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 20:44:45,524 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=214, currTerm=213, granted=true, requestLastLogId=LogId [index=204, term=213], lastLogId=LogId [index=204, term=213].

2024-05-25 20:44:45,596 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=211, granted=true.

2024-05-25 20:44:45,619 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=211.

2024-05-25 20:44:45,605 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=218, granted=false.

2024-05-25 20:44:45,612 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,613 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=203, term=214], lastLogId=LogId [index=203, term=214].

2024-05-25 20:44:45,620 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,621 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=211, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 20:44:45,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=212, votedFor=nacos1:7848, cost time=38 ms

2024-05-25 20:44:45,724 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=218, granted=false.

2024-05-25 20:44:45,748 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=219, currTerm=218.

2024-05-25 20:44:45,739 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=203, term=214], lastLogId=LogId [index=203, term=214].

2024-05-25 20:44:45,748 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=212, currTerm=212, granted=true, requestLastLogId=LogId [index=204, term=211], lastLogId=LogId [index=204, term=211].

2024-05-25 20:44:45,749 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=203, term=214], lastLogId=LogId [index=203, term=214].

2024-05-25 20:44:45,750 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 20:44:45,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=219, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-25 20:44:45,754 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,757 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=215, currTerm=214.

2024-05-25 20:44:45,758 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=214, currTerm=213, granted=true, requestLastLogId=LogId [index=204, term=213], lastLogId=LogId [index=204, term=213].

2024-05-25 20:44:45,761 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,761 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=219, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 20:44:45,763 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,767 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=215, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 20:44:45,768 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,769 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,770 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=214, currTerm=213.

2024-05-25 20:44:45,773 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=212, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 20:44:45,774 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 20:44:45,775 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 20:44:45,779 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=215, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 20:44:45,784 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 20:44:45,785 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=218, currTerm=219.

2024-05-25 20:44:45,786 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=218, currTerm=219.

2024-05-25 20:44:45,786 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=214, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-25 20:44:45,787 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=215, currTerm=215.

2024-05-25 20:44:45,790 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=214, currTerm=214.

2024-05-25 20:44:45,792 INFO onLeaderStart: term=212.

2024-05-25 20:44:45,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=214, votedFor=nacos3:7848, cost time=22 ms

2024-05-25 20:44:45,817 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,825 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 20:44:45,826 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:52,756 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=212, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:00:53,547 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=205, lastLogIncluded=0, lastLogIndex=205, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=159, type=Follower] is going to quit

2024-05-25 21:00:53,548 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:00:53,554 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=205, lastLogIncluded=0, lastLogIndex=205, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=158, type=Follower] is going to quit

2024-05-25 21:00:53,556 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=219, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:00:53,556 INFO Node <naming_persistent_service_v2/nacos1:7848> term 215 start preVote.

2024-05-25 21:00:52,775 INFO Node <naming_persistent_service/nacos1:7848> term 219 start preVote.

2024-05-25 21:00:53,663 INFO Node <naming_persistent_service/nacos1:7848> term 219 start preVote.

2024-05-25 21:00:53,576 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=215, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:00:53,592 INFO Node <naming_service_metadata/nacos1:7848> term 214 start preVote.

2024-05-25 21:00:53,602 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=214, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 21:00:53,681 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=205, term=214], lastLogId=LogId [index=205, term=214].

2024-05-25 21:00:53,682 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=205, term=214], lastLogId=LogId [index=205, term=214].

2024-05-25 21:00:53,692 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,838 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=215, granted=true.

2024-05-25 21:00:53,843 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=215.

2024-05-25 21:00:53,846 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=215, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 21:00:53,851 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=219, granted=false.

2024-05-25 21:00:53,852 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,855 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=219, granted=false.

2024-05-25 21:00:53,855 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=216, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 21:00:53,856 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=219, granted=true.

2024-05-25 21:00:53,857 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=213, currTerm=212, granted=true, requestLastLogId=LogId [index=205, term=212], lastLogId=LogId [index=205, term=212].

2024-05-25 21:00:53,859 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=219.

2024-05-25 21:00:53,864 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=213, currTerm=212, granted=true, requestLastLogId=LogId [index=205, term=212], lastLogId=LogId [index=205, term=212].

2024-05-25 21:00:53,867 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,868 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=220, votedFor=nacos1:7848, cost time=8 ms

2024-05-25 21:00:53,868 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,871 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=214, granted=true.

2024-05-25 21:00:53,872 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=214.

2024-05-25 21:00:53,874 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=214, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 21:00:53,873 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=213, currTerm=212.

2024-05-25 21:00:53,881 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=220, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:00:53,881 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=213, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 21:00:53,881 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=215, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 21:00:53,882 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:00:53,883 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:00:53,886 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=216, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:00:53,888 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=213, votedFor=nacos3:7848, cost time=5 ms

2024-05-25 21:00:53,886 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:00:53,888 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:00:53,893 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:00:53,903 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=215, currTerm=215.

2024-05-25 21:00:53,914 INFO onLeaderStart: term=220.

2024-05-25 21:00:53,919 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:00:53,920 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=215, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:00:53,929 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:00:53,931 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:00:53,929 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 21:00:53,933 INFO onLeaderStart: term=216.

2024-05-25 21:00:53,936 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,939 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:00:53,946 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=213, currTerm=213.

2024-05-25 21:00:53,952 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 21:00:53,957 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 21:00:53,962 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 21:00:53,965 INFO onLeaderStart: term=215.

2024-05-25 21:17:29,851 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=217, currTerm=216, granted=true, requestLastLogId=LogId [index=205, term=216], lastLogId=LogId [index=205, term=216].

2024-05-25 21:17:29,856 INFO Node <naming_instance_metadata/nacos1:7848> term 213 start preVote.

2024-05-25 21:17:29,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=213, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 21:17:29,879 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=216, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:17:29,879 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_211.

2024-05-25 21:17:29,905 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_211.

2024-05-25 21:17:29,905 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=221, currTerm=220, granted=true, requestLastLogId=LogId [index=211, term=220], lastLogId=LogId [index=211, term=220].

2024-05-25 21:17:29,905 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=215, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:17:29,905 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:17:29,909 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_206.

2024-05-25 21:17:29,914 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_206.

2024-05-25 21:17:29,909 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=220, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:17:29,910 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_207.

2024-05-25 21:17:29,916 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_202.

2024-05-25 21:17:29,914 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=206, lastLogIncluded=0, lastLogIndex=206, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=150, type=Follower] is going to quit

2024-05-25 21:17:29,915 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:17:29,915 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=205, lastLogIncluded=0, lastLogIndex=205, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=158, type=Follower] is going to quit

2024-05-25 21:17:29,916 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:17:29,926 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 204 to 208, cost 0 ms.

2024-05-25 21:17:29,916 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=211, lastLogIncluded=0, lastLogIndex=211, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=144, type=Follower] is going to quit

2024-05-25 21:17:29,927 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=211, lastLogIncluded=0, lastLogIndex=211, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=143, type=Follower] is going to quit

2024-05-25 21:17:29,919 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=206, lastLogIncluded=0, lastLogIndex=206, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=149, type=Follower] is going to quit

2024-05-25 21:17:29,921 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_205.

2024-05-25 21:17:29,929 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_205.

2024-05-25 21:17:29,930 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=214, currTerm=213, because the leader nacos3:7848's lease is still valid.

2024-05-25 21:17:29,925 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=205, lastLogIncluded=0, lastLogIndex=205, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=157, type=Follower] is going to quit

2024-05-25 21:17:29,928 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=221, currTerm=220.

2024-05-25 21:17:29,935 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_202.

2024-05-25 21:17:29,938 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 200 to 203, cost 1 ms.

2024-05-25 21:17:29,932 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_206.

2024-05-25 21:17:29,932 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=214, currTerm=213, because the leader nacos3:7848's lease is still valid.

2024-05-25 21:17:29,941 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_206.

2024-05-25 21:17:29,941 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=221, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-25 21:17:29,946 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=214, currTerm=213.

2024-05-25 21:17:29,947 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=213, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 21:17:29,949 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_202.

2024-05-25 21:17:29,950 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=221, votedFor=nacos2:7848, cost time=7 ms

2024-05-25 21:17:29,953 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=221, currTerm=221, granted=true, requestLastLogId=LogId [index=211, term=220], lastLogId=LogId [index=211, term=220].

2024-05-25 21:17:29,957 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 201 to 203, cost 3 ms.

2024-05-25 21:17:29,952 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=217, currTerm=216.

2024-05-25 21:17:29,954 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 200 to 203, cost 1 ms.

2024-05-25 21:17:29,954 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=214, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 21:17:29,972 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=217, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 21:17:29,984 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=214, votedFor=nacos2:7848, cost time=13 ms

2024-05-25 21:17:29,984 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=216, currTerm=215, granted=true, requestLastLogId=LogId [index=206, term=215], lastLogId=LogId [index=206, term=215].

2024-05-25 21:17:29,986 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=216, currTerm=215, granted=true, requestLastLogId=LogId [index=206, term=215], lastLogId=LogId [index=206, term=215].

2024-05-25 21:17:29,986 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=216, currTerm=215.

2024-05-25 21:17:29,980 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:17:29,987 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=217, votedFor=nacos2:7848, cost time=10 ms

2024-05-25 21:17:29,989 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=217, currTerm=217, granted=true, requestLastLogId=LogId [index=205, term=216], lastLogId=LogId [index=205, term=216].

2024-05-25 21:17:29,990 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=217, currTerm=217.

2024-05-25 21:17:29,991 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=213, currTerm=214.

2024-05-25 21:17:29,994 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=213, currTerm=214.

2024-05-25 21:17:29,993 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:17:29,995 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=216, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-25 21:17:30,001 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:17:30,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=216, votedFor=nacos2:7848, cost time=5 ms

2024-05-25 21:17:30,024 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=216, currTerm=216.

2024-05-25 21:17:30,024 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:17:30,024 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=216, currTerm=216, granted=true, requestLastLogId=LogId [index=206, term=215], lastLogId=LogId [index=206, term=215].

2024-05-25 21:17:30,028 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:17:33,668 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 21:17:33,668 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 21:17:33,669 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 21:17:33,669 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 21:18:04,040 INFO Node <naming_persistent_service/nacos1:7848> term 221 start preVote.

2024-05-25 21:18:04,055 INFO Node <naming_persistent_service_v2/nacos1:7848> term 217 start preVote.

2024-05-25 21:18:04,144 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=217, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:18:04,090 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=221, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:18:06,463 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=217, granted=true.

2024-05-25 21:18:06,510 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=217.

2024-05-25 21:18:07,523 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=221, granted=true.

2024-05-25 21:18:07,663 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=221.

2024-05-25 21:18:07,708 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=218, votedFor=nacos1:7848, cost time=277 ms

2024-05-25 21:18:07,923 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=217, currTerm=218.

2024-05-25 21:18:07,987 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:08,042 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=222, votedFor=nacos1:7848, cost time=282 ms

2024-05-25 21:18:08,116 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:08,756 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=218, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:18:08,851 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:18:09,082 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:18:10,070 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=222, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:18:10,186 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:18:10,251 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:18:12,105 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499083324s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 21:18:12,433 INFO onLeaderStart: term=218.

2024-05-25 21:18:13,254 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999715313s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-25 21:18:13,621 WARN Node <naming_persistent_service_v2/nacos1:7848> RequestVote to nacos2:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.993883570s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]].

2024-05-25 21:18:13,283 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499226068s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-25 21:18:14,054 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499776815s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 21:18:16,751 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=222, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:18:16,843 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:18:15,627 INFO Node <naming_instance_metadata/nacos1:7848> term 214 start preVote.

2024-05-25 21:18:15,642 INFO Node <naming_service_metadata/nacos1:7848> term 216 start preVote.

2024-05-25 21:18:15,750 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=216, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:18:15,631 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=214, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 21:18:16,766 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=218, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 21:18:16,842 ERROR Fail to run ConfigurationChangeDone, status: Status[EPERM<1008>: Leader stepped down].

2024-05-25 21:18:17,272 INFO Replicator Replicator [state=Probe, statInfo=<running=BLOCKING, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=212, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=-1, type=Follower] is going to quit

2024-05-25 21:18:20,132 INFO Node <naming_instance_metadata/nacos1:7848> term 214 start preVote.

2024-05-25 21:18:20,244 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=217, currTerm=216, granted=true, requestLastLogId=LogId [index=207, term=216], lastLogId=LogId [index=207, term=216].

2024-05-25 21:18:20,525 INFO Replicator Replicator [state=Probe, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=207, lastLogIncluded=0, lastLogIndex=206, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=-1, type=Follower] is going to quit

2024-05-25 21:18:20,531 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 21:18:20,770 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499580000s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 21:18:21,696 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=207, lastLogIncluded=0, lastLogIndex=207, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=159, type=Follower] is going to quit

2024-05-25 21:18:21,814 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=217, currTerm=216, granted=true, requestLastLogId=LogId [index=207, term=216], lastLogId=LogId [index=207, term=216].

2024-05-25 21:18:22,133 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=145, type=Follower] is going to quit

2024-05-25 21:18:21,981 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=207, term=214], lastLogId=LogId [index=207, term=214].

2024-05-25 21:18:22,405 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:22,437 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:23,194 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=145, type=Follower] already destroyed, ignore error code: 1010

2024-05-25 21:18:22,444 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:22,644 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=217, currTerm=216.

2024-05-25 21:18:23,209 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=false, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:23,177 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=215, currTerm=214, granted=true, requestLastLogId=LogId [index=207, term=214], lastLogId=LogId [index=207, term=214].

2024-05-25 21:18:23,385 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=214, granted=true.

2024-05-25 21:18:23,411 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=214.

2024-05-25 21:18:23,192 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:23,460 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=215, currTerm=215.

2024-05-25 21:18:23,487 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:23,497 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:23,500 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:23,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=217, votedFor=0.0.0.0:0, cost time=312 ms

2024-05-25 21:18:23,610 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=223, currTerm=222, granted=false, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:23,866 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=false, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:23,807 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:23,971 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:24,083 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:24,195 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:24,100 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=217, votedFor=nacos2:7848, cost time=245 ms

2024-05-25 21:18:24,440 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=216, currTerm=217.

2024-05-25 21:18:24,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=215, votedFor=nacos1:7848, cost time=602 ms

2024-05-25 21:18:25,081 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=216, currTerm=217.

2024-05-25 21:18:25,635 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:26,494 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:26,530 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 21:18:26,517 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:27,103 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-25 21:18:28,207 INFO Node <naming_persistent_service/nacos1:7848> term 222 start preVote.

2024-05-25 21:18:28,636 INFO Node <naming_persistent_service_v2/nacos1:7848> term 218 start preVote.

2024-05-25 21:18:29,275 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:28,292 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:29,526 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=true, requestLastLogId=LogId [index=213, term=222], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:29,529 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=219, currTerm=218, granted=false, requestLastLogId=LogId [index=206, term=217], lastLogId=LogId [index=207, term=218].

2024-05-25 21:18:29,537 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=true, requestLastLogId=LogId [index=213, term=222], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:29,540 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:29,545 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=219, currTerm=218, granted=true, requestLastLogId=LogId [index=207, term=218], lastLogId=LogId [index=207, term=218].

2024-05-25 21:18:29,549 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=222, granted=true.

2024-05-25 21:18:29,552 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=222.

2024-05-25 21:18:29,553 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=218, granted=true.

2024-05-25 21:18:29,558 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=218.

2024-05-25 21:18:29,570 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=223, votedFor=nacos1:7848, cost time=13 ms

2024-05-25 21:18:29,575 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:29,576 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=223, currTerm=223, granted=false, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:29,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=219, votedFor=nacos1:7848, cost time=18 ms

2024-05-25 21:18:29,588 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=223, currTerm=223, granted=false, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=213, term=222].

2024-05-25 21:18:29,594 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:29,605 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:29,609 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 21:18:29,614 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=223, currTerm=223.

2024-05-25 21:18:29,618 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=219, currTerm=219.

2024-05-25 21:18:29,623 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=219, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:18:29,625 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:18:29,628 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:18:29,644 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 21:18:29,659 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=223, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 21:18:29,662 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 21:18:29,667 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 21:18:29,675 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 21:18:29,679 INFO onLeaderStart: term=219.

2024-05-25 21:18:29,711 INFO onLeaderStart: term=223.

2024-05-25 22:00:01,326 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 22:00:01,963 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 22:00:01,992 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 22:00:01,325 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=223, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:00:02,031 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=146, type=Follower] is going to quit

2024-05-25 22:00:02,040 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=214, lastLogIncluded=0, lastLogIndex=214, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=147, type=Follower] is going to quit

2024-05-25 22:00:01,325 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=219, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:00:02,054 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=207, lastLogIncluded=0, lastLogIndex=208, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=160, type=Follower] is going to quit

2024-05-25 22:00:02,056 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=208, lastLogIncluded=0, lastLogIndex=208, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=161, type=Follower] is going to quit

2024-05-25 22:00:01,321 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 22:00:02,074 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 22:00:01,238 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=217, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 22:00:01,210 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 22:00:01,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=215, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 22:00:01,237 INFO Node <naming_service_metadata/nacos1:7848> term 217 start preVote.

2024-05-25 22:00:01,237 INFO Node <naming_instance_metadata/nacos1:7848> term 215 start preVote.

2024-05-25 22:00:01,198 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 22:00:02,306 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 22:00:02,050 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 22:00:02,055 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:00:02,070 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:00:02,071 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 22:00:02,156 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 22:00:02,338 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 22:00:02,348 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 22:00:02,181 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 22:00:02,355 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 22:00:02,356 INFO The channel nacos3:7848 has successfully established.

2024-05-25 22:00:02,362 INFO Peer nacos3:7848 is connected.

2024-05-25 22:00:02,186 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_214.

2024-05-25 22:00:02,365 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_214.

2024-05-25 22:00:02,244 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_208.

2024-05-25 22:00:02,368 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_208.

2024-05-25 22:00:02,368 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_208.

2024-05-25 22:00:02,371 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=208, term=219], lastLogId=LogId [index=208, term=219].

2024-05-25 22:00:02,373 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_208.

2024-05-25 22:00:02,278 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 22:00:02,293 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_208.

2024-05-25 22:00:02,383 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_208.

2024-05-25 22:00:02,308 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 22:00:02,388 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 22:00:02,393 INFO The channel nacos3:7848 has successfully established.

2024-05-25 22:00:02,339 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 22:00:02,340 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 22:00:02,351 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 22:00:02,351 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=216, currTerm=215, granted=true, requestLastLogId=LogId [index=208, term=215], lastLogId=LogId [index=208, term=215].

2024-05-25 22:00:02,372 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_211.

2024-05-25 22:00:02,415 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-25 22:00:02,373 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 22:00:02,420 INFO The channel nacos2:7848 has successfully established.

2024-05-25 22:00:02,420 INFO Peer nacos2:7848 is connected.

2024-05-25 22:00:02,375 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_206.

2024-05-25 22:00:02,380 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_205.

2024-05-25 22:00:02,392 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_206.

2024-05-25 22:00:02,410 INFO The channel nacos2:7848 has successfully established.

2024-05-25 22:00:02,426 INFO Peer nacos2:7848 is connected.

2024-05-25 22:00:02,420 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-25 22:00:02,422 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 22:00:02,426 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 208 to 212, cost 0 ms.

2024-05-25 22:00:02,431 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 203 to 206, cost 0 ms.

2024-05-25 22:00:02,453 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 203 to 207, cost 26 ms.

2024-05-25 22:00:02,454 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 203 to 207, cost 0 ms.

2024-05-25 22:00:02,455 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=217, granted=true.

2024-05-25 22:00:02,462 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=217.

2024-05-25 22:00:02,457 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 22:00:02,464 INFO The channel nacos3:7848 has successfully established.

2024-05-25 22:00:02,464 INFO Peer nacos3:7848 is connected.

2024-05-25 22:00:02,458 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=220, currTerm=219.

2024-05-25 22:00:02,470 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=224, currTerm=223.

2024-05-25 22:00:02,458 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 22:00:02,474 INFO The channel nacos3:7848 has successfully established.

2024-05-25 22:00:02,474 INFO Peer nacos3:7848 is connected.

2024-05-25 22:00:02,475 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=220, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 22:00:02,464 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=217, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 22:00:02,473 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=218, currTerm=218, granted=true, requestLastLogId=LogId [index=208, term=217], lastLogId=LogId [index=208, term=217].

2024-05-25 22:00:02,480 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=218, currTerm=218, granted=true, requestLastLogId=LogId [index=208, term=217], lastLogId=LogId [index=208, term=217].

2024-05-25 22:00:02,476 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=224, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 22:00:02,477 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 22:00:02,493 INFO The channel nacos1:7848 has successfully established.

2024-05-25 22:00:02,495 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 22:00:02,501 INFO The channel nacos2:7848 has successfully established.

2024-05-25 22:00:02,498 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=220, votedFor=nacos3:7848, cost time=20 ms

2024-05-25 22:00:02,502 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=220, currTerm=220, granted=true, requestLastLogId=LogId [index=208, term=219], lastLogId=LogId [index=208, term=219].

2024-05-25 22:00:02,499 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=218, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 22:00:02,505 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=218, currTerm=218.

2024-05-25 22:00:02,505 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:00:02,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=224, votedFor=nacos3:7848, cost time=14 ms

2024-05-25 22:00:02,501 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 22:00:02,503 INFO Peer nacos2:7848 is connected.

2024-05-25 22:00:02,503 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=216, currTerm=215.

2024-05-25 22:00:02,509 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=224, currTerm=224, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-25 22:00:02,510 INFO The channel nacos3:7848 has successfully established.

2024-05-25 22:00:02,513 INFO Peer nacos3:7848 is connected.

2024-05-25 22:00:02,512 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 22:00:02,512 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=215, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 22:00:02,514 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=224, currTerm=224.

2024-05-25 22:00:02,520 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=224, currTerm=224, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-25 22:00:02,520 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:00:02,522 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=216, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-25 22:00:02,531 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=218, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 22:00:02,532 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 22:00:02,535 INFO The channel nacos2:7848 has successfully established.

2024-05-25 22:00:02,533 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 22:00:02,537 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 22:00:02,541 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 22:00:02,541 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=216, votedFor=nacos2:7848, cost time=16 ms

2024-05-25 22:00:02,542 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 22:00:02,545 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=215, currTerm=216.

2024-05-25 22:00:02,546 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=215, currTerm=216.

2024-05-25 22:00:02,550 INFO onLeaderStart: term=218.

2024-05-25 22:00:06,213 INFO Connection disconnected: /172.25.0.3:59340

2024-05-25 22:00:06,214 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 22:00:06,218 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 22:00:06,219 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 22:00:06,234 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 22:00:06,235 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 22:00:06,235 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 22:00:06,236 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 22:00:06,327 INFO Connection disconnected: /172.25.0.5:35468

2024-05-25 22:00:07,255 INFO Connection disconnected: /172.25.0.4:60898

2024-05-25 22:00:07,270 INFO Connection disconnected: /172.25.0.3:34058

2024-05-25 22:00:07,271 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 22:00:07,332 INFO Connection disconnected: /172.25.0.3:34070

2024-05-25 22:02:08,290 INFO Node <naming_persistent_service/nacos1:7848> term 224 start preVote.

2024-05-25 22:02:08,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=216, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 22:02:08,396 INFO Node <naming_instance_metadata/nacos1:7848> term 216 start preVote.

2024-05-25 22:02:08,392 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=218, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:02:08,965 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=209, lastLogIncluded=0, lastLogIndex=209, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=152, type=Follower] is going to quit

2024-05-25 22:02:08,966 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=209, lastLogIncluded=0, lastLogIndex=209, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=151, type=Follower] is going to quit

2024-05-25 22:02:08,391 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=220, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 22:02:08,391 INFO Node <naming_persistent_service_v2/nacos1:7848> term 220 start preVote.

2024-05-25 22:02:08,290 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 22:02:08,965 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:02:08,967 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=219, currTerm=218, granted=true, requestLastLogId=LogId [index=209, term=218], lastLogId=LogId [index=209, term=218].

2024-05-25 22:02:08,971 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=217, currTerm=216, because the leader nacos2:7848's lease is still valid.

2024-05-25 22:02:08,986 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=225, currTerm=224, because the leader nacos3:7848's lease is still valid.

2024-05-25 22:02:08,986 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=216, granted=true.

2024-05-25 22:02:08,989 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=216.

2024-05-25 22:02:08,985 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=221, currTerm=220, because the leader nacos3:7848's lease is still valid.

2024-05-25 22:02:08,994 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=225, currTerm=224, because the leader nacos3:7848's lease is still valid.

2024-05-25 22:02:08,991 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=216, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 22:02:08,996 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=220, granted=false.

2024-05-25 22:02:08,996 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=219, currTerm=218.

2024-05-25 22:02:09,003 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=220, granted=true.

2024-05-25 22:02:09,013 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=220.

2024-05-25 22:02:09,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=220, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 22:02:09,004 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=217, votedFor=nacos1:7848, cost time=12 ms

2024-05-25 22:02:09,017 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=224, granted=false.

2024-05-25 22:02:09,019 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=224, granted=true.

2024-05-25 22:02:09,018 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 22:02:09,021 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=224.

2024-05-25 22:02:09,028 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 22:02:09,092 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=219, votedFor=0.0.0.0:0, cost time=84 ms

2024-05-25 22:02:09,198 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=221, votedFor=nacos1:7848, cost time=183 ms

2024-05-25 22:02:09,200 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=221, currTerm=221.

2024-05-25 22:02:09,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=225, votedFor=nacos1:7848, cost time=174 ms

2024-05-25 22:02:09,227 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=225, currTerm=225.

2024-05-25 22:02:09,238 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=219, votedFor=nacos2:7848, cost time=86 ms

2024-05-25 22:02:09,240 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:02:09,242 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:02:09,243 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:02:09,252 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=217, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 22:02:09,253 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 22:02:09,255 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 22:02:09,259 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 22:02:09,267 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=221, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 22:02:09,268 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-25 22:02:09,270 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-25 22:02:09,274 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=225, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 22:02:09,275 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 22:02:09,277 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 22:02:09,298 INFO onLeaderStart: term=217.

2024-05-25 22:02:09,318 INFO onLeaderStart: term=221.

2024-05-25 22:02:09,328 INFO onLeaderStart: term=225.

2024-05-25 22:18:16,998 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=225, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:18:17,066 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=216, lastLogIncluded=0, lastLogIndex=216, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=148, type=Follower] is going to quit

2024-05-25 22:18:17,164 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:18:17,037 INFO Node <naming_service_metadata/nacos1:7848> term 219 start preVote.

2024-05-25 22:18:17,034 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.453040565s. [closed=[], open=[[remote_addr=nacos2/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-25 22:18:17,034 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499772074s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-25 22:18:16,998 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=221, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:18:17,255 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=210, lastLogIncluded=0, lastLogIndex=210, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=162, type=Follower] is going to quit

2024-05-25 22:18:16,998 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=217, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 22:18:17,040 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=219, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 22:18:17,133 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=216, lastLogIncluded=0, lastLogIndex=216, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=149, type=Follower] is going to quit

2024-05-25 22:18:17,257 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:18:17,258 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=210, lastLogIncluded=0, lastLogIndex=210, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=161, type=Follower] is going to quit

2024-05-25 22:18:17,289 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 22:18:17,257 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=210, lastLogIncluded=0, lastLogIndex=210, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=163, type=Follower] is going to quit

2024-05-25 22:18:17,318 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=226, currTerm=225, granted=true, requestLastLogId=LogId [index=216, term=225], lastLogId=LogId [index=216, term=225].

2024-05-25 22:18:17,311 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=210, lastLogIncluded=0, lastLogIndex=210, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=160, type=Follower] is going to quit

2024-05-25 22:18:17,319 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,319 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,321 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,321 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=218, currTerm=217, granted=true, requestLastLogId=LogId [index=210, term=217], lastLogId=LogId [index=210, term=217].

2024-05-25 22:18:17,321 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,322 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,325 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=210, term=219], lastLogId=LogId [index=210, term=219].

2024-05-25 22:18:17,327 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=218, currTerm=217, granted=true, requestLastLogId=LogId [index=210, term=217], lastLogId=LogId [index=210, term=217].

2024-05-25 22:18:17,333 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,338 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,335 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,338 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=218, currTerm=217.

2024-05-25 22:18:17,338 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=210, term=219], lastLogId=LogId [index=210, term=219].

2024-05-25 22:18:17,341 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=210, term=219], lastLogId=LogId [index=210, term=219].

2024-05-25 22:18:17,340 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=226, currTerm=225.

2024-05-25 22:18:17,342 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=219, granted=true.

2024-05-25 22:18:17,342 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=219.

2024-05-25 22:18:17,343 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=219, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 22:18:17,343 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=222, currTerm=221, granted=true, requestLastLogId=LogId [index=210, term=221], lastLogId=LogId [index=210, term=221].

2024-05-25 22:18:17,349 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,352 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,350 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=220, votedFor=nacos1:7848, cost time=6 ms

2024-05-25 22:18:17,350 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=218, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-25 22:18:17,351 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=226, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 22:18:17,356 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=220, currTerm=220.

2024-05-25 22:18:17,357 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,358 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=218, currTerm=218.

2024-05-25 22:18:17,358 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=226, granted=true, requestLastLogId=LogId [index=216, term=225], lastLogId=LogId [index=216, term=225].

2024-05-25 22:18:17,361 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=226, granted=true, requestLastLogId=LogId [index=216, term=225], lastLogId=LogId [index=216, term=225].

2024-05-25 22:18:17,364 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=226, currTerm=226, granted=true, requestLastLogId=LogId [index=216, term=225], lastLogId=LogId [index=216, term=225].

2024-05-25 22:18:17,356 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,359 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,365 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,369 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=218, votedFor=nacos3:7848, cost time=9 ms

2024-05-25 22:18:17,370 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=226, votedFor=nacos3:7848, cost time=5 ms

2024-05-25 22:18:17,374 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,375 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,383 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,384 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,401 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,404 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,409 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,412 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,415 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,420 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=222, currTerm=221.

2024-05-25 22:18:17,445 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=222, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-25 22:18:17,465 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=222, votedFor=nacos2:7848, cost time=17 ms

2024-05-25 22:18:17,477 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 22:18:17,494 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=220, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 22:18:17,498 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 22:18:17,500 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 22:18:17,506 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 22:18:17,527 INFO onLeaderStart: term=220.

2024-05-25 23:03:11,240 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:03:11,241 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:03:11,395 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:03:11,263 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=220, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 23:03:11,434 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_217.

2024-05-25 23:03:11,435 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_217.

2024-05-25 23:03:11,443 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_214.

2024-05-25 23:03:11,450 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 212 to 215, cost 0 ms.

2024-05-25 23:03:11,292 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:03:11,504 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 23:03:11,296 INFO Node <naming_persistent_service/nacos1:7848> term 226 start preVote.

2024-05-25 23:03:11,303 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=226, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 23:03:11,320 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=222, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-25 23:03:11,304 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=218, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 23:03:11,304 INFO Node <naming_persistent_service_v2/nacos1:7848> term 222 start preVote.

2024-05-25 23:03:11,511 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:03:11,304 INFO Node <naming_instance_metadata/nacos1:7848> term 218 start preVote.

2024-05-25 23:03:11,514 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:03:11,515 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=211, lastLogIncluded=0, lastLogIndex=211, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=154, type=Follower] is going to quit

2024-05-25 23:03:11,332 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:03:11,395 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-25 23:03:11,518 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:03:11,506 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_211.

2024-05-25 23:03:11,522 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_211.

2024-05-25 23:03:11,509 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:03:11,523 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_211.

2024-05-25 23:03:11,524 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_211.

2024-05-25 23:03:11,516 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:03:11,516 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=211, lastLogIncluded=0, lastLogIndex=211, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=153, type=Follower] is going to quit

2024-05-25 23:03:11,518 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:03:11,531 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:03:11,519 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:03:11,537 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=223, currTerm=222, because the leader nacos2:7848's lease is still valid.

2024-05-25 23:03:11,523 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:03:11,545 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:03:11,523 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:03:11,524 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_208.

2024-05-25 23:03:11,528 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_208.

2024-05-25 23:03:11,533 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:03:11,534 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:03:11,555 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:03:11,559 INFO Peer nacos3:7848 is connected.

2024-05-25 23:03:11,539 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_211.

2024-05-25 23:03:11,564 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_211.

2024-05-25 23:03:11,541 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:03:11,545 INFO Peer nacos2:7848 is connected.

2024-05-25 23:03:11,567 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-25 23:03:11,553 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 206 to 209, cost 0 ms.

2024-05-25 23:03:11,555 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 207 to 209, cost 0 ms.

2024-05-25 23:03:11,564 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:03:11,573 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:03:11,565 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:03:11,574 INFO Peer nacos3:7848 is connected.

2024-05-25 23:03:11,567 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_208.

2024-05-25 23:03:11,572 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=226, granted=true.

2024-05-25 23:03:11,572 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=218, granted=true.

2024-05-25 23:03:11,573 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:03:11,580 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:03:11,574 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:03:11,583 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:03:11,574 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=221, currTerm=220, granted=true, requestLastLogId=LogId [index=211, term=220], lastLogId=LogId [index=211, term=220].

2024-05-25 23:03:11,587 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=221, currTerm=220, granted=true, requestLastLogId=LogId [index=211, term=220], lastLogId=LogId [index=211, term=220].

2024-05-25 23:03:11,578 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=226.

2024-05-25 23:03:11,588 INFO The channel nacos1:7848 is in state: READY.

2024-05-25 23:03:11,589 INFO The channel nacos1:7848 has successfully established.

2024-05-25 23:03:11,579 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=218.

2024-05-25 23:03:11,591 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=218, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-25 23:03:11,580 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 207 to 209, cost 1 ms.

2024-05-25 23:03:11,593 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=222, granted=false.

2024-05-25 23:03:11,583 INFO Peer nacos2:7848 is connected.

2024-05-25 23:03:11,587 INFO Peer nacos3:7848 is connected.

2024-05-25 23:03:11,589 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=221, currTerm=220, granted=true, requestLastLogId=LogId [index=211, term=220], lastLogId=LogId [index=211, term=220].

2024-05-25 23:03:11,597 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:03:11,599 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:03:11,603 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:03:11,599 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=227, votedFor=nacos1:7848, cost time=11 ms

2024-05-25 23:03:11,605 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:03:11,608 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:03:11,608 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=219, votedFor=nacos1:7848, cost time=17 ms

2024-05-25 23:03:11,613 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=221, currTerm=220.

2024-05-25 23:03:11,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=221, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 23:03:11,624 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:03:11,625 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:03:11,625 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=219, currTerm=219, granted=true, requestLastLogId=LogId [index=211, term=218], lastLogId=LogId [index=211, term=218].

2024-05-25 23:03:11,627 INFO Peer nacos2:7848 is connected.

2024-05-25 23:03:11,629 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-25 23:03:11,630 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=227, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 23:03:11,631 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-25 23:03:11,632 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=223, currTerm=222.

2024-05-25 23:03:11,633 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=219, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-25 23:03:11,634 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=222, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-25 23:03:11,633 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-25 23:03:11,634 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-25 23:03:11,637 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-25 23:03:11,634 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=221, votedFor=nacos3:7848, cost time=12 ms

2024-05-25 23:03:11,638 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-25 23:03:11,641 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=227, currTerm=227, granted=false, requestLastLogId=LogId [index=217, term=226], lastLogId=LogId [index=218, term=227].

2024-05-25 23:03:11,641 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=227, currTerm=227, granted=false, requestLastLogId=LogId [index=217, term=226], lastLogId=LogId [index=218, term=227].

2024-05-25 23:03:11,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=223, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-25 23:03:11,642 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=227, currTerm=227, granted=false, requestLastLogId=LogId [index=217, term=226], lastLogId=LogId [index=218, term=227].

2024-05-25 23:03:11,651 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 23:03:11,653 INFO onLeaderStart: term=219.

2024-05-25 23:03:11,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=223, votedFor=nacos3:7848, cost time=11 ms

2024-05-25 23:03:11,655 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=222, currTerm=223.

2024-05-25 23:03:11,659 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-25 23:03:11,659 INFO onLeaderStart: term=227.

2024-05-25 23:03:15,971 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:15,974 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:15,974 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:15,975 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:15,984 INFO Connection disconnected: /172.25.0.3:43528

2024-05-25 23:03:16,014 INFO Connection disconnected: /172.25.0.4:38330

2024-05-25 23:03:16,221 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:16,222 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:03:16,396 INFO Connection disconnected: /172.25.0.5:40256

2024-05-25 23:03:16,480 INFO Connection disconnected: /172.25.0.3:43554

2024-05-25 23:03:16,485 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 23:03:16,486 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 23:03:16,487 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-25 23:03:16,488 INFO Connection disconnected: /172.25.0.4:38340

2024-05-25 23:55:25,421 INFO Node <naming_persistent_service_v2/nacos1:7848> term 223 start preVote.

2024-05-25 23:55:25,428 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=219, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 23:55:25,950 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=212, lastLogIncluded=0, lastLogIndex=212, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=163, type=Follower] is going to quit

2024-05-25 23:55:25,428 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=227, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-25 23:55:25,965 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=151, type=Follower] is going to quit

2024-05-25 23:55:25,425 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:55:25,425 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499755679s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-25 23:55:25,425 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:55:25,425 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:55:26,381 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-25 23:55:26,383 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:55:25,423 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=221, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 23:55:25,422 INFO Node <naming_service_metadata/nacos1:7848> term 221 start preVote.

2024-05-25 23:55:25,422 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=223, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-25 23:55:25,944 INFO Node <naming_persistent_service_v2/nacos1:7848> term 223 start preVote.

2024-05-25 23:55:25,950 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 23:55:25,961 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=212, lastLogIncluded=0, lastLogIndex=212, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=162, type=Follower] is going to quit

2024-05-25 23:55:25,972 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-25 23:55:26,279 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_212.

2024-05-25 23:55:26,495 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_212.

2024-05-25 23:55:26,361 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_218.

2024-05-25 23:55:26,505 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_218.

2024-05-25 23:55:26,376 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-25 23:55:26,378 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=150, type=Follower] is going to quit

2024-05-25 23:55:26,392 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:55:26,523 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-25 23:55:26,526 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:55:26,432 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:55:26,438 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:55:26,440 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:55:26,449 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_212.

2024-05-25 23:55:26,544 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_212.

2024-05-25 23:55:26,486 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_212.

2024-05-25 23:55:26,486 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:55:26,508 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_217.

2024-05-25 23:55:26,508 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_211.

2024-05-25 23:55:26,536 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=212, term=219], lastLogId=LogId [index=212, term=219].

2024-05-25 23:55:26,545 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-25 23:55:26,561 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 215 to 218, cost 0 ms.

2024-05-25 23:55:26,547 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=212, term=223], lastLogId=LogId [index=212, term=223].

2024-05-25 23:55:26,550 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_211.

2024-05-25 23:55:26,550 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_212.

2024-05-25 23:55:26,560 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=220, currTerm=219, granted=true, requestLastLogId=LogId [index=212, term=219], lastLogId=LogId [index=212, term=219].

2024-05-25 23:55:26,568 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 209 to 212, cost 0 ms.

2024-05-25 23:55:26,570 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:55:26,575 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:55:26,573 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:55:26,576 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:55:26,573 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-25 23:55:26,574 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:55:26,574 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=220, currTerm=219.

2024-05-25 23:55:26,575 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_211.

2024-05-25 23:55:26,578 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 209 to 212, cost 0 ms.

2024-05-25 23:55:26,579 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=224, currTerm=223.

2024-05-25 23:55:26,576 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-25 23:55:26,576 INFO Peer nacos2:7848 is connected.

2024-05-25 23:55:26,576 INFO Peer nacos2:7848 is connected.

2024-05-25 23:55:26,576 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-25 23:55:26,585 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=228, currTerm=227.

2024-05-25 23:55:26,578 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=222, currTerm=221, granted=true, requestLastLogId=LogId [index=212, term=221], lastLogId=LogId [index=212, term=221].

2024-05-25 23:55:26,582 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=220, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-25 23:55:26,582 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 209 to 212, cost 0 ms.

2024-05-25 23:55:26,584 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:55:26,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=224, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-25 23:55:26,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=228, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-25 23:55:26,589 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:55:26,593 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=220, votedFor=nacos2:7848, cost time=4 ms

2024-05-25 23:55:26,593 INFO Peer nacos2:7848 is connected.

2024-05-25 23:55:26,595 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=224, votedFor=nacos2:7848, cost time=5 ms

2024-05-25 23:55:26,596 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=223, currTerm=224.

2024-05-25 23:55:26,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=228, votedFor=nacos2:7848, cost time=6 ms

2024-05-25 23:55:26,598 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:55:26,598 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=223, currTerm=224.

2024-05-25 23:55:26,598 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:55:26,607 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:55:26,608 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=222, currTerm=221.

2024-05-25 23:55:26,608 INFO Peer nacos3:7848 is connected.

2024-05-25 23:55:26,602 INFO The channel nacos2:7848 is in state: READY.

2024-05-25 23:55:26,609 INFO The channel nacos2:7848 has successfully established.

2024-05-25 23:55:26,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=222, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-25 23:55:26,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=222, votedFor=nacos2:7848, cost time=5 ms

2024-05-25 23:55:26,622 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=221, currTerm=222.

2024-05-25 23:55:26,624 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=221, currTerm=222.

2024-05-25 23:55:26,636 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=220, currTerm=220.

2024-05-25 23:55:26,641 INFO The channel nacos3:7848 is in state: READY.

2024-05-25 23:55:26,643 INFO The channel nacos3:7848 has successfully established.

2024-05-25 23:55:26,650 INFO Peer nacos3:7848 is connected.

2024-05-25 23:55:26,657 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=221, currTerm=222.

2024-05-25 23:55:26,659 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-25 23:55:26,674 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=223, currTerm=224.

2024-05-25 23:55:26,676 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=223, currTerm=224.

2024-05-25 23:55:30,427 INFO Connection disconnected: /172.25.0.4:56714

2024-05-25 23:55:30,937 INFO Connection disconnected: /172.25.0.4:56738

2024-05-25 23:55:30,950 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:55:30,952 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-25 23:55:30,980 INFO Connection disconnected: /172.25.0.4:56730

2024-05-25 23:55:31,513 INFO Connection disconnected: /172.25.0.3:49598

