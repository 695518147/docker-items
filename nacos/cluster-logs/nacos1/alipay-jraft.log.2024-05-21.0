2024-05-21 00:58:20,889 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,706 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,694 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 00:58:21,670 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=43, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:58:21,664 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=45, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:58:21,663 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499803916s. [closed=[], open=[[remote_addr=nacos2/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-21 00:58:21,797 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=42, lastLogIncluded=0, lastLogIndex=42, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 00:58:21,548 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,555 INFO Node <naming_persistent_service_v2/nacos1:7848> term 43 start preVote.

2024-05-21 00:58:21,529 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,444 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,771 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,854 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_43.

2024-05-21 00:58:21,766 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:21,775 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:21,793 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:58:21,795 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:21,922 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:21,811 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=42, lastLogIncluded=0, lastLogIndex=42, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=6, type=Follower] is going to quit

2024-05-21 00:58:21,949 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=44, currTerm=43, granted=true, requestLastLogId=LogId [index=42, term=43], lastLogId=LogId [index=42, term=43].

2024-05-21 00:58:21,961 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:21,816 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:22,039 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 00:58:22,052 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:58:21,827 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:22,086 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:21,832 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:21,846 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:58:21,846 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 00:58:22,167 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 00:58:21,854 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:22,172 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:21,961 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_45.

2024-05-21 00:58:21,963 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 42 to 44, cost 4 ms.

2024-05-21 00:58:21,999 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,179 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,023 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,181 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,183 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,054 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=44, currTerm=43, granted=true, requestLastLogId=LogId [index=42, term=43], lastLogId=LogId [index=42, term=43].

2024-05-21 00:58:22,072 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=44, currTerm=43, because the leader nacos3:7848's lease is still valid.

2024-05-21 00:58:22,086 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:22,226 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=43, granted=false.

2024-05-21 00:58:22,087 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:58:22,139 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_40.

2024-05-21 00:58:22,181 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,193 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_41.

2024-05-21 00:58:22,272 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,234 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 45 to 46, cost 1 ms.

2024-05-21 00:58:22,272 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=44, currTerm=43.

2024-05-21 00:58:22,263 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:58:22,275 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 42, cost 0 ms.

2024-05-21 00:58:22,287 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,291 INFO Peer nacos2:7848 is connected.

2024-05-21 00:58:22,292 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,339 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=44, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-21 00:58:22,357 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 41, cost 49 ms.

2024-05-21 00:58:22,377 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,384 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,385 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,379 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=44, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 00:58:22,399 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,391 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,418 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=44, currTerm=44.

2024-05-21 00:58:22,423 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=47, currTerm=46, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:58:22,395 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,415 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 00:58:22,429 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 00:58:22,432 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 00:58:22,433 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=44, currTerm=43.

2024-05-21 00:58:22,444 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=43, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 00:58:22,462 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,465 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=46, currTerm=45.

2024-05-21 00:58:22,466 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=44, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 00:58:22,476 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=46, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 00:58:22,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=44, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 00:58:22,486 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=43, currTerm=44.

2024-05-21 00:58:22,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=46, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 00:58:22,493 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=47, currTerm=46.

2024-05-21 00:58:22,495 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 00:58:22,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=47, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 00:58:22,507 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=46, currTerm=46.

2024-05-21 00:58:22,513 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=47, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 00:59:24,678 INFO Node <naming_persistent_service/nacos1:7848> term 47 start preVote.

2024-05-21 00:59:24,692 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:59:24,691 INFO Node <naming_persistent_service_v2/nacos1:7848> term 44 start preVote.

2024-05-21 00:59:24,742 INFO Node <naming_persistent_service_v2/nacos1:7848> term 44 start preVote.

2024-05-21 00:59:24,689 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 00:59:24,684 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:59:24,683 INFO Node <naming_instance_metadata/nacos1:7848> term 44 start preVote.

2024-05-21 00:59:24,781 INFO Node <naming_service_metadata/nacos1:7848> term 46 start preVote.

2024-05-21 00:59:24,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 00:59:24,959 INFO Connection disconnected: /172.25.0.5:35208

2024-05-21 00:59:24,959 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:59:24,963 INFO Connection disconnected: /172.25.0.5:50534

2024-05-21 00:59:25,007 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 00:59:25,024 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 00:59:25,161 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 00:59:25,176 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 00:59:25,180 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 00:59:25,215 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=44, granted=false.

2024-05-21 00:59:25,237 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=44, granted=true.

2024-05-21 00:59:25,245 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=44.

2024-05-21 00:59:25,247 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=46, granted=false.

2024-05-21 00:59:25,232 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 00:59:25,249 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=44, granted=false.

2024-05-21 00:59:25,248 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:59:25,262 INFO Connection disconnected: /172.25.0.3:35038

2024-05-21 00:59:25,294 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=45, currTerm=44, because the leader nacos2:7848's lease is still valid.

2024-05-21 00:59:25,302 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=45, votedFor=nacos1:7848, cost time=53 ms

2024-05-21 00:59:25,304 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=45, currTerm=45.

2024-05-21 00:59:25,307 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=45, currTerm=45, granted=true, requestLastLogId=LogId [index=43, term=44], lastLogId=LogId [index=43, term=44].

2024-05-21 00:59:25,405 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 00:59:25,410 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=48, currTerm=47.

2024-05-21 00:59:25,411 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=45, currTerm=44.

2024-05-21 00:59:25,413 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 00:59:25,416 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=46, granted=true.

2024-05-21 00:59:25,446 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=46.

2024-05-21 00:59:25,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:59:25,440 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 00:59:25,452 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 00:59:25,434 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=45, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:59:25,458 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=48, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 00:59:25,440 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=44, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 00:59:25,458 INFO Connection disconnected: /172.25.0.3:49028

2024-05-21 00:59:25,469 INFO Connection disconnected: /172.25.0.2:37998

2024-05-21 00:59:25,478 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 00:59:25,484 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=48, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 00:59:25,473 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=47, votedFor=nacos1:7848, cost time=24 ms

2024-05-21 00:59:25,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=45, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 00:59:25,504 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:59:25,495 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 00:59:25,521 INFO The channel nacos2:7848 has successfully established.

2024-05-21 00:59:25,522 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:59:25,527 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:59:25,529 INFO Peer nacos3:7848 is connected.

2024-05-21 00:59:25,525 INFO Peer nacos2:7848 is connected.

2024-05-21 00:59:25,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=45, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 00:59:25,534 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=44, currTerm=45.

2024-05-21 00:59:25,535 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=44, currTerm=45.

2024-05-21 00:59:25,552 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=47, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:59:25,553 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 00:59:25,556 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:59:25,560 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:59:25,568 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:59:25,576 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 00:59:25,589 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=47, currTerm=48.

2024-05-21 00:59:25,602 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=47, currTerm=48.

2024-05-21 00:59:25,627 INFO onLeaderStart: term=45.

2024-05-21 00:59:25,627 INFO onLeaderStart: term=47.

2024-05-21 01:00:36,798 INFO Node <naming_persistent_service/nacos1:7848> term 48 start preVote.

2024-05-21 01:00:36,872 INFO Node <naming_persistent_service_v2/nacos1:7848> term 45 start preVote.

2024-05-21 01:00:36,916 INFO Node <naming_persistent_service_v2/nacos1:7848> term 45 start preVote.

2024-05-21 01:00:36,788 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:00:36,913 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:00:37,118 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=45, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:37,093 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=47, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:37,188 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:37,169 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:00:37,197 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:37,200 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=45, granted=true.

2024-05-21 01:00:37,221 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=45.

2024-05-21 01:00:37,205 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:00:37,250 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:00:37,209 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:37,225 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:00:37,260 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,277 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 01:00:37,314 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 01:00:37,343 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,343 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=48, currTerm=47.

2024-05-21 01:00:37,322 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=46, votedFor=nacos1:7848, cost time=59 ms

2024-05-21 01:00:37,367 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:37,536 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=48.

2024-05-21 01:00:37,548 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:00:37,537 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=46, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:37,589 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:00:37,557 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=46, currTerm=45.

2024-05-21 01:00:37,582 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=48, votedFor=0.0.0.0:0, cost time=237 ms

2024-05-21 01:00:37,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=49, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-21 01:00:37,618 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=48, currTerm=48, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,609 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:00:37,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=46, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 01:00:37,648 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=49, votedFor=nacos3:7848, cost time=32 ms

2024-05-21 01:00:37,670 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=45, currTerm=46.

2024-05-21 01:00:37,676 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=48, votedFor=nacos3:7848, cost time=56 ms

2024-05-21 01:00:37,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=46, votedFor=nacos2:7848, cost time=46 ms

2024-05-21 01:00:37,678 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=48, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 01:00:37,682 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=46, currTerm=46, granted=false, requestLastLogId=LogId [index=45, term=45], lastLogId=LogId [index=46, term=46].

2024-05-21 01:00:37,683 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=46, currTerm=46.

2024-05-21 01:00:37,696 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:00:37,714 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:00:37,718 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:00:37,730 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:37,765 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=48, currTerm=49.

2024-05-21 01:00:37,714 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:37,770 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=48, currTerm=49.

2024-05-21 01:00:37,714 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:37,767 INFO onLeaderStart: term=46.

2024-05-21 01:00:53,975 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:00:53,964 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:00:53,950 INFO Node <naming_service_metadata/nacos1:7848> term 48 start preVote.

2024-05-21 01:00:53,946 INFO Node <naming_instance_metadata/nacos1:7848> term 46 start preVote.

2024-05-21 01:00:53,939 INFO Node <naming_persistent_service/nacos1:7848> term 49 start preVote.

2024-05-21 01:00:54,529 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=46, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:54,623 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:54,666 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:00:54,687 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=45, term=46], lastLogId=LogId [index=45, term=46].

2024-05-21 01:00:54,632 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:54,689 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=7, type=Follower] is going to quit

2024-05-21 01:00:54,755 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=46, term=46], lastLogId=LogId [index=46, term=46].

2024-05-21 01:00:54,792 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=46, term=46], lastLogId=LogId [index=46, term=46].

2024-05-21 01:00:54,794 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=49, currTerm=48, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:54,796 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=49, currTerm=48, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:54,807 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=46, granted=true.

2024-05-21 01:00:54,798 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=47, currTerm=46.

2024-05-21 01:00:54,822 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=49, granted=false.

2024-05-21 01:00:54,812 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=46.

2024-05-21 01:00:54,839 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,847 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=48, granted=true.

2024-05-21 01:00:54,853 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=48.

2024-05-21 01:00:54,857 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=49, currTerm=49.

2024-05-21 01:00:54,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,860 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,861 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=49, granted=true.

2024-05-21 01:00:54,868 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=49.

2024-05-21 01:00:54,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=47, votedFor=nacos1:7848, cost time=21 ms

2024-05-21 01:00:54,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=47, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-21 01:00:54,875 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,871 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,877 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=47, currTerm=47.

2024-05-21 01:00:54,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=50, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 01:00:54,888 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=47, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 01:00:54,891 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=49, votedFor=nacos1:7848, cost time=28 ms

2024-05-21 01:00:54,897 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:55,035 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=50, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:55,048 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:00:55,071 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:00:55,077 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:00:55,091 INFO onLeaderStart: term=50.

2024-05-21 01:01:11,683 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=50, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:01:12,107 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:01:12,119 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:01:12,122 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=7, type=Follower] is going to quit

2024-05-21 01:01:12,062 INFO Node <naming_service_metadata/nacos1:7848> term 49 start preVote.

2024-05-21 01:01:12,127 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=8, type=Follower] is going to quit

2024-05-21 01:01:12,141 INFO Node <naming_instance_metadata/nacos1:7848> term 47 start preVote.

2024-05-21 01:01:12,144 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:01:12,155 INFO Node <naming_service_metadata/nacos1:7848> term 49 start preVote.

2024-05-21 01:01:12,160 INFO Node <naming_persistent_service_v2/nacos1:7848> term 47 start preVote.

2024-05-21 01:01:12,164 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:01:12,293 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=48, currTerm=47, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:01:12,306 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=50, term=50], lastLogId=LogId [index=50, term=50].

2024-05-21 01:01:12,353 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=50, term=50], lastLogId=LogId [index=50, term=50].

2024-05-21 01:01:12,320 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 01:01:12,397 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=47, granted=true.

2024-05-21 01:01:12,412 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=47.

2024-05-21 01:01:12,420 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=47, granted=true.

2024-05-21 01:01:12,425 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=47.

2024-05-21 01:01:12,299 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=50, currTerm=49, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:01:12,401 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=51, currTerm=50.

2024-05-21 01:01:12,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,436 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=48, currTerm=48.

2024-05-21 01:01:12,429 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=49, granted=false.

2024-05-21 01:01:12,443 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:01:12,452 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=49, granted=false.

2024-05-21 01:01:12,458 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=49, granted=true.

2024-05-21 01:01:12,463 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=49.

2024-05-21 01:01:12,463 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,476 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=48, votedFor=nacos1:7848, cost time=27 ms

2024-05-21 01:01:12,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=48, votedFor=nacos1:7848, cost time=50 ms

2024-05-21 01:01:12,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=50, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 01:01:12,490 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:01:12,486 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,491 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:01:12,481 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=51, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-21 01:01:12,507 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=48, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:01:12,516 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:01:12,531 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:01:12,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=51, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 01:01:12,511 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,553 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,555 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=50, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:01:12,568 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,577 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:01:12,585 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:01:12,595 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:01:12,603 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=48, currTerm=48.

2024-05-21 01:01:12,622 INFO onLeaderStart: term=48.

2024-05-21 01:01:12,638 INFO onLeaderStart: term=50.

2024-05-21 01:01:12,649 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:18,889 INFO Node <naming_instance_metadata/nacos1:7848> term 48 start preVote.

2024-05-21 01:18:19,077 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:19,061 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=48, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:19,075 INFO Node <naming_persistent_service/nacos1:7848> term 51 start preVote.

2024-05-21 01:18:19,480 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:19,515 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=9, type=Follower] is going to quit

2024-05-21 01:18:18,983 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=50, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:19,549 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 01:18:19,390 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:19,470 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:18:19,553 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=10, type=Follower] is going to quit

2024-05-21 01:18:19,569 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:18:19,539 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=52, currTerm=51, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:18:19,556 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:19,578 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,558 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 01:18:19,574 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:18:19,638 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=50], lastLogId=LogId [index=49, term=50].

2024-05-21 01:18:19,641 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=48, granted=false.

2024-05-21 01:18:19,649 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=50], lastLogId=LogId [index=49, term=50].

2024-05-21 01:18:19,677 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=51, currTerm=50.

2024-05-21 01:18:19,752 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:18:19,752 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=49, currTerm=48.

2024-05-21 01:18:19,757 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=48, granted=true.

2024-05-21 01:18:19,771 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=48.

2024-05-21 01:18:19,761 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:18:19,772 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=51, votedFor=0.0.0.0:0, cost time=91 ms

2024-05-21 01:18:19,841 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,843 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=51, currTerm=51.

2024-05-21 01:18:19,884 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=49, votedFor=nacos1:7848, cost time=106 ms

2024-05-21 01:18:19,889 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=49.

2024-05-21 01:18:19,896 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:18:19,842 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,898 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=52, votedFor=0.0.0.0:0, cost time=142 ms

2024-05-21 01:18:19,906 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=51, currTerm=52.

2024-05-21 01:18:19,907 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=49, votedFor=0.0.0.0:0, cost time=145 ms

2024-05-21 01:18:19,909 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=51, currTerm=52.

2024-05-21 01:18:19,913 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,924 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=51, votedFor=nacos2:7848, cost time=34 ms

2024-05-21 01:18:19,924 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=49.

2024-05-21 01:18:19,926 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=52, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 01:18:19,936 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=49, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 01:18:19,927 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,928 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 01:18:44,009 INFO Node <naming_service_metadata/nacos1:7848> term 51 start preVote.

2024-05-21 01:18:44,013 INFO Node <naming_persistent_service_v2/nacos1:7848> term 49 start preVote.

2024-05-21 01:18:44,041 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:18:44,037 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:44,014 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:18:44,038 INFO Node <naming_instance_metadata/nacos1:7848> term 49 start preVote.

2024-05-21 01:18:44,140 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=49, term=49], lastLogId=LogId [index=49, term=49].

2024-05-21 01:18:44,141 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:18:44,295 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=50, currTerm=49.

2024-05-21 01:18:44,303 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=53, currTerm=52, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:18:44,212 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=49, granted=true.

2024-05-21 01:18:44,319 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=49.

2024-05-21 01:18:44,322 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:44,306 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:18:44,326 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=51, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:18:44,413 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=53, currTerm=52.

2024-05-21 01:18:44,423 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:18:44,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=50, votedFor=0.0.0.0:0, cost time=161 ms

2024-05-21 01:18:44,461 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=49, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:18:44,460 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=53, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 01:18:44,470 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=52, votedFor=0.0.0.0:0, cost time=145 ms

2024-05-21 01:18:44,499 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=50, votedFor=nacos1:7848, cost time=117 ms

2024-05-21 01:18:44,505 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=50, currTerm=50, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:18:44,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=53, votedFor=nacos2:7848, cost time=59 ms

2024-05-21 01:18:44,534 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=50, currTerm=50.

2024-05-21 01:18:44,590 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=49, currTerm=50.

2024-05-21 01:18:44,599 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 01:18:44,652 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=50, votedFor=nacos3:7848, cost time=183 ms

2024-05-21 01:18:44,658 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=49, currTerm=50.

2024-05-21 01:18:44,660 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=49, currTerm=50.

2024-05-21 01:18:44,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=52, votedFor=nacos3:7848, cost time=169 ms

2024-05-21 01:18:44,672 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=51, currTerm=52.

2024-05-21 01:18:44,673 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=51, currTerm=52.

2024-05-21 01:35:32,476 INFO Node <naming_service_metadata/nacos1:7848> term 52 start preVote.

2024-05-21 01:35:32,480 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:35:32,481 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:32,487 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:35:32,480 INFO Node <naming_persistent_service/nacos1:7848> term 53 start preVote.

2024-05-21 01:35:32,578 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:32,577 INFO Node <naming_persistent_service_v2/nacos1:7848> term 50 start preVote.

2024-05-21 01:35:32,476 INFO Node <naming_instance_metadata/nacos1:7848> term 50 start preVote.

2024-05-21 01:35:32,730 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=53, term=53], lastLogId=LogId [index=53, term=53].

2024-05-21 01:35:32,770 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=51, currTerm=50, because the leader nacos2:7848's lease is still valid.

2024-05-21 01:35:32,795 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:35:32,807 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=52, granted=true.

2024-05-21 01:35:32,817 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=52.

2024-05-21 01:35:32,821 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:32,830 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=50, granted=true.

2024-05-21 01:35:32,833 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=50.

2024-05-21 01:35:32,834 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:32,832 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=51, currTerm=50.

2024-05-21 01:35:32,849 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=54, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 01:35:32,850 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=51, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 01:35:32,880 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:35:32,885 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=51, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:32,850 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=53, votedFor=nacos1:7848, cost time=28 ms

2024-05-21 01:35:32,858 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=51, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 01:35:32,852 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=53, currTerm=54.

2024-05-21 01:35:32,851 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=53, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:32,901 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=50, currTerm=51.

2024-05-21 01:35:32,929 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:32,898 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:35:32,898 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=50, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:32,948 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:35:32,921 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=53, currTerm=54.

2024-05-21 01:35:32,944 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=53, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:33,003 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:35:33,008 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=51, votedFor=nacos3:7848, cost time=83 ms

2024-05-21 01:35:33,018 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:35:33,018 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=50, currTerm=51.

2024-05-21 01:35:33,028 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=54, votedFor=nacos3:7848, cost time=30 ms

2024-05-21 01:35:33,055 INFO onLeaderStart: term=53.

2024-05-21 01:35:33,074 INFO onLeaderStart: term=51.

2024-05-21 01:35:33,080 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:33,093 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:49,175 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:48,739 INFO Node <naming_instance_metadata/nacos1:7848> term 51 start preVote.

2024-05-21 01:35:49,395 INFO Node <naming_persistent_service/nacos1:7848> term 54 start preVote.

2024-05-21 01:35:49,389 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=51, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:49,420 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:49,428 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=53, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:49,475 INFO Node <naming_instance_metadata/nacos1:7848> term 51 start preVote.

2024-05-21 01:35:49,515 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:49,520 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:49,526 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=13, type=Follower] is going to quit

2024-05-21 01:35:49,521 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=12, type=Follower] is going to quit

2024-05-21 01:35:49,562 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=14, type=Follower] is going to quit

2024-05-21 01:35:49,563 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=11, type=Follower] is going to quit

2024-05-21 01:35:49,569 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=51, term=51], lastLogId=LogId [index=51, term=51].

2024-05-21 01:35:49,581 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:49,626 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=52, currTerm=51, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:49,736 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:35:49,750 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:35:49,761 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=51, term=51], lastLogId=LogId [index=51, term=51].

2024-05-21 01:35:49,770 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=51, granted=false.

2024-05-21 01:35:49,789 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=51, granted=false.

2024-05-21 01:35:49,817 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:35:49,820 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:35:49,836 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=54, granted=false.

2024-05-21 01:35:49,867 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=52, currTerm=51.

2024-05-21 01:35:49,877 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=52, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-21 01:35:49,879 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=54, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 01:35:49,895 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=54, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 01:35:49,904 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=51, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:49,909 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=54, currTerm=54.

2024-05-21 01:35:49,933 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=52, votedFor=0.0.0.0:0, cost time=64 ms

2024-05-21 01:35:49,936 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:35:49,950 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=54.

2024-05-21 01:35:49,955 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:49,950 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=52, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 01:35:49,942 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=52, votedFor=nacos3:7848, cost time=18 ms

2024-05-21 01:35:49,955 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=55.

2024-05-21 01:35:49,972 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=51, currTerm=52.

2024-05-21 01:35:49,956 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,942 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:50,004 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=55, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 01:35:49,986 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,975 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:50,071 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:50,090 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=51, currTerm=52.

2024-05-21 01:36:09,951 INFO Node <naming_instance_metadata/nacos1:7848> term 52 start preVote.

2024-05-21 01:36:09,950 INFO Node <naming_persistent_service/nacos1:7848> term 55 start preVote.

2024-05-21 01:36:09,959 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:36:10,003 INFO Node <naming_persistent_service_v2/nacos1:7848> term 52 start preVote.

2024-05-21 01:36:09,997 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:36:09,973 INFO Node <naming_instance_metadata/nacos1:7848> term 52 start preVote.

2024-05-21 01:36:10,007 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:36:10,034 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,029 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,052 INFO Node <naming_persistent_service/nacos1:7848> term 55 start preVote.

2024-05-21 01:36:10,076 INFO Node <naming_instance_metadata/nacos1:7848> term 52 start preVote.

2024-05-21 01:36:10,124 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=52, granted=true.

2024-05-21 01:36:10,143 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=52.

2024-05-21 01:36:10,138 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 01:36:10,159 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:36:10,219 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=53, votedFor=nacos1:7848, cost time=49 ms

2024-05-21 01:36:10,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=56, votedFor=0.0.0.0:0, cost time=77 ms

2024-05-21 01:36:10,271 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=52, granted=true.

2024-05-21 01:36:10,275 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=52.

2024-05-21 01:36:10,276 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,277 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,278 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:36:10,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=56, votedFor=nacos3:7848, cost time=64 ms

2024-05-21 01:36:10,318 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:36:10,323 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 01:36:10,333 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 01:36:10,361 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=53, votedFor=nacos1:7848, cost time=69 ms

2024-05-21 01:36:10,361 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=53, currTerm=53.

2024-05-21 01:36:10,396 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:36:10,402 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:36:10,399 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:36:10,413 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:36:10,402 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=53, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=52], lastLogId=LogId [index=52, term=52].

2024-05-21 01:36:10,414 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,428 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,453 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=53, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:36:10,459 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=53, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:36:10,461 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:36:10,464 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:36:10,472 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:36:10,475 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:36:10,477 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:36:10,488 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:36:10,508 INFO onLeaderStart: term=53.

2024-05-21 01:36:10,514 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:36:10,522 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=54.

2024-05-21 01:36:10,536 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:36:10,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=55, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 01:36:10,551 INFO onLeaderStart: term=53.

2024-05-21 01:36:10,565 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=55, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 01:52:53,675 INFO Node <naming_persistent_service/nacos1:7848> term 56 start preVote.

2024-05-21 01:52:54,074 INFO Node <naming_service_metadata/nacos1:7848> term 55 start preVote.

2024-05-21 01:52:53,679 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:52:54,115 INFO Node <naming_persistent_service/nacos1:7848> term 56 start preVote.

2024-05-21 01:52:54,124 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 01:52:54,225 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=53, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:52:54,121 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=53, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:52:54,308 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:52:54,349 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:52:54,335 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=14, type=Follower] is going to quit

2024-05-21 01:52:54,328 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:52:54,364 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=13, type=Follower] is going to quit

2024-05-21 01:52:54,375 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=52, lastLogIncluded=0, lastLogIndex=52, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 01:52:54,411 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:52:54,412 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 01:52:54,469 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=55, granted=true.

2024-05-21 01:52:54,477 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=55.

2024-05-21 01:52:54,472 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=53, term=53], lastLogId=LogId [index=53, term=53].

2024-05-21 01:52:54,475 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=56, granted=true.

2024-05-21 01:52:54,491 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=56.

2024-05-21 01:52:54,508 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:52:54,556 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=57, votedFor=nacos1:7848, cost time=46 ms

2024-05-21 01:52:54,557 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:52:54,537 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:52:54,559 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:52:54,824 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=56, votedFor=nacos1:7848, cost time=325 ms

2024-05-21 01:52:54,827 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=56, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:52:54,830 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:52:54,844 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:52:54,876 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=57, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:52:54,881 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:52:54,542 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:52:54,677 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:52:54,925 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=54, votedFor=0.0.0.0:0, cost time=201 ms

2024-05-21 01:52:54,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=54, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 01:52:54,684 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:52:54,882 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:52:54,890 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:52:54,990 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=55, currTerm=56.

2024-05-21 01:52:55,001 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:52:55,019 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:52:54,995 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=54, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 01:52:55,011 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:52:55,044 INFO onLeaderStart: term=57.

2024-05-21 01:52:55,039 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:52:55,048 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=54, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 01:52:55,052 INFO onLeaderStart: term=56.

2024-05-21 01:52:55,053 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 01:54:02,053 INFO Node <naming_persistent_service_v2/nacos1:7848> term 54 start preVote.

2024-05-21 01:54:02,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:54:01,520 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=57, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:54:02,107 INFO Node <naming_instance_metadata/nacos1:7848> term 54 start preVote.

2024-05-21 01:54:02,198 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:54:02,109 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:54:02,182 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=10, type=Follower] is going to quit

2024-05-21 01:54:02,272 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=11, type=Follower] is going to quit

2024-05-21 01:54:02,052 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=56, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:54:02,335 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 01:54:02,393 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=15, type=Follower] is going to quit

2024-05-21 01:54:02,327 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 01:54:02,338 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:54:02,360 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:54:02,527 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:54:02,531 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=54.

2024-05-21 01:54:02,515 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 01:54:02,528 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 01:54:02,541 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=57, currTerm=56.

2024-05-21 01:54:02,563 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=54, granted=false.

2024-05-21 01:54:02,351 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,534 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:54:02,538 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:54:02,576 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=57.

2024-05-21 01:54:02,572 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,613 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=57, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-21 01:54:02,620 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 01:54:02,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=58, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 01:54:02,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=57, votedFor=nacos3:7848, cost time=47 ms

2024-05-21 01:54:02,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=55, votedFor=nacos1:7848, cost time=73 ms

2024-05-21 01:54:02,677 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=55, currTerm=55.

2024-05-21 01:54:02,694 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=58, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 01:54:02,715 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:54:02,723 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=54.

2024-05-21 01:54:02,720 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,727 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:54:02,783 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,789 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,783 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=55, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:54:02,794 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:54:02,805 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:54:02,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=55, votedFor=nacos1:7848, cost time=53 ms

2024-05-21 01:54:02,816 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:54:02,826 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=55, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:54:02,830 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 01:54:02,834 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:54:02,843 INFO onLeaderStart: term=55.

2024-05-21 01:54:02,852 INFO onLeaderStart: term=55.

2024-05-21 01:54:02,862 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:00:31,633 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:00:31,044 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=55, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:00:31,619 INFO Node <naming_service_metadata/nacos1:7848> term 57 start preVote.

2024-05-21 02:00:31,060 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=55, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:00:31,747 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:00:31,776 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=15, type=Follower] is going to quit

2024-05-21 02:00:31,785 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:00:31,812 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:00:31,841 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=59, currTerm=58, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:00:31,841 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=13, type=Follower] is going to quit

2024-05-21 02:00:31,843 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 02:00:32,703 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 02:00:32,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=58, status=Status[ENEWLEADER<10011>: Raft node receives message from new leader with higher term.]].

2024-05-21 02:00:32,710 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 02:00:32,707 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower] is going to quit

2024-05-21 02:00:32,733 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=59, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 02:00:32,733 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 02:00:32,736 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:32,738 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:32,739 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 58, expect=57.

2024-05-21 02:00:32,800 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=59, currTerm=59.

2024-05-21 02:00:32,810 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=57, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 02:00:32,824 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=56, votedFor=0.0.0.0:0, cost time=113 ms

2024-05-21 02:00:32,825 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=12, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send2,5,main].

2024-05-21 02:00:32,793 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 02:00:32,828 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=59, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 02:00:32,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=56, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 02:00:32,826 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:32,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=58, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 02:00:32,840 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=58, currTerm=58.

2024-05-21 02:00:32,840 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=59, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 02:00:32,841 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:32,847 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:32,863 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=56, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 02:00:32,871 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send3,5,main].

2024-05-21 02:00:32,874 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=58, votedFor=nacos2:7848, cost time=29 ms

2024-05-21 02:00:32,879 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=57, currTerm=58.

2024-05-21 02:00:32,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=56, votedFor=nacos3:7848, cost time=16 ms

2024-05-21 02:00:32,871 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=56, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:32,882 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 02:00:32,887 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[EHIGHERTERMRESPONSE<10008>: Leader receives higher term heartbeat_response from peer:nacos3:7848, group:naming_persistent_service_v2]].

2024-05-21 02:00:32,888 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:46,916 INFO Node <naming_service_metadata/nacos1:7848> term 58 start preVote.

2024-05-21 02:16:47,019 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:16:46,948 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:16:46,931 INFO Node <naming_persistent_service_v2/nacos1:7848> term 56 start preVote.

2024-05-21 02:16:46,989 INFO Node <naming_instance_metadata/nacos1:7848> term 56 start preVote.

2024-05-21 02:16:46,993 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:16:47,056 INFO Node <naming_service_metadata/nacos1:7848> term 58 start preVote.

2024-05-21 02:16:47,343 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,147 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=60, currTerm=59, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:16:47,325 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=57, currTerm=56, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:16:47,412 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=60, currTerm=59.

2024-05-21 02:16:47,339 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=59, currTerm=58, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:16:47,397 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,413 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=57, currTerm=56, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:16:47,421 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=59, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:16:47,435 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=58, granted=false.

2024-05-21 02:16:47,442 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=60, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 02:16:47,450 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=57, currTerm=56.

2024-05-21 02:16:47,450 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=58, granted=true.

2024-05-21 02:16:47,464 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=58.

2024-05-21 02:16:47,456 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 57, expect=56.

2024-05-21 02:16:47,470 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:16:47,473 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=60, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 02:16:47,480 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=59.

2024-05-21 02:16:47,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=57, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 02:16:47,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=57, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 02:16:47,523 WARN Node <naming_service_metadata/nacos1:7848> raise term 59 when get lastLogId.

2024-05-21 02:16:47,523 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=57, currTerm=57.

2024-05-21 02:16:47,513 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:16:47,526 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=56, currTerm=57.

2024-05-21 02:16:47,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=57, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 02:16:47,540 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=56, currTerm=57.

2024-05-21 02:16:47,542 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=56, currTerm=57.

2024-05-21 02:16:47,556 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=57, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 02:16:47,495 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 02:16:47,564 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=59, votedFor=nacos1:7848, cost time=39 ms

2024-05-21 02:16:47,578 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 02:16:47,579 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 02:33:06,017 INFO Node <naming_persistent_service_v2/nacos1:7848> term 57 start preVote.

2024-05-21 02:33:06,020 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:33:06,019 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 02:33:06,018 INFO Node <naming_instance_metadata/nacos1:7848> term 57 start preVote.

2024-05-21 02:33:06,027 INFO Node <naming_service_metadata/nacos1:7848> term 59 start preVote.

2024-05-21 02:33:06,029 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:33:06,044 INFO Node <naming_persistent_service/nacos1:7848> term 60 start preVote.

2024-05-21 02:33:06,045 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:33:06,111 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:33:06,118 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 02:33:06,211 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=57, granted=false.

2024-05-21 02:33:06,241 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=59, granted=true.

2024-05-21 02:33:06,260 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=59.

2024-05-21 02:33:06,265 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:06,342 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=57, granted=true.

2024-05-21 02:33:06,350 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=57.

2024-05-21 02:33:06,353 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:06,355 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=60, granted=true.

2024-05-21 02:33:06,372 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=60.

2024-05-21 02:33:06,381 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=57, granted=true.

2024-05-21 02:33:06,393 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=57.

2024-05-21 02:33:06,383 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:06,408 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:33:06,434 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=61, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 02:33:06,434 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=58, votedFor=nacos1:7848, cost time=59 ms

2024-05-21 02:33:06,484 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=58, votedFor=nacos1:7848, cost time=79 ms

2024-05-21 02:33:06,457 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=60, votedFor=nacos1:7848, cost time=168 ms

2024-05-21 02:33:06,464 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:06,488 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:06,502 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:33:06,515 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=58.

2024-05-21 02:33:06,543 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=58, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:06,532 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=58.

2024-05-21 02:33:06,548 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=60, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:06,554 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=58, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:06,562 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:06,564 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:06,560 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:06,564 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=61, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:33:06,581 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:33:06,591 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:33:06,579 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:33:06,583 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:33:06,587 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:33:06,607 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:06,621 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:06,631 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:06,646 INFO onLeaderStart: term=60.

2024-05-21 02:33:06,646 INFO onLeaderStart: term=58.

2024-05-21 02:33:06,651 INFO onLeaderStart: term=61.

2024-05-21 02:33:06,651 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:33:06,652 INFO onLeaderStart: term=58.

2024-05-21 02:33:30,150 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=58, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:30,238 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:30,247 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=18, type=Follower] is going to quit

2024-05-21 02:33:30,248 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=61, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:30,232 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=60, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:30,272 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=58, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:30,438 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:30,444 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:30,322 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=12, type=Follower] is going to quit

2024-05-21 02:33:30,325 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=17, type=Follower] is going to quit

2024-05-21 02:33:30,465 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=18, type=Follower] is going to quit

2024-05-21 02:33:30,321 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:30,445 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=15, type=Follower] is going to quit

2024-05-21 02:33:30,473 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 02:33:30,463 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=13, type=Follower] is going to quit

2024-05-21 02:33:30,471 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=61, currTerm=60, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 02:33:30,422 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower] is going to quit

2024-05-21 02:33:30,492 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=58.

2024-05-21 02:33:30,494 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 02:33:30,517 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=62, currTerm=61.

2024-05-21 02:33:30,503 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 02:33:30,539 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=58, term=58], lastLogId=LogId [index=58, term=58].

2024-05-21 02:33:30,564 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=58.

2024-05-21 02:33:30,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=62, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 02:33:30,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=59, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 02:33:30,577 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=59, currTerm=59, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:33:30,581 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=59, currTerm=59, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:33:30,578 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=62, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 02:33:30,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=59, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 02:33:30,596 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 02:33:30,603 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=58, lastLogIncluded=0, lastLogIndex=58, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send3,5,main].

2024-05-21 02:33:30,580 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,521 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,586 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,613 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=61, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 02:33:30,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=59, votedFor=nacos3:7848, cost time=46 ms

2024-05-21 02:33:30,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=62, votedFor=nacos3:7848, cost time=52 ms

2024-05-21 02:33:30,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=59, votedFor=nacos3:7848, cost time=43 ms

2024-05-21 02:33:30,665 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,660 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,668 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,742 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=110 ms

2024-05-21 02:33:30,753 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 02:33:30,758 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,763 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,767 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,774 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,789 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:50:08,946 INFO Node <naming_persistent_service/nacos1:7848> term 62 start preVote.

2024-05-21 02:50:08,959 INFO Node <naming_service_metadata/nacos1:7848> term 61 start preVote.

2024-05-21 02:50:08,962 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,975 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=60, currTerm=59, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:50:08,955 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,955 INFO Node <naming_instance_metadata/nacos1:7848> term 59 start preVote.

2024-05-21 02:50:08,997 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=58, term=59], lastLogId=LogId [index=58, term=59].

2024-05-21 02:50:08,956 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,994 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 02:50:09,021 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 02:50:09,052 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=59, granted=true.

2024-05-21 02:50:09,055 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=61, granted=false.

2024-05-21 02:50:09,060 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=62, granted=false.

2024-05-21 02:50:09,056 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=59.

2024-05-21 02:50:09,105 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=62, currTerm=61.

2024-05-21 02:50:09,115 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=60, currTerm=60.

2024-05-21 02:50:09,116 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:50:09,116 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=59, currTerm=60.

2024-05-21 02:50:09,129 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=62, granted=true.

2024-05-21 02:50:09,136 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=62.

2024-05-21 02:50:09,178 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:50:09,187 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:50:09,201 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=62, votedFor=0.0.0.0:0, cost time=84 ms

2024-05-21 02:50:09,221 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=60, currTerm=59.

2024-05-21 02:50:09,237 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=63, votedFor=nacos1:7848, cost time=45 ms

2024-05-21 02:50:09,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=62, votedFor=nacos2:7848, cost time=31 ms

2024-05-21 02:50:09,246 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=60, votedFor=nacos1:7848, cost time=42 ms

2024-05-21 02:50:09,243 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:50:09,257 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=61, currTerm=62.

2024-05-21 02:50:09,272 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=60, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 02:50:09,285 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=60, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 02:50:09,320 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=63, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:50:09,323 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 02:50:09,334 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:50:09,348 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:50:09,387 INFO onLeaderStart: term=63.

2024-05-21 03:01:26,277 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,273 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:01:26,332 INFO Node <naming_service_metadata/nacos1:7848> term 62 start preVote.

2024-05-21 03:01:26,366 INFO Node <naming_persistent_service_v2/nacos1:7848> term 60 start preVote.

2024-05-21 03:01:26,341 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:26,348 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:26,381 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:01:26,448 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=61, currTerm=60, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:01:26,347 INFO Node <naming_instance_metadata/nacos1:7848> term 60 start preVote.

2024-05-21 03:01:26,325 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=63, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:01:26,560 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:01:26,561 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=14, type=Follower] is going to quit

2024-05-21 03:01:26,581 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=15, type=Follower] is going to quit

2024-05-21 03:01:26,570 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 03:01:26,602 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:01:26,561 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=62.

2024-05-21 03:01:26,577 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=61, currTerm=60, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:01:26,602 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=15, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 03:01:26,610 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 03:01:26,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=60, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:01:26,608 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:01:26,628 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=63.

2024-05-21 03:01:26,630 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=61, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 03:01:26,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=63, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 03:01:26,641 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=60, currTerm=61.

2024-05-21 03:01:26,656 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=61, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 03:01:26,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=63, votedFor=nacos3:7848, cost time=38 ms

2024-05-21 03:01:26,684 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=64, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 03:01:26,688 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 03:01:26,688 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=62, currTerm=63.

2024-05-21 03:01:26,693 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=60, currTerm=61.

2024-05-21 03:01:26,694 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=61, votedFor=nacos3:7848, cost time=40 ms

2024-05-21 03:01:26,702 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=60, currTerm=61.

2024-05-21 03:01:26,697 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=62, currTerm=63.

2024-05-21 03:01:26,706 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=64, votedFor=nacos3:7848, cost time=18 ms

2024-05-21 03:01:26,709 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=60, currTerm=61.

2024-05-21 03:01:26,713 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,715 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=64.

2024-05-21 03:01:26,717 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,720 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=15, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send7,5,main].

2024-05-21 03:01:26,811 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,723 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,827 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:17:41,860 INFO Node <naming_persistent_service_v2/nacos1:7848> term 61 start preVote.

2024-05-21 03:17:41,882 INFO Node <naming_persistent_service_v2/nacos1:7848> term 61 start preVote.

2024-05-21 03:17:41,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:17:41,902 INFO Node <naming_instance_metadata/nacos1:7848> term 61 start preVote.

2024-05-21 03:17:41,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:17:42,419 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=61, granted=true.

2024-05-21 03:17:42,431 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=61.

2024-05-21 03:17:42,446 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:17:42,605 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=61, granted=true.

2024-05-21 03:17:42,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=62, votedFor=nacos1:7848, cost time=183 ms

2024-05-21 03:17:42,650 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=65, currTerm=64, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,682 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=65, currTerm=64, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,742 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=64, currTerm=63, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,662 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=61.

2024-05-21 03:17:42,774 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:17:42,667 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,772 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:17:42,785 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=62, currTerm=62, granted=true, requestLastLogId=LogId [index=60, term=61], lastLogId=LogId [index=60, term=61].

2024-05-21 03:17:42,802 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,793 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=63.

2024-05-21 03:17:42,806 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,798 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:17:42,814 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=63, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:17:42,816 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,828 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=62, currTerm=62.

2024-05-21 03:17:42,833 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=64, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 03:17:42,833 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=62, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:17:42,836 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=65, votedFor=0.0.0.0:0, cost time=44 ms

2024-05-21 03:17:42,844 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:17:42,853 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=64, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 03:17:42,864 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:17:42,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=62, votedFor=nacos1:7848, cost time=40 ms

2024-05-21 03:17:42,872 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=65, votedFor=nacos2:7848, cost time=24 ms

2024-05-21 03:17:42,884 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:17:42,982 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 03:17:42,982 INFO onLeaderStart: term=62.

2024-05-21 03:33:30,734 INFO Node <naming_service_metadata/nacos1:7848> term 64 start preVote.

2024-05-21 03:33:30,760 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,759 INFO Node <naming_instance_metadata/nacos1:7848> term 62 start preVote.

2024-05-21 03:33:30,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,782 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=62, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:33:30,778 INFO Node <naming_service_metadata/nacos1:7848> term 64 start preVote.

2024-05-21 03:33:30,791 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:33:30,802 INFO Node <naming_persistent_service/nacos1:7848> term 65 start preVote.

2024-05-21 03:33:30,862 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:33:30,916 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=21, type=Follower] is going to quit

2024-05-21 03:33:30,943 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=65, currTerm=64, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:30,951 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=20, type=Follower] is going to quit

2024-05-21 03:33:30,949 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=66, currTerm=65, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:30,989 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=62, term=62], lastLogId=LogId [index=62, term=62].

2024-05-21 03:33:30,999 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=64, granted=false.

2024-05-21 03:33:31,000 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=62, term=62], lastLogId=LogId [index=62, term=62].

2024-05-21 03:33:31,008 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=64, granted=false.

2024-05-21 03:33:31,019 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=62, term=62], lastLogId=LogId [index=62, term=62].

2024-05-21 03:33:31,021 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=63, currTerm=62, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:33:31,039 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=64, granted=true.

2024-05-21 03:33:31,059 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=64.

2024-05-21 03:33:31,064 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,092 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=62, granted=true.

2024-05-21 03:33:31,106 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=62.

2024-05-21 03:33:31,107 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,141 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=63, currTerm=62.

2024-05-21 03:33:31,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=63, votedFor=nacos1:7848, cost time=75 ms

2024-05-21 03:33:31,184 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,189 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=63, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:33:31,192 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:33:31,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=65, votedFor=nacos1:7848, cost time=103 ms

2024-05-21 03:33:31,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=63, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 03:33:31,202 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=65.

2024-05-21 03:33:31,198 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:33:31,207 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=63.

2024-05-21 03:33:31,212 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,229 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=65, currTerm=65.

2024-05-21 03:33:31,214 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:33:31,250 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=63.

2024-05-21 03:33:31,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=66, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-21 03:33:31,269 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,280 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=65, currTerm=66.

2024-05-21 03:33:31,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=63, votedFor=nacos2:7848, cost time=44 ms

2024-05-21 03:33:31,282 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:33:31,301 INFO onLeaderStart: term=63.

2024-05-21 03:33:31,305 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=66, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 03:33:31,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 03:33:31,296 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,298 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,314 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=65, currTerm=66.

2024-05-21 03:34:36,737 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=63, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:34:36,871 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=67, currTerm=66, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:34:36,890 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=67, currTerm=66.

2024-05-21 03:34:36,893 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:34:36,897 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=18, type=Follower] is going to quit

2024-05-21 03:34:36,890 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:34:36,887 INFO Node <naming_persistent_service_v2/nacos1:7848> term 63 start preVote.

2024-05-21 03:34:36,895 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:34:36,931 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=62, lastLogIncluded=0, lastLogIndex=62, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 03:34:36,944 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=64, currTerm=63, because the leader nacos2:7848's lease is still valid.

2024-05-21 03:34:36,946 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=64, currTerm=63.

2024-05-21 03:34:37,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=67, votedFor=0.0.0.0:0, cost time=114 ms

2024-05-21 03:34:37,073 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=63, granted=false.

2024-05-21 03:34:37,078 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=63, granted=true.

2024-05-21 03:34:37,082 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=63.

2024-05-21 03:34:37,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=67, votedFor=nacos2:7848, cost time=66 ms

2024-05-21 03:34:37,089 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=64.

2024-05-21 03:34:37,087 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:34:37,091 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=64, votedFor=0.0.0.0:0, cost time=100 ms

2024-05-21 03:34:37,111 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=64, currTerm=64, granted=true, requestLastLogId=LogId [index=62, term=63], lastLogId=LogId [index=62, term=63].

2024-05-21 03:34:37,119 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=64, currTerm=64, granted=true, requestLastLogId=LogId [index=62, term=63], lastLogId=LogId [index=62, term=63].

2024-05-21 03:34:37,120 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=64.

2024-05-21 03:34:37,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=64, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 03:34:37,158 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=64, votedFor=nacos1:7848, cost time=55 ms

2024-05-21 03:34:37,244 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:41,772 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=66, currTerm=65, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:34:41,785 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=65.

2024-05-21 03:34:41,786 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=65, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:34:41,792 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=66, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-21 03:34:41,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=66, votedFor=nacos3:7848, cost time=4 ms

2024-05-21 03:50:56,781 INFO Node <naming_service_metadata/nacos1:7848> term 66 start preVote.

2024-05-21 03:50:56,783 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:50:56,845 INFO Node <naming_persistent_service/nacos1:7848> term 67 start preVote.

2024-05-21 03:50:56,862 INFO Node <naming_persistent_service/nacos1:7848> term 67 start preVote.

2024-05-21 03:50:56,846 INFO Node <naming_service_metadata/nacos1:7848> term 66 start preVote.

2024-05-21 03:50:56,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 03:50:56,900 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 03:50:56,903 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=67, currTerm=66, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:50:56,995 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=65, currTerm=64, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:50:57,063 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=65, currTerm=64, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:50:57,084 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:50:57,097 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:50:57,115 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=67.

2024-05-21 03:50:57,117 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:50:57,130 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=66, granted=true.

2024-05-21 03:50:57,143 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=66.

2024-05-21 03:50:57,145 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:50:57,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=65, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-21 03:50:57,147 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=68, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 03:50:57,163 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=67, currTerm=68.

2024-05-21 03:50:57,169 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=67, currTerm=68.

2024-05-21 03:50:57,192 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=67, votedFor=nacos1:7848, cost time=45 ms

2024-05-21 03:50:57,195 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:50:57,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=68, votedFor=nacos3:7848, cost time=30 ms

2024-05-21 03:50:57,206 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=65, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 03:50:57,298 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=65, currTerm=64.

2024-05-21 03:50:57,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:50:57,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=65, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 03:50:57,372 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:50:57,383 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=65, votedFor=nacos2:7848, cost time=33 ms

2024-05-21 03:50:57,403 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=67, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:50:57,437 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 03:50:57,445 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=67, currTerm=68.

2024-05-21 03:50:57,455 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=67, currTerm=68.

2024-05-21 03:50:57,467 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:50:57,517 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 03:50:57,521 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:50:57,545 INFO onLeaderStart: term=67.

2024-05-21 04:02:32,097 INFO Node <naming_persistent_service_v2/nacos1:7848> term 65 start preVote.

2024-05-21 04:02:32,368 INFO Node <naming_instance_metadata/nacos1:7848> term 65 start preVote.

2024-05-21 04:02:32,269 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:02:32,232 INFO Node <naming_persistent_service/nacos1:7848> term 68 start preVote.

2024-05-21 04:02:32,417 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:02:32,538 INFO Node <naming_persistent_service_v2/nacos1:7848> term 65 start preVote.

2024-05-21 04:02:32,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=65, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:02:32,583 INFO Node <naming_persistent_service/nacos1:7848> term 68 start preVote.

2024-05-21 04:02:32,183 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=67, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:02:32,658 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:02:32,675 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 04:02:32,724 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=66, lastLogIncluded=0, lastLogIndex=66, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=20, type=Follower] is going to quit

2024-05-21 04:02:32,725 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=64, term=65], lastLogId=LogId [index=64, term=65].

2024-05-21 04:02:32,764 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=68, granted=true.

2024-05-21 04:02:32,766 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=68.

2024-05-21 04:02:32,780 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:32,750 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,796 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=65, granted=true.

2024-05-21 04:02:32,840 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=65.

2024-05-21 04:02:32,819 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:32,841 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=65, granted=true.

2024-05-21 04:02:32,860 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,844 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:32,890 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=65.

2024-05-21 04:02:32,894 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:32,897 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=65, currTerm=66.

2024-05-21 04:02:32,858 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:02:32,900 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:32,916 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,930 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=67.

2024-05-21 04:02:32,953 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=66, votedFor=nacos1:7848, cost time=52 ms

2024-05-21 04:02:32,960 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=66, votedFor=nacos1:7848, cost time=104 ms

2024-05-21 04:02:32,858 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:32,963 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=69, votedFor=nacos1:7848, cost time=94 ms

2024-05-21 04:02:32,967 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=66.

2024-05-21 04:02:32,972 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=68, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-21 04:02:32,970 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=65, currTerm=66.

2024-05-21 04:02:32,995 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=66.

2024-05-21 04:02:32,987 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:33,001 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,029 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=68, votedFor=nacos3:7848, cost time=41 ms

2024-05-21 04:02:33,030 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=68, currTerm=68.

2024-05-21 04:02:33,040 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=69, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:02:33,065 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:02:33,081 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:02:33,134 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:02:33,160 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,146 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:02:33,188 INFO onLeaderStart: term=69.

2024-05-21 04:02:33,190 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=66, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:02:33,202 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:02:33,205 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=65, currTerm=66.

2024-05-21 04:02:33,216 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:02:33,218 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 04:02:33,258 INFO onLeaderStart: term=66.

2024-05-21 04:02:33,274 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:18:47,925 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=66, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:18:47,945 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=21, type=Follower] is going to quit

2024-05-21 04:18:47,934 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=69, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:18:47,960 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:18:47,950 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:18:48,013 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=20, type=Follower] is going to quit

2024-05-21 04:18:48,018 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=17, type=Follower] is going to quit

2024-05-21 04:18:48,090 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=67, currTerm=66, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:18:48,091 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=69, currTerm=68, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:18:48,115 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=69, currTerm=68, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:18:48,090 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=16, type=Follower] is going to quit

2024-05-21 04:18:48,100 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 04:18:48,130 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 04:18:48,133 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,140 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:18:48,174 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:18:48,201 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:18:48,211 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=67, currTerm=66.

2024-05-21 04:18:48,249 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=70, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-21 04:18:48,249 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=67, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 04:18:48,289 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=70, votedFor=nacos3:7848, cost time=35 ms

2024-05-21 04:18:48,304 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=67, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 04:18:48,393 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,376 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,405 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,418 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=69, currTerm=68.

2024-05-21 04:18:48,422 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=67, currTerm=66.

2024-05-21 04:18:48,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:18:48,433 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:18:48,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=69, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 04:18:48,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=67, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 04:18:48,468 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,481 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:48,486 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=69, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 04:18:48,488 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=67, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 04:18:48,516 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:04,586 INFO Node <naming_persistent_service/nacos1:7848> term 70 start preVote.

2024-05-21 04:19:04,616 INFO Node <naming_instance_metadata/nacos1:7848> term 67 start preVote.

2024-05-21 04:19:04,617 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:19:04,644 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:19:04,590 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:19:04,640 INFO Node <naming_persistent_service_v2/nacos1:7848> term 67 start preVote.

2024-05-21 04:19:04,675 INFO Node <naming_service_metadata/nacos1:7848> term 69 start preVote.

2024-05-21 04:19:04,681 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:19:04,690 INFO Node <naming_persistent_service_v2/nacos1:7848> term 67 start preVote.

2024-05-21 04:19:04,756 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=71, currTerm=70, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:19:04,765 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 04:19:04,767 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=70, currTerm=69, because the leader nacos2:7848's lease is still valid.

2024-05-21 04:19:04,769 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:19:04,792 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:19:04,800 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:19:04,821 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=69, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:19:04,841 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=68, currTerm=67, because the leader nacos2:7848's lease is still valid.

2024-05-21 04:19:04,845 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=67.

2024-05-21 04:19:04,849 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=67, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:19:04,871 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=71, votedFor=0.0.0.0:0, cost time=94 ms

2024-05-21 04:19:04,880 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=70, votedFor=0.0.0.0:0, cost time=62 ms

2024-05-21 04:19:04,884 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=71, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 04:19:04,880 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=68, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 04:19:04,877 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=68, currTerm=67.

2024-05-21 04:19:04,899 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=67, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:19:04,913 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=68, votedFor=nacos3:7848, cost time=26 ms

2024-05-21 04:19:04,914 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=70, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 04:19:04,918 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=67, currTerm=68.

2024-05-21 04:19:04,918 WARN Node <naming_service_metadata/nacos1:7848> raise term 70 when get lastLogId.

2024-05-21 04:19:04,930 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=70, currTerm=71.

2024-05-21 04:19:04,933 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=70, currTerm=71.

2024-05-21 04:19:04,927 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=68, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 04:19:04,955 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=67, currTerm=68.

2024-05-21 04:19:04,977 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=68, votedFor=nacos2:7848, cost time=23 ms

2024-05-21 04:19:04,981 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=67, currTerm=68.

2024-05-21 04:19:04,982 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=67, currTerm=68.

2024-05-21 04:19:05,032 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=67, currTerm=68.

2024-05-21 04:19:05,046 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=67, currTerm=68.

2024-05-21 04:35:58,037 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:35:58,030 INFO Node <naming_persistent_service_v2/nacos1:7848> term 68 start preVote.

2024-05-21 04:35:58,225 INFO Node <naming_persistent_service/nacos1:7848> term 71 start preVote.

2024-05-21 04:35:58,264 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:35:58,304 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:35:58,295 INFO Node <naming_persistent_service_v2/nacos1:7848> term 68 start preVote.

2024-05-21 04:35:58,303 INFO Node <naming_instance_metadata/nacos1:7848> term 68 start preVote.

2024-05-21 04:35:58,350 INFO Node <naming_persistent_service_v2/nacos1:7848> term 68 start preVote.

2024-05-21 04:35:58,348 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 04:35:58,398 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=68, granted=true.

2024-05-21 04:35:58,417 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=68.

2024-05-21 04:35:58,515 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:35:58,565 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=69, votedFor=nacos1:7848, cost time=47 ms

2024-05-21 04:35:58,583 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,590 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=68, currTerm=69.

2024-05-21 04:35:58,608 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=69, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,599 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=68, granted=true.

2024-05-21 04:35:58,610 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=68.

2024-05-21 04:35:58,620 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=68, currTerm=69.

2024-05-21 04:35:58,627 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 04:35:58,632 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:35:58,633 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,667 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,673 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=72, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-21 04:35:58,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=69, votedFor=nacos1:7848, cost time=37 ms

2024-05-21 04:35:58,695 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:35:58,703 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=71, currTerm=70, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:35:58,712 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=72, votedFor=nacos3:7848, cost time=26 ms

2024-05-21 04:35:58,756 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=71, currTerm=72.

2024-05-21 04:35:58,780 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=69, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:35:58,818 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=71, currTerm=72.

2024-05-21 04:35:58,821 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:35:58,812 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=69, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:35:58,850 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 04:35:58,856 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:35:58,863 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:35:58,867 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:35:58,874 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:35:58,880 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 04:35:58,887 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 04:35:58,888 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:35:58,905 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=71, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 04:35:58,908 INFO onLeaderStart: term=69.

2024-05-21 04:35:58,920 INFO onLeaderStart: term=69.

2024-05-21 04:35:58,925 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=71, votedFor=nacos2:7848, cost time=7 ms

2024-05-21 04:52:18,498 INFO Node <naming_service_metadata/nacos1:7848> term 71 start preVote.

2024-05-21 04:52:18,502 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 04:52:18,566 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=69, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:52:18,624 INFO Node <naming_persistent_service/nacos1:7848> term 72 start preVote.

2024-05-21 04:52:18,624 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:52:18,631 INFO Node <naming_service_metadata/nacos1:7848> term 71 start preVote.

2024-05-21 04:52:18,647 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=70, currTerm=69, because the leader nacos1:7848's lease is still valid.

2024-05-21 04:52:18,759 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:52:18,762 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=23, type=Follower] is going to quit

2024-05-21 04:52:18,796 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=72, currTerm=71, because the leader nacos2:7848's lease is still valid.

2024-05-21 04:52:18,796 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=22, type=Follower] is going to quit

2024-05-21 04:52:18,801 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 04:52:18,776 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=72, granted=true.

2024-05-21 04:52:18,815 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=72.

2024-05-21 04:52:18,826 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:52:18,796 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:52:18,826 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:52:18,886 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:52:18,889 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=73.

2024-05-21 04:52:18,820 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:52:18,900 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 04:52:18,841 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 04:52:18,915 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=70, votedFor=0.0.0.0:0, cost time=87 ms

2024-05-21 04:52:18,925 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=70, votedFor=0.0.0.0:0, cost time=79 ms

2024-05-21 04:52:18,924 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=72, votedFor=0.0.0.0:0, cost time=115 ms

2024-05-21 04:52:18,891 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-21 04:52:18,943 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=23, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 04:52:19,006 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 04:52:19,013 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=70, currTerm=70.

2024-05-21 04:52:19,013 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=70, currTerm=70, granted=true, requestLastLogId=LogId [index=68, term=69], lastLogId=LogId [index=68, term=69].

2024-05-21 04:52:19,016 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=70, votedFor=nacos3:7848, cost time=45 ms

2024-05-21 04:52:19,020 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=73, votedFor=nacos1:7848, cost time=71 ms

2024-05-21 04:52:19,021 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:52:19,026 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=72, votedFor=nacos3:7848, cost time=46 ms

2024-05-21 04:52:19,030 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=71, currTerm=72.

2024-05-21 04:52:19,039 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=71, currTerm=72.

2024-05-21 04:52:19,038 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=23, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send1,5,main].

2024-05-21 04:52:19,059 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=70, votedFor=nacos2:7848, cost time=43 ms

2024-05-21 04:52:19,052 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=70, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:52:19,074 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=71, currTerm=72.

2024-05-21 04:52:19,093 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=71, currTerm=72.

2024-05-21 04:52:19,066 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,130 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 04:52:19,049 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,130 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,051 INFO Node <naming_persistent_service/nacos1:7848> term 73 start preVote.

2024-05-21 05:03:37,862 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:03:38,208 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=70], lastLogId=LogId [index=69, term=70].

2024-05-21 05:03:38,001 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:03:37,990 INFO Node <naming_persistent_service_v2/nacos1:7848> term 70 start preVote.

2024-05-21 05:03:38,002 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:03:38,478 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=71, currTerm=70, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:03:38,481 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=71, currTerm=70.

2024-05-21 05:03:37,987 INFO Node <naming_service_metadata/nacos1:7848> term 72 start preVote.

2024-05-21 05:03:38,371 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:03:38,511 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=71, currTerm=70.

2024-05-21 05:03:38,504 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=70, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:03:38,502 INFO Node <naming_service_metadata/nacos1:7848> term 72 start preVote.

2024-05-21 05:03:38,575 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=73, currTerm=72, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:03:38,577 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 05:03:38,557 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=73, granted=true.

2024-05-21 05:03:38,581 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=73.

2024-05-21 05:03:38,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=71, votedFor=0.0.0.0:0, cost time=66 ms

2024-05-21 05:03:38,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=71, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-21 05:03:38,561 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:03:38,583 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:03:38,608 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=71, votedFor=nacos3:7848, cost time=26 ms

2024-05-21 05:03:38,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=73, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 05:03:38,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=74, votedFor=nacos1:7848, cost time=19 ms

2024-05-21 05:03:38,614 WARN Node <naming_service_metadata/nacos1:7848> raise term 73 when get lastLogId.

2024-05-21 05:03:38,614 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=74.

2024-05-21 05:03:38,623 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:03:38,623 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:03:38,623 WARN Node <naming_service_metadata/nacos1:7848> raise term 73 when get lastLogId.

2024-05-21 05:03:38,678 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=71, votedFor=nacos2:7848, cost time=94 ms

2024-05-21 05:03:38,681 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=70, currTerm=71.

2024-05-21 05:03:38,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=73, votedFor=nacos2:7848, cost time=25 ms

2024-05-21 05:03:38,691 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=70, currTerm=71.

2024-05-21 05:03:38,710 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 05:19:56,880 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 05:19:57,092 INFO Node <naming_persistent_service/nacos1:7848> term 74 start preVote.

2024-05-21 05:19:57,092 INFO Node <naming_service_metadata/nacos1:7848> term 73 start preVote.

2024-05-21 05:19:57,092 INFO Node <naming_instance_metadata/nacos1:7848> term 71 start preVote.

2024-05-21 05:19:57,094 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:19:57,096 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:19:57,096 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:19:57,184 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=72, currTerm=71, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:19:57,206 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=74, currTerm=73, because the leader nacos2:7848's lease is still valid.

2024-05-21 05:19:57,236 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=74, granted=false.

2024-05-21 05:19:57,266 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 05:19:57,286 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=73, granted=true.

2024-05-21 05:19:57,289 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=73.

2024-05-21 05:19:57,278 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=71, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:19:57,297 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=74, granted=true.

2024-05-21 05:19:57,321 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=71, granted=true.

2024-05-21 05:19:57,328 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=71.

2024-05-21 05:19:57,333 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,326 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=74.

2024-05-21 05:19:57,299 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,356 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=72, votedFor=0.0.0.0:0, cost time=99 ms

2024-05-21 05:19:57,367 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=74, votedFor=nacos1:7848, cost time=50 ms

2024-05-21 05:19:57,400 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=72, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 05:19:57,402 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=74.

2024-05-21 05:19:57,416 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=72, votedFor=nacos1:7848, cost time=82 ms

2024-05-21 05:19:57,420 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:19:57,429 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=72, currTerm=72.

2024-05-21 05:19:57,431 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=72, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:19:57,431 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=75, votedFor=nacos1:7848, cost time=63 ms

2024-05-21 05:19:57,467 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:19:57,484 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=74, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:19:57,486 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=75, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:19:57,491 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:19:57,500 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:19:57,503 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:19:57,507 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:19:57,507 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:19:57,512 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 05:19:57,516 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:19:57,556 INFO onLeaderStart: term=75.

2024-05-21 05:19:57,557 INFO onLeaderStart: term=72.

2024-05-21 05:19:57,557 INFO onLeaderStart: term=74.

2024-05-21 05:35:54,415 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=72], lastLogId=LogId [index=71, term=72].

2024-05-21 05:35:54,424 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=74, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:35:54,434 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:35:54,441 INFO Node <naming_persistent_service_v2/nacos1:7848> term 72 start preVote.

2024-05-21 05:35:54,442 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:35:54,487 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=72, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:35:54,445 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 05:35:54,495 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=21, type=Follower] is going to quit

2024-05-21 05:35:54,496 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=25, type=Follower] is going to quit

2024-05-21 05:35:54,488 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=75, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:35:54,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 05:35:54,504 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:35:54,532 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:35:54,535 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,521 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=18, type=Follower] is going to quit

2024-05-21 05:35:54,582 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=19, type=Follower] is going to quit

2024-05-21 05:35:54,583 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,595 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=73, currTerm=72, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:35:54,601 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 05:35:54,601 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 05:35:54,605 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:35:54,606 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=75, currTerm=74.

2024-05-21 05:35:54,607 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=72], lastLogId=LogId [index=71, term=72].

2024-05-21 05:35:54,674 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=73, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-21 05:35:54,697 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=73, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 05:35:54,737 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=72, currTerm=73.

2024-05-21 05:35:54,742 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 05:35:54,752 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=75.

2024-05-21 05:35:54,650 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:35:54,826 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=73, currTerm=72.

2024-05-21 05:35:54,856 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=76, votedFor=0.0.0.0:0, cost time=96 ms

2024-05-21 05:35:54,861 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=76, currTerm=76.

2024-05-21 05:35:54,863 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:35:54,893 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=73, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 05:35:54,911 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=73, currTerm=73.

2024-05-21 05:35:54,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=75, votedFor=0.0.0.0:0, cost time=208 ms

2024-05-21 05:35:54,837 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=72, currTerm=73.

2024-05-21 05:35:54,950 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:35:54,964 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=76, votedFor=nacos3:7848, cost time=65 ms

2024-05-21 05:35:54,979 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=73, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 05:35:54,980 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=75, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 05:35:54,986 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=75, currTerm=75, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,986 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=75, currTerm=75.

2024-05-21 05:35:54,991 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,035 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,096 INFO Node <naming_persistent_service_v2/nacos1:7848> term 73 start preVote.

2024-05-21 05:36:47,108 INFO Node <naming_persistent_service_v2/nacos1:7848> term 73 start preVote.

2024-05-21 05:36:47,101 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:36:47,208 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=73.

2024-05-21 05:36:47,331 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=74, votedFor=0.0.0.0:0, cost time=92 ms

2024-05-21 05:36:47,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=74, votedFor=nacos3:7848, cost time=25 ms

2024-05-21 05:36:47,405 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=73, currTerm=74.

2024-05-21 05:36:47,459 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=73, currTerm=74.

2024-05-21 05:36:47,467 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=73, currTerm=74.

2024-05-21 05:36:47,465 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=76, currTerm=75, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:36:47,525 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=74, currTerm=73, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:36:47,582 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=75.

2024-05-21 05:36:47,588 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:36:47,598 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=73, currTerm=74.

2024-05-21 05:36:47,608 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=76, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-21 05:36:47,620 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=74, currTerm=73.

2024-05-21 05:36:47,620 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=73, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:36:47,630 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 05:36:47,635 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=74, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 05:36:47,644 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=73, currTerm=74.

2024-05-21 05:36:47,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=74, votedFor=nacos2:7848, cost time=25 ms

2024-05-21 05:36:52,577 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=76, term=76], lastLogId=LogId [index=76, term=76].

2024-05-21 05:36:52,602 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=76.

2024-05-21 05:36:52,603 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=76, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:36:52,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=77, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 05:36:52,619 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=77, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 05:53:07,990 INFO Node <naming_persistent_service/nacos1:7848> term 77 start preVote.

2024-05-21 05:53:08,004 INFO Node <naming_instance_metadata/nacos1:7848> term 74 start preVote.

2024-05-21 05:53:08,013 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=76], lastLogId=LogId [index=75, term=76].

2024-05-21 05:53:07,992 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:53:08,011 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:53:08,039 INFO Node <naming_persistent_service_v2/nacos1:7848> term 74 start preVote.

2024-05-21 05:53:08,073 INFO Node <naming_persistent_service_v2/nacos1:7848> term 74 start preVote.

2024-05-21 05:53:08,067 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:53:08,139 INFO Node <naming_service_metadata/nacos1:7848> term 76 start preVote.

2024-05-21 05:53:08,198 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:53:08,172 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 05:53:08,242 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=78, currTerm=77, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:53:08,245 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=75, currTerm=74, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:53:08,323 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=74, granted=false.

2024-05-21 05:53:08,328 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=74, granted=false.

2024-05-21 05:53:08,358 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=75, currTerm=74.

2024-05-21 05:53:08,366 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=77, granted=false.

2024-05-21 05:53:08,366 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:53:08,379 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=76, granted=true.

2024-05-21 05:53:08,389 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=76.

2024-05-21 05:53:08,395 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,398 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=74, granted=true.

2024-05-21 05:53:08,417 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=74.

2024-05-21 05:53:08,415 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=75, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-21 05:53:08,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,438 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=77, votedFor=nacos1:7848, cost time=32 ms

2024-05-21 05:53:08,484 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=77.

2024-05-21 05:53:08,525 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=77, granted=true.

2024-05-21 05:53:08,532 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=77.

2024-05-21 05:53:08,539 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,537 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=75, votedFor=nacos1:7848, cost time=67 ms

2024-05-21 05:53:08,546 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=77, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:53:08,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=75, votedFor=nacos2:7848, cost time=93 ms

2024-05-21 05:53:08,557 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:53:08,584 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=74, currTerm=75.

2024-05-21 05:53:08,586 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=75, currTerm=75.

2024-05-21 05:53:08,597 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=74, currTerm=75.

2024-05-21 05:53:08,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=78, votedFor=nacos1:7848, cost time=53 ms

2024-05-21 05:53:08,604 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=78.

2024-05-21 05:53:08,607 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 05:53:08,625 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:53:08,633 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:53:08,638 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 05:53:08,665 INFO onLeaderStart: term=77.

2024-05-21 06:04:41,119 INFO Node <naming_persistent_service_v2/nacos1:7848> term 75 start preVote.

2024-05-21 06:04:41,191 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:04:41,163 INFO Node <naming_persistent_service/nacos1:7848> term 78 start preVote.

2024-05-21 06:04:41,186 INFO Node <naming_instance_metadata/nacos1:7848> term 75 start preVote.

2024-05-21 06:04:41,193 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=77, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:04:41,326 INFO Node <naming_persistent_service/nacos1:7848> term 78 start preVote.

2024-05-21 06:04:41,306 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:04:41,221 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:04:41,207 INFO Node <naming_persistent_service_v2/nacos1:7848> term 75 start preVote.

2024-05-21 06:04:41,346 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:04:41,354 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=24, type=Follower] is going to quit

2024-05-21 06:04:41,403 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=76, lastLogIncluded=0, lastLogIndex=76, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 06:04:41,420 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:04:41,461 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=78, currTerm=77.

2024-05-21 06:04:41,490 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=76, currTerm=75, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:04:41,501 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=76, currTerm=75, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:04:41,517 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=76, currTerm=75.

2024-05-21 06:04:41,545 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=78, votedFor=0.0.0.0:0, cost time=81 ms

2024-05-21 06:04:41,551 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=79, currTerm=78, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:04:41,564 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=76, currTerm=75.

2024-05-21 06:04:41,582 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=75, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:04:41,556 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:04:41,564 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=76, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-21 06:04:41,571 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=78, votedFor=nacos3:7848, cost time=19 ms

2024-05-21 06:04:41,678 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=78.

2024-05-21 06:04:41,583 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=79, currTerm=78.

2024-05-21 06:04:41,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=76, votedFor=0.0.0.0:0, cost time=91 ms

2024-05-21 06:04:41,686 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=20 ms

2024-05-21 06:04:41,701 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=78, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:04:41,703 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=75, currTerm=76.

2024-05-21 06:04:41,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=76, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 06:04:41,712 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=75, currTerm=76.

2024-05-21 06:04:41,724 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=75, currTerm=76.

2024-05-21 06:04:41,725 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=75, currTerm=76.

2024-05-21 06:04:41,730 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=79, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-21 06:04:41,742 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=75, currTerm=76.

2024-05-21 06:04:41,753 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=75, currTerm=76.

2024-05-21 06:04:41,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=79, votedFor=nacos3:7848, cost time=56 ms

2024-05-21 06:04:41,793 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=78, currTerm=79.

2024-05-21 06:04:41,808 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:04:41,808 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=78, currTerm=79.

2024-05-21 06:04:41,814 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=78, currTerm=79.

2024-05-21 06:04:41,833 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=78, currTerm=79.

2024-05-21 06:05:06,271 INFO Node <naming_service_metadata/nacos1:7848> term 78 start preVote.

2024-05-21 06:05:06,299 INFO Node <naming_persistent_service_v2/nacos1:7848> term 76 start preVote.

2024-05-21 06:05:06,273 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:05:06,282 INFO Node <naming_persistent_service/nacos1:7848> term 79 start preVote.

2024-05-21 06:05:06,328 INFO Node <naming_persistent_service/nacos1:7848> term 79 start preVote.

2024-05-21 06:05:06,276 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:05:06,290 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:05:06,339 INFO Node <naming_persistent_service_v2/nacos1:7848> term 76 start preVote.

2024-05-21 06:05:06,421 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=77, currTerm=76, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:05:06,558 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=78, granted=true.

2024-05-21 06:05:06,576 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=78.

2024-05-21 06:05:06,586 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=76, granted=true.

2024-05-21 06:05:06,594 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=76.

2024-05-21 06:05:06,598 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=76.

2024-05-21 06:05:06,613 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=76, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:05:06,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=76, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:05:06,687 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=77, votedFor=nacos1:7848, cost time=67 ms

2024-05-21 06:05:06,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=77, votedFor=0.0.0.0:0, cost time=68 ms

2024-05-21 06:05:06,705 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=79, votedFor=nacos1:7848, cost time=101 ms

2024-05-21 06:05:06,793 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,828 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=79, granted=true.

2024-05-21 06:05:06,833 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=79.

2024-05-21 06:05:06,838 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:05:06,830 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=77, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:05:06,857 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=79, currTerm=79, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:05:06,857 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=77, votedFor=nacos3:7848, cost time=141 ms

2024-05-21 06:05:06,865 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=80, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 06:05:06,866 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=79, currTerm=79.

2024-05-21 06:05:06,866 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:05:06,870 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,886 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,902 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:05:06,904 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:05:06,907 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:05:06,912 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=80, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:05:06,915 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:05:06,920 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:05:06,923 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:05:06,927 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:05:06,939 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:05:06,956 INFO onLeaderStart: term=77.

2024-05-21 06:05:06,962 INFO onLeaderStart: term=80.

2024-05-21 06:11:28,300 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=77, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:11:28,721 INFO Node <naming_instance_metadata/nacos1:7848> term 77 start preVote.

2024-05-21 06:11:28,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:11:28,722 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:11:28,716 INFO Node <naming_service_metadata/nacos1:7848> term 79 start preVote.

2024-05-21 06:11:28,737 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=80, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:11:28,822 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=20, type=Follower] is going to quit

2024-05-21 06:11:28,887 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=21, type=Follower] is going to quit

2024-05-21 06:11:28,767 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:11:28,793 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=24, type=Follower] is going to quit

2024-05-21 06:11:28,823 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:11:28,937 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=25, type=Follower] is going to quit

2024-05-21 06:11:28,971 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:11:28,976 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:11:29,064 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:11:29,071 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=77, term=77], lastLogId=LogId [index=77, term=77].

2024-05-21 06:11:29,064 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:11:29,078 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 78, expect=77.

2024-05-21 06:11:29,092 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=79, granted=true.

2024-05-21 06:11:29,101 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=79.

2024-05-21 06:11:29,110 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:11:29,128 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=80, currTerm=80.

2024-05-21 06:11:29,136 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=80.

2024-05-21 06:11:29,142 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=78, currTerm=77.

2024-05-21 06:11:29,154 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=78, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 06:11:29,167 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=77, currTerm=78.

2024-05-21 06:11:29,148 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:11:29,172 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=77, currTerm=78.

2024-05-21 06:11:29,189 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=78, currTerm=78.

2024-05-21 06:11:29,191 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=81, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 06:11:29,213 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=78, votedFor=0.0.0.0:0, cost time=64 ms

2024-05-21 06:11:29,220 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=81, votedFor=nacos2:7848, cost time=23 ms

2024-05-21 06:11:29,229 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=78, currTerm=78, granted=true, requestLastLogId=LogId [index=77, term=77], lastLogId=LogId [index=77, term=77].

2024-05-21 06:11:29,223 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=78, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 06:11:29,241 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=81.

2024-05-21 06:11:29,324 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=78, votedFor=nacos3:7848, cost time=92 ms

2024-05-21 06:11:29,316 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:11:29,342 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=80, votedFor=nacos1:7848, cost time=93 ms

2024-05-21 06:11:29,346 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,135 INFO Node <naming_instance_metadata/nacos1:7848> term 78 start preVote.

2024-05-21 06:27:45,125 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:27:45,158 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:27:45,126 INFO Node <naming_persistent_service/nacos1:7848> term 81 start preVote.

2024-05-21 06:27:45,297 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:27:45,288 INFO Node <naming_persistent_service_v2/nacos1:7848> term 78 start preVote.

2024-05-21 06:27:45,283 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:27:45,258 INFO Node <naming_service_metadata/nacos1:7848> term 80 start preVote.

2024-05-21 06:27:45,635 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=82, currTerm=81, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:27:45,666 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=79, currTerm=78, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:27:45,684 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=79, currTerm=78.

2024-05-21 06:27:45,754 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=78, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:27:45,702 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=79, currTerm=78, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:27:45,767 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=80, granted=true.

2024-05-21 06:27:45,779 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=80.

2024-05-21 06:27:45,811 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 06:27:45,791 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=79, currTerm=78.

2024-05-21 06:27:45,876 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:27:45,886 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:27:45,883 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:27:45,884 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=81, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:27:45,885 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=79, votedFor=0.0.0.0:0, cost time=125 ms

2024-05-21 06:27:45,911 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=79, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-21 06:27:45,912 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=78, currTerm=79.

2024-05-21 06:27:45,916 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=78, currTerm=79.

2024-05-21 06:27:45,921 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=82, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 06:27:45,922 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=81, currTerm=82.

2024-05-21 06:27:45,925 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=81, currTerm=82.

2024-05-21 06:27:45,931 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=81, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 06:27:45,932 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=79, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 06:27:45,934 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=79, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 06:27:45,935 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 06:27:45,934 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=78, currTerm=79.

2024-05-21 06:27:45,948 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=82, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 06:27:45,948 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=78, currTerm=79.

2024-05-21 06:27:45,990 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=81, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:27:46,000 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:27:46,015 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:27:46,029 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:27:46,042 INFO onLeaderStart: term=81.

2024-05-21 06:28:11,306 INFO Node <naming_persistent_service/nacos1:7848> term 82 start preVote.

2024-05-21 06:28:11,308 INFO Node <naming_instance_metadata/nacos1:7848> term 79 start preVote.

2024-05-21 06:28:11,293 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 06:28:11,283 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:28:11,063 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=81, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:28:11,240 INFO Node <naming_persistent_service_v2/nacos1:7848> term 79 start preVote.

2024-05-21 06:28:11,316 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:28:11,521 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:28:11,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 06:28:11,633 INFO Node <naming_persistent_service_v2/nacos1:7848> term 79 start preVote.

2024-05-21 06:28:11,715 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=82, granted=true.

2024-05-21 06:28:11,718 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=27, type=Follower] is going to quit

2024-05-21 06:28:11,721 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=79, granted=true.

2024-05-21 06:28:11,724 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:11,722 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=82.

2024-05-21 06:28:11,760 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 06:28:11,759 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=79.

2024-05-21 06:28:11,771 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:28:11,861 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:28:11,980 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=80, votedFor=nacos1:7848, cost time=188 ms

2024-05-21 06:28:11,978 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=83, votedFor=nacos1:7848, cost time=95 ms

2024-05-21 06:28:11,982 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:11,969 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=79, granted=true.

2024-05-21 06:28:11,988 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=79.

2024-05-21 06:28:11,992 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 06:28:11,985 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=83, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=82], lastLogId=LogId [index=82, term=82].

2024-05-21 06:28:12,034 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:28:12,041 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:12,049 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 06:28:12,054 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=80, currTerm=80, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:28:12,042 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:11,987 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=80, votedFor=nacos1:7848, cost time=134 ms

2024-05-21 06:28:12,190 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=82, votedFor=0.0.0.0:0, cost time=129 ms

2024-05-21 06:28:12,199 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:12,202 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:12,203 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=80, currTerm=80.

2024-05-21 06:28:12,202 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=83, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:28:12,204 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:28:12,209 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:28:12,211 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=82, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 06:28:12,212 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=80, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:28:12,215 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,221 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:28:12,214 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:28:12,228 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:28:12,231 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:28:12,240 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=80, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:28:12,242 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 06:28:12,246 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:28:12,262 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:28:12,285 INFO onLeaderStart: term=80.

2024-05-21 06:28:12,295 INFO onLeaderStart: term=80.

2024-05-21 06:28:12,297 INFO onLeaderStart: term=83.

2024-05-21 06:44:51,946 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=80, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:44:51,944 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=80, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:44:51,999 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:44:52,003 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=26, type=Follower] is going to quit

2024-05-21 06:44:51,944 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=83, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:44:52,032 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=80, lastLogIncluded=0, lastLogIndex=80, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=27, type=Follower] is going to quit

2024-05-21 06:44:52,043 INFO Node <naming_service_metadata/nacos1:7848> term 82 start preVote.

2024-05-21 06:44:52,043 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:44:52,040 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=22, type=Follower] is going to quit

2024-05-21 06:44:52,391 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=23, type=Follower] is going to quit

2024-05-21 06:44:52,040 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=27, type=Follower] is going to quit

2024-05-21 06:44:52,422 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 06:44:52,043 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:44:52,039 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:44:52,377 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:44:52,414 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 06:44:52,438 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 06:44:52,448 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=83, currTerm=82, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:44:52,472 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=80.

2024-05-21 06:44:52,455 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=79, term=80], lastLogId=LogId [index=79, term=80].

2024-05-21 06:44:52,535 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=79, term=80], lastLogId=LogId [index=79, term=80].

2024-05-21 06:44:52,543 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=79, term=80], lastLogId=LogId [index=79, term=80].

2024-05-21 06:44:52,456 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 06:44:52,476 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=83, currTerm=82.

2024-05-21 06:44:52,589 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:44:52,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=81, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 06:44:52,562 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=84, currTerm=83.

2024-05-21 06:44:52,607 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=80.

2024-05-21 06:44:52,577 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,605 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=81, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:44:52,617 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=81.

2024-05-21 06:44:52,623 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=84, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 06:44:52,608 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=83, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 06:44:52,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=81, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 06:44:52,636 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=82, currTerm=83.

2024-05-21 06:44:52,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=84, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 06:44:52,634 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,642 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=82, currTerm=83.

2024-05-21 06:44:52,644 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=81, votedFor=nacos3:7848, cost time=27 ms

2024-05-21 06:44:52,651 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=81, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 06:44:52,643 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,664 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=81, currTerm=81.

2024-05-21 06:44:52,653 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,680 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,675 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,691 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:52,703 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=83, votedFor=nacos2:7848, cost time=54 ms

2024-05-21 06:44:52,721 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 06:44:52,727 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:47,632 INFO Node <naming_instance_metadata/nacos1:7848> term 81 start preVote.

2024-05-21 07:00:47,639 INFO Node <naming_service_metadata/nacos1:7848> term 83 start preVote.

2024-05-21 07:00:47,643 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:00:47,699 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:00:47,655 INFO Node <naming_persistent_service/nacos1:7848> term 84 start preVote.

2024-05-21 07:00:47,666 INFO Node <naming_service_metadata/nacos1:7848> term 83 start preVote.

2024-05-21 07:00:47,661 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:00:47,803 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:47,817 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:00:47,915 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=82, currTerm=81, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:00:47,933 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=82, currTerm=81, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:00:47,937 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=82, currTerm=81.

2024-05-21 07:00:48,005 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=85, currTerm=84.

2024-05-21 07:00:48,011 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=81, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:00:48,008 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:00:48,031 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=84, currTerm=83.

2024-05-21 07:00:48,041 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:00:48,085 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=84, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 07:00:48,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=82, votedFor=0.0.0.0:0, cost time=87 ms

2024-05-21 07:00:48,090 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=81, currTerm=82.

2024-05-21 07:00:48,093 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=81, currTerm=82.

2024-05-21 07:00:48,105 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=85, votedFor=0.0.0.0:0, cost time=96 ms

2024-05-21 07:00:48,114 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=84, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 07:00:48,119 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=83, currTerm=84.

2024-05-21 07:00:48,125 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=83, currTerm=84.

2024-05-21 07:00:48,126 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=82, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 07:00:48,128 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=83, currTerm=84.

2024-05-21 07:00:48,131 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=85, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 07:00:48,131 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=83, currTerm=84.

2024-05-21 07:00:48,138 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=84, currTerm=85.

2024-05-21 07:00:48,140 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=84, currTerm=85.

2024-05-21 07:00:52,606 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=82, currTerm=81, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:00:52,638 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 07:00:52,642 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=81, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:00:52,654 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=82, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 07:00:52,663 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=82, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 07:01:45,221 INFO Node <naming_instance_metadata/nacos1:7848> term 82 start preVote.

2024-05-21 07:01:45,219 INFO Node <naming_persistent_service_v2/nacos1:7848> term 82 start preVote.

2024-05-21 07:01:45,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:01:45,247 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:01:45,315 INFO Node <naming_persistent_service/nacos1:7848> term 85 start preVote.

2024-05-21 07:01:45,315 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:01:45,330 INFO Node <naming_persistent_service/nacos1:7848> term 85 start preVote.

2024-05-21 07:01:45,335 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=85, currTerm=84, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:01:45,351 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=83, currTerm=82, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:01:45,365 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=83, currTerm=82, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:01:45,366 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=86, currTerm=85.

2024-05-21 07:01:45,382 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=83, currTerm=82.

2024-05-21 07:01:45,399 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:01:45,409 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=85, currTerm=84.

2024-05-21 07:01:45,452 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=86, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-21 07:01:45,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=83, votedFor=0.0.0.0:0, cost time=79 ms

2024-05-21 07:01:45,466 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:01:45,516 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=86, votedFor=nacos2:7848, cost time=38 ms

2024-05-21 07:01:45,517 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 83, expect=82.

2024-05-21 07:01:45,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=82, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 07:01:45,517 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=85, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-21 07:01:45,533 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=83, votedFor=nacos2:7848, cost time=56 ms

2024-05-21 07:01:45,545 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=85, currTerm=86.

2024-05-21 07:01:45,554 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=82, currTerm=83.

2024-05-21 07:01:45,556 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=83, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 07:01:45,556 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=82, currTerm=83.

2024-05-21 07:01:45,559 WARN Node <naming_persistent_service/nacos1:7848> raise term 86 when get lastLogId.

2024-05-21 07:01:45,560 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=83, currTerm=83.

2024-05-21 07:01:45,563 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:01:45,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=83, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 07:01:45,592 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=85, votedFor=nacos2:7848, cost time=61 ms

2024-05-21 07:01:45,659 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=85, currTerm=86.

2024-05-21 07:01:45,661 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=82, currTerm=83.

2024-05-21 07:01:45,687 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=85, currTerm=86.

2024-05-21 07:05:27,811 INFO Node <naming_service_metadata/nacos1:7848> term 85 start preVote.

2024-05-21 07:05:27,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:27,862 INFO Node <naming_persistent_service/nacos1:7848> term 86 start preVote.

2024-05-21 07:05:27,863 INFO Node <naming_persistent_service_v2/nacos1:7848> term 83 start preVote.

2024-05-21 07:05:27,864 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:28,617 INFO Node <naming_persistent_service/nacos1:7848> term 86 start preVote.

2024-05-21 07:05:28,612 INFO Node <naming_service_metadata/nacos1:7848> term 85 start preVote.

2024-05-21 07:05:28,625 INFO Node <naming_instance_metadata/nacos1:7848> term 83 start preVote.

2024-05-21 07:05:28,697 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:28,800 INFO Node <naming_instance_metadata/nacos1:7848> term 83 start preVote.

2024-05-21 07:05:28,630 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:28,827 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=85, granted=true.

2024-05-21 07:05:28,837 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=85.

2024-05-21 07:05:28,848 WARN Node <naming_service_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=85, currTerm=86.

2024-05-21 07:05:28,761 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 07:05:28,875 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=83, granted=true.

2024-05-21 07:05:28,887 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=83.

2024-05-21 07:05:28,798 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,909 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=83, currTerm=84.

2024-05-21 07:05:28,922 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=86, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 07:05:28,927 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:29,039 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=86, currTerm=86.

2024-05-21 07:05:28,910 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=84, currTerm=83, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:05:29,060 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:28,918 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=86, granted=true.

2024-05-21 07:05:28,929 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=84, currTerm=84.

2024-05-21 07:05:29,075 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=86.

2024-05-21 07:05:29,089 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,087 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:05:29,095 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:29,098 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=87, currTerm=87.

2024-05-21 07:05:29,103 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,140 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,124 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=85, currTerm=86.

2024-05-21 07:05:29,142 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=83, granted=true.

2024-05-21 07:05:29,149 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=83.

2024-05-21 07:05:29,151 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:29,177 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=85, currTerm=86.

2024-05-21 07:05:29,182 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:05:29,199 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=84, votedFor=nacos1:7848, cost time=38 ms

2024-05-21 07:05:29,200 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,204 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=84, votedFor=nacos1:7848, cost time=104 ms

2024-05-21 07:05:29,214 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,211 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=87, votedFor=nacos1:7848, cost time=37 ms

2024-05-21 07:05:29,211 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=84, currTerm=84.

2024-05-21 07:05:29,226 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,228 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:29,230 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:05:29,229 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:05:29,239 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:05:45,245 INFO Node <naming_service_metadata/nacos1:7848> term 86 start preVote.

2024-05-21 07:05:45,245 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:45,583 INFO Node <naming_instance_metadata/nacos1:7848> term 84 start preVote.

2024-05-21 07:05:45,241 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:45,244 INFO Node <naming_persistent_service/nacos1:7848> term 87 start preVote.

2024-05-21 07:05:46,056 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:05:46,061 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=86], lastLogId=LogId [index=85, term=86].

2024-05-21 07:05:46,064 INFO Node <naming_persistent_service/nacos1:7848> term 87 start preVote.

2024-05-21 07:05:46,079 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=88, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:05:46,082 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:05:46,152 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=85, currTerm=84, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:05:46,189 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=86, granted=false.

2024-05-21 07:05:46,196 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=85, currTerm=84.

2024-05-21 07:05:46,202 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=85, currTerm=84.

2024-05-21 07:05:46,235 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=84, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:05:46,239 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:05:46,275 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=87, currTerm=86.

2024-05-21 07:05:46,276 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:05:46,287 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=87, granted=true.

2024-05-21 07:05:46,301 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=87.

2024-05-21 07:05:46,306 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=88.

2024-05-21 07:05:46,316 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:46,306 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:46,344 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=85, votedFor=0.0.0.0:0, cost time=113 ms

2024-05-21 07:05:46,346 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=85, votedFor=0.0.0.0:0, cost time=105 ms

2024-05-21 07:05:46,348 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=87, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-21 07:05:46,372 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=86, currTerm=87.

2024-05-21 07:05:46,389 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=85, votedFor=nacos2:7848, cost time=25 ms

2024-05-21 07:05:46,389 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=88, votedFor=nacos1:7848, cost time=35 ms

2024-05-21 07:05:46,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=85, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 07:05:46,395 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:46,400 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=87, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 07:05:46,400 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=84, currTerm=85.

2024-05-21 07:05:46,405 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=84, currTerm=85.

2024-05-21 07:05:46,400 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,587 INFO Node <naming_persistent_service_v2/nacos1:7848> term 85 start preVote.

2024-05-21 07:22:36,589 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,585 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:22:36,585 INFO Node <naming_instance_metadata/nacos1:7848> term 85 start preVote.

2024-05-21 07:22:36,599 INFO Node <naming_persistent_service/nacos1:7848> term 88 start preVote.

2024-05-21 07:22:36,602 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,614 INFO Node <naming_persistent_service/nacos1:7848> term 88 start preVote.

2024-05-21 07:22:36,647 INFO Node <naming_instance_metadata/nacos1:7848> term 85 start preVote.

2024-05-21 07:22:36,669 INFO Node <naming_service_metadata/nacos1:7848> term 87 start preVote.

2024-05-21 07:22:36,680 INFO Node <naming_service_metadata/nacos1:7848> term 87 start preVote.

2024-05-21 07:22:36,669 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:22:36,689 INFO Node <naming_persistent_service/nacos1:7848> term 88 start preVote.

2024-05-21 07:22:36,761 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=89, currTerm=88, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,765 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:22:36,800 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=87, granted=true.

2024-05-21 07:22:36,802 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=87.

2024-05-21 07:22:36,851 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,869 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=85, granted=true.

2024-05-21 07:22:36,880 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=85.

2024-05-21 07:22:36,873 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:22:36,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=88, votedFor=nacos1:7848, cost time=75 ms

2024-05-21 07:22:36,927 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=88.

2024-05-21 07:22:36,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=88, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:22:36,932 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,936 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,954 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:36,970 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=89, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 07:22:36,979 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=85, granted=false.

2024-05-21 07:22:36,988 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=85, granted=true.

2024-05-21 07:22:36,994 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=85.

2024-05-21 07:22:37,006 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=88, currTerm=88.

2024-05-21 07:22:37,006 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:37,007 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=86, votedFor=nacos1:7848, cost time=58 ms

2024-05-21 07:22:37,022 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=89, votedFor=nacos3:7848, cost time=37 ms

2024-05-21 07:22:37,020 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:37,055 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=86, currTerm=86.

2024-05-21 07:22:37,033 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=88, currTerm=89.

2024-05-21 07:22:37,070 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=88, currTerm=89.

2024-05-21 07:22:37,000 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:37,047 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=88, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:22:37,067 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:22:37,073 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=88, currTerm=89.

2024-05-21 07:22:37,097 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=88, currTerm=89.

2024-05-21 07:22:37,115 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=88, currTerm=89.

2024-05-21 07:22:37,120 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=88, currTerm=89.

2024-05-21 07:22:37,120 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:22:37,137 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=86, votedFor=nacos1:7848, cost time=95 ms

2024-05-21 07:22:37,145 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:37,154 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=86, currTerm=86.

2024-05-21 07:22:37,173 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:22:37,220 INFO onLeaderStart: term=88.

2024-05-21 07:22:37,258 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 07:38:56,566 INFO Node <naming_persistent_service_v2/nacos1:7848> term 86 start preVote.

2024-05-21 07:38:56,568 INFO Node <naming_instance_metadata/nacos1:7848> term 86 start preVote.

2024-05-21 07:38:56,576 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 07:38:56,573 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:38:56,859 INFO Node <naming_persistent_service/nacos1:7848> term 89 start preVote.

2024-05-21 07:38:56,850 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:38:56,912 INFO Node <naming_persistent_service/nacos1:7848> term 89 start preVote.

2024-05-21 07:38:56,918 INFO Node <naming_persistent_service/nacos1:7848> term 89 start preVote.

2024-05-21 07:38:56,902 INFO Node <naming_instance_metadata/nacos1:7848> term 86 start preVote.

2024-05-21 07:38:56,857 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=88, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:38:56,967 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:38:56,970 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 07:38:56,978 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=29, type=Follower] is going to quit

2024-05-21 07:38:56,982 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 07:38:56,984 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=88.

2024-05-21 07:38:56,996 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=86, granted=false.

2024-05-21 07:38:57,005 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=89, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 07:38:57,007 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=89, currTerm=89, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 07:38:57,003 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=87, currTerm=86, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:38:57,024 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=87, currTerm=86.

2024-05-21 07:38:57,056 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=89, votedFor=nacos3:7848, cost time=45 ms

2024-05-21 07:38:57,045 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=86, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:38:57,101 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=87, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-21 07:38:57,077 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=86, granted=true.

2024-05-21 07:38:57,114 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=86.

2024-05-21 07:38:57,127 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:38:57,121 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=86, currTerm=87.

2024-05-21 07:38:57,205 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=89, granted=false.

2024-05-21 07:38:57,229 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=89, granted=false.

2024-05-21 07:38:57,234 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=89, granted=false.

2024-05-21 07:38:57,255 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=87, votedFor=nacos1:7848, cost time=69 ms

2024-05-21 07:38:57,267 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=87, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:38:57,263 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=87, votedFor=nacos3:7848, cost time=103 ms

2024-05-21 07:38:57,276 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 07:38:57,291 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=86, currTerm=87.

2024-05-21 07:38:57,293 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:38:57,296 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=89, granted=true.

2024-05-21 07:38:57,300 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=86, currTerm=87.

2024-05-21 07:38:57,308 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:38:57,310 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=89.

2024-05-21 07:38:57,325 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:38:57,318 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=86, currTerm=87.

2024-05-21 07:38:57,327 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:38:57,326 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:38:57,340 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:38:57,354 INFO onLeaderStart: term=87.

2024-05-21 07:38:57,362 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=90, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 07:38:57,375 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=90, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:38:57,378 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:38:57,384 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:38:57,390 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:38:57,404 INFO onLeaderStart: term=90.

2024-05-21 07:55:12,252 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=87, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:55:12,576 INFO Node <naming_instance_metadata/nacos1:7848> term 87 start preVote.

2024-05-21 07:55:12,638 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=28, type=Follower] is going to quit

2024-05-21 07:55:12,642 INFO Node <naming_instance_metadata/nacos1:7848> term 87 start preVote.

2024-05-21 07:55:12,566 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:55:12,579 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:55:12,558 INFO Node <naming_service_metadata/nacos1:7848> term 89 start preVote.

2024-05-21 07:55:12,645 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:55:12,253 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=90, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:55:12,733 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:55:12,811 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=29, type=Follower] is going to quit

2024-05-21 07:55:12,732 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=24, type=Follower] is going to quit

2024-05-21 07:55:12,834 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=25, type=Follower] is going to quit

2024-05-21 07:55:12,841 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:55:12,847 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:55:12,849 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=90, term=90], lastLogId=LogId [index=90, term=90].

2024-05-21 07:55:12,938 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=90, term=90], lastLogId=LogId [index=90, term=90].

2024-05-21 07:55:12,979 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=90, currTerm=89, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:55:12,972 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,010 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=89, granted=false.

2024-05-21 07:55:13,054 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=91, currTerm=90.

2024-05-21 07:55:13,057 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=88, currTerm=87.

2024-05-21 07:55:13,021 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=88, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:55:12,974 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,057 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=89, granted=true.

2024-05-21 07:55:13,083 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=89.

2024-05-21 07:55:13,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=91, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 07:55:13,076 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=87, granted=true.

2024-05-21 07:55:13,099 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=87.

2024-05-21 07:55:13,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,105 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,106 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,106 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=91, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 07:55:13,113 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=88, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-21 07:55:13,117 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=88, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 07:55:13,130 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=88.

2024-05-21 07:55:13,132 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,124 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,184 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,221 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:55:13,233 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=90, votedFor=nacos1:7848, cost time=134 ms

2024-05-21 07:55:13,253 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=90, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:55:13,277 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=88, votedFor=nacos1:7848, cost time=143 ms

2024-05-21 07:55:13,282 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,290 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:55:13,295 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=88, currTerm=88.

2024-05-21 07:55:13,307 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=88, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:55:13,305 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:55:13,330 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=90, currTerm=90.

2024-05-21 07:55:13,332 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:55:13,339 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 07:55:13,356 INFO onLeaderStart: term=90.

2024-05-21 07:55:13,360 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:55:13,423 INFO onLeaderStart: term=88.

2024-05-21 08:06:56,539 INFO Node <naming_persistent_service_v2/nacos1:7848> term 88 start preVote.

2024-05-21 08:06:56,572 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:06:56,717 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:06:56,449 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=88, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:06:56,769 INFO Node <naming_persistent_service/nacos1:7848> term 91 start preVote.

2024-05-21 08:06:56,567 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=90, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:06:56,920 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 08:06:56,908 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:06:56,939 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 08:06:57,035 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=87, lastLogIncluded=0, lastLogIndex=87, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 08:06:56,944 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:06:57,017 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 08:06:57,227 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:06:57,283 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 08:06:57,317 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 08:06:57,285 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:06:57,315 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=89, currTerm=88, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:06:57,324 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:06:57,341 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 08:06:57,377 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=92, currTerm=91, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:06:57,366 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=88, granted=true.

2024-05-21 08:06:57,403 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=88.

2024-05-21 08:06:57,441 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=91, granted=true.

2024-05-21 08:06:57,631 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=91.

2024-05-21 08:06:57,603 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=91, currTerm=90.

2024-05-21 08:06:57,655 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=89, votedFor=nacos1:7848, cost time=238 ms

2024-05-21 08:06:57,570 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=92, votedFor=nacos1:7848, cost time=27 ms

2024-05-21 08:06:57,681 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=91, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 08:06:57,708 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=91, currTerm=91.

2024-05-21 08:06:57,672 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,686 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=88.

2024-05-21 08:06:57,739 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=89, currTerm=89.

2024-05-21 08:06:57,745 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,666 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,715 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,739 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,793 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=92.

2024-05-21 08:06:57,819 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=92, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:06:57,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=91, votedFor=nacos3:7848, cost time=71 ms

2024-05-21 08:06:57,786 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=89, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:06:57,846 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:06:57,793 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=89, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-21 08:06:57,871 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=89, currTerm=89.

2024-05-21 08:06:57,836 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:06:57,893 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:06:57,892 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,898 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,906 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=89, votedFor=nacos2:7848, cost time=31 ms

2024-05-21 08:06:57,911 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,910 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 08:06:57,917 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:06:57,916 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:06:57,979 INFO onLeaderStart: term=89.

2024-05-21 08:06:57,935 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:06:57,945 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:58,007 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:57,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 44, cost 21 ms.

2024-05-21 08:06:58,012 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:06:57,996 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:58,017 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:58,009 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:58,021 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:58,013 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 08:06:58,033 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 08:06:58,035 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 08:06:58,039 INFO onLeaderStart: term=92.

2024-05-21 08:06:58,058 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 44 to 45, cost 12 ms.

2024-05-21 08:06:58,068 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 43, cost 2 ms.

2024-05-21 08:06:58,089 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 46 to 47, cost 4 ms.

2024-05-21 08:20:33,104 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 08:20:33,163 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=89, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:20:33,111 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=92, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:20:33,185 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=31, type=Follower] is going to quit

2024-05-21 08:20:33,230 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=89, lastLogIncluded=0, lastLogIndex=89, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=30, type=Follower] is going to quit

2024-05-21 08:20:33,196 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=27, type=Follower] is going to quit

2024-05-21 08:20:33,202 INFO Node <naming_instance_metadata/nacos1:7848> term 89 start preVote.

2024-05-21 08:20:33,217 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 08:20:33,190 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:20:33,186 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:20:33,277 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 08:20:33,270 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=28, type=Follower] is going to quit

2024-05-21 08:20:33,398 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=90, currTerm=89.

2024-05-21 08:20:33,428 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=92, term=92], lastLogId=LogId [index=92, term=92].

2024-05-21 08:20:33,433 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=92, term=92], lastLogId=LogId [index=92, term=92].

2024-05-21 08:20:33,466 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=92, currTerm=91, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:20:33,469 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=92, currTerm=91, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:20:33,300 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=90, votedFor=0.0.0.0:0, cost time=68 ms

2024-05-21 08:20:33,494 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=89, currTerm=90.

2024-05-21 08:20:33,502 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=90, currTerm=89.

2024-05-21 08:20:33,487 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,528 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=90, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 08:20:33,529 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=89, currTerm=90.

2024-05-21 08:20:33,534 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=90, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 08:20:33,536 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=90, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 08:20:33,573 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=93, currTerm=92.

2024-05-21 08:20:33,576 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=90, votedFor=nacos3:7848, cost time=27 ms

2024-05-21 08:20:33,605 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=91.

2024-05-21 08:20:33,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=93, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 08:20:33,608 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:20:33,612 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,637 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=90, currTerm=90.

2024-05-21 08:20:33,670 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=92, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-21 08:20:33,675 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=93, votedFor=nacos3:7848, cost time=61 ms

2024-05-21 08:20:33,658 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,677 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=89, currTerm=90.

2024-05-21 08:20:33,677 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,701 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=92, votedFor=nacos2:7848, cost time=27 ms

2024-05-21 08:20:33,712 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:21:29,588 INFO Node <naming_persistent_service_v2/nacos1:7848> term 90 start preVote.

2024-05-21 08:21:29,595 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:29,705 INFO Node <naming_instance_metadata/nacos1:7848> term 90 start preVote.

2024-05-21 08:21:29,620 INFO Node <naming_persistent_service/nacos1:7848> term 93 start preVote.

2024-05-21 08:21:29,632 INFO Node <naming_service_metadata/nacos1:7848> term 92 start preVote.

2024-05-21 08:21:29,648 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 08:21:29,641 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:29,730 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:30,694 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 08:21:31,015 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=94, currTerm=93, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:21:31,083 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=93, granted=false.

2024-05-21 08:21:31,098 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=90, granted=false.

2024-05-21 08:21:31,124 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=91, currTerm=90, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:21:31,163 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=93, granted=true.

2024-05-21 08:21:31,164 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=93.

2024-05-21 08:21:31,169 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=90, granted=true.

2024-05-21 08:21:31,182 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=92, granted=true.

2024-05-21 08:21:31,186 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:21:31,187 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=90.

2024-05-21 08:21:31,190 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=92.

2024-05-21 08:21:31,195 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:21:31,194 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:21:31,195 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:21:31,274 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=94, votedFor=nacos1:7848, cost time=83 ms

2024-05-21 08:21:31,290 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=94, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:21:31,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=93, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 08:21:31,339 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=91, votedFor=nacos1:7848, cost time=62 ms

2024-05-21 08:21:31,342 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=91, currTerm=91, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:21:31,325 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:21:31,343 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=93, currTerm=93.

2024-05-21 08:21:31,358 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=90, granted=true.

2024-05-21 08:21:31,368 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=90.

2024-05-21 08:21:31,376 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:21:31,386 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:21:31,370 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=93, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:21:31,399 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:21:31,413 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:21:31,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=91, votedFor=nacos1:7848, cost time=37 ms

2024-05-21 08:21:31,452 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=91, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:21:31,454 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 08:21:31,459 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:21:31,460 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:21:31,467 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:21:31,467 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:21:31,476 INFO onLeaderStart: term=94.

2024-05-21 08:21:31,495 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:21:31,480 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=91, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:21:31,512 INFO onLeaderStart: term=93.

2024-05-21 08:21:31,515 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 08:21:31,519 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:21:31,523 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:21:31,535 INFO onLeaderStart: term=91.

2024-05-21 08:21:31,551 INFO onLeaderStart: term=91.

2024-05-21 08:50:27,609 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=94, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:50:28,396 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:50:28,398 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=93, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:50:28,482 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 08:50:28,486 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=33, type=Follower] is going to quit

2024-05-21 08:50:28,406 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=91, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:50:28,493 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=33, type=Follower] is going to quit

2024-05-21 08:50:28,401 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=91, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:50:28,416 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=29, type=Follower] is going to quit

2024-05-21 08:50:28,482 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:50:28,491 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 08:50:28,493 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:50:28,503 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=32, type=Follower] is going to quit

2024-05-21 08:50:28,506 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=33, type=Follower] is going to quit

2024-05-21 08:50:28,530 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 08:50:28,708 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,535 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:50:28,559 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=30, type=Follower] is going to quit

2024-05-21 08:50:28,638 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,639 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=90, lastLogIncluded=0, lastLogIndex=90, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 08:50:28,708 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=93.

2024-05-21 08:50:28,725 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,734 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=94, term=94], lastLogId=LogId [index=94, term=94].

2024-05-21 08:50:28,767 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=94, term=94], lastLogId=LogId [index=94, term=94].

2024-05-21 08:50:28,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=94, votedFor=0.0.0.0:0, cost time=77 ms

2024-05-21 08:50:28,726 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=90, term=91], lastLogId=LogId [index=90, term=91].

2024-05-21 08:50:28,873 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,725 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,907 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=94.

2024-05-21 08:50:28,840 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,874 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,878 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,875 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=90, term=91], lastLogId=LogId [index=90, term=91].

2024-05-21 08:50:28,920 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=91.

2024-05-21 08:50:28,932 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=94, votedFor=nacos3:7848, cost time=65 ms

2024-05-21 08:50:28,939 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,943 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=95, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 08:50:28,957 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=92, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 08:50:28,958 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,958 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=92, currTerm=92.

2024-05-21 08:50:28,959 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=95, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 08:50:28,960 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=95, currTerm=95.

2024-05-21 08:50:28,963 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,966 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,958 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,975 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=92, currTerm=91.

2024-05-21 08:50:28,975 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,978 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=92, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 08:50:28,990 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=92, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 08:50:28,993 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:29,006 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:29,016 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=92, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 08:50:29,018 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=92, currTerm=92.

2024-05-21 08:50:29,020 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:38,872 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:01:38,872 INFO Node <naming_persistent_service/nacos1:7848> term 95 start preVote.

2024-05-21 09:01:38,872 INFO Node <naming_persistent_service_v2/nacos1:7848> term 92 start preVote.

2024-05-21 09:01:39,423 INFO Node <naming_instance_metadata/nacos1:7848> term 92 start preVote.

2024-05-21 09:01:39,423 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:01:39,430 INFO Node <naming_service_metadata/nacos1:7848> term 94 start preVote.

2024-05-21 09:01:39,430 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:01:39,508 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 09:01:39,546 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=95, currTerm=94, because the leader nacos3:7848's lease is still valid.

2024-05-21 09:01:39,580 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=95, granted=true.

2024-05-21 09:01:39,582 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=95, currTerm=94, because the leader nacos3:7848's lease is still valid.

2024-05-21 09:01:39,583 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=95.

2024-05-21 09:01:39,586 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=92, granted=true.

2024-05-21 09:01:39,587 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=92.

2024-05-21 09:01:39,614 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,618 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,653 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 09:01:39,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=96, votedFor=nacos1:7848, cost time=80 ms

2024-05-21 09:01:39,681 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,690 WARN Node <naming_persistent_service/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=95, currTerm=96.

2024-05-21 09:01:39,706 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,710 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,714 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,714 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 45 to 90, cost 6 ms.

2024-05-21 09:01:39,719 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 09:01:39,728 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,730 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,731 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=93, votedFor=nacos1:7848, cost time=110 ms

2024-05-21 09:01:39,754 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 09:01:39,762 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=92, currTerm=93.

2024-05-21 09:01:39,763 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 47 to 92, cost 1 ms.

2024-05-21 09:01:39,766 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=94.

2024-05-21 09:01:39,761 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=92, granted=false.

2024-05-21 09:01:39,767 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:01:39,767 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 09:01:39,768 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=93, currTerm=93, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 09:01:39,774 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,778 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,810 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 09:01:39,776 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=96, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:01:39,816 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:01:39,821 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 09:01:39,830 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 43 to 88, cost 1 ms.

2024-05-21 09:01:39,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=95, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 09:01:39,782 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 44 to 89, cost 0 ms.

2024-05-21 09:01:39,782 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=93, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:01:39,854 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:01:39,882 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 09:01:39,884 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:01:39,883 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=92, granted=true.

2024-05-21 09:01:39,890 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=92.

2024-05-21 09:01:39,883 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 09:01:39,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=49 ms

2024-05-21 09:01:39,917 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:01:39,932 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=94, currTerm=95.

2024-05-21 09:01:39,933 INFO onLeaderStart: term=93.

2024-05-21 09:01:39,933 INFO onLeaderStart: term=96.

2024-05-21 09:01:39,936 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=94, currTerm=95.

2024-05-21 09:01:39,953 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=93, votedFor=nacos1:7848, cost time=24 ms

2024-05-21 09:01:39,986 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=93, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:01:39,987 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 09:01:39,988 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 09:01:39,991 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:01:40,053 INFO onLeaderStart: term=93.

2024-05-21 09:02:41,667 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 09:02:41,666 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=93, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:02:41,718 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:02:41,666 INFO Node <naming_service_metadata/nacos1:7848> term 95 start preVote.

2024-05-21 09:02:40,928 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=96, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:02:41,665 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=93, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:02:41,718 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=34, type=Follower] is going to quit

2024-05-21 09:02:41,829 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 09:02:41,830 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 09:02:41,787 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 09:02:41,792 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:02:41,792 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=31, type=Follower] is going to quit

2024-05-21 09:02:41,797 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:02:41,833 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=32, type=Follower] is going to quit

2024-05-21 09:02:41,829 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=93, lastLogIncluded=0, lastLogIndex=93, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=35, type=Follower] is going to quit

2024-05-21 09:02:41,833 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 09:02:41,836 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,841 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,835 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,835 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,838 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,996 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 09:02:41,848 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:41,934 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=95.

2024-05-21 09:02:41,996 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=93, term=93], lastLogId=LogId [index=93, term=93].

2024-05-21 09:02:42,000 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 09:02:42,002 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=96, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-21 09:02:42,002 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=96, term=96], lastLogId=LogId [index=96, term=96].

2024-05-21 09:02:42,009 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=95, currTerm=96.

2024-05-21 09:02:42,011 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=93, term=93], lastLogId=LogId [index=93, term=93].

2024-05-21 09:02:42,014 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,049 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,051 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,064 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=93.

2024-05-21 09:02:42,075 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=93.

2024-05-21 09:02:42,079 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=96, votedFor=nacos3:7848, cost time=69 ms

2024-05-21 09:02:42,084 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=95, currTerm=96.

2024-05-21 09:02:42,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=94, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 09:02:42,090 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=94, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 09:02:42,094 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,090 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,092 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,093 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=94, currTerm=94.

2024-05-21 09:02:42,106 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=94, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 09:02:42,111 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=94, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 09:02:42,113 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,117 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=94, currTerm=94.

2024-05-21 09:02:42,119 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,119 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,126 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,127 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 09:02:42,137 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=97, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 09:02:42,152 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=97, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 09:02:42,153 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,153 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,157 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,180 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:34,120 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,122 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:33,752 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,266 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,271 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,414 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=94, term=94], lastLogId=LogId [index=94, term=94].

2024-05-21 10:10:34,208 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,453 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,211 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:34,477 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:34,214 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,507 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,214 INFO Node <naming_service_metadata/nacos1:7848> term 96 start preVote.

2024-05-21 10:10:34,227 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 10:10:34,228 INFO Node <naming_instance_metadata/nacos1:7848> term 94 start preVote.

2024-05-21 10:10:34,228 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 10:10:34,229 INFO Node <naming_persistent_service/nacos1:7848> term 97 start preVote.

2024-05-21 10:10:34,229 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 10:10:34,235 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,244 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,587 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,254 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,589 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,510 INFO Node <naming_service_metadata/nacos1:7848> term 96 start preVote.

2024-05-21 10:10:34,514 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 10:10:34,516 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 10:10:34,591 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 10:10:34,595 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,606 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=94.

2024-05-21 10:10:34,613 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 10:10:34,616 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 92 to 96, cost 12 ms.

2024-05-21 10:10:34,616 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 89 to 93, cost 6 ms.

2024-05-21 10:10:34,617 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 88 to 92, cost 0 ms.

2024-05-21 10:10:34,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=95, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 10:10:34,623 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 90 to 94, cost 1 ms.

2024-05-21 10:10:34,655 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=95, votedFor=nacos2:7848, cost time=27 ms

2024-05-21 10:10:34,683 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,686 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 10:10:34,685 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 10:10:34,686 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 10:10:34,699 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 10:10:34,747 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 10:10:34,787 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 10:10:34,789 INFO The channel nacos2:7848 has successfully established.

2024-05-21 10:10:34,747 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 10:10:34,811 INFO Peer nacos2:7848 is connected.

2024-05-21 10:10:34,838 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 10:10:34,870 INFO The channel nacos2:7848 has successfully established.

2024-05-21 10:10:34,827 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,881 INFO Peer nacos2:7848 is connected.

2024-05-21 10:10:34,902 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 10:10:34,907 INFO The channel nacos2:7848 has successfully established.

2024-05-21 10:10:34,922 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 10:10:34,924 INFO The channel nacos3:7848 has successfully established.

2024-05-21 10:10:34,923 INFO Peer nacos2:7848 is connected.

2024-05-21 10:10:34,925 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 10:10:34,926 INFO The channel nacos3:7848 has successfully established.

2024-05-21 10:10:34,927 INFO Peer nacos3:7848 is connected.

2024-05-21 10:10:34,932 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 10:10:34,934 INFO Peer nacos3:7848 is connected.

2024-05-21 10:10:34,934 INFO The channel nacos3:7848 has successfully established.

2024-05-21 10:10:34,936 WARN Node <naming_persistent_service_v2/nacos1:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=94, currTerm=95.

2024-05-21 10:10:34,938 INFO Peer nacos3:7848 is connected.

2024-05-21 10:10:34,958 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=98, currTerm=97, because the leader nacos2:7848's lease is still valid.

2024-05-21 10:10:34,973 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=98, currTerm=97.

2024-05-21 10:10:34,973 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,981 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,975 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 10:10:34,989 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=98, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 10:10:35,004 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=98, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 10:10:35,013 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=98, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 10:10:35,022 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=96, granted=true.

2024-05-21 10:10:35,023 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=96.

2024-05-21 10:10:35,022 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=97, currTerm=98.

2024-05-21 10:10:35,037 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=97, currTerm=98.

2024-05-21 10:10:35,041 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 95, expect=94.

2024-05-21 10:10:35,046 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 10:10:35,050 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=97, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 10:10:35,055 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 10:10:35,073 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=95, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 10:10:35,077 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 10:10:35,079 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=94, currTerm=95.

2024-05-21 10:10:35,136 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=97, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 10:10:35,145 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 10:10:35,150 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 10:10:35,171 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=97.

2024-05-21 10:10:35,172 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=95, currTerm=95, because the leader nacos2:7848's lease is still valid.

2024-05-21 10:10:35,173 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=95, currTerm=95, because the leader nacos2:7848's lease is still valid.

2024-05-21 10:10:35,172 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 10:10:35,174 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=95, currTerm=95.

2024-05-21 10:10:35,176 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=97, currTerm=97, granted=false, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=96, term=97].

2024-05-21 10:10:35,177 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 10:10:35,183 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=6 ms

2024-05-21 10:10:35,200 INFO onLeaderStart: term=97.

2024-05-21 10:10:35,202 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 10:10:39,026 INFO Connection disconnected: /172.25.0.5:60052

2024-05-21 10:10:39,032 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:10:39,033 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:10:39,034 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:10:39,035 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:10:39,183 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:10:39,253 INFO Connection disconnected: /172.25.0.3:52826

2024-05-21 10:10:39,255 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:10:39,455 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:10:39,467 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:10:39,689 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:10:39,732 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:10:39,756 INFO Connection disconnected: /172.25.0.2:52760

2024-05-21 10:10:39,763 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 10:40:34,172 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:34,174 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:34,174 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:34,174 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:34,175 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:34,174 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:34,174 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:34,177 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:34,177 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:40:34,178 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:40:34,180 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:40:34,180 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:40:34,183 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 92 to 94, cost 0 ms.

2024-05-21 10:40:34,183 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 94 to 96, cost 0 ms.

2024-05-21 10:40:34,186 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 93 to 95, cost 0 ms.

2024-05-21 10:40:34,186 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 96 to 98, cost 0 ms.

2024-05-21 10:40:34,964 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:40:34,975 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:40:35,005 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:40:35,043 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:40:39,050 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 10:40:39,962 INFO Connection disconnected: /172.25.0.5:35950

2024-05-21 10:40:39,998 INFO Connection disconnected: /172.25.0.3:55718

2024-05-21 10:40:40,179 INFO Connection disconnected: /172.25.0.3:55750

2024-05-21 11:10:34,133 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 94 to 95, cost 0 ms.

2024-05-21 11:10:34,133 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 95 to 96, cost 0 ms.

2024-05-21 11:10:34,133 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 98 to 99, cost 0 ms.

2024-05-21 11:10:34,133 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 96 to 97, cost 0 ms.

2024-05-21 11:40:34,095 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 11:40:34,095 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 11:40:34,096 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 11:40:34,096 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 12:10:33,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 12:10:33,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 12:10:33,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 12:10:33,995 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:18:11,259 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=97, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:11,955 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:18:12,335 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 12:18:12,342 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:11,955 INFO Node <naming_persistent_service/nacos1:7848> term 98 start preVote.

2024-05-21 12:18:12,345 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 12:18:11,954 INFO Node <naming_instance_metadata/nacos1:7848> term 95 start preVote.

2024-05-21 12:18:12,382 INFO Node <naming_persistent_service_v2/nacos1:7848> term 95 start preVote.

2024-05-21 12:18:12,410 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:12,502 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 12:18:12,455 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,504 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,628 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:12,680 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 12:18:12,689 INFO The channel nacos3:7848 has successfully established.

2024-05-21 12:18:12,690 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 12:18:12,796 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,812 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,814 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,816 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,689 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,691 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 12:18:12,813 INFO Peer nacos3:7848 is connected.

2024-05-21 12:18:12,813 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,815 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=98, granted=true.

2024-05-21 12:18:12,817 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=96, currTerm=95, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:18:12,818 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=97], lastLogId=LogId [index=96, term=97].

2024-05-21 12:18:12,849 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,850 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,850 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,840 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 12:18:12,841 INFO Node <naming_persistent_service_v2/nacos1:7848> term 95 start preVote.

2024-05-21 12:18:12,845 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=98.

2024-05-21 12:18:12,850 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,861 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 12:18:12,863 INFO The channel nacos2:7848 has successfully established.

2024-05-21 12:18:12,851 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,857 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:12,858 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=96, currTerm=95, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:18:12,862 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=97], lastLogId=LogId [index=96, term=97].

2024-05-21 12:18:12,868 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=97], lastLogId=LogId [index=96, term=97].

2024-05-21 12:18:12,862 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=95, granted=true.

2024-05-21 12:18:12,864 INFO Peer nacos2:7848 is connected.

2024-05-21 12:18:12,872 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=95.

2024-05-21 12:18:12,873 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=99, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 12:18:12,878 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:12,879 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:18:12,880 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,882 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 12:18:12,887 INFO The channel nacos3:7848 has successfully established.

2024-05-21 12:18:12,889 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=96, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 12:18:12,889 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=96.

2024-05-21 12:18:12,891 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=95.

2024-05-21 12:18:12,883 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 12:18:12,894 INFO The channel nacos3:7848 has successfully established.

2024-05-21 12:18:12,895 INFO Peer nacos3:7848 is connected.

2024-05-21 12:18:12,887 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=99, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:18:12,890 INFO Peer nacos3:7848 is connected.

2024-05-21 12:18:12,892 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=95, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:18:12,900 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=98, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 12:18:12,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=96, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 12:18:12,914 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=99, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:12,916 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:18:12,917 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:12,919 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 12:18:12,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=96, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 12:18:12,924 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=95, currTerm=96.

2024-05-21 12:18:12,930 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=95, currTerm=96.

2024-05-21 12:18:12,937 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=95, currTerm=96.

2024-05-21 12:18:12,942 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=95, currTerm=96.

2024-05-21 12:18:12,952 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,953 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=96, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:12,958 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:18:12,965 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:12,967 INFO onLeaderStart: term=99.

2024-05-21 12:18:12,974 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:18:12,974 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:18:13,018 INFO onLeaderStart: term=96.

2024-05-21 12:18:58,496 INFO Node <naming_persistent_service_v2/nacos1:7848> term 96 start preVote.

2024-05-21 12:18:58,497 INFO Node <naming_service_metadata/nacos1:7848> term 98 start preVote.

2024-05-21 12:18:59,236 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=99, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:59,235 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=96, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:58,498 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:18:58,498 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:18:59,573 INFO Node <naming_persistent_service_v2/nacos1:7848> term 96 start preVote.

2024-05-21 12:18:59,577 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=33, type=Follower] is going to quit

2024-05-21 12:18:59,577 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:59,580 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:59,580 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=36, type=Follower] is going to quit

2024-05-21 12:18:59,708 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=34, type=Follower] is going to quit

2024-05-21 12:18:59,713 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:18:59,714 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:18:59,719 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 12:18:59,723 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,726 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=95, term=96].

2024-05-21 12:18:59,824 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=97, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=96], lastLogId=LogId [index=95, term=96].

2024-05-21 12:18:59,734 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=99, currTerm=98, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:18:59,832 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=98, granted=true.

2024-05-21 12:18:59,833 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,836 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=97, currTerm=96, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:18:59,837 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=98.

2024-05-21 12:18:59,843 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:59,842 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=100, currTerm=99.

2024-05-21 12:18:59,854 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=99, votedFor=nacos1:7848, cost time=9 ms

2024-05-21 12:18:59,873 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:59,873 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=100, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 12:18:59,882 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=100.

2024-05-21 12:18:59,875 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 12:18:59,893 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:18:59,879 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=99.

2024-05-21 12:18:59,882 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,898 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,925 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=97, currTerm=96.

2024-05-21 12:18:59,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=100, votedFor=nacos2:7848, cost time=42 ms

2024-05-21 12:18:59,930 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=97, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 12:18:59,944 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,948 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=97, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 12:18:59,972 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=97, votedFor=nacos2:7848, cost time=24 ms

2024-05-21 12:18:59,976 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=96, currTerm=97.

2024-05-21 12:18:59,977 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=96, currTerm=97.

2024-05-21 12:18:59,980 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=96, currTerm=97.

2024-05-21 12:18:59,980 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term=96, currTerm=97.

2024-05-21 12:18:59,986 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=97, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 12:19:00,020 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:17,330 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:19:17,330 INFO Node <naming_persistent_service/nacos1:7848> term 100 start preVote.

2024-05-21 12:19:17,346 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=100, granted=true.

2024-05-21 12:19:17,348 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=100.

2024-05-21 12:19:17,351 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:19:17,363 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=101, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 12:19:17,377 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=101, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:19:17,378 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:19:17,381 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:19:17,385 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:19:17,388 INFO onLeaderStart: term=101.

2024-05-21 12:19:17,632 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=97], lastLogId=LogId [index=96, term=97].

2024-05-21 12:19:17,646 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:19:17,647 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:19:17,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=98, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 12:19:17,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=6 ms

2024-05-21 12:19:17,802 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 12:19:17,813 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=98, currTerm=97.

2024-05-21 12:19:17,814 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=97, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:19:17,824 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=98, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:19:17,833 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=98, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 12:34:51,718 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:34:51,717 INFO Node <naming_service_metadata/nacos1:7848> term 99 start preVote.

2024-05-21 12:34:52,851 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=100, currTerm=99, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:34:51,716 INFO Node <naming_persistent_service_v2/nacos1:7848> term 98 start preVote.

2024-05-21 12:34:52,863 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:34:52,864 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=99.

2024-05-21 12:34:51,716 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=101, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:34:52,890 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=37, type=Follower] is going to quit

2024-05-21 12:34:52,893 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=36, type=Follower] is going to quit

2024-05-21 12:34:52,765 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:34:52,788 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=99, currTerm=98, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:34:52,892 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:34:52,893 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=100, votedFor=nacos1:7848, cost time=27 ms

2024-05-21 12:34:52,920 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:34:52,900 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=101.

2024-05-21 12:34:52,911 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=99, currTerm=98, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:34:52,979 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=98, granted=true.

2024-05-21 12:34:52,980 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=98.

2024-05-21 12:34:52,996 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:34:52,920 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=100.

2024-05-21 12:34:52,983 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=102, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 12:34:52,996 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:34:52,996 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=98.

2024-05-21 12:34:53,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=102, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 12:34:53,012 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=99.

2024-05-21 12:34:53,012 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=102.

2024-05-21 12:34:53,013 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=99, currTerm=100.

2024-05-21 12:34:53,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=98, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:34:53,015 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 12:34:53,015 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 12:34:53,024 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 12:34:53,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=99, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 12:34:53,028 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=99, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 12:34:53,091 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=99, votedFor=nacos3:7848, cost time=58 ms

2024-05-21 12:34:53,092 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,097 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,102 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,127 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 12:35:31,065 INFO Node <naming_persistent_service_v2/nacos1:7848> term 99 start preVote.

2024-05-21 12:35:31,073 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,064 INFO Node <naming_persistent_service/nacos1:7848> term 102 start preVote.

2024-05-21 12:35:31,070 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,065 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:35:31,068 INFO Node <naming_instance_metadata/nacos1:7848> term 99 start preVote.

2024-05-21 12:35:31,067 INFO Node <naming_service_metadata/nacos1:7848> term 100 start preVote.

2024-05-21 12:35:31,974 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=100, currTerm=99, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:31,975 INFO Node <naming_service_metadata/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=101, currTerm=100, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:35:31,991 INFO Node <naming_instance_metadata/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=100, currTerm=99, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:31,990 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=99, granted=false.

2024-05-21 12:35:31,991 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=103, currTerm=102, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:32,043 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=100, granted=true.

2024-05-21 12:35:32,068 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=99, granted=false.

2024-05-21 12:35:32,071 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=102, granted=false.

2024-05-21 12:35:32,083 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=100.

2024-05-21 12:35:32,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,126 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:35:32,127 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=99.

2024-05-21 12:35:32,128 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=101, votedFor=nacos1:7848, cost time=15 ms

2024-05-21 12:35:32,145 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=101, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:35:32,146 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:35:32,153 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=99.

2024-05-21 12:35:32,145 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=102, granted=true.

2024-05-21 12:35:32,146 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:35:32,160 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,160 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=102.

2024-05-21 12:35:32,170 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,162 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=100, votedFor=nacos1:7848, cost time=33 ms

2024-05-21 12:35:32,165 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:35:32,170 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=103, currTerm=103.

2024-05-21 12:35:32,170 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=100, votedFor=nacos1:7848, cost time=9 ms

2024-05-21 12:35:32,182 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=101, currTerm=101.

2024-05-21 12:35:32,189 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=100, currTerm=100.

2024-05-21 12:35:32,189 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=100, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:35:32,200 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:35:32,202 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:35:32,191 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 12:35:32,208 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:35:32,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=103, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 12:35:32,217 INFO onLeaderStart: term=101.

2024-05-21 12:35:32,245 INFO onLeaderStart: term=100.

2024-05-21 12:35:32,284 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 12:51:57,227 INFO Node <naming_instance_metadata/nacos1:7848> term 100 start preVote.

2024-05-21 12:51:57,909 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=101, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:51:57,260 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:51:58,484 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=100, granted=true.

2024-05-21 12:51:58,482 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 12:51:58,498 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:57,227 INFO Node <naming_persistent_service/nacos1:7848> term 103 start preVote.

2024-05-21 12:51:58,558 INFO Node <naming_persistent_service/nacos1:7848> term 103 start preVote.

2024-05-21 12:51:58,564 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=104, currTerm=103, because the leader nacos2:7848's lease is still valid.

2024-05-21 12:51:58,495 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=100.

2024-05-21 12:51:58,482 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:51:58,483 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=101, currTerm=100, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:51:57,231 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 12:51:58,499 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=38, type=Follower] is going to quit

2024-05-21 12:51:58,595 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 12:51:58,536 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:58,560 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,604 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,595 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=101, votedFor=nacos1:7848, cost time=68 ms

2024-05-21 12:51:58,662 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=101, currTerm=101, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:51:58,650 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 12:51:58,664 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,668 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,669 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 12:51:58,653 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 12:51:58,692 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 12:51:58,708 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:51:58,713 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 12:51:58,668 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=100, currTerm=101.

2024-05-21 12:51:58,728 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=103, granted=true.

2024-05-21 12:51:58,729 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=103.

2024-05-21 12:51:58,670 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,731 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,736 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 1 ms.

2024-05-21 12:51:58,728 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:51:58,731 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=101.

2024-05-21 12:51:58,731 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:51:58,737 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 12:51:58,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=104, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 12:51:58,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=102, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-21 12:51:58,914 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 1 ms.

2024-05-21 12:51:58,916 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,891 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=101, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:51:58,957 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=102, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 12:51:58,957 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:51:58,960 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:51:58,893 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:51:58,926 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,958 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 12:51:58,969 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:51:58,971 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:51:58,976 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=104, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:51:58,977 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:51:58,977 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 12:51:58,984 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:51:58,990 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:51:58,992 INFO onLeaderStart: term=101.

2024-05-21 12:51:59,041 INFO onLeaderStart: term=104.

2024-05-21 13:08:24,512 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=104, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:08:25,284 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=100, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:08:25,584 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=37, type=Follower] is going to quit

2024-05-21 13:08:25,591 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=36, type=Follower] is going to quit

2024-05-21 13:08:25,245 INFO Node <naming_service_metadata/nacos1:7848> term 102 start preVote.

2024-05-21 13:08:25,280 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=101, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:08:25,246 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:08:25,584 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=38, type=Follower] is going to quit

2024-05-21 13:08:25,583 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:08:25,590 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:08:25,632 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 13:08:25,678 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 13:08:25,632 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:08:25,641 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=100, term=100], lastLogId=LogId [index=100, term=100].

2024-05-21 13:08:25,646 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=39, type=Follower] is going to quit

2024-05-21 13:08:25,701 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=100, term=100], lastLogId=LogId [index=100, term=100].

2024-05-21 13:08:25,704 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=104, term=104], lastLogId=LogId [index=104, term=104].

2024-05-21 13:08:25,712 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=104, term=104], lastLogId=LogId [index=104, term=104].

2024-05-21 13:08:25,717 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 13:08:25,721 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 13:08:25,726 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=102, granted=true.

2024-05-21 13:08:25,726 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=102.

2024-05-21 13:08:25,732 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=103, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:08:25,737 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,774 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=103, votedFor=nacos1:7848, cost time=33 ms

2024-05-21 13:08:25,780 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=101, currTerm=100.

2024-05-21 13:08:25,784 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=105, currTerm=104.

2024-05-21 13:08:25,794 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=101, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 13:08:25,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=105, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 13:08:25,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=101, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 13:08:25,816 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=105, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 13:08:25,847 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,851 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,854 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,862 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,869 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:08:25,873 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=102, currTerm=101.

2024-05-21 13:08:25,885 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,877 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,882 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,891 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=102, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-21 13:08:25,893 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=103, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:08:25,904 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:08:25,908 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=102, votedFor=nacos2:7848, cost time=6 ms

2024-05-21 13:08:25,908 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:08:25,910 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:08:25,910 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,916 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=102.

2024-05-21 13:08:25,918 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=105.

2024-05-21 13:08:25,928 INFO onLeaderStart: term=103.

2024-05-21 13:08:30,636 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 13:08:30,637 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 13:08:30,637 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 13:08:30,637 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 13:24:06,881 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=103, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:24:06,893 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 13:24:06,894 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 13:24:06,893 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:24:06,903 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 13:24:07,336 INFO Node <naming_instance_metadata/nacos1:7848> term 102 start preVote.

2024-05-21 13:24:07,336 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:07,376 INFO Node <naming_persistent_service_v2/nacos1:7848> term 101 start preVote.

2024-05-21 13:24:07,377 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:07,377 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:24:07,401 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:24:07,401 INFO Node <naming_persistent_service/nacos1:7848> term 105 start preVote.

2024-05-21 13:24:07,460 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:24:07,463 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=105.

2024-05-21 13:24:07,468 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,492 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,495 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,498 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:07,499 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:07,497 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 13:24:07,502 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 13:24:07,503 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 13:24:07,500 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 13:24:07,536 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,542 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 101, cost 0 ms.

2024-05-21 13:24:07,553 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=106, votedFor=0.0.0.0:0, cost time=61 ms

2024-05-21 13:24:07,556 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,557 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,557 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 104, cost 0 ms.

2024-05-21 13:24:07,558 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 101, cost 11 ms.

2024-05-21 13:24:07,572 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=104, currTerm=103.

2024-05-21 13:24:07,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=106, votedFor=nacos3:7848, cost time=44 ms

2024-05-21 13:24:07,598 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 13:24:07,603 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 13:24:07,606 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=101, granted=false.

2024-05-21 13:24:07,609 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos2:7848, term=101, granted=true.

2024-05-21 13:24:07,610 WARN Node <naming_persistent_service/nacos1:7848> raise term 106 when get lastLogId.

2024-05-21 13:24:07,611 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=101.

2024-05-21 13:24:07,616 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:24:07,613 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 100, cost 1 ms.

2024-05-21 13:24:07,618 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 103, expect=102.

2024-05-21 13:24:07,620 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=102, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 13:24:07,625 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=104, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 13:24:07,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=102, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 13:24:07,668 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=102, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:24:07,676 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:24:07,681 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:24:07,688 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:24:07,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=104, votedFor=nacos3:7848, cost time=41 ms

2024-05-21 13:24:07,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=103, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 13:24:07,709 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=102, currTerm=103.

2024-05-21 13:24:07,710 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=103, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,711 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=103, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,693 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=102.

2024-05-21 13:24:07,705 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=104.

2024-05-21 13:24:07,715 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=103, currTerm=103.

2024-05-21 13:24:07,718 INFO onLeaderStart: term=102.

2024-05-21 13:24:07,718 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,719 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,726 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=103, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 13:25:27,793 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=102, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:25:27,802 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after -23.501183870s. [closed=[], open=[[remote_addr=nacos3/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-21 13:25:27,803 INFO Node <naming_persistent_service/nacos1:7848> term 106 start preVote.

2024-05-21 13:25:27,829 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:25:27,810 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,811 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,811 INFO Node <naming_service_metadata/nacos1:7848> term 104 start preVote.

2024-05-21 13:25:27,826 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,826 INFO Node <naming_instance_metadata/nacos1:7848> term 103 start preVote.

2024-05-21 13:25:27,828 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=38, type=Follower] is going to quit

2024-05-21 13:25:27,831 INFO Node <naming_persistent_service/nacos1:7848> term 106 start preVote.

2024-05-21 13:25:27,891 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=102, lastLogIncluded=0, lastLogIndex=102, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=39, type=Follower] is going to quit

2024-05-21 13:25:27,908 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=106, granted=true.

2024-05-21 13:25:27,910 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 13:25:27,911 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos2:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 13:25:27,910 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=106.

2024-05-21 13:25:27,942 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=107, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:27,935 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=103, currTerm=102.

2024-05-21 13:25:27,947 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, term 105, expect=104.

2024-05-21 13:25:27,951 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:27,957 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=103, granted=true.

2024-05-21 13:25:27,991 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=103.

2024-05-21 13:25:28,004 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=104, currTerm=104, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:25:28,012 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=104.

2024-05-21 13:25:28,018 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=105, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-21 13:25:27,980 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=103, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 13:25:28,021 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=105, currTerm=105, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:25:28,028 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=105, currTerm=105.

2024-05-21 13:25:28,029 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=107, votedFor=nacos1:7848, cost time=55 ms

2024-05-21 13:25:28,101 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=103, votedFor=nacos3:7848, cost time=78 ms

2024-05-21 13:25:28,032 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=104, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 13:25:28,112 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:28,127 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:25:28,101 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:28,112 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=103, currTerm=103.

2024-05-21 13:25:28,130 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=107, currTerm=107.

2024-05-21 13:25:28,135 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:28,130 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=105, votedFor=nacos2:7848, cost time=97 ms

2024-05-21 13:25:28,131 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:28,134 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:25:28,151 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term=104, currTerm=105.

2024-05-21 13:31:52,574 INFO Node <naming_persistent_service_v2/nacos1:7848> term 103 start preVote.

2024-05-21 13:31:52,575 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:31:52,576 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:52,578 INFO Node <naming_instance_metadata/nacos1:7848> term 104 start preVote.

2024-05-21 13:31:52,586 INFO Node <naming_service_metadata/nacos1:7848> term 105 start preVote.

2024-05-21 13:31:52,578 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:52,587 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos2:7848.]].

2024-05-21 13:31:52,576 INFO Node <naming_persistent_service/nacos1:7848> term 107 start preVote.

2024-05-21 13:31:52,725 INFO Node <naming_persistent_service/nacos1:7848> term 107 start preVote.

2024-05-21 13:31:52,781 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=104, currTerm=103, because the leader nacos3:7848's lease is still valid.

2024-05-21 13:31:52,822 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:31:52,845 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 13:31:52,858 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=105, granted=true.

2024-05-21 13:31:52,918 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=105.

2024-05-21 13:31:52,921 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=106.

2024-05-21 13:31:52,871 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:52,928 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=107, granted=true.

2024-05-21 13:31:52,928 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=107.

2024-05-21 13:31:52,911 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=103, granted=true.

2024-05-21 13:31:52,937 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=103.

2024-05-21 13:31:53,216 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:31:52,929 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:52,929 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=104, granted=true.

2024-05-21 13:31:53,367 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos1:7848, cost time=156 ms

2024-05-21 13:31:53,395 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=104.

2024-05-21 13:31:53,403 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos1:7848, cost time=190 ms

2024-05-21 13:31:53,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 13:31:53,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos1:7848, cost time=24 ms

2024-05-21 13:31:53,460 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:53,441 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=104, currTerm=104.

2024-05-21 13:31:53,457 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=108, currTerm=108.

2024-05-21 13:31:53,461 WARN Node <naming_instance_metadata/nacos1:7848> ignore stale AppendEntriesRequest from nacos2:7848, term=104, currTerm=105.

2024-05-21 13:31:53,471 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=105.

2024-05-21 13:31:54,154 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=108, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:31:54,158 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:31:54,210 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:31:54,172 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=106, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:31:54,187 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:31:54,212 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 13:31:54,213 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:31:54,214 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:31:54,289 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:31:54,292 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:31:54,304 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:31:54,315 INFO onLeaderStart: term=108.

2024-05-21 13:31:54,359 INFO onLeaderStart: term=106.

2024-05-21 13:54:05,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:05,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:05,695 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:05,693 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:05,695 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:05,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:05,696 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:05,697 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:05,698 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:54:05,700 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:54:05,703 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:54:05,703 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:54:05,709 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 104 to 106, cost 1 ms.

2024-05-21 13:54:05,710 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 101 to 103, cost 1 ms.

2024-05-21 13:54:05,715 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 100 to 102, cost 1 ms.

2024-05-21 13:54:05,715 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 101 to 102, cost 1 ms.

2024-05-21 13:56:34,853 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 13:56:34,856 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 13:56:34,856 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 13:56:34,859 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 14:01:53,441 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 14:01:54,106 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 14:01:54,109 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 14:01:54,158 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 14:01:57,588 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:01:57,591 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:01:57,592 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:01:57,594 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:01:58,406 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:01:58,503 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 14:01:58,928 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 14:24:05,617 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:24:05,617 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 106 to 109, cost 0 ms.

2024-05-21 14:24:05,618 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 103 to 106, cost 0 ms.

2024-05-21 14:24:05,620 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 14:54:05,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 15:24:05,554 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 15:24:05,554 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 1 ms.

2024-05-21 15:24:05,554 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:24:05,554 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:37:43,836 INFO Node <naming_service_metadata/nacos1:7848> shutdown, currTerm=106 state=STATE_LEADER.

2024-05-21 15:37:43,850 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=43, type=Follower] is going to quit

2024-05-21 15:37:43,850 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 15:37:43,922 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=42, type=Follower] stops sending entries.

2024-05-21 15:37:43,954 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos1:7848, cost time=29 ms

2024-05-21 15:37:43,968 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=42, type=Follower] is going to quit

2024-05-21 15:37:43,970 INFO Shutting down FSMCaller...

2024-05-21 15:37:43,992 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=313, target=nacos3:7848}}.

2024-05-21 15:37:43,989 INFO onShutdown.

2024-05-21 15:37:43,982 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:UNKNOWN], groupId=naming_persistent_service

2024-05-21 15:37:43,994 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,995 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,996 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=307, target=nacos2:7848}}.

2024-05-21 15:37:43,997 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,997 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,081 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@541600e[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 97757].

2024-05-21 15:37:44,098 INFO The number of active nodes decrement to 3.

2024-05-21 15:37:44,083 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_service_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,125 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_service_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,121 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@22bb1314[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 164].

2024-05-21 15:37:44,129 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_service_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,131 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_service_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,145 INFO Node <naming_service_metadata/nacos1:7848> shutdown, currTerm=106 state=STATE_SHUTTING.

2024-05-21 15:37:44,149 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,151 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=108 state=STATE_LEADER.

2024-05-21 15:37:44,161 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=108, lastLogIncluded=0, lastLogIndex=108, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=40, type=Follower] is going to quit

2024-05-21 15:37:44,164 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 15:37:44,167 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=108, lastLogIncluded=0, lastLogIndex=108, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=41, type=Follower] is going to quit

2024-05-21 15:37:44,203 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos1:7848, cost time=29 ms

2024-05-21 15:37:44,203 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=108, lastLogIncluded=0, lastLogIndex=108, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=41, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 15:37:44,203 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,207 INFO onShutdown.

2024-05-21 15:37:44,217 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=389, target=nacos3:7848}}.

2024-05-21 15:37:44,222 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,234 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,227 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 15:37:44,242 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=385, target=nacos2:7848}}.

2024-05-21 15:37:44,243 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,245 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,280 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 15:37:44,287 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 15:37:44,298 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 15:37:44,303 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 15:37:44,280 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@52835b03[Shutting down, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 38078].

2024-05-21 15:37:44,298 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos1:7848 -> nacos3:7848]

2024-05-21 15:37:44,325 INFO The number of active nodes decrement to 2.

2024-05-21 15:37:44,325 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=108 state=STATE_SHUTTING.

2024-05-21 15:37:44,338 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,338 INFO Node <naming_instance_metadata/nacos1:7848> shutdown, currTerm=105 state=STATE_FOLLOWER.

2024-05-21 15:37:44,377 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:44,392 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_service_metadata/log.

2024-05-21 15:37:44,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos1:7848, cost time=25 ms

2024-05-21 15:37:44,424 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,441 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=298, target=nacos3:7848}}.

2024-05-21 15:37:44,443 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 15:37:44,445 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4a77d87c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 179].

2024-05-21 15:37:44,448 INFO onShutdown.

2024-05-21 15:37:44,455 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,460 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,461 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=280, target=nacos2:7848}}.

2024-05-21 15:37:44,461 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,462 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,467 INFO Connection disconnected: /172.25.0.3:55720

2024-05-21 15:37:44,483 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_instance_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,483 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_instance_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,484 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_instance_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,484 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_instance_metadata/nacos1:7848>'}.

2024-05-21 15:37:44,490 INFO Node <naming_instance_metadata/nacos1:7848> shutdown, currTerm=105 state=STATE_SHUTTING.

2024-05-21 15:37:44,490 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,490 INFO Node <naming_persistent_service_v2/nacos1:7848> shutdown, currTerm=104 state=STATE_FOLLOWER.

2024-05-21 15:37:44,502 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=104, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:44,503 INFO The number of active nodes decrement to 1.

2024-05-21 15:37:44,505 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6f8f73f1[Shutting down, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 11933].

2024-05-21 15:37:44,523 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@1c3064a3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 171].

2024-05-21 15:37:44,539 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_instance_metadata/log.

2024-05-21 15:37:44,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos1:7848, cost time=38 ms

2024-05-21 15:37:44,541 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,544 INFO onShutdown.

2024-05-21 15:37:44,544 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=277, target=nacos3:7848}}.

2024-05-21 15:37:44,546 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,547 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,547 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=259, target=nacos2:7848}}.

2024-05-21 15:37:44,549 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,550 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,572 INFO The number of active nodes decrement to 0.

2024-05-21 15:37:44,599 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1210c545[Shutting down, pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 37553].

2024-05-21 15:37:44,622 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@34677041[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 169].

2024-05-21 15:37:44,701 INFO Connection disconnected: /172.25.0.5:35974

2024-05-21 15:37:44,805 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@30bd7a01[Shutting down, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 15772].

2024-05-21 15:37:44,807 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service_v2/nacos1:7848>'}.

2024-05-21 15:37:44,810 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@25dfb9c6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 110].

2024-05-21 15:37:44,811 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service_v2/nacos1:7848>'}.

2024-05-21 15:37:44,814 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@5429f22[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 18777].

2024-05-21 15:37:44,815 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service_v2/nacos1:7848>'}.

2024-05-21 15:37:44,818 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1b3d1c07[Shutting down, pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 78].

2024-05-21 15:37:44,821 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service_v2/nacos1:7848>'}.

2024-05-21 15:37:44,834 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log.

2024-05-21 15:37:44,839 INFO Node <naming_persistent_service_v2/nacos1:7848> shutdown, currTerm=104 state=STATE_SHUTDOWN.

2024-05-21 15:37:44,840 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,844 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=319, target=nacos3:7848}}.

2024-05-21 15:37:44,858 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,859 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,866 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 15:37:44,867 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,868 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,869 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=7, target=nacos1:7848}}.

2024-05-21 15:37:44,870 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,870 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,871 INFO Connection disconnected: /172.25.0.2:53382

2024-05-21 15:37:44,879 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@265406f8[Shutting down, pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 53273].

2024-05-21 22:01:35,390 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:01:35,719 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:01:36,591 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:01:36,593 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:01:36,594 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:01:36,598 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:01:36,605 INFO The number of active nodes increment to 1.

2024-05-21 22:01:36,940 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:01:36,950 INFO Starts FSMCaller successfully.

2024-05-21 22:01:36,965 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:01:37,074 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:01:37,077 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:01:37,079 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:01:37,096 INFO Node <naming_persistent_service/nacos1:7848> init, term=108, lastLogId=LogId [index=108, term=108], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:01:37,099 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:01:37,100 INFO Start the RaftGroupService successfully.

2024-05-21 22:01:37,282 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:37,424 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:37,424 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:37,425 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:37,425 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:37,428 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:01:37,454 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:01:37,744 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:01:37,746 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:01:37,960 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:01:37,965 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:01:38,001 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:01:38,003 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:01:39,100 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:39,106 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:39,108 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:40,142 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:40,145 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:40,145 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:40,146 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:40,147 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:41,170 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:41,173 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:41,175 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,106 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,111 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,111 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,111 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,128 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:42,129 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,129 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,202 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,209 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,209 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,210 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,210 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:42,353 INFO Node <naming_persistent_service/nacos1:7848> term 108 start preVote.

2024-05-21 22:01:42,361 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:01:42,364 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:01:42,372 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:01:42,377 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:01:42,381 INFO Peer nacos2:7848 is connected.

2024-05-21 22:01:42,392 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,395 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,395 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,396 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,398 WARN Node <naming_persistent_service/nacos1:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:01:42,403 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=108, granted=true.

2024-05-21 22:01:42,404 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=108.

2024-05-21 22:01:42,408 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:42,410 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,411 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,415 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:01:42,428 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=109, votedFor=nacos1:7848, cost time=14 ms

2024-05-21 22:01:42,433 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=109, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:01:42,442 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 22:01:42,448 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,451 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,451 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,453 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-21 22:01:42,453 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,454 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-21 22:01:42,455 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-21 22:01:42,458 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:01:42,489 INFO onLeaderStart: term=109.

2024-05-21 22:01:42,909 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=109 state=STATE_LEADER.

2024-05-21 22:01:42,915 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 22:01:42,920 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-21 22:01:42,935 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 22:01:42,935 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=109, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 22:01:42,938 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 22:01:42,938 INFO Shutting down FSMCaller...

2024-05-21 22:01:42,940 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=28, target=nacos3:7848}}.

2024-05-21 22:01:42,939 INFO Connection disconnected: /172.25.0.3:41196

2024-05-21 22:01:42,941 INFO onShutdown.

2024-05-21 22:01:42,942 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,944 WARN Replicator Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] id is null when timeout, maybe it's destroyed.

2024-05-21 22:01:42,945 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,947 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos2:7848}}.

2024-05-21 22:01:42,948 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,948 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,958 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@69fbec94[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-21 22:01:42,962 INFO The number of active nodes decrement to 0.

2024-05-21 22:01:42,959 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@70ff50bf[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:01:42,963 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1f99b9df[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:01:42,965 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:01:42,966 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6bb7a01b[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,966 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:01:42,967 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@5ac16516[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,969 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:01:42,970 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7716b1cc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,970 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:01:42,972 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=109 state=STATE_SHUTTING.

2024-05-21 22:01:42,973 INFO Stop the RaftGroupService successfully.

2024-05-21 22:01:42,973 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-21 22:01:42,974 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,974 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,975 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:01:42,975 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 22:01:42,976 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,976 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,977 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:01:42,978 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,979 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,980 INFO Connection disconnected: /172.25.0.2:55932

2024-05-21 22:01:42,985 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4aaac8ea[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:01:54,205 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:01:54,628 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:01:55,832 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:01:55,835 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:01:55,839 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:01:55,842 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:01:55,849 INFO The number of active nodes increment to 1.

2024-05-21 22:01:56,190 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:01:56,200 INFO Starts FSMCaller successfully.

2024-05-21 22:01:56,216 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:01:56,332 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:01:56,342 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:01:56,354 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:01:56,377 INFO Node <naming_persistent_service/nacos1:7848> init, term=109, lastLogId=LogId [index=109, term=109], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:01:56,392 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:01:56,395 INFO Start the RaftGroupService successfully.

2024-05-21 22:01:56,625 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:56,913 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:56,917 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:56,918 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:56,923 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:56,932 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:01:57,006 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:01:57,752 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:01:57,753 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:01:57,912 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:01:57,915 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:01:57,952 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:01:57,955 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:01:59,068 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:59,071 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:59,071 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:00,107 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:00,113 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:00,113 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:00,118 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:00,119 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:01,154 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:01,158 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:01,162 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:01,413 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:01,416 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:01,416 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:01,417 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:01,495 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:01,495 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:01,496 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:01,720 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=110, currTerm=109, granted=true, requestLastLogId=LogId [index=109, term=109], lastLogId=LogId [index=109, term=109].

2024-05-21 22:02:01,739 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=110, currTerm=109.

2024-05-21 22:02:01,754 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=110, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 22:02:01,760 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=110, votedFor=nacos2:7848, cost time=4 ms

2024-05-21 22:02:01,866 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:02,196 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:02,199 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:02,199 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:02,199 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:02,200 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:02,821 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=110 state=STATE_FOLLOWER.

2024-05-21 22:02:02,823 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=110, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 22:02:02,843 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=110, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 22:02:02,845 INFO Shutting down FSMCaller...

2024-05-21 22:02:02,846 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@76a2ddf3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,847 INFO onShutdown.

2024-05-21 22:02:02,850 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@41e68d87[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,852 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:02,855 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4aaac8ea[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:02,856 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:02,857 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@49ff7d8c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,858 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:02,859 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@29526c05[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,860 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:02,860 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@f5e1ec7[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,861 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:02,863 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=110 state=STATE_SHUTTING.

2024-05-21 22:02:02,863 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:02,863 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-21 22:02:02,863 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,864 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,865 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 22:02:02,866 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 22:02:02,868 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,868 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,868 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:02,878 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:02,878 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,879 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,881 INFO Connection disconnected: /172.25.0.2:48840

2024-05-21 22:02:02,886 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@762c3b41[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:02,896 INFO Connection disconnected: /172.25.0.3:54616

2024-05-21 22:02:14,771 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:15,060 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:16,079 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:16,080 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:16,082 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:16,087 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:16,099 INFO The number of active nodes increment to 1.

2024-05-21 22:02:16,467 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:02:16,478 INFO Starts FSMCaller successfully.

2024-05-21 22:02:16,497 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:16,583 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:16,584 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:16,594 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 1 ms.

2024-05-21 22:02:16,605 INFO Node <naming_persistent_service/nacos1:7848> init, term=110, lastLogId=LogId [index=110, term=110], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:16,608 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:16,608 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:16,846 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:16,960 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:16,962 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:16,960 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:16,965 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:16,967 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:16,989 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:17,504 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:17,508 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:17,703 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:17,706 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:18,033 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:18,034 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:19,290 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:19,294 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:19,294 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:20,318 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:20,321 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:20,321 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:20,322 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:20,323 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:21,345 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:21,347 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:21,348 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:21,618 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:21,622 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:21,622 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:21,623 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:21,641 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:21,642 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:21,643 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:22,368 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:22,380 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:22,385 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:22,389 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:22,393 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:22,598 INFO Node <naming_persistent_service/nacos1:7848> term 110 start preVote.

2024-05-21 22:02:22,611 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:22,667 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:22,683 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:22,686 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:22,690 INFO Peer nacos2:7848 is connected.

2024-05-21 22:02:22,770 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:22,784 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:22,785 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:22,785 WARN Node <naming_persistent_service/nacos1:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:22,791 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:22,840 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=110, granted=true.

2024-05-21 22:02:22,846 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=110.

2024-05-21 22:02:22,871 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:22,876 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:22,878 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:22,896 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:02:22,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=111, votedFor=nacos1:7848, cost time=43 ms

2024-05-21 22:02:22,961 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=111 state=STATE_CANDIDATE.

2024-05-21 22:02:22,990 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=111, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 22:02:22,993 INFO Shutting down FSMCaller...

2024-05-21 22:02:22,996 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos2:7848}}.

2024-05-21 22:02:23,017 INFO onShutdown.

2024-05-21 22:02:23,018 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,019 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,115 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@524f3b3a[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,116 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_SHUTTING.

2024-05-21 22:02:23,141 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@301448dc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 3].

2024-05-21 22:02:23,143 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@d86e894[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:23,143 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:23,146 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:23,148 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3b30a94a[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,150 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:23,151 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@41e68d87[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,151 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:23,155 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2840ebce[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,158 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:23,161 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=111 state=STATE_SHUTTING.

2024-05-21 22:02:23,162 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:23,163 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-21 22:02:23,164 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,166 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,167 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:23,168 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-21 22:02:23,169 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,170 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,174 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:23,174 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,175 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,182 INFO Connection disconnected: /172.25.0.2:35312

2024-05-21 22:02:23,191 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@43250da[Shutting down, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:23,483 INFO Connection disconnected: /172.25.0.3:34940

2024-05-21 22:02:34,263 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:34,488 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:35,249 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:35,251 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:35,253 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:35,256 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:35,261 INFO The number of active nodes increment to 1.

2024-05-21 22:02:35,521 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:02:35,529 INFO Starts FSMCaller successfully.

2024-05-21 22:02:35,544 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:35,671 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:35,675 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:35,680 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 1 ms.

2024-05-21 22:02:35,700 INFO Node <naming_persistent_service/nacos1:7848> init, term=111, lastLogId=LogId [index=110, term=110], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:35,704 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:35,704 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:35,990 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:36,187 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:36,187 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:36,193 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:36,193 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:36,200 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:36,316 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:37,010 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:37,011 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:37,203 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:37,205 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:37,262 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:37,265 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:38,358 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:38,363 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:38,363 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:39,401 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:39,406 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:39,406 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:39,407 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:39,408 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:40,433 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:40,435 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:40,435 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:40,713 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:40,715 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:40,715 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:40,715 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:40,732 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:40,734 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:40,735 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:41,145 INFO Node <naming_persistent_service/nacos1:7848> term 111 start preVote.

2024-05-21 22:02:41,149 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:41,150 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:41,155 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:41,156 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:41,159 INFO Peer nacos2:7848 is connected.

2024-05-21 22:02:41,170 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:41,172 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:41,173 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:41,174 WARN Node <naming_persistent_service/nacos1:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:41,173 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:41,180 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=111, granted=true.

2024-05-21 22:02:41,182 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=111.

2024-05-21 22:02:41,186 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:41,186 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:41,187 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:41,192 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:02:41,201 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=112, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 22:02:41,212 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=112, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:41,220 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 22:02:41,229 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:41,231 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:41,232 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:41,231 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:41,233 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-21 22:02:41,233 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-21 22:02:41,234 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-21 22:02:41,237 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:41,283 INFO onLeaderStart: term=112.

2024-05-21 22:02:41,467 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:41,469 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:41,470 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:41,470 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:41,471 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:41,945 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=112 state=STATE_LEADER.

2024-05-21 22:02:41,947 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 22:02:41,960 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=111, lastLogIncluded=0, lastLogIndex=111, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 22:02:41,967 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=112, votedFor=nacos1:7848, cost time=9 ms

2024-05-21 22:02:41,968 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=111, lastLogIncluded=0, lastLogIndex=111, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 22:02:41,969 INFO Shutting down FSMCaller...

2024-05-21 22:02:41,971 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=26, target=nacos3:7848}}.

2024-05-21 22:02:41,972 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:41,973 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:41,972 INFO onShutdown.

2024-05-21 22:02:41,976 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos2:7848}}.

2024-05-21 22:02:41,977 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:41,977 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:41,995 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@2bf2f4bd[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-21 22:02:41,997 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:41,996 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2794c909[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:42,006 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1dc5d511[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:42,007 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:42,008 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1e5481fc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,010 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:42,016 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@da98cc0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,017 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:42,017 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@64fd62a5[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,018 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:42,020 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=112 state=STATE_SHUTTING.

2024-05-21 22:02:42,021 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:42,024 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:42,026 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=28, target=nacos3:7848}}.

2024-05-21 22:02:42,028 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,029 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,031 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 22:02:42,031 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,032 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,035 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:42,036 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,038 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,041 INFO Connection disconnected: /172.25.0.2:53316

2024-05-21 22:02:42,053 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@2c4aecb4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:42,232 INFO Connection disconnected: /172.25.0.3:33014

2024-05-21 22:02:52,581 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:52,800 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:53,473 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:53,475 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:53,476 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:53,479 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:53,485 INFO The number of active nodes increment to 1.

2024-05-21 22:02:53,751 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:02:53,769 INFO Starts FSMCaller successfully.

2024-05-21 22:02:53,789 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:53,892 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:53,893 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:53,900 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:02:53,912 INFO Node <naming_persistent_service/nacos1:7848> init, term=112, lastLogId=LogId [index=111, term=112], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:53,916 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:53,918 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:54,148 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:54,312 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:54,313 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:54,312 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:54,319 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:54,321 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:54,378 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:54,715 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:54,716 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:54,852 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:54,855 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:54,903 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:54,906 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:56,070 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:56,073 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:56,074 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:57,100 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:57,106 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:57,106 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:57,109 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:57,110 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:58,129 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:58,132 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:58,133 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:58,936 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:58,941 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:58,941 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:58,943 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:58,967 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:58,968 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:58,968 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,018 INFO Node <naming_persistent_service/nacos1:7848> term 112 start preVote.

2024-05-21 22:02:59,021 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:59,022 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:59,031 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:59,031 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:59,037 INFO Peer nacos2:7848 is connected.

2024-05-21 22:02:59,064 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:59,071 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:59,073 WARN Node <naming_persistent_service/nacos1:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:59,070 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:59,077 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:59,078 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, term 113, expect=112.

2024-05-21 22:02:59,097 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=113, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 22:02:59,100 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=114, currTerm=113, granted=true, requestLastLogId=LogId [index=111, term=112], lastLogId=LogId [index=111, term=112].

2024-05-21 22:02:59,119 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=114, currTerm=113.

2024-05-21 22:02:59,126 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=114, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-21 22:02:59,138 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=114, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 22:02:59,155 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:59,159 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:59,160 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:59,160 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:59,161 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:59,262 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:59,490 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=114.

2024-05-21 22:02:59,492 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=114, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 22:02:59,497 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:59,498 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,500 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,502 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos2:7848 error: Status[ENOENT<1012>: Peer id not found: nacos2:7848, group: naming_persistent_service].

2024-05-21 22:02:59,503 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:02:59,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=115, votedFor=nacos1:7848, cost time=4 ms

2024-05-21 22:02:59,508 INFO Node <naming_persistent_service/nacos1:7848> received TimeoutNowRequest from nacos2:7848, term=114.

2024-05-21 22:02:59,516 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos1:7848 -> nacos2:7848]

2024-05-21 22:02:59,552 INFO Connection disconnected: /172.25.0.3:45458

2024-05-21 22:02:59,844 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=115 state=STATE_CANDIDATE.

2024-05-21 22:02:59,855 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=115, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 22:02:59,856 INFO Shutting down FSMCaller...

2024-05-21 22:02:59,857 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos2:7848}}.

2024-05-21 22:02:59,857 INFO onShutdown.

2024-05-21 22:02:59,857 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,858 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,864 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7749bf93[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,865 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@5285a851[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 3].

2024-05-21 22:02:59,865 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:59,867 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6b83cf79[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:59,867 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:59,868 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@42fb9449[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,869 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:59,869 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@13330ac6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,870 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:59,872 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@24bb07a3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,872 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:02:59,873 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=115 state=STATE_SHUTTING.

2024-05-21 22:02:59,874 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:59,877 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=27, target=nacos3:7848}}.

2024-05-21 22:02:59,877 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,878 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,878 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:59,879 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 22:02:59,880 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,881 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,883 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:59,902 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,903 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,905 INFO Connection disconnected: /172.25.0.2:40350

2024-05-21 22:02:59,910 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@42e12a6e[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 18].

2024-05-21 22:03:13,142 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:03:13,324 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:03:13,877 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:03:13,881 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:03:13,883 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:03:13,886 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:03:13,890 INFO The number of active nodes increment to 1.

2024-05-21 22:03:14,118 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 1 ms.

2024-05-21 22:03:14,123 INFO Starts FSMCaller successfully.

2024-05-21 22:03:14,135 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:03:14,205 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:03:14,207 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:03:14,212 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:03:14,221 INFO Node <naming_persistent_service/nacos1:7848> init, term=115, lastLogId=LogId [index=112, term=114], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:03:14,224 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:03:14,225 INFO Start the RaftGroupService successfully.

2024-05-21 22:03:14,574 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:14,745 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:14,745 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:14,747 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:14,748 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:14,750 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:03:14,796 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:03:15,141 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:03:15,144 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:03:15,254 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:03:15,266 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:03:15,297 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:03:15,298 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:03:16,365 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:16,369 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:16,370 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:17,408 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:17,414 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:17,414 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:17,414 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:17,416 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:18,440 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:18,442 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:18,444 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:19,232 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,236 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,236 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,237 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,255 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:19,256 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:19,256 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:19,290 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos2:7848, term=115, currTerm=115, granted=true, requestLastLogId=LogId [index=112, term=114], lastLogId=LogId [index=112, term=114].

2024-05-21 22:03:19,475 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,479 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,479 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,480 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:19,480 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,588 INFO Node <naming_persistent_service/nacos1:7848> term 115 start preVote.

2024-05-21 22:03:19,591 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:03:19,593 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:03:19,599 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:03:19,601 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:03:19,604 INFO Peer nacos2:7848 is connected.

2024-05-21 22:03:19,617 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,620 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,620 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,620 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,621 WARN Node <naming_persistent_service/nacos1:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:03:19,624 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=115, granted=true.

2024-05-21 22:03:19,624 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=115.

2024-05-21 22:03:19,628 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:19,629 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:19,629 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:19,631 WARN Node <naming_persistent_service/nacos1:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:03:19,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 22:03:19,648 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=116, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:03:19,657 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 22:03:19,663 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,665 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,666 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,666 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,667 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-21 22:03:19,667 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-21 22:03:19,668 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-21 22:03:19,670 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:03:19,709 INFO onLeaderStart: term=116.

2024-05-21 22:03:20,143 INFO Connection disconnected: /172.25.0.3:39222

2024-05-21 22:03:20,153 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=116 state=STATE_LEADER.

2024-05-21 22:03:20,156 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 22:03:20,171 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=113, lastLogIncluded=0, lastLogIndex=113, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-21 22:03:20,172 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 22:03:20,173 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=113, lastLogIncluded=0, lastLogIndex=113, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 22:03:20,175 INFO Shutting down FSMCaller...

2024-05-21 22:03:20,177 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=29, target=nacos3:7848}}.

2024-05-21 22:03:20,177 INFO onShutdown.

2024-05-21 22:03:20,178 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,179 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,181 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=23, target=nacos2:7848}}.

2024-05-21 22:03:20,181 INFO Connection disconnected: /172.25.0.3:47564

2024-05-21 22:03:20,183 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,184 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,196 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3fc433c6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-21 22:03:20,197 INFO The number of active nodes decrement to 0.

2024-05-21 22:03:20,197 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@36560a06[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:03:20,199 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4a8bc368[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:03:20,200 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:03:20,201 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@27df7cc8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,203 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:03:20,205 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6df9142c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,206 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:03:20,207 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3eba96d6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,208 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos1:7848>'}.

2024-05-21 22:03:20,209 INFO Node <naming_persistent_service/nacos1:7848> shutdown, currTerm=116 state=STATE_SHUTTING.

2024-05-21 22:03:20,210 INFO Stop the RaftGroupService successfully.

2024-05-21 22:03:20,211 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-21 22:03:20,214 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,215 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,215 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:03:20,215 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=12, target=nacos2:7848}}.

2024-05-21 22:03:20,216 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,216 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,218 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:03:20,218 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,219 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,220 INFO Connection disconnected: /172.25.0.2:53722

2024-05-21 22:03:20,222 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3fb6e137[Shutting down, pool size = 13, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 23:07:25,577 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 23:07:25,980 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 23:07:26,869 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 23:07:26,871 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 23:07:26,873 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 23:07:26,876 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 23:07:26,880 INFO The number of active nodes increment to 1.

2024-05-21 23:07:27,285 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 23:07:27,296 INFO Starts FSMCaller successfully.

2024-05-21 23:07:27,316 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:27,405 INFO Node <naming_persistent_service/nacos1:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:27,409 INFO Node <naming_persistent_service/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:27,413 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 23:07:27,426 INFO Node <naming_persistent_service/nacos1:7848> init, term=116, lastLogId=LogId [index=113, term=116], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:27,431 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:27,432 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:27,726 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:07:27,957 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:07:28,621 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:07:28,622 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:07:28,750 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: deadline exceeded after 0.784411479s. [closed=[], open=[[buffered_nanos=651547202, remote_addr=nacos3/172.25.0.4:7848]]].

2024-05-21 23:07:28,751 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 23:07:28,752 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:28,754 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:28,801 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:28,802 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:28,915 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:28,922 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:29,176 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:29,177 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:32,909 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos3:7848, term=109, currTerm=116.

2024-05-21 23:07:33,246 INFO Node <naming_persistent_service/nacos1:7848> term 116 start preVote.

2024-05-21 23:07:33,254 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:33,256 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:33,261 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:33,261 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:33,264 INFO Peer nacos2:7848 is connected.

2024-05-21 23:07:33,275 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:07:33,277 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:07:33,282 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:07:33,283 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:07:33,284 INFO Peer nacos3:7848 is connected.

2024-05-21 23:07:33,291 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos2:7848, term=116, granted=true.

2024-05-21 23:07:33,291 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=116.

2024-05-21 23:07:33,306 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=117, votedFor=nacos1:7848, cost time=12 ms

2024-05-21 23:07:33,307 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:07:33,315 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=117, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:33,331 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:07:33,337 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:07:33,343 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 23:07:33,350 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:07:33,406 INFO onLeaderStart: term=117.

2024-05-21 23:07:42,314 INFO The number of active nodes increment to 2.

2024-05-21 23:07:42,524 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 0 to 105, cost 1 ms.

2024-05-21 23:07:42,550 INFO Starts FSMCaller successfully.

2024-05-21 23:07:42,572 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:42,606 INFO Node <naming_persistent_service_v2/nacos1:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:42,609 INFO Node <naming_persistent_service_v2/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:42,612 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:42,619 INFO Node <naming_persistent_service_v2/nacos1:7848> init, term=104, lastLogId=LogId [index=104, term=104], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:42,628 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:42,629 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:42,699 INFO The number of active nodes increment to 3.

2024-05-21 23:07:42,977 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 0 to 105, cost 1 ms.

2024-05-21 23:07:42,983 INFO Starts FSMCaller successfully.

2024-05-21 23:07:42,986 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,016 INFO Node <naming_instance_metadata/nacos1:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,019 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:43,019 INFO Node <naming_instance_metadata/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,026 INFO Node <naming_instance_metadata/nacos1:7848> init, term=105, lastLogId=LogId [index=104, term=105], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,037 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,038 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:43,051 INFO The number of active nodes increment to 4.

2024-05-21 23:07:43,188 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 0 to 106, cost 0 ms.

2024-05-21 23:07:43,191 INFO Starts FSMCaller successfully.

2024-05-21 23:07:43,193 INFO Loading snapshot, meta=last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,196 INFO Node <naming_service_metadata/nacos1:7848> onSnapshotLoadDone, last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,197 INFO Node <naming_service_metadata/nacos1:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,200 INFO Node <naming_service_metadata/nacos1:7848> init, term=106, lastLogId=LogId [index=105, term=106], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,203 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,203 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:43,208 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 23:07:47,533 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=104, term=104], lastLogId=LogId [index=104, term=104].

2024-05-21 23:07:47,565 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=104.

2024-05-21 23:07:47,574 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=105, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-21 23:07:47,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=105, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 23:07:48,195 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 23:07:48,207 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=105.

2024-05-21 23:07:48,219 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=106, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 23:07:48,231 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=106, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 23:07:48,463 INFO Node <naming_service_metadata/nacos1:7848> term 106 start preVote.

2024-05-21 23:07:48,486 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:48,503 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:48,507 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:48,507 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:48,510 INFO Peer nacos2:7848 is connected.

2024-05-21 23:07:48,514 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:07:48,518 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:07:48,523 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:07:48,524 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:07:48,525 INFO Peer nacos3:7848 is connected.

2024-05-21 23:07:48,530 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteResponse from nacos2:7848, term=106, granted=true.

2024-05-21 23:07:48,532 INFO Node <naming_service_metadata/nacos1:7848> start vote and grant vote self, term=106.

2024-05-21 23:07:48,550 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=107, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 23:07:48,551 WARN Node <naming_service_metadata/nacos1:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:07:48,565 INFO Node <naming_service_metadata/nacos1:7848> become leader of group, term=107, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:48,568 INFO Replicator [group: naming_service_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:07:48,572 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:07:48,579 WARN Node <naming_service_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:07:48,592 INFO onLeaderStart: term=107.

2024-05-21 23:27:47,315 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:27:47,316 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:27:47,319 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 23:27:47,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 3 ms.

2024-05-21 23:32:16,932 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:32:16,934 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:32:16,938 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 23:32:16,945 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:33:01,965 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:33:01,967 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:33:01,970 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 23:33:01,977 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:37:25,436 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:37:25,437 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:37:25,439 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 23:37:25,446 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 1 ms.

2024-05-21 23:37:37,935 INFO Connection disconnected: /172.25.0.4:50564

2024-05-21 23:37:48,586 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 23:47:44,886 WARN Node <naming_service_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=107, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:44,923 WARN Node <naming_persistent_service/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=117, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:44,991 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=114, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:45,070 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:45,088 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:45,167 INFO Node <naming_instance_metadata/nacos1:7848> term 106 start preVote.

2024-05-21 23:47:45,168 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:45,173 INFO Node <naming_persistent_service_v2/nacos1:7848> term 105 start preVote.

2024-05-21 23:47:45,173 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 23:47:45,171 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 23:47:45,175 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_service_metadata, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:45,209 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:45,182 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:47:45,209 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:47:45,223 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,226 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,319 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,350 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,351 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,364 INFO Peer nacos2:7848 is connected.

2024-05-21 23:47:45,368 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,371 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,371 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,371 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,372 INFO Peer nacos2:7848 is connected.

2024-05-21 23:47:45,323 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,425 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,436 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,437 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,451 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,527 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,529 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,531 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,538 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,539 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,541 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,554 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteRequest from nacos3:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=114, term=117], lastLogId=LogId [index=114, term=117].

2024-05-21 23:47:45,590 INFO Node <naming_persistent_service/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=118, currTerm=117.

2024-05-21 23:47:45,601 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=118, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 23:47:45,612 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=118, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 23:47:45,622 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteResponse from nacos3:7848, term=105, granted=true.

2024-05-21 23:47:45,632 INFO Node <naming_persistent_service_v2/nacos1:7848> start vote and grant vote self, term=105.

2024-05-21 23:47:45,631 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteResponse from nacos3:7848, term=106, granted=true.

2024-05-21 23:47:45,633 INFO Node <naming_instance_metadata/nacos1:7848> start vote and grant vote self, term=106.

2024-05-21 23:47:45,634 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:45,634 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:45,684 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=107], lastLogId=LogId [index=106, term=107].

2024-05-21 23:47:45,692 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=106, votedFor=nacos1:7848, cost time=57 ms

2024-05-21 23:47:45,702 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=107], lastLogId=LogId [index=106, term=107].

2024-05-21 23:47:45,728 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,729 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=107, votedFor=nacos1:7848, cost time=93 ms

2024-05-21 23:47:45,730 WARN Node <naming_instance_metadata/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:47:45,731 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=107, currTerm=107, granted=true, requestLastLogId=LogId [index=105, term=106], lastLogId=LogId [index=105, term=106].

2024-05-21 23:47:45,731 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,745 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=107, currTerm=107.

2024-05-21 23:47:45,749 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=108, currTerm=107.

2024-05-21 23:47:45,754 INFO Node <naming_instance_metadata/nacos1:7848> become leader of group, term=107, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:45,755 INFO Replicator [group: naming_instance_metadata, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:47:45,757 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:47:45,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=108, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 23:47:45,766 WARN Node <naming_instance_metadata/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:45,775 INFO Node <naming_persistent_service_v2/nacos1:7848> become leader of group, term=106, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:45,781 INFO Replicator [group: naming_persistent_service_v2, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:47:45,783 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 23:47:45,786 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:47:45,784 INFO Node <naming_persistent_service/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=118, currTerm=118, because the leader nacos3:7848's lease is still valid.

2024-05-21 23:47:45,799 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,802 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,825 INFO Node <naming_persistent_service_v2/nacos1:7848> ignore PreVoteRequest from nacos2:7848, term=106, currTerm=106, because the leader nacos1:7848's lease is still valid.

2024-05-21 23:47:45,834 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 23:47:45,846 INFO onLeaderStart: term=107.

2024-05-21 23:47:45,854 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:45,902 INFO onLeaderStart: term=106.

2024-05-21 23:47:45,925 WARN Node <naming_persistent_service_v2/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:57,352 WARN Node <naming_instance_metadata/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=107, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:57,385 WARN Node <naming_persistent_service_v2/nacos1:7848> steps down when alive nodes don't satisfy quorum, term=106, deadNodes=nacos3:7848,nacos2:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:57,358 WARN Fail to issue RPC to nacos2:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499596087s. [closed=[], open=[[remote_addr=nacos2/172.25.0.5:7848]]]], groupId=naming_instance_metadata

2024-05-21 23:47:57,389 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_instance_metadata, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:57,390 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:57,388 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:57,389 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:57,408 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,390 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos2:7848, groupId=naming_persistent_service_v2, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:57,414 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=106, lastLogIncluded=0, lastLogIndex=106, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:57,438 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,479 INFO Node <naming_persistent_service_v2/nacos1:7848> received PreVoteRequest from nacos3:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 23:47:57,506 INFO Node <naming_instance_metadata/nacos1:7848> received PreVoteRequest from nacos2:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=107], lastLogId=LogId [index=106, term=107].

2024-05-21 23:47:57,506 INFO Node <naming_persistent_service_v2/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=107, currTerm=106.

2024-05-21 23:47:57,518 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,532 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=107, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 23:47:57,535 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=107, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 23:47:57,604 INFO Node <naming_instance_metadata/nacos1:7848> received RequestVoteRequest from nacos2:7848, term=108, currTerm=107.

2024-05-21 23:47:57,614 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos1:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=108, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 23:47:57,628 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=7 ms

2024-05-21 23:47:58,621 INFO Node <naming_service_metadata/nacos1:7848> received PreVoteRequest from nacos3:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=108], lastLogId=LogId [index=107, term=108].

2024-05-21 23:47:58,630 INFO Node <naming_service_metadata/nacos1:7848> received RequestVoteRequest from nacos3:7848, term=109, currTerm=108.

2024-05-21 23:47:58,632 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos2:7848, term=108, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:58,642 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=109, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 23:47:58,651 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=109, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 23:48:02,796 INFO Node <naming_persistent_service/nacos1:7848> term 118 start preVote.

2024-05-21 23:48:02,796 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=118, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 23:48:02,801 INFO Node <naming_persistent_service/nacos1:7848> received PreVoteResponse from nacos3:7848, term=118, granted=true.

2024-05-21 23:48:02,801 INFO Node <naming_persistent_service/nacos1:7848> start vote and grant vote self, term=118.

2024-05-21 23:48:02,802 WARN Node <naming_persistent_service/nacos1:7848> received invalid PreVoteResponse from nacos2:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:48:02,808 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=119, votedFor=nacos1:7848, cost time=5 ms

2024-05-21 23:48:02,816 INFO Node <naming_persistent_service/nacos1:7848> become leader of group, term=119, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:48:02,817 INFO Replicator [group: naming_persistent_service, peer: nacos2:7848, type: Follower] is started

2024-05-21 23:48:02,818 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:48:02,819 WARN Node <naming_persistent_service/nacos1:7848> received invalid RequestVoteResponse from nacos2:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:48:02,825 INFO onLeaderStart: term=119.

