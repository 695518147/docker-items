2024-05-21 00:58:20,930 INFO Node <naming_service_metadata/nacos2:7848> term 45 start preVote.

2024-05-21 00:58:21,555 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:20,933 INFO Node <naming_persistent_service_v2/nacos2:7848> term 43 start preVote.

2024-05-21 00:58:21,563 INFO Node <naming_service_metadata/nacos2:7848> term 45 start preVote.

2024-05-21 00:58:21,664 INFO Node <naming_instance_metadata/nacos2:7848> term 43 start preVote.

2024-05-21 00:58:21,662 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=46, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:58:21,735 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=5, type=Follower] is going to quit

2024-05-21 00:58:21,738 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=46, lastLogIncluded=0, lastLogIndex=46, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=6, type=Follower] is going to quit

2024-05-21 00:58:21,667 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,670 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 00:58:21,674 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 00:58:21,674 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 00:58:21,683 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,737 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:58:21,762 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,766 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,787 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 00:58:21,807 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 00:58:21,829 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:21,842 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:21,851 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:21,855 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 00:58:21,865 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_41.

2024-05-21 00:58:21,906 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:21,911 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 42, cost 5 ms.

2024-05-21 00:58:21,914 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,931 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 00:58:21,939 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_41.

2024-05-21 00:58:21,964 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:22,048 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=44, currTerm=43, because the leader nacos3:7848's lease is still valid.

2024-05-21 00:58:21,982 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:21,999 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:21,999 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:22,024 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 00:58:22,026 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:22,031 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,033 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=43, granted=true.

2024-05-21 00:58:22,139 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=43.

2024-05-21 00:58:22,034 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=46, term=46], lastLogId=LogId [index=46, term=46].

2024-05-21 00:58:22,036 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 00:58:22,056 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=43, granted=true.

2024-05-21 00:58:22,163 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=43.

2024-05-21 00:58:22,056 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 42 to 42, cost 0 ms.

2024-05-21 00:58:22,072 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 00:58:22,082 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,220 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,221 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,087 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 00:58:22,135 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,145 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:58:22,222 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=43, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:58:22,230 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,260 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_44.

2024-05-21 00:58:22,261 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_40.

2024-05-21 00:58:22,263 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=44, votedFor=nacos2:7848, cost time=56 ms

2024-05-21 00:58:22,275 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,279 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 45 to 45, cost 0 ms.

2024-05-21 00:58:22,280 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:58:22,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=44, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 00:58:22,286 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 41, cost 0 ms.

2024-05-21 00:58:22,313 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,314 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,314 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,313 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,341 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,342 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,345 INFO Peer nacos1:7848 is connected.

2024-05-21 00:58:22,366 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=45, granted=false.

2024-05-21 00:58:22,370 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=46, currTerm=45, because the leader nacos1:7848's lease is still valid.

2024-05-21 00:58:22,386 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,391 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 00:58:22,393 INFO The channel nacos3:7848 has successfully established.

2024-05-21 00:58:22,394 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 00:58:22,394 INFO Peer nacos3:7848 is connected.

2024-05-21 00:58:22,394 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=45, granted=false.

2024-05-21 00:58:22,394 INFO The channel nacos1:7848 has successfully established.

2024-05-21 00:58:22,397 INFO Peer nacos1:7848 is connected.

2024-05-21 00:58:22,396 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,401 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=44, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:58:22,405 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:58:22,408 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:58:22,440 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=45, granted=true.

2024-05-21 00:58:22,444 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=45.

2024-05-21 00:58:22,450 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 00:58:22,456 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,463 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=46, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 00:58:22,463 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=44, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:58:22,467 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:58:22,470 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:58:22,477 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:58:22,487 INFO onLeaderStart: term=44.

2024-05-21 00:58:22,491 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:58:22,492 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=46, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:58:22,493 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:58:22,496 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:58:22,511 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=46, currTerm=46.

2024-05-21 00:58:22,516 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=44, currTerm=44.

2024-05-21 00:58:22,522 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,522 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=44, currTerm=44, granted=false, requestLastLogId=LogId [index=42, term=43], lastLogId=LogId [index=43, term=44].

2024-05-21 00:58:22,534 INFO onLeaderStart: term=44.

2024-05-21 00:58:22,544 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:58:22,546 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:58:22,549 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=47, currTerm=46.

2024-05-21 00:58:22,548 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:58:22,556 INFO onLeaderStart: term=46.

2024-05-21 00:58:22,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=47, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 00:58:22,567 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=47, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 00:58:22,568 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:24,321 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=44, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:59:24,336 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=44, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:59:24,449 INFO Node <naming_persistent_service/nacos2:7848> term 47 start preVote.

2024-05-21 00:59:24,359 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=46, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 00:59:24,450 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 00:59:24,521 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:59:24,522 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=4, type=Follower] is going to quit

2024-05-21 00:59:24,523 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:59:24,546 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=43, lastLogIncluded=0, lastLogIndex=43, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=6, type=Follower] is going to quit

2024-05-21 00:59:24,526 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 00:59:24,530 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=8, type=Follower] is going to quit

2024-05-21 00:59:25,050 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=44, lastLogIncluded=0, lastLogIndex=44, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=7, type=Follower] is going to quit

2024-05-21 00:59:24,543 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=3, type=Follower] is going to quit

2024-05-21 00:59:24,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=43, lastLogIncluded=0, lastLogIndex=43, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=5, type=Follower] is going to quit

2024-05-21 00:59:25,055 INFO Connection disconnected: /172.25.0.5:60334

2024-05-21 00:59:25,066 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 00:59:25,078 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 00:59:25,080 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 00:59:25,081 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=45, currTerm=44, granted=true, requestLastLogId=LogId [index=43, term=44], lastLogId=LogId [index=43, term=44].

2024-05-21 00:59:25,082 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 00:59:25,096 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=45, currTerm=44, granted=true, requestLastLogId=LogId [index=43, term=44], lastLogId=LogId [index=43, term=44].

2024-05-21 00:59:25,143 INFO Connection disconnected: /172.25.0.5:48296

2024-05-21 00:59:25,136 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=45, currTerm=44, granted=true, requestLastLogId=LogId [index=44, term=44], lastLogId=LogId [index=44, term=44].

2024-05-21 00:59:25,212 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=45, currTerm=44, granted=true, requestLastLogId=LogId [index=44, term=44], lastLogId=LogId [index=44, term=44].

2024-05-21 00:59:25,158 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,216 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,148 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,220 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,222 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=45, currTerm=44, granted=true, requestLastLogId=LogId [index=44, term=44], lastLogId=LogId [index=44, term=44].

2024-05-21 00:59:25,294 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=45, currTerm=44.

2024-05-21 00:59:25,223 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,288 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=47, granted=true.

2024-05-21 00:59:25,312 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=47.

2024-05-21 00:59:25,315 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,293 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,294 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,295 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,310 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=45, currTerm=44.

2024-05-21 00:59:25,321 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 00:59:25,340 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=45, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 00:59:25,347 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,351 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=48, votedFor=nacos2:7848, cost time=19 ms

2024-05-21 00:59:25,357 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=45, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-21 00:59:25,374 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=45, term=46], lastLogId=LogId [index=45, term=46].

2024-05-21 00:59:25,375 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 00:59:25,383 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 00:59:25,384 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 00:59:25,376 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=45, votedFor=nacos1:7848, cost time=24 ms

2024-05-21 00:59:25,390 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=45, currTerm=45.

2024-05-21 00:59:25,385 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 00:59:25,385 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=45, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 00:59:25,440 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,445 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,444 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,453 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=47, currTerm=46.

2024-05-21 00:59:25,488 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=48, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 00:59:25,499 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=47, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-21 00:59:25,500 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 00:59:25,518 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=47, votedFor=nacos1:7848, cost time=14 ms

2024-05-21 00:59:25,524 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,523 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 00:59:25,539 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,544 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 00:59:25,573 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=48, currTerm=48, granted=false, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=48, term=48].

2024-05-21 00:59:25,581 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,598 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 00:59:25,606 INFO onLeaderStart: term=48.

2024-05-21 01:00:36,394 INFO Node <naming_instance_metadata/nacos2:7848> term 45 start preVote.

2024-05-21 01:00:36,979 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=48, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:37,028 INFO Node <naming_persistent_service_v2/nacos2:7848> term 45 start preVote.

2024-05-21 01:00:36,949 INFO Node <naming_service_metadata/nacos2:7848> term 47 start preVote.

2024-05-21 01:00:37,049 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:37,047 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=7, type=Follower] is going to quit

2024-05-21 01:00:37,079 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=46, term=47], lastLogId=LogId [index=46, term=47].

2024-05-21 01:00:37,088 INFO Node <naming_service_metadata/nacos2:7848> term 47 start preVote.

2024-05-21 01:00:37,027 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:37,104 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:00:36,981 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:37,080 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:37,181 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:00:37,247 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=46, currTerm=45, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:37,259 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=48, currTerm=47.

2024-05-21 01:00:37,270 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=46, currTerm=45, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:37,277 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=46, currTerm=45, granted=true, requestLastLogId=LogId [index=44, term=45], lastLogId=LogId [index=44, term=45].

2024-05-21 01:00:37,284 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:00:37,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=47, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:00:37,296 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=45, granted=true.

2024-05-21 01:00:37,301 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=45.

2024-05-21 01:00:37,311 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=48.

2024-05-21 01:00:37,315 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=45, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:37,342 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=46, currTerm=45.

2024-05-21 01:00:37,345 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=45, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:00:37,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=49, votedFor=0.0.0.0:0, cost time=67 ms

2024-05-21 01:00:37,404 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=48, votedFor=0.0.0.0:0, cost time=131 ms

2024-05-21 01:00:37,404 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=46, votedFor=nacos2:7848, cost time=87 ms

2024-05-21 01:00:37,415 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=46, currTerm=46.

2024-05-21 01:00:37,406 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=47, currTerm=48.

2024-05-21 01:00:37,399 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:37,408 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=46, votedFor=0.0.0.0:0, cost time=64 ms

2024-05-21 01:00:37,432 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=48, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 01:00:37,418 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:37,443 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=46, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 01:00:37,446 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=45, currTerm=46.

2024-05-21 01:00:37,436 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=47, currTerm=48.

2024-05-21 01:00:37,459 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=47, currTerm=48.

2024-05-21 01:00:37,460 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=49, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 01:00:37,571 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:37,628 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=47, currTerm=48.

2024-05-21 01:00:37,695 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=46, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:37,699 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:00:37,707 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=45, currTerm=46.

2024-05-21 01:00:37,710 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:37,801 INFO onLeaderStart: term=46.

2024-05-21 01:00:54,382 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=46, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:00:54,426 INFO Node <naming_service_metadata/nacos2:7848> term 48 start preVote.

2024-05-21 01:00:54,436 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:00:54,458 INFO Node <naming_persistent_service_v2/nacos2:7848> term 46 start preVote.

2024-05-21 01:00:54,531 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:00:54,511 INFO Node <naming_service_metadata/nacos2:7848> term 48 start preVote.

2024-05-21 01:00:54,585 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=47, currTerm=46, because the leader nacos1:7848's lease is still valid.

2024-05-21 01:00:54,587 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 01:00:54,601 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=45, lastLogIncluded=0, lastLogIndex=45, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 01:00:54,604 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=45, term=46], lastLogId=LogId [index=45, term=46].

2024-05-21 01:00:54,615 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:00:54,698 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=46, granted=true.

2024-05-21 01:00:54,703 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=46.

2024-05-21 01:00:54,704 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=47, currTerm=46, granted=true, requestLastLogId=LogId [index=45, term=46], lastLogId=LogId [index=45, term=46].

2024-05-21 01:00:54,710 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=50, currTerm=49, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:54,708 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=46, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,722 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,754 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=47, votedFor=nacos2:7848, cost time=42 ms

2024-05-21 01:00:54,772 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=49, currTerm=48, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:00:54,793 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=48, granted=true.

2024-05-21 01:00:54,795 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=48.

2024-05-21 01:00:54,806 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:00:54,826 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=47, currTerm=46.

2024-05-21 01:00:54,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=49, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 01:00:54,839 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,841 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,842 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,871 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=49.

2024-05-21 01:00:54,871 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=49, currTerm=49.

2024-05-21 01:00:54,845 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=47, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 01:00:54,874 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:00:54,881 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=50, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-21 01:00:54,881 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:00:54,882 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=47, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:54,889 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:00:54,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=47, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 01:00:54,894 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=47, currTerm=47.

2024-05-21 01:00:54,913 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=50, votedFor=nacos1:7848, cost time=29 ms

2024-05-21 01:00:54,894 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:54,915 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:54,926 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=49, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:00:54,958 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:00:54,932 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:00:54,993 INFO onLeaderStart: term=47.

2024-05-21 01:00:54,992 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:00:55,002 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:00:55,038 INFO onLeaderStart: term=49.

2024-05-21 01:01:11,705 INFO Node <naming_persistent_service/nacos2:7848> term 50 start preVote.

2024-05-21 01:01:11,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:01:11,837 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=49, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:01:11,882 INFO Node <naming_instance_metadata/nacos2:7848> term 47 start preVote.

2024-05-21 01:01:12,171 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=6, type=Follower] is going to quit

2024-05-21 01:01:12,228 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=48, lastLogIncluded=0, lastLogIndex=48, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=5, type=Follower] is going to quit

2024-05-21 01:01:12,177 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:01:11,858 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=47, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:01:12,234 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:01:12,272 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:01:12,266 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=10, type=Follower] is going to quit

2024-05-21 01:01:12,272 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=50, term=50], lastLogId=LogId [index=50, term=50].

2024-05-21 01:01:12,282 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=48, currTerm=47, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:01:12,286 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:01:12,335 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:01:12,271 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:01:12,311 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=9, type=Follower] is going to quit

2024-05-21 01:01:12,355 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,376 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 01:01:12,380 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,384 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=50, granted=true.

2024-05-21 01:01:12,386 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=50.

2024-05-21 01:01:12,382 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=48, currTerm=47, granted=true, requestLastLogId=LogId [index=47, term=47], lastLogId=LogId [index=47, term=47].

2024-05-21 01:01:12,383 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=47, granted=true.

2024-05-21 01:01:12,392 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=47.

2024-05-21 01:01:12,392 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,395 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=47, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:01:12,396 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:01:12,442 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=48, currTerm=47.

2024-05-21 01:01:12,448 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=51, votedFor=nacos2:7848, cost time=61 ms

2024-05-21 01:01:12,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=48, votedFor=nacos2:7848, cost time=51 ms

2024-05-21 01:01:12,463 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:01:12,466 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=48, currTerm=48.

2024-05-21 01:01:12,466 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=48, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 01:01:12,466 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=49.

2024-05-21 01:01:12,498 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=48, votedFor=nacos1:7848, cost time=27 ms

2024-05-21 01:01:12,499 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=50, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-21 01:01:12,470 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,522 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=50, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 01:01:12,557 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=51, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:01:12,560 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,562 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:01:12,568 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:01:12,564 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:01:12,589 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=48, currTerm=48.

2024-05-21 01:01:12,625 INFO onLeaderStart: term=51.

2024-05-21 01:01:12,653 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:01:12,656 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=48, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:01:12,660 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:01:12,664 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:01:12,687 INFO onLeaderStart: term=48.

2024-05-21 01:18:18,594 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=51, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:19,361 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:18:19,353 INFO Node <naming_persistent_service_v2/nacos2:7848> term 48 start preVote.

2024-05-21 01:18:19,432 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=10, type=Follower] is going to quit

2024-05-21 01:18:19,460 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=9, type=Follower] is going to quit

2024-05-21 01:18:19,357 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:18:19,326 INFO Node <naming_service_metadata/nacos2:7848> term 50 start preVote.

2024-05-21 01:18:19,434 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:19,470 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=48, term=48], lastLogId=LogId [index=48, term=48].

2024-05-21 01:18:19,508 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=48, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:19,512 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:18:19,549 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=50], lastLogId=LogId [index=49, term=50].

2024-05-21 01:18:19,553 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:19,531 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=51, term=51], lastLogId=LogId [index=51, term=51].

2024-05-21 01:18:19,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:18:19,598 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=47, lastLogIncluded=0, lastLogIndex=47, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:18:19,624 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=49, currTerm=48, granted=true, requestLastLogId=LogId [index=47, term=48], lastLogId=LogId [index=47, term=48].

2024-05-21 01:18:19,621 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,641 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,661 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=50, granted=false.

2024-05-21 01:18:19,642 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=51, term=51], lastLogId=LogId [index=51, term=51].

2024-05-21 01:18:19,664 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=50, granted=true.

2024-05-21 01:18:19,665 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=50.

2024-05-21 01:18:19,667 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=50, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,668 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=48, granted=true.

2024-05-21 01:18:19,674 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=48.

2024-05-21 01:18:19,678 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=48, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:19,683 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,700 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=49, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 01:18:19,701 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=48.

2024-05-21 01:18:19,700 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=51, votedFor=nacos2:7848, cost time=29 ms

2024-05-21 01:18:19,702 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,705 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:19,724 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=49, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 01:18:19,731 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:18:19,741 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=49, currTerm=49.

2024-05-21 01:18:19,747 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=51, currTerm=51.

2024-05-21 01:18:19,805 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=49, votedFor=nacos3:7848, cost time=79 ms

2024-05-21 01:18:19,805 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=52, votedFor=0.0.0.0:0, cost time=73 ms

2024-05-21 01:18:19,807 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=49, currTerm=49.

2024-05-21 01:18:19,809 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,807 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:19,820 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=52, votedFor=nacos3:7848, cost time=11 ms

2024-05-21 01:18:19,941 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=51, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:19,949 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:18:19,946 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=49, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:19,953 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:18:19,957 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:19,958 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:19,981 INFO onLeaderStart: term=49.

2024-05-21 01:18:20,010 INFO onLeaderStart: term=51.

2024-05-21 01:18:43,888 INFO Node <naming_persistent_service/nacos2:7848> term 52 start preVote.

2024-05-21 01:18:43,887 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:18:43,917 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=51, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:43,935 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:18:43,928 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=49, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:18:43,922 INFO Node <naming_instance_metadata/nacos2:7848> term 49 start preVote.

2024-05-21 01:18:43,965 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:43,963 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:18:43,966 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=11, type=Follower] is going to quit

2024-05-21 01:18:44,075 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=12, type=Follower] is going to quit

2024-05-21 01:18:44,065 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=7, type=Follower] is going to quit

2024-05-21 01:18:44,186 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=49, granted=true.

2024-05-21 01:18:44,325 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=49.

2024-05-21 01:18:44,113 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=50, currTerm=49, granted=true, requestLastLogId=LogId [index=49, term=49], lastLogId=LogId [index=49, term=49].

2024-05-21 01:18:44,096 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=50, lastLogIncluded=0, lastLogIndex=50, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=8, type=Follower] is going to quit

2024-05-21 01:18:44,318 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=52, granted=true.

2024-05-21 01:18:44,363 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=52.

2024-05-21 01:18:44,326 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=49, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:44,341 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=50, currTerm=49.

2024-05-21 01:18:44,375 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:18:44,397 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:18:44,398 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:18:44,419 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:18:44,471 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=50, votedFor=nacos2:7848, cost time=142 ms

2024-05-21 01:18:44,473 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=50, currTerm=50.

2024-05-21 01:18:44,474 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=50, granted=true, requestLastLogId=LogId [index=48, term=49], lastLogId=LogId [index=48, term=49].

2024-05-21 01:18:44,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=50, votedFor=0.0.0.0:0, cost time=89 ms

2024-05-21 01:18:44,478 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=53, votedFor=nacos2:7848, cost time=70 ms

2024-05-21 01:18:44,478 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=52, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 01:18:44,485 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=52, currTerm=52, granted=true, requestLastLogId=LogId [index=50, term=51], lastLogId=LogId [index=50, term=51].

2024-05-21 01:18:44,503 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=50, votedFor=nacos3:7848, cost time=21 ms

2024-05-21 01:18:44,514 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,490 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,524 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=50, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:44,514 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=50, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=49], lastLogId=LogId [index=49, term=49].

2024-05-21 01:18:44,539 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:18:44,522 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=53, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:18:44,552 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:18:44,543 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:44,568 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:44,571 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:18:44,620 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:18:44,635 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 01:18:44,652 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=52, votedFor=nacos3:7848, cost time=162 ms

2024-05-21 01:18:44,654 INFO onLeaderStart: term=50.

2024-05-21 01:18:44,766 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:18:44,777 INFO onLeaderStart: term=53.

2024-05-21 01:35:32,335 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=50, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:32,338 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=53, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:35:32,431 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 01:35:32,429 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:32,435 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=13, type=Follower] is going to quit

2024-05-21 01:35:32,440 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=53, lastLogIncluded=0, lastLogIndex=53, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=12, type=Follower] is going to quit

2024-05-21 01:35:32,434 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=49, lastLogIncluded=0, lastLogIndex=49, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 01:35:32,434 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:35:32,447 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=53, term=53], lastLogId=LogId [index=53, term=53].

2024-05-21 01:35:32,454 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=51, currTerm=50, granted=true, requestLastLogId=LogId [index=49, term=50], lastLogId=LogId [index=49, term=50].

2024-05-21 01:35:32,662 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,675 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=53, currTerm=52, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:32,682 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=51, currTerm=50.

2024-05-21 01:35:32,685 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:35:32,745 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=51, currTerm=50, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:32,767 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=51, votedFor=0.0.0.0:0, cost time=62 ms

2024-05-21 01:35:32,767 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=54, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 01:35:32,772 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,781 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=51, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 01:35:32,782 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=51, currTerm=51, granted=true, requestLastLogId=LogId [index=49, term=50], lastLogId=LogId [index=49, term=50].

2024-05-21 01:35:32,785 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=54, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 01:35:32,789 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=54, currTerm=54, granted=true, requestLastLogId=LogId [index=53, term=53], lastLogId=LogId [index=53, term=53].

2024-05-21 01:35:32,827 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=52.

2024-05-21 01:35:32,829 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:32,838 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=51, currTerm=50.

2024-05-21 01:35:32,840 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=50, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:32,851 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=53, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 01:35:32,857 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=51, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 01:35:32,877 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=51, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 01:35:32,877 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=53, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 01:35:32,891 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,927 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:32,962 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:35:49,381 INFO Node <naming_persistent_service/nacos2:7848> term 54 start preVote.

2024-05-21 01:35:49,406 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:35:49,395 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:49,488 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:35:49,434 INFO Node <naming_persistent_service_v2/nacos2:7848> term 51 start preVote.

2024-05-21 01:35:49,473 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:35:49,481 INFO Node <naming_instance_metadata/nacos2:7848> term 51 start preVote.

2024-05-21 01:35:49,455 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:35:49,454 INFO Node <naming_service_metadata/nacos2:7848> term 53 start preVote.

2024-05-21 01:35:49,580 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=52, currTerm=51, granted=true, requestLastLogId=LogId [index=51, term=51], lastLogId=LogId [index=51, term=51].

2024-05-21 01:35:49,605 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=52, currTerm=51, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:49,652 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=52, currTerm=51, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:49,739 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:35:49,763 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=51, granted=false.

2024-05-21 01:35:49,793 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=54, granted=false.

2024-05-21 01:35:49,809 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=52, currTerm=51.

2024-05-21 01:35:49,813 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=51, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:35:49,804 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=51, granted=true.

2024-05-21 01:35:49,823 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=51.

2024-05-21 01:35:49,825 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=53, granted=true.

2024-05-21 01:35:49,830 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=53.

2024-05-21 01:35:49,829 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=51, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:49,832 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:49,837 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=52, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-21 01:35:49,859 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=54, votedFor=nacos2:7848, cost time=21 ms

2024-05-21 01:35:49,862 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=54.

2024-05-21 01:35:49,870 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=52, votedFor=nacos2:7848, cost time=32 ms

2024-05-21 01:35:49,876 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:35:49,878 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=52, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 01:35:49,895 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=51, currTerm=52.

2024-05-21 01:35:49,898 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:35:49,903 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=51, currTerm=52.

2024-05-21 01:35:49,903 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=54.

2024-05-21 01:35:49,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:35:49,978 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=52, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:49,986 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:35:50,001 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:50,010 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=55, votedFor=nacos2:7848, cost time=83 ms

2024-05-21 01:35:50,014 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:35:50,017 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=55.

2024-05-21 01:35:50,077 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=55, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:35:50,083 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:35:50,094 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:35:50,097 INFO onLeaderStart: term=52.

2024-05-21 01:35:50,121 INFO onLeaderStart: term=55.

2024-05-21 01:36:10,138 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=55, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:36:10,128 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=52, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:36:10,167 INFO Node <naming_persistent_service_v2/nacos2:7848> term 52 start preVote.

2024-05-21 01:36:10,186 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:36:10,182 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:36:10,211 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=14, type=Follower] is going to quit

2024-05-21 01:36:10,245 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=51, lastLogIncluded=0, lastLogIndex=51, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=13, type=Follower] is going to quit

2024-05-21 01:36:10,247 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,184 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:36:10,177 INFO Node <naming_service_metadata/nacos2:7848> term 54 start preVote.

2024-05-21 01:36:10,226 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=14, type=Follower] is going to quit

2024-05-21 01:36:10,224 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=52, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:36:10,317 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=52.

2024-05-21 01:36:10,321 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=52, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,321 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=55, lastLogIncluded=0, lastLogIndex=55, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=15, type=Follower] is going to quit

2024-05-21 01:36:10,336 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,338 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,321 INFO Node <naming_service_metadata/nacos2:7848> term 54 start preVote.

2024-05-21 01:36:10,336 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=53, currTerm=52.

2024-05-21 01:36:10,373 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,380 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=53, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 01:36:10,381 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=53, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-21 01:36:10,383 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=53, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,394 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=53, currTerm=53.

2024-05-21 01:36:10,389 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 01:36:10,389 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=53, granted=true, requestLastLogId=LogId [index=52, term=52], lastLogId=LogId [index=52, term=52].

2024-05-21 01:36:10,402 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 01:36:10,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=53, votedFor=nacos1:7848, cost time=25 ms

2024-05-21 01:36:10,443 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=53, currTerm=53, granted=true, requestLastLogId=LogId [index=51, term=52], lastLogId=LogId [index=51, term=52].

2024-05-21 01:36:10,445 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=53, votedFor=nacos1:7848, cost time=38 ms

2024-05-21 01:36:10,435 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=56, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 01:36:10,443 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,445 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:36:10,501 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=54.

2024-05-21 01:36:10,485 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=52, currTerm=53.

2024-05-21 01:36:10,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=56, votedFor=nacos3:7848, cost time=10 ms

2024-05-21 01:36:10,520 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=55, votedFor=nacos2:7848, cost time=9 ms

2024-05-21 01:36:10,521 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,525 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,548 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:36:10,552 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 01:36:10,556 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=52, currTerm=53.

2024-05-21 01:36:10,570 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=55, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 01:36:10,597 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 01:36:10,601 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 01:36:10,605 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 01:36:10,616 INFO onLeaderStart: term=55.

2024-05-21 01:52:54,376 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=55, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 01:52:54,546 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:52:54,537 INFO Node <naming_instance_metadata/nacos2:7848> term 53 start preVote.

2024-05-21 01:52:54,376 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=57, currTerm=56, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:52:54,645 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=54, currTerm=53, because the leader nacos1:7848's lease is still valid.

2024-05-21 01:52:54,652 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 01:52:54,646 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 01:52:54,699 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=57, currTerm=56.

2024-05-21 01:52:54,655 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:52:54,640 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=54, currTerm=53.

2024-05-21 01:52:54,709 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=53, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:52:54,655 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=9, type=Follower] is going to quit

2024-05-21 01:52:54,726 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=54, lastLogIncluded=0, lastLogIndex=54, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=10, type=Follower] is going to quit

2024-05-21 01:52:54,707 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:52:54,765 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=54, votedFor=0.0.0.0:0, cost time=61 ms

2024-05-21 01:52:54,765 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=54, votedFor=0.0.0.0:0, cost time=58 ms

2024-05-21 01:52:54,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=57, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-21 01:52:54,779 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 01:52:54,789 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 01:52:54,798 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=56, currTerm=55.

2024-05-21 01:52:54,800 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=54, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 01:52:54,811 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=54, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 01:52:54,826 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=53, currTerm=54.

2024-05-21 01:52:54,842 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=57, votedFor=nacos1:7848, cost time=54 ms

2024-05-21 01:52:54,839 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=56, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-21 01:52:54,832 WARN Node <naming_instance_metadata/nacos2:7848> raise term 54 when get lastLogId.

2024-05-21 01:52:54,882 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=54, currTerm=54, granted=true, requestLastLogId=LogId [index=52, term=53], lastLogId=LogId [index=52, term=53].

2024-05-21 01:52:54,948 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=56, votedFor=nacos1:7848, cost time=96 ms

2024-05-21 01:54:02,063 INFO Node <naming_persistent_service/nacos2:7848> term 57 start preVote.

2024-05-21 01:54:02,107 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:54:02,090 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 01:54:02,101 INFO Node <naming_service_metadata/nacos2:7848> term 56 start preVote.

2024-05-21 01:54:02,093 INFO Node <naming_persistent_service_v2/nacos2:7848> term 54 start preVote.

2024-05-21 01:54:02,118 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 01:54:02,155 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=57, currTerm=56, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 01:54:02,273 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 01:54:02,285 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=57, currTerm=56.

2024-05-21 01:54:02,298 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:54:02,342 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=57, granted=false.

2024-05-21 01:54:02,363 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=55, currTerm=54, because the leader nacos3:7848's lease is still valid.

2024-05-21 01:54:02,411 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=57.

2024-05-21 01:54:02,417 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=54, granted=true.

2024-05-21 01:54:02,430 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=54.

2024-05-21 01:54:02,437 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 01:54:02,433 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=57, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:54:02,509 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=57, votedFor=0.0.0.0:0, cost time=220 ms

2024-05-21 01:54:02,513 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=56, currTerm=57.

2024-05-21 01:54:02,520 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=56, currTerm=57.

2024-05-21 01:54:02,543 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=55, votedFor=nacos2:7848, cost time=102 ms

2024-05-21 01:54:02,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=58, votedFor=0.0.0.0:0, cost time=164 ms

2024-05-21 01:54:02,587 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=57, currTerm=58.

2024-05-21 01:54:02,594 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 01:54:02,602 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=57, votedFor=nacos3:7848, cost time=66 ms

2024-05-21 01:54:02,604 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=56, currTerm=57.

2024-05-21 01:54:02,611 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=55.

2024-05-21 01:54:02,616 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=58, votedFor=nacos3:7848, cost time=24 ms

2024-05-21 01:54:02,770 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=55, currTerm=54.

2024-05-21 01:54:02,798 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=54, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 01:54:02,817 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=55, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-21 01:54:02,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=55, votedFor=nacos1:7848, cost time=14 ms

2024-05-21 02:00:31,412 INFO Node <naming_instance_metadata/nacos2:7848> term 55 start preVote.

2024-05-21 02:00:31,422 INFO Node <naming_persistent_service_v2/nacos2:7848> term 55 start preVote.

2024-05-21 02:00:31,424 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:00:31,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:00:31,440 INFO Node <naming_service_metadata/nacos2:7848> term 57 start preVote.

2024-05-21 02:00:31,446 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:00:31,463 INFO Node <naming_instance_metadata/nacos2:7848> term 55 start preVote.

2024-05-21 02:00:31,466 INFO Node <naming_persistent_service/nacos2:7848> term 58 start preVote.

2024-05-21 02:00:31,470 INFO Node <naming_persistent_service_v2/nacos2:7848> term 55 start preVote.

2024-05-21 02:00:31,468 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:00:31,506 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=54, term=55], lastLogId=LogId [index=54, term=55].

2024-05-21 02:00:31,744 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 02:00:31,775 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=56, currTerm=55, granted=true, requestLastLogId=LogId [index=55, term=55], lastLogId=LogId [index=55, term=55].

2024-05-21 02:00:31,800 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=56, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-21 02:00:31,845 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=56, votedFor=nacos3:7848, cost time=29 ms

2024-05-21 02:00:31,849 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:31,857 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=58, granted=true.

2024-05-21 02:00:31,858 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=58.

2024-05-21 02:00:31,862 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=56, currTerm=55.

2024-05-21 02:00:31,869 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:00:31,877 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=55, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:00:31,887 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=59, votedFor=nacos2:7848, cost time=23 ms

2024-05-21 02:00:31,890 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:00:31,901 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=57, granted=true.

2024-05-21 02:00:31,902 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 02:00:31,906 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=57.

2024-05-21 02:00:31,906 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=56, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 02:00:31,907 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 02:00:31,908 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=57, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:00:31,908 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:00:31,925 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=56, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 02:00:31,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=58, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 02:00:31,929 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 02:00:31,962 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=55, currTerm=56.

2024-05-21 02:00:32,028 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=58, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:00:32,033 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:00:32,035 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=59, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:00:32,040 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:00:32,046 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:00:32,049 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:00:32,074 INFO onLeaderStart: term=59.

2024-05-21 02:00:32,088 INFO onLeaderStart: term=58.

2024-05-21 02:00:32,690 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=58, currTerm=58, because the leader nacos2:7848's lease is still valid.

2024-05-21 02:00:32,810 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:32,859 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:00:32,869 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:32,878 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:00:32,880 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:00:32,900 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=55, currTerm=56.

2024-05-21 02:16:46,882 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=59, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:16:46,907 INFO Node <naming_instance_metadata/nacos2:7848> term 56 start preVote.

2024-05-21 02:16:47,009 INFO Node <naming_instance_metadata/nacos2:7848> term 56 start preVote.

2024-05-21 02:16:46,909 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:16:46,933 INFO Node <naming_persistent_service_v2/nacos2:7848> term 56 start preVote.

2024-05-21 02:16:46,933 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:16:47,059 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:16:47,039 INFO Node <naming_persistent_service_v2/nacos2:7848> term 56 start preVote.

2024-05-21 02:16:46,885 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=58, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:16:47,054 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=16, type=Follower] is going to quit

2024-05-21 02:16:47,082 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=11, type=Follower] is going to quit

2024-05-21 02:16:47,078 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:16:47,092 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=12, type=Follower] is going to quit

2024-05-21 02:16:47,097 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:16:47,098 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=17, type=Follower] is going to quit

2024-05-21 02:16:47,136 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:16:47,136 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=59, term=59], lastLogId=LogId [index=59, term=59].

2024-05-21 02:16:47,191 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,215 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=60, currTerm=59.

2024-05-21 02:16:47,219 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=58.

2024-05-21 02:16:47,191 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,215 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=56, granted=true.

2024-05-21 02:16:47,243 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=56.

2024-05-21 02:16:47,189 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,247 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:16:47,220 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=56, granted=true.

2024-05-21 02:16:47,251 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=56.

2024-05-21 02:16:47,253 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=56, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:16:47,256 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=59, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 02:16:47,266 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=60, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 02:16:47,432 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=57, votedFor=nacos2:7848, cost time=158 ms

2024-05-21 02:16:47,433 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=57, votedFor=nacos2:7848, cost time=181 ms

2024-05-21 02:16:47,438 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=60, votedFor=nacos3:7848, cost time=158 ms

2024-05-21 02:16:47,437 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=59, votedFor=nacos3:7848, cost time=144 ms

2024-05-21 02:16:47,439 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,455 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=55, term=56], lastLogId=LogId [index=55, term=56].

2024-05-21 02:16:47,460 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=57, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=56], lastLogId=LogId [index=56, term=56].

2024-05-21 02:16:47,458 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,475 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=57, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:16:47,483 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:16:47,465 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:16:47,494 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,501 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:16:47,515 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:16:47,529 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 02:16:47,530 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 02:16:47,535 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=57, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:16:47,542 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:16:47,554 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=59, currTerm=59.

2024-05-21 02:16:47,583 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:16:47,584 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:16:47,592 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:16:47,605 INFO onLeaderStart: term=57.

2024-05-21 02:16:47,612 INFO onLeaderStart: term=57.

2024-05-21 02:33:05,947 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=57, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:05,977 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=57, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 02:33:06,009 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:06,029 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=13, type=Follower] is going to quit

2024-05-21 02:33:06,023 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 02:33:06,141 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 02:33:06,190 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=15, type=Follower] is going to quit

2024-05-21 02:33:06,202 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=57, lastLogIncluded=0, lastLogIndex=57, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=14, type=Follower] is going to quit

2024-05-21 02:33:06,247 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 02:33:06,202 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:33:06,284 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=57, term=57], lastLogId=LogId [index=57, term=57].

2024-05-21 02:33:06,293 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=56, lastLogIncluded=0, lastLogIndex=56, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=16, type=Follower] already destroyed, ignore error code: 1010

2024-05-21 02:33:06,299 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=60, currTerm=59, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:33:06,304 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=61, currTerm=60, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:33:06,338 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=60, currTerm=59.

2024-05-21 02:33:06,301 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=58, currTerm=57, granted=true, requestLastLogId=LogId [index=56, term=57], lastLogId=LogId [index=56, term=57].

2024-05-21 02:33:06,277 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,324 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,356 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:06,358 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,385 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=58, currTerm=57.

2024-05-21 02:33:06,397 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=61, currTerm=60.

2024-05-21 02:33:06,379 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,409 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=60, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:06,412 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=58, currTerm=57.

2024-05-21 02:33:06,440 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=58, votedFor=0.0.0.0:0, cost time=52 ms

2024-05-21 02:33:06,441 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=60, votedFor=0.0.0.0:0, cost time=96 ms

2024-05-21 02:33:06,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=61, votedFor=0.0.0.0:0, cost time=61 ms

2024-05-21 02:33:06,475 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=58, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-21 02:33:06,510 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=58, votedFor=nacos1:7848, cost time=37 ms

2024-05-21 02:33:06,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=58, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 02:33:06,521 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=58.

2024-05-21 02:33:06,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=60, votedFor=nacos1:7848, cost time=36 ms

2024-05-21 02:33:06,526 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=58, currTerm=58.

2024-05-21 02:33:06,521 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:06,531 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=61, votedFor=nacos1:7848, cost time=56 ms

2024-05-21 02:33:06,523 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 02:33:30,152 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=58, term=58], lastLogId=LogId [index=58, term=58].

2024-05-21 02:33:30,198 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=59, currTerm=58, granted=true, requestLastLogId=LogId [index=57, term=58], lastLogId=LogId [index=57, term=58].

2024-05-21 02:33:30,211 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=62, currTerm=61, granted=true, requestLastLogId=LogId [index=61, term=61], lastLogId=LogId [index=61, term=61].

2024-05-21 02:33:30,216 INFO Node <naming_instance_metadata/nacos2:7848> term 58 start preVote.

2024-05-21 02:33:30,230 INFO Node <naming_persistent_service/nacos2:7848> term 61 start preVote.

2024-05-21 02:33:30,227 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:30,234 INFO Node <naming_service_metadata/nacos2:7848> term 60 start preVote.

2024-05-21 02:33:30,352 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=58.

2024-05-21 02:33:30,414 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=62, currTerm=61.

2024-05-21 02:33:30,423 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:30,431 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:30,394 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=61, currTerm=60, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 02:33:30,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=60, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 02:33:30,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=59, votedFor=0.0.0.0:0, cost time=91 ms

2024-05-21 02:33:30,495 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=62, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 02:33:30,501 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=58, currTerm=59.

2024-05-21 02:33:30,507 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=59, currTerm=58.

2024-05-21 02:33:30,524 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=58, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:30,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=62, votedFor=nacos3:7848, cost time=21 ms

2024-05-21 02:33:30,544 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=61, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:30,549 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=59, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 02:33:30,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=59, votedFor=nacos3:7848, cost time=34 ms

2024-05-21 02:33:30,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=59, votedFor=nacos3:7848, cost time=37 ms

2024-05-21 02:33:30,612 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 02:33:30,619 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=60, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:33:30,627 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=61, currTerm=62.

2024-05-21 02:33:30,633 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=58, currTerm=59.

2024-05-21 02:33:30,637 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=58, currTerm=59.

2024-05-21 02:33:30,657 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=61, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 02:33:30,718 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=61, currTerm=62.

2024-05-21 02:33:30,749 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=79 ms

2024-05-21 02:33:30,757 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=60, currTerm=61.

2024-05-21 02:33:30,808 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=60, currTerm=61.

2024-05-21 02:50:08,242 INFO Node <naming_persistent_service_v2/nacos2:7848> term 59 start preVote.

2024-05-21 02:50:08,254 INFO Node <naming_service_metadata/nacos2:7848> term 61 start preVote.

2024-05-21 02:50:08,254 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,810 INFO Node <naming_service_metadata/nacos2:7848> term 61 start preVote.

2024-05-21 02:50:08,251 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,249 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 02:50:08,244 INFO Node <naming_instance_metadata/nacos2:7848> term 59 start preVote.

2024-05-21 02:50:09,006 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=62, currTerm=61, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:50:09,012 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=63, currTerm=62, because the leader nacos3:7848's lease is still valid.

2024-05-21 02:50:09,014 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=59, granted=false.

2024-05-21 02:50:09,017 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=60, currTerm=59, granted=true, requestLastLogId=LogId [index=58, term=59], lastLogId=LogId [index=58, term=59].

2024-05-21 02:50:09,036 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=59, granted=true.

2024-05-21 02:50:09,039 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=59.

2024-05-21 02:50:09,043 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:50:09,074 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=61, granted=true.

2024-05-21 02:50:09,077 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=61.

2024-05-21 02:50:09,080 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:50:09,090 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=60, votedFor=nacos2:7848, cost time=44 ms

2024-05-21 02:50:09,167 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=62, votedFor=nacos2:7848, cost time=82 ms

2024-05-21 02:50:09,172 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:50:09,173 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=59, granted=true.

2024-05-21 02:50:09,188 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=59.

2024-05-21 02:50:09,200 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=59, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 02:50:09,206 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:50:09,185 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:50:09,214 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 02:50:09,216 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=60, currTerm=60.

2024-05-21 02:50:09,230 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=63, currTerm=62.

2024-05-21 02:50:09,243 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=62, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 02:50:09,262 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=60, votedFor=nacos2:7848, cost time=61 ms

2024-05-21 02:50:09,264 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=62, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:50:09,276 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:50:09,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=63, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 02:50:09,285 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=60, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:50:09,314 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:50:09,318 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=60, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 02:50:09,323 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 02:50:09,326 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:50:09,327 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=63, votedFor=nacos1:7848, cost time=17 ms

2024-05-21 02:50:09,330 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:50:09,335 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 02:50:09,340 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:50:09,347 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:50:09,347 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 02:50:09,391 INFO onLeaderStart: term=60.

2024-05-21 02:50:09,397 INFO onLeaderStart: term=60.

2024-05-21 02:50:09,399 INFO onLeaderStart: term=62.

2024-05-21 03:01:25,833 INFO Node <naming_persistent_service/nacos2:7848> term 63 start preVote.

2024-05-21 03:01:25,905 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=62, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:01:25,864 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:01:25,829 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=60, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:01:26,206 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:01:25,834 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=60, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:01:26,228 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=15, type=Follower] is going to quit

2024-05-21 03:01:26,225 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=17, type=Follower] is going to quit

2024-05-21 03:01:26,249 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=59, lastLogIncluded=0, lastLogIndex=59, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=18, type=Follower] is going to quit

2024-05-21 03:01:26,140 INFO Node <naming_persistent_service/nacos2:7848> term 63 start preVote.

2024-05-21 03:01:26,215 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:01:26,233 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=13, type=Follower] is going to quit

2024-05-21 03:01:26,263 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=14, type=Follower] is going to quit

2024-05-21 03:01:26,231 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:01:26,241 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=60, lastLogIncluded=0, lastLogIndex=60, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower] is going to quit

2024-05-21 03:01:26,309 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=61, currTerm=60, granted=true, requestLastLogId=LogId [index=60, term=60], lastLogId=LogId [index=60, term=60].

2024-05-21 03:01:26,313 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:01:26,301 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=61, currTerm=60, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 03:01:26,326 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:01:26,378 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=63, granted=true.

2024-05-21 03:01:26,380 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=63.

2024-05-21 03:01:26,393 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,411 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,460 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 03:01:26,467 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:01:26,469 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=64, votedFor=nacos2:7848, cost time=81 ms

2024-05-21 03:01:26,484 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=62.

2024-05-21 03:01:26,493 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=64.

2024-05-21 03:01:26,497 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:01:26,500 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=63, currTerm=64.

2024-05-21 03:01:26,511 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=61, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-21 03:01:26,517 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=61, currTerm=60.

2024-05-21 03:01:26,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=63, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 03:01:26,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=61, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 03:01:26,542 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=60, term=60], lastLogId=LogId [index=60, term=60].

2024-05-21 03:01:26,549 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=61, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 03:01:26,554 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=63, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 03:01:26,632 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,655 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=61, votedFor=nacos3:7848, cost time=125 ms

2024-05-21 03:01:26,686 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=61, currTerm=61, granted=true, requestLastLogId=LogId [index=59, term=60], lastLogId=LogId [index=59, term=60].

2024-05-21 03:01:26,683 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,692 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:01:26,754 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:01:26,762 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:41,891 INFO Node <naming_persistent_service/nacos2:7848> term 64 start preVote.

2024-05-21 03:17:41,898 INFO Node <naming_instance_metadata/nacos2:7848> term 61 start preVote.

2024-05-21 03:17:41,900 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:17:42,235 INFO Node <naming_service_metadata/nacos2:7848> term 63 start preVote.

2024-05-21 03:17:42,245 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:17:41,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:17:42,293 INFO Node <naming_persistent_service/nacos2:7848> term 64 start preVote.

2024-05-21 03:17:42,545 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=62, currTerm=61, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,555 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=62, currTerm=61, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,611 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=62, currTerm=61, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:17:42,612 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=62, currTerm=61.

2024-05-21 03:17:42,621 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:17:42,685 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=62, votedFor=0.0.0.0:0, cost time=67 ms

2024-05-21 03:17:42,696 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=61, granted=true.

2024-05-21 03:17:42,701 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=64, granted=true.

2024-05-21 03:17:42,703 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=61.

2024-05-21 03:17:42,709 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=61, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:17:42,705 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=62, votedFor=nacos1:7848, cost time=15 ms

2024-05-21 03:17:42,706 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=64.

2024-05-21 03:17:42,716 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:17:42,702 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=63, granted=true.

2024-05-21 03:17:42,729 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=63.

2024-05-21 03:17:42,775 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=65, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 03:17:42,783 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=62, votedFor=nacos2:7848, cost time=58 ms

2024-05-21 03:17:42,787 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:17:42,793 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,812 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=65, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:17:42,807 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=62, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:17:42,846 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:17:42,857 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:17:42,863 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:17:42,871 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:17:42,883 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=64, votedFor=nacos2:7848, cost time=101 ms

2024-05-21 03:17:42,906 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 03:17:42,906 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:17:42,954 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=62, currTerm=62.

2024-05-21 03:17:42,961 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 03:17:42,914 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 03:17:42,918 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:17:42,973 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=64, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:17:42,974 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:17:42,977 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:17:43,006 INFO onLeaderStart: term=65.

2024-05-21 03:17:43,001 INFO onLeaderStart: term=62.

2024-05-21 03:17:42,987 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:17:43,054 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:17:43,073 INFO onLeaderStart: term=64.

2024-05-21 03:33:30,513 INFO Node <naming_persistent_service_v2/nacos2:7848> term 62 start preVote.

2024-05-21 03:33:30,514 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=64], lastLogId=LogId [index=63, term=64].

2024-05-21 03:33:30,707 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=65, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:33:30,517 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:33:30,733 INFO Node <naming_persistent_service_v2/nacos2:7848> term 62 start preVote.

2024-05-21 03:33:30,757 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=64, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:33:30,638 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=62, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:33:30,816 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:33:30,818 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=17, type=Follower] is going to quit

2024-05-21 03:33:30,850 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=62, term=62], lastLogId=LogId [index=62, term=62].

2024-05-21 03:33:30,821 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=18, type=Follower] is going to quit

2024-05-21 03:33:30,874 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=19, type=Follower] is going to quit

2024-05-21 03:33:30,832 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=20, type=Follower] is going to quit

2024-05-21 03:33:30,834 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:33:30,835 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:33:30,908 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 03:33:30,852 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=16, type=Follower] is going to quit

2024-05-21 03:33:30,938 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=61, lastLogIncluded=0, lastLogIndex=61, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 03:33:31,004 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=64], lastLogId=LogId [index=63, term=64].

2024-05-21 03:33:31,017 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=62, granted=false.

2024-05-21 03:33:31,026 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,018 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:33:31,042 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,018 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=65, currTerm=64, granted=true, requestLastLogId=LogId [index=63, term=64], lastLogId=LogId [index=63, term=64].

2024-05-21 03:33:31,028 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=62, granted=true.

2024-05-21 03:33:31,053 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=62.

2024-05-21 03:33:31,044 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=63, currTerm=62, granted=true, requestLastLogId=LogId [index=61, term=62], lastLogId=LogId [index=61, term=62].

2024-05-21 03:33:31,016 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,019 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,050 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,050 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 03:33:31,113 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,055 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,056 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,055 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=62, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:33:31,111 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=65, currTerm=64.

2024-05-21 03:33:31,115 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=63, currTerm=62.

2024-05-21 03:33:31,129 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=65.

2024-05-21 03:33:31,162 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=66, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 03:33:31,162 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=63, votedFor=nacos2:7848, cost time=45 ms

2024-05-21 03:33:31,163 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=65, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 03:33:31,165 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=63, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-21 03:33:31,167 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,166 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=65, currTerm=65.

2024-05-21 03:33:31,170 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,183 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=63, votedFor=nacos1:7848, cost time=17 ms

2024-05-21 03:33:31,186 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=63.

2024-05-21 03:33:31,170 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:33:31,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=66, votedFor=nacos3:7848, cost time=19 ms

2024-05-21 03:33:31,190 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=63, currTerm=63.

2024-05-21 03:33:31,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=65, votedFor=nacos3:7848, cost time=21 ms

2024-05-21 03:33:31,222 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:33:31,312 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=63, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:33:31,316 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:33:31,322 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:33:31,367 INFO onLeaderStart: term=63.

2024-05-21 03:34:36,725 INFO Node <naming_instance_metadata/nacos2:7848> term 63 start preVote.

2024-05-21 03:34:36,727 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=63, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 03:34:36,723 INFO Node <naming_persistent_service/nacos2:7848> term 66 start preVote.

2024-05-21 03:34:36,361 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=63, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:34:36,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:34:36,763 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=62, term=63], lastLogId=LogId [index=62, term=63].

2024-05-21 03:34:36,784 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=17, type=Follower] is going to quit

2024-05-21 03:34:36,775 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:34:36,795 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=63, lastLogIncluded=0, lastLogIndex=63, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=18, type=Follower] is going to quit

2024-05-21 03:34:36,827 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=66, granted=true.

2024-05-21 03:34:36,830 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=66.

2024-05-21 03:34:36,836 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=63, granted=true.

2024-05-21 03:34:36,841 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=63.

2024-05-21 03:34:36,828 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:36,828 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:34:36,838 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:34:36,922 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=64, votedFor=nacos2:7848, cost time=72 ms

2024-05-21 03:34:36,927 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=67, votedFor=nacos2:7848, cost time=82 ms

2024-05-21 03:34:36,951 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=64.

2024-05-21 03:34:36,985 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=63, currTerm=64.

2024-05-21 03:34:36,985 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:34:36,985 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:36,988 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=64, currTerm=63, granted=true, requestLastLogId=LogId [index=63, term=63], lastLogId=LogId [index=63, term=63].

2024-05-21 03:34:37,020 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:34:37,041 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=64, currTerm=63.

2024-05-21 03:34:37,066 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=64, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-21 03:34:37,080 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=67, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:34:37,088 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:34:37,091 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=64, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 03:34:37,109 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=64, currTerm=64.

2024-05-21 03:34:37,124 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:34:37,141 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:34:37,175 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:34:37,218 INFO onLeaderStart: term=67.

2024-05-21 03:34:41,772 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=64, term=65], lastLogId=LogId [index=64, term=65].

2024-05-21 03:34:41,785 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=65.

2024-05-21 03:34:41,785 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=65, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:34:41,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=66, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-21 03:34:41,797 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=66, votedFor=nacos3:7848, cost time=5 ms

2024-05-21 03:50:56,640 INFO Node <naming_service_metadata/nacos2:7848> term 66 start preVote.

2024-05-21 03:50:56,646 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:50:56,645 INFO Node <naming_instance_metadata/nacos2:7848> term 64 start preVote.

2024-05-21 03:50:56,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:50:56,680 INFO Node <naming_persistent_service_v2/nacos2:7848> term 64 start preVote.

2024-05-21 03:50:56,685 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 03:50:56,690 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=67, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 03:50:56,771 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=20, type=Follower] is going to quit

2024-05-21 03:50:56,781 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=21, type=Follower] is going to quit

2024-05-21 03:50:56,778 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 03:50:56,788 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 03:50:56,845 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=64, granted=true.

2024-05-21 03:50:56,856 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=64.

2024-05-21 03:50:56,887 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:56,940 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=65, votedFor=nacos2:7848, cost time=69 ms

2024-05-21 03:50:57,109 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=67.

2024-05-21 03:50:57,135 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=64, granted=false.

2024-05-21 03:50:57,154 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=68, votedFor=0.0.0.0:0, cost time=44 ms

2024-05-21 03:50:57,160 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 03:50:57,161 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=67, currTerm=66, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:50:57,173 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=64, granted=true.

2024-05-21 03:50:57,236 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=64.

2024-05-21 03:50:57,157 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,182 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=65, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:50:57,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=68, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 03:50:57,237 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=67, currTerm=66, because the leader nacos3:7848's lease is still valid.

2024-05-21 03:50:57,262 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=67, currTerm=66.

2024-05-21 03:50:57,248 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=64, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 03:50:57,257 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:50:57,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=65, votedFor=nacos2:7848, cost time=29 ms

2024-05-21 03:50:57,261 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 03:50:57,282 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 03:50:57,284 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 03:50:57,298 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:50:57,312 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=67, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 03:50:57,301 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 03:50:57,328 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=65, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 03:50:57,345 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 03:50:57,350 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=67, votedFor=nacos1:7848, cost time=20 ms

2024-05-21 03:50:57,359 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=66, currTerm=67.

2024-05-21 03:50:57,345 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 03:50:57,361 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=66, currTerm=67.

2024-05-21 03:50:57,374 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 03:50:57,383 INFO onLeaderStart: term=65.

2024-05-21 03:50:57,404 INFO onLeaderStart: term=65.

2024-05-21 03:50:57,415 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:02:32,775 INFO Node <naming_service_metadata/nacos2:7848> term 67 start preVote.

2024-05-21 04:02:32,782 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:02:32,776 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=65, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:02:32,824 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=65, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:02:32,828 INFO Node <naming_persistent_service/nacos2:7848> term 68 start preVote.

2024-05-21 04:02:32,863 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:02:32,859 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 04:02:32,864 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:02:32,848 INFO Node <naming_service_metadata/nacos2:7848> term 67 start preVote.

2024-05-21 04:02:32,851 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:02:32,851 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower] is going to quit

2024-05-21 04:02:32,886 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=65, lastLogIncluded=0, lastLogIndex=65, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=20, type=Follower] is going to quit

2024-05-21 04:02:32,879 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=64, lastLogIncluded=0, lastLogIndex=64, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 04:02:32,903 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:02:32,916 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=64, term=65], lastLogId=LogId [index=64, term=65].

2024-05-21 04:02:32,916 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:32,918 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:02:32,918 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=64, term=65], lastLogId=LogId [index=64, term=65].

2024-05-21 04:02:32,933 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=66, currTerm=65.

2024-05-21 04:02:32,934 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=67, granted=true.

2024-05-21 04:02:32,958 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=67.

2024-05-21 04:02:32,979 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=65, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:33,022 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=65.

2024-05-21 04:02:33,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=66, votedFor=0.0.0.0:0, cost time=83 ms

2024-05-21 04:02:33,102 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=66, currTerm=66.

2024-05-21 04:02:33,111 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=66, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 04:02:32,996 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:02:33,124 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=68.

2024-05-21 04:02:33,128 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:02:33,136 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=68, votedFor=nacos2:7848, cost time=146 ms

2024-05-21 04:02:33,137 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,138 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=66, votedFor=nacos1:7848, cost time=27 ms

2024-05-21 04:02:33,143 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=69, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 04:02:33,146 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=66, votedFor=nacos3:7848, cost time=25 ms

2024-05-21 04:02:33,157 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=66, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:33,148 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:02:33,161 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=68.

2024-05-21 04:02:33,153 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=68, currTerm=69.

2024-05-21 04:02:33,161 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=66, currTerm=66.

2024-05-21 04:02:33,162 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 04:02:33,168 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 04:02:33,163 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=68, currTerm=69.

2024-05-21 04:02:33,167 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=66, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=65], lastLogId=LogId [index=65, term=65].

2024-05-21 04:02:33,183 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 04:02:33,180 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,176 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,210 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,212 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,223 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:02:33,216 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=69, votedFor=nacos1:7848, cost time=34 ms

2024-05-21 04:02:33,206 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:18:47,790 INFO Node <naming_instance_metadata/nacos2:7848> term 66 start preVote.

2024-05-21 04:18:47,793 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:18:47,781 INFO Node <naming_persistent_service_v2/nacos2:7848> term 66 start preVote.

2024-05-21 04:18:47,793 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:18:47,836 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:18:47,826 INFO Node <naming_service_metadata/nacos2:7848> term 68 start preVote.

2024-05-21 04:18:47,862 INFO Node <naming_service_metadata/nacos2:7848> term 68 start preVote.

2024-05-21 04:18:47,876 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:18:47,875 INFO Node <naming_persistent_service/nacos2:7848> term 69 start preVote.

2024-05-21 04:18:47,939 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:18:48,026 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=67, currTerm=66, granted=true, requestLastLogId=LogId [index=65, term=66], lastLogId=LogId [index=65, term=66].

2024-05-21 04:18:48,045 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=69, granted=false.

2024-05-21 04:18:48,311 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=66, granted=false.

2024-05-21 04:18:48,295 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:18:48,319 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=68, granted=true.

2024-05-21 04:18:48,316 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=67, currTerm=66.

2024-05-21 04:18:48,327 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=66, granted=true.

2024-05-21 04:18:48,365 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=66.

2024-05-21 04:18:48,348 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:18:48,357 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=68.

2024-05-21 04:18:48,368 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=66, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:18:48,380 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:18:48,385 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=70, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-21 04:18:48,430 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=70, votedFor=nacos3:7848, cost time=36 ms

2024-05-21 04:18:48,436 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=67, votedFor=0.0.0.0:0, cost time=76 ms

2024-05-21 04:18:48,436 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=69, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 04:18:48,439 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:18:48,441 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=69, currTerm=70.

2024-05-21 04:18:48,444 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=67, votedFor=nacos2:7848, cost time=56 ms

2024-05-21 04:18:48,446 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:18:48,470 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:18:48,477 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=69, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:18:48,484 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:18:48,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=67, votedFor=nacos3:7848, cost time=45 ms

2024-05-21 04:18:48,489 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=66, currTerm=67.

2024-05-21 04:18:48,492 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:18:48,494 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=66, currTerm=67.

2024-05-21 04:18:48,497 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=67, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:18:48,501 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:18:48,503 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:18:48,507 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:18:48,519 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:18:48,538 INFO onLeaderStart: term=69.

2024-05-21 04:18:48,538 INFO onLeaderStart: term=67.

2024-05-21 04:19:04,115 INFO Node <naming_persistent_service/nacos2:7848> term 70 start preVote.

2024-05-21 04:19:04,121 INFO Node <naming_instance_metadata/nacos2:7848> term 67 start preVote.

2024-05-21 04:19:04,137 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:19:04,146 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:19:04,130 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=69, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:19:04,349 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:19:04,342 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=18, type=Follower] is going to quit

2024-05-21 04:19:04,374 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=68, lastLogIncluded=0, lastLogIndex=68, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=19, type=Follower] is going to quit

2024-05-21 04:19:04,086 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=67, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:19:04,452 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=21, type=Follower] is going to quit

2024-05-21 04:19:04,464 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:19:04,464 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=22, type=Follower] is going to quit

2024-05-21 04:19:04,569 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=68, currTerm=67, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 04:19:04,567 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=67, granted=true.

2024-05-21 04:19:04,578 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=67.

2024-05-21 04:19:04,545 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=70, granted=true.

2024-05-21 04:19:04,585 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=70.

2024-05-21 04:19:04,578 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=69], lastLogId=LogId [index=68, term=69].

2024-05-21 04:19:04,571 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:04,609 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=67, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:19:04,608 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:19:04,568 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:04,642 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:19:04,875 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=71, votedFor=nacos2:7848, cost time=252 ms

2024-05-21 04:19:04,883 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=70, votedFor=0.0.0.0:0, cost time=227 ms

2024-05-21 04:19:04,888 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=68, currTerm=67.

2024-05-21 04:19:04,920 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=71, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 04:19:04,935 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=68, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 04:19:04,935 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:19:04,939 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=68, votedFor=nacos2:7848, cost time=95 ms

2024-05-21 04:19:04,952 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=70, votedFor=nacos3:7848, cost time=61 ms

2024-05-21 04:19:04,956 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:19:04,957 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=71, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:19:04,963 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=66, term=67], lastLogId=LogId [index=66, term=67].

2024-05-21 04:19:04,970 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:19:04,974 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:19:04,978 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=68, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 04:19:04,981 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 04:19:04,988 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=68, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=67], lastLogId=LogId [index=67, term=67].

2024-05-21 04:19:05,028 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=68, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:19:05,035 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:19:05,065 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:19:05,048 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,077 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:19:05,066 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,075 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:19:05,076 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:19:05,109 INFO onLeaderStart: term=71.

2024-05-21 04:19:05,111 INFO onLeaderStart: term=68.

2024-05-21 04:35:58,049 INFO Node <naming_persistent_service_v2/nacos2:7848> term 68 start preVote.

2024-05-21 04:35:58,542 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=68, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:35:58,528 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:35:58,565 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:35:58,527 INFO Node <naming_service_metadata/nacos2:7848> term 70 start preVote.

2024-05-21 04:35:58,564 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=24, type=Follower] is going to quit

2024-05-21 04:35:58,600 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=67, lastLogIncluded=0, lastLogIndex=67, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=25, type=Follower] is going to quit

2024-05-21 04:35:58,342 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=71, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:35:58,053 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:35:58,609 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=69, currTerm=68, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:35:58,612 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=23, type=Follower] is going to quit

2024-05-21 04:35:58,627 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=69, currTerm=68, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:35:58,638 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=23, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 04:35:58,642 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=22, type=Follower] is going to quit

2024-05-21 04:35:58,614 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:35:58,627 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:35:58,645 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term 69, expect=68.

2024-05-21 04:35:58,647 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 04:35:58,678 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=69, currTerm=68, granted=true, requestLastLogId=LogId [index=67, term=68], lastLogId=LogId [index=67, term=68].

2024-05-21 04:35:58,686 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=68.

2024-05-21 04:35:58,679 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 04:35:58,749 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=72, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-21 04:35:58,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=69, votedFor=0.0.0.0:0, cost time=51 ms

2024-05-21 04:35:58,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=72, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 04:35:58,769 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 04:35:58,771 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=69, votedFor=0.0.0.0:0, cost time=92 ms

2024-05-21 04:35:58,804 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=69, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=68], lastLogId=LogId [index=68, term=68].

2024-05-21 04:35:58,808 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=68, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-21 04:35:58,787 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=70, granted=false.

2024-05-21 04:35:58,813 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=69, currTerm=69.

2024-05-21 04:35:58,803 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,815 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=70, granted=true.

2024-05-21 04:35:58,814 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=23, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send1,5,main].

2024-05-21 04:35:58,813 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=69, votedFor=nacos1:7848, cost time=53 ms

2024-05-21 04:35:58,821 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=70.

2024-05-21 04:35:58,827 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:35:58,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=69, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 04:35:58,837 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,847 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,844 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=71, votedFor=nacos2:7848, cost time=25 ms

2024-05-21 04:35:58,852 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=68, currTerm=69.

2024-05-21 04:35:58,869 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:35:58,915 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=71, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:35:58,918 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:35:58,923 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:35:58,932 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 04:35:58,937 INFO onLeaderStart: term=71.

2024-05-21 04:52:18,255 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=71, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 04:52:18,362 INFO Node <naming_instance_metadata/nacos2:7848> term 69 start preVote.

2024-05-21 04:52:18,403 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 04:52:18,370 INFO Node <naming_persistent_service_v2/nacos2:7848> term 69 start preVote.

2024-05-21 04:52:18,348 INFO Node <naming_persistent_service/nacos2:7848> term 72 start preVote.

2024-05-21 04:52:18,377 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:52:18,391 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 04:52:18,390 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=20, type=Follower] is going to quit

2024-05-21 04:52:18,403 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 04:52:18,443 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=70, lastLogIncluded=0, lastLogIndex=70, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=21, type=Follower] is going to quit

2024-05-21 04:52:18,496 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=69, term=69], lastLogId=LogId [index=69, term=69].

2024-05-21 04:52:18,535 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 04:52:18,513 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=70, currTerm=69, granted=true, requestLastLogId=LogId [index=68, term=69], lastLogId=LogId [index=68, term=69].

2024-05-21 04:52:18,595 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=69, granted=true.

2024-05-21 04:52:18,600 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=69.

2024-05-21 04:52:18,722 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 04:52:18,728 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=70, votedFor=nacos2:7848, cost time=123 ms

2024-05-21 04:52:18,731 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=69, currTerm=70.

2024-05-21 04:52:18,735 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=70.

2024-05-21 04:52:18,733 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=73, currTerm=72, because the leader nacos3:7848's lease is still valid.

2024-05-21 04:52:18,733 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=70, currTerm=69.

2024-05-21 04:52:18,746 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=69, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 04:52:18,746 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=72, granted=true.

2024-05-21 04:52:18,754 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=72.

2024-05-21 04:52:18,613 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:18,759 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 04:52:18,799 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=72, votedFor=0.0.0.0:0, cost time=76 ms

2024-05-21 04:52:18,799 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=73, votedFor=nacos2:7848, cost time=34 ms

2024-05-21 04:52:18,801 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=70, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-21 04:52:18,825 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=72, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 04:52:18,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=70, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 04:52:18,839 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=69, currTerm=70.

2024-05-21 04:52:18,834 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 04:52:18,846 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=72, currTerm=72, granted=true, requestLastLogId=LogId [index=70, term=71], lastLogId=LogId [index=70, term=71].

2024-05-21 04:52:18,947 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=73, currTerm=73.

2024-05-21 04:52:18,960 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:52:18,971 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,023 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 04:52:19,086 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=73, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:52:19,089 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=70, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 04:52:19,090 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:52:19,094 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 04:52:19,099 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=69, currTerm=70.

2024-05-21 04:52:19,107 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:52:19,110 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 04:52:19,106 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 04:52:19,155 INFO onLeaderStart: term=70.

2024-05-21 04:52:19,156 INFO onLeaderStart: term=73.

2024-05-21 05:03:37,748 INFO Node <naming_persistent_service_v2/nacos2:7848> term 70 start preVote.

2024-05-21 05:03:37,842 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:03:37,744 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=70, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:03:37,898 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=73, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:03:38,296 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 05:03:37,929 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:03:38,310 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:03:37,900 INFO Node <naming_service_metadata/nacos2:7848> term 72 start preVote.

2024-05-21 05:03:38,325 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=69, lastLogIncluded=0, lastLogIndex=69, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=27, type=Follower] is going to quit

2024-05-21 05:03:38,358 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=71, currTerm=70, granted=true, requestLastLogId=LogId [index=69, term=70], lastLogId=LogId [index=69, term=70].

2024-05-21 05:03:38,314 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=24, type=Follower] is going to quit

2024-05-21 05:03:38,372 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=25, type=Follower] is going to quit

2024-05-21 05:03:38,284 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:03:38,399 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=70, granted=true.

2024-05-21 05:03:38,424 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=70.

2024-05-21 05:03:38,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=70, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:03:38,399 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:03:38,430 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=72, granted=true.

2024-05-21 05:03:38,438 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=72.

2024-05-21 05:03:38,439 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:03:38,446 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=71, currTerm=70.

2024-05-21 05:03:38,463 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,494 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=71, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-21 05:03:38,494 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=71, votedFor=nacos2:7848, cost time=54 ms

2024-05-21 05:03:38,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=73, votedFor=nacos2:7848, cost time=38 ms

2024-05-21 05:03:38,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=71, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 05:03:38,509 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=71, currTerm=71, granted=true, requestLastLogId=LogId [index=70, term=70], lastLogId=LogId [index=70, term=70].

2024-05-21 05:03:38,529 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:03:38,530 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:03:38,544 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=73.

2024-05-21 05:03:38,565 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=71, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:03:38,576 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:03:38,592 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:03:38,606 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=74, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-21 05:03:38,618 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:03:38,621 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=74, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 05:03:38,644 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,647 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=74, currTerm=74.

2024-05-21 05:03:38,647 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:03:38,694 INFO onLeaderStart: term=71.

2024-05-21 05:03:38,702 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=73, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:03:38,706 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:03:38,709 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:03:38,715 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:03:38,720 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:03:38,731 INFO onLeaderStart: term=73.

2024-05-21 05:19:56,914 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=73, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:19:56,894 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=71, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:19:57,022 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=23, type=Follower] is going to quit

2024-05-21 05:19:56,977 INFO Node <naming_instance_metadata/nacos2:7848> term 71 start preVote.

2024-05-21 05:19:56,978 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:19:57,021 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:19:57,029 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:19:57,035 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=23, type=Follower] is going to quit

2024-05-21 05:19:57,037 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=71, lastLogIncluded=0, lastLogIndex=71, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=24, type=Follower] is going to quit

2024-05-21 05:19:57,137 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=72, lastLogIncluded=0, lastLogIndex=72, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=22, type=Follower] is going to quit

2024-05-21 05:19:57,148 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=73], lastLogId=LogId [index=72, term=73].

2024-05-21 05:19:57,156 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=72, currTerm=71, granted=true, requestLastLogId=LogId [index=71, term=71], lastLogId=LogId [index=71, term=71].

2024-05-21 05:19:57,178 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=75, currTerm=74, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:19:57,157 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,211 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,232 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=73], lastLogId=LogId [index=72, term=73].

2024-05-21 05:19:57,218 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,240 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=72, currTerm=71, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:19:57,244 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=72, currTerm=71.

2024-05-21 05:19:57,277 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,311 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=71, granted=true.

2024-05-21 05:19:57,313 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=71.

2024-05-21 05:19:57,314 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=71, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:19:57,314 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:19:57,315 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=74, currTerm=73.

2024-05-21 05:19:57,340 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=72, votedFor=0.0.0.0:0, cost time=75 ms

2024-05-21 05:19:57,350 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=72, votedFor=nacos2:7848, cost time=27 ms

2024-05-21 05:19:57,358 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=72, currTerm=72.

2024-05-21 05:19:57,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=74, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-21 05:19:57,374 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=75, currTerm=74.

2024-05-21 05:19:57,382 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=72, votedFor=nacos3:7848, cost time=37 ms

2024-05-21 05:19:57,379 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:19:57,394 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=74, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 05:19:57,400 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,402 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=74.

2024-05-21 05:19:57,388 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:19:57,418 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=75, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 05:19:57,445 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=75, votedFor=nacos1:7848, cost time=19 ms

2024-05-21 05:19:57,445 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:35:54,264 INFO Node <naming_persistent_service/nacos2:7848> term 75 start preVote.

2024-05-21 05:35:54,266 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:35:54,269 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:35:54,265 INFO Node <naming_service_metadata/nacos2:7848> term 74 start preVote.

2024-05-21 05:35:54,312 INFO Node <naming_instance_metadata/nacos2:7848> term 72 start preVote.

2024-05-21 05:35:54,316 INFO Node <naming_persistent_service_v2/nacos2:7848> term 72 start preVote.

2024-05-21 05:35:54,330 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:35:54,323 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 05:35:54,347 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,381 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=73, currTerm=72, granted=true, requestLastLogId=LogId [index=71, term=72], lastLogId=LogId [index=71, term=72].

2024-05-21 05:35:54,382 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:35:54,447 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 05:35:54,489 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=75, granted=true.

2024-05-21 05:35:54,496 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=75.

2024-05-21 05:35:54,505 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=74, granted=true.

2024-05-21 05:35:54,530 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=74.

2024-05-21 05:35:54,532 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:35:54,536 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=72, granted=true.

2024-05-21 05:35:54,540 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=72.

2024-05-21 05:35:54,553 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=72, granted=true.

2024-05-21 05:35:54,576 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=72.

2024-05-21 05:35:54,586 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=76, votedFor=nacos2:7848, cost time=84 ms

2024-05-21 05:35:54,567 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:35:54,583 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=73, votedFor=nacos2:7848, cost time=35 ms

2024-05-21 05:35:54,583 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=72, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:35:54,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=75, votedFor=nacos2:7848, cost time=53 ms

2024-05-21 05:35:54,615 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=75, currTerm=75.

2024-05-21 05:35:54,625 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=73, currTerm=73, granted=true, requestLastLogId=LogId [index=72, term=72], lastLogId=LogId [index=72, term=72].

2024-05-21 05:35:54,640 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=75, currTerm=76.

2024-05-21 05:35:54,663 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=73, votedFor=nacos2:7848, cost time=80 ms

2024-05-21 05:35:54,747 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=73, currTerm=73.

2024-05-21 05:35:54,758 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=73, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:35:54,795 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,775 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=76, currTerm=76.

2024-05-21 05:35:54,810 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:35:54,800 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:35:54,820 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:35:54,840 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:35:54,901 INFO onLeaderStart: term=73.

2024-05-21 05:35:55,006 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:36:46,974 INFO Node <naming_service_metadata/nacos2:7848> term 75 start preVote.

2024-05-21 05:36:47,248 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:36:47,223 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:36:47,041 INFO Node <naming_instance_metadata/nacos2:7848> term 73 start preVote.

2024-05-21 05:36:46,979 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=73, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:36:47,516 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:36:47,547 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=75, granted=false.

2024-05-21 05:36:47,518 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=25, type=Follower] is going to quit

2024-05-21 05:36:47,555 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=75, granted=true.

2024-05-21 05:36:47,566 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=75.

2024-05-21 05:36:47,549 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=26, type=Follower] is going to quit

2024-05-21 05:36:47,566 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=73, granted=false.

2024-05-21 05:36:47,568 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:36:47,573 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=26, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 05:36:47,588 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,589 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=73, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,584 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=73, granted=true.

2024-05-21 05:36:47,592 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=74, currTerm=73.

2024-05-21 05:36:47,597 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=73.

2024-05-21 05:36:47,608 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=73, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:36:47,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=46 ms

2024-05-21 05:36:47,621 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=74, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 05:36:47,625 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=74, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=73], lastLogId=LogId [index=73, term=73].

2024-05-21 05:36:47,630 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=74, votedFor=nacos2:7848, cost time=20 ms

2024-05-21 05:36:47,649 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=76, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:36:47,654 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:36:47,663 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:36:47,656 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=26, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send4,5,main].

2024-05-21 05:36:47,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=74, votedFor=nacos3:7848, cost time=16 ms

2024-05-21 05:36:47,672 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[EHIGHERTERMRESPONSE<10008>: Leader receives higher term heartbeat_response from peer:nacos1:7848, group:naming_persistent_service_v2]].

2024-05-21 05:36:47,695 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,707 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=74, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:36:47,701 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,698 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:36:47,713 INFO onLeaderStart: term=76.

2024-05-21 05:36:47,719 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:36:47,720 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:36:47,743 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:36:47,751 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:36:47,771 INFO onLeaderStart: term=74.

2024-05-21 05:36:52,574 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=76, term=76], lastLogId=LogId [index=76, term=76].

2024-05-21 05:36:52,602 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=76.

2024-05-21 05:36:52,606 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=76, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 05:36:52,617 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=77, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 05:36:52,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=77, votedFor=nacos3:7848, cost time=4 ms

2024-05-21 05:53:07,660 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=76, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:53:07,802 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:53:07,989 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=74, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 05:53:08,031 INFO Node <naming_persistent_service_v2/nacos2:7848> term 74 start preVote.

2024-05-21 05:53:08,046 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:53:08,031 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 05:53:07,983 INFO Node <naming_persistent_service/nacos2:7848> term 77 start preVote.

2024-05-21 05:53:08,072 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 05:53:08,038 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 05:53:08,135 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=73, lastLogIncluded=0, lastLogIndex=73, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=29, type=Follower] is going to quit

2024-05-21 05:53:08,099 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=25, type=Follower] is going to quit

2024-05-21 05:53:08,185 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=24, type=Follower] is going to quit

2024-05-21 05:53:08,195 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:53:08,225 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=75, currTerm=74, granted=true, requestLastLogId=LogId [index=73, term=74], lastLogId=LogId [index=73, term=74].

2024-05-21 05:53:08,230 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=75, currTerm=74, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:53:08,234 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=76], lastLogId=LogId [index=75, term=76].

2024-05-21 05:53:08,247 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=76], lastLogId=LogId [index=75, term=76].

2024-05-21 05:53:08,244 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=75, currTerm=74, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:53:08,259 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=74, granted=true.

2024-05-21 05:53:08,264 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=74.

2024-05-21 05:53:08,273 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=74, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,275 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=78, currTerm=77, because the leader nacos3:7848's lease is still valid.

2024-05-21 05:53:08,283 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=77, granted=false.

2024-05-21 05:53:08,263 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,313 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=75, votedFor=nacos2:7848, cost time=38 ms

2024-05-21 05:53:08,316 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 05:53:08,336 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,356 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,409 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=77, currTerm=76.

2024-05-21 05:53:08,429 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=77, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-21 05:53:08,449 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=77, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 05:53:08,454 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=77.

2024-05-21 05:53:08,463 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=75, currTerm=74.

2024-05-21 05:53:08,475 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,462 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 05:53:08,485 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=77, granted=true.

2024-05-21 05:53:08,495 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=77.

2024-05-21 05:53:08,500 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 05:53:08,503 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=75, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-21 05:53:08,508 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=75, currTerm=75.

2024-05-21 05:53:08,529 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=78, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 05:53:08,532 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=75, votedFor=nacos3:7848, cost time=18 ms

2024-05-21 05:53:08,543 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=75, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:53:08,552 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:53:08,561 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=78, currTerm=78.

2024-05-21 05:53:08,570 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:53:08,575 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=78, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 05:53:08,601 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 05:53:08,599 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:53:08,618 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 05:53:08,631 INFO onLeaderStart: term=75.

2024-05-21 05:53:08,651 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 05:53:08,674 INFO onLeaderStart: term=78.

2024-05-21 06:04:40,989 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:04:40,491 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=75, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:04:40,987 INFO Node <naming_instance_metadata/nacos2:7848> term 75 start preVote.

2024-05-21 06:04:41,012 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:04:40,988 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=78, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:04:41,183 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:04:41,002 INFO Node <naming_service_metadata/nacos2:7848> term 77 start preVote.

2024-05-21 06:04:41,194 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:04:41,183 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=28, type=Follower] is going to quit

2024-05-21 06:04:41,242 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:04:41,185 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=26, type=Follower] is going to quit

2024-05-21 06:04:41,332 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=29, type=Follower] is going to quit

2024-05-21 06:04:41,333 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=27, type=Follower] is going to quit

2024-05-21 06:04:41,370 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:04:41,397 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=76, currTerm=75, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 06:04:41,406 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=76, currTerm=75, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:04:41,407 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=77, granted=true.

2024-05-21 06:04:41,415 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=77.

2024-05-21 06:04:41,425 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=78, currTerm=78.

2024-05-21 06:04:41,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:04:41,433 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:04:41,454 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=75, granted=true.

2024-05-21 06:04:41,459 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=75.

2024-05-21 06:04:41,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=75, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:04:41,477 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=79, currTerm=78.

2024-05-21 06:04:41,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=78, votedFor=nacos2:7848, cost time=51 ms

2024-05-21 06:04:41,504 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=76, currTerm=75.

2024-05-21 06:04:41,502 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=79, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 06:04:41,510 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=76, votedFor=nacos2:7848, cost time=48 ms

2024-05-21 06:04:41,562 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=79, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 06:04:41,567 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=76, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-21 06:04:41,581 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=76, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 06:04:41,571 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=78], lastLogId=LogId [index=78, term=78].

2024-05-21 06:04:41,596 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=76, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=75], lastLogId=LogId [index=75, term=75].

2024-05-21 06:04:41,617 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:04:41,659 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:04:41,628 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:04:41,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=76, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 06:04:41,687 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:04:41,689 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:04:41,743 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:04:41,778 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=76, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:04:41,788 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:04:41,799 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:04:41,810 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:04:41,853 INFO onLeaderStart: term=76.

2024-05-21 06:05:06,194 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=76, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:05:06,221 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:05:06,233 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 06:05:06,245 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=75, lastLogIncluded=0, lastLogIndex=75, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 06:05:06,265 INFO Node <naming_service_metadata/nacos2:7848> term 78 start preVote.

2024-05-21 06:05:06,278 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:05:06,285 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=77, currTerm=76, granted=true, requestLastLogId=LogId [index=75, term=76], lastLogId=LogId [index=75, term=76].

2024-05-21 06:05:06,390 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,469 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=78, granted=true.

2024-05-21 06:05:06,479 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=78.

2024-05-21 06:05:06,495 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=77, currTerm=76.

2024-05-21 06:05:06,552 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=77, currTerm=76, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:05:06,561 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=77, currTerm=76, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:05:06,574 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=80, currTerm=79, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:05:06,600 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=80, currTerm=79, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:05:06,622 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=79, votedFor=nacos2:7848, cost time=82 ms

2024-05-21 06:05:06,625 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=77, votedFor=0.0.0.0:0, cost time=125 ms

2024-05-21 06:05:06,628 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=79, currTerm=79.

2024-05-21 06:05:06,639 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=79, granted=true, requestLastLogId=LogId [index=77, term=78], lastLogId=LogId [index=77, term=78].

2024-05-21 06:05:06,638 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=77, currTerm=76.

2024-05-21 06:05:06,647 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=76, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:05:06,673 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=77, votedFor=nacos3:7848, cost time=38 ms

2024-05-21 06:05:06,680 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=79, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:05:06,699 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=77, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-21 06:05:06,714 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=77, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 06:05:06,721 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:05:06,783 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:05:06,709 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:05:06,861 INFO onLeaderStart: term=79.

2024-05-21 06:05:06,857 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=79.

2024-05-21 06:05:06,869 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:05:06,885 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:05:06,893 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=80, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-21 06:05:06,895 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:05:06,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=80, votedFor=nacos1:7848, cost time=13 ms

2024-05-21 06:11:28,085 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=79, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:11:28,580 INFO Node <naming_instance_metadata/nacos2:7848> term 77 start preVote.

2024-05-21 06:11:28,617 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:11:28,597 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:11:28,760 INFO Node <naming_persistent_service_v2/nacos2:7848> term 77 start preVote.

2024-05-21 06:11:28,819 INFO Node <naming_persistent_service/nacos2:7848> term 80 start preVote.

2024-05-21 06:11:28,826 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:11:28,660 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=26, type=Follower] is going to quit

2024-05-21 06:11:28,843 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:11:28,845 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=78, currTerm=77, granted=true, requestLastLogId=LogId [index=77, term=77], lastLogId=LogId [index=77, term=77].

2024-05-21 06:11:28,864 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=78, lastLogIncluded=0, lastLogIndex=78, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=27, type=Follower] is going to quit

2024-05-21 06:11:28,905 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:11:28,907 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:11:28,986 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=77, granted=true.

2024-05-21 06:11:29,025 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=77.

2024-05-21 06:11:29,032 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=77, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:11:29,048 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=78, currTerm=78, granted=true, requestLastLogId=LogId [index=76, term=77], lastLogId=LogId [index=76, term=77].

2024-05-21 06:11:29,055 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=78, term=79], lastLogId=LogId [index=78, term=79].

2024-05-21 06:11:29,066 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=77, granted=false.

2024-05-21 06:11:29,089 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=78, currTerm=77.

2024-05-21 06:11:29,100 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=77, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:11:29,084 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=80, granted=true.

2024-05-21 06:11:29,106 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=80.

2024-05-21 06:11:29,109 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:11:29,093 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=80, currTerm=79.

2024-05-21 06:11:29,147 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=78, votedFor=0.0.0.0:0, cost time=52 ms

2024-05-21 06:11:29,153 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=78, votedFor=nacos2:7848, cost time=79 ms

2024-05-21 06:11:29,156 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=80, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-21 06:11:29,157 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:11:29,163 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=81, votedFor=nacos2:7848, cost time=53 ms

2024-05-21 06:11:29,166 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:11:29,169 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=78, votedFor=nacos3:7848, cost time=19 ms

2024-05-21 06:11:29,173 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=77, currTerm=78.

2024-05-21 06:11:29,170 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=81.

2024-05-21 06:11:29,174 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=80, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 06:11:29,195 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=78, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:11:29,238 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:11:29,257 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=81, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:11:29,261 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:11:29,267 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:11:29,277 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=80.

2024-05-21 06:11:29,281 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:11:29,290 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:11:29,346 INFO onLeaderStart: term=81.

2024-05-21 06:11:29,352 INFO onLeaderStart: term=78.

2024-05-21 06:27:45,136 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:27:45,135 INFO Node <naming_persistent_service_v2/nacos2:7848> term 78 start preVote.

2024-05-21 06:27:45,104 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=78, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:27:45,211 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=81, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:27:45,385 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 06:27:45,426 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=77, lastLogIncluded=0, lastLogIndex=77, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=33, type=Follower] is going to quit

2024-05-21 06:27:45,388 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=28, type=Follower] is going to quit

2024-05-21 06:27:45,440 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=29, type=Follower] is going to quit

2024-05-21 06:27:45,389 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:27:45,393 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:27:45,444 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=77, term=78], lastLogId=LogId [index=77, term=78].

2024-05-21 06:27:45,486 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=81, currTerm=80, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:27:45,509 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=81, term=81], lastLogId=LogId [index=81, term=81].

2024-05-21 06:27:45,527 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,560 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=79, currTerm=78, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:27:45,554 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=81, term=81], lastLogId=LogId [index=81, term=81].

2024-05-21 06:27:45,584 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=79, currTerm=78, granted=true, requestLastLogId=LogId [index=77, term=78], lastLogId=LogId [index=77, term=78].

2024-05-21 06:27:45,597 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=78, granted=true.

2024-05-21 06:27:45,611 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=78.

2024-05-21 06:27:45,609 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,630 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=79, currTerm=78.

2024-05-21 06:27:45,617 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=78, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:27:45,674 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 06:27:45,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=79, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 06:27:45,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=82, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 06:27:45,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=79, votedFor=nacos2:7848, cost time=111 ms

2024-05-21 06:27:45,808 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:27:45,764 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=79, votedFor=nacos3:7848, cost time=48 ms

2024-05-21 06:27:45,817 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=79, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:27:45,819 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=82, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 06:27:45,822 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:27:45,835 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:27:45,824 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:27:45,914 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=81, currTerm=80.

2024-05-21 06:27:45,920 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=80, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:27:45,947 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=81, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 06:27:45,960 INFO onLeaderStart: term=79.

2024-05-21 06:27:45,968 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:27:45,972 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=81, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 06:28:11,226 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=79, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 06:28:11,522 INFO Node <naming_service_metadata/nacos2:7848> term 81 start preVote.

2024-05-21 06:28:11,546 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=30, type=Follower] is going to quit

2024-05-21 06:28:11,576 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:28:11,436 INFO Node <naming_persistent_service/nacos2:7848> term 82 start preVote.

2024-05-21 06:28:11,426 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:28:11,520 INFO Node <naming_instance_metadata/nacos2:7848> term 79 start preVote.

2024-05-21 06:28:11,548 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 06:28:11,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:28:11,715 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=79, lastLogIncluded=0, lastLogIndex=79, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=31, type=Follower] is going to quit

2024-05-21 06:28:11,721 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 06:28:11,739 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=83, currTerm=82, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:28:11,748 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:11,755 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=80, currTerm=79, because the leader nacos3:7848's lease is still valid.

2024-05-21 06:28:11,911 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:11,912 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=79.

2024-05-21 06:28:11,938 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=79, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:28:11,921 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=80, currTerm=79, granted=true, requestLastLogId=LogId [index=79, term=79], lastLogId=LogId [index=79, term=79].

2024-05-21 06:28:12,003 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=83, currTerm=82.

2024-05-21 06:28:12,008 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 06:28:12,013 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:28:12,016 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=81, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 06:28:12,007 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,018 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=80, currTerm=79.

2024-05-21 06:28:12,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=80, votedFor=0.0.0.0:0, cost time=164 ms

2024-05-21 06:28:12,179 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=82, votedFor=0.0.0.0:0, cost time=171 ms

2024-05-21 06:28:12,180 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=81, currTerm=82.

2024-05-21 06:28:12,181 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=81, currTerm=82.

2024-05-21 06:28:12,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=83, votedFor=0.0.0.0:0, cost time=176 ms

2024-05-21 06:28:12,191 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=82, currTerm=83.

2024-05-21 06:28:12,191 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=80, votedFor=0.0.0.0:0, cost time=140 ms

2024-05-21 06:28:12,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=80, votedFor=nacos1:7848, cost time=104 ms

2024-05-21 06:28:12,197 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=82, votedFor=nacos3:7848, cost time=15 ms

2024-05-21 06:28:12,200 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=82, currTerm=83.

2024-05-21 06:28:12,203 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=80, currTerm=80.

2024-05-21 06:28:12,204 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=79, currTerm=80.

2024-05-21 06:28:12,216 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=80, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 06:28:12,218 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=83, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 06:28:12,221 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:28:12,235 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=79, currTerm=80.

2024-05-21 06:28:12,277 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 06:44:51,593 INFO Node <naming_persistent_service/nacos2:7848> term 83 start preVote.

2024-05-21 06:44:51,790 INFO Node <naming_instance_metadata/nacos2:7848> term 80 start preVote.

2024-05-21 06:44:51,796 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:51,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 06:44:51,847 INFO Node <naming_service_metadata/nacos2:7848> term 82 start preVote.

2024-05-21 06:44:51,869 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:51,903 INFO Node <naming_instance_metadata/nacos2:7848> term 80 start preVote.

2024-05-21 06:44:51,920 INFO Node <naming_persistent_service/nacos2:7848> term 83 start preVote.

2024-05-21 06:44:52,051 INFO Node <naming_persistent_service_v2/nacos2:7848> term 80 start preVote.

2024-05-21 06:44:52,094 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 06:44:52,112 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=81, currTerm=80, granted=true, requestLastLogId=LogId [index=80, term=80], lastLogId=LogId [index=80, term=80].

2024-05-21 06:44:52,116 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=84, currTerm=83, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,118 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=81, currTerm=80, because the leader nacos1:7848's lease is still valid.

2024-05-21 06:44:52,144 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=82, granted=true.

2024-05-21 06:44:52,150 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=82.

2024-05-21 06:44:52,161 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:44:52,199 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=80, granted=true.

2024-05-21 06:44:52,226 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=80.

2024-05-21 06:44:52,218 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=83, granted=false.

2024-05-21 06:44:52,229 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=81.

2024-05-21 06:44:52,247 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=83, granted=false.

2024-05-21 06:44:52,258 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=80, granted=false.

2024-05-21 06:44:52,250 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=83, votedFor=nacos2:7848, cost time=74 ms

2024-05-21 06:44:52,287 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=80, granted=false.

2024-05-21 06:44:52,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=81, votedFor=nacos2:7848, cost time=70 ms

2024-05-21 06:44:52,358 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=80, currTerm=81.

2024-05-21 06:44:52,417 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=83, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:44:52,445 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:44:52,478 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:44:52,491 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=83, granted=true.

2024-05-21 06:44:52,494 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=83.

2024-05-21 06:44:52,495 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=83, currTerm=83, because the leader nacos2:7848's lease is still valid.

2024-05-21 06:44:52,496 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:44:52,497 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:44:52,502 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 06:44:52,513 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=84, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 06:44:52,581 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=84, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 06:44:52,593 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=80, granted=true.

2024-05-21 06:44:52,604 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=80.

2024-05-21 06:44:52,598 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 06:44:52,599 INFO onLeaderStart: term=83.

2024-05-21 06:44:52,610 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=80, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 06:44:52,610 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:44:52,617 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 06:44:52,638 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 06:44:52,640 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=81, currTerm=81.

2024-05-21 06:44:52,647 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 06:44:52,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=81, votedFor=nacos2:7848, cost time=35 ms

2024-05-21 06:44:52,721 INFO onLeaderStart: term=84.

2024-05-21 06:44:52,744 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:00:47,553 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=83, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:00:47,599 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:00:47,606 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:00:47,606 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=28, type=Follower] is going to quit

2024-05-21 07:00:47,622 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=82, lastLogIncluded=0, lastLogIndex=82, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=29, type=Follower] is going to quit

2024-05-21 07:00:47,629 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=84, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:00:47,653 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:00:47,655 INFO Node <naming_instance_metadata/nacos2:7848> term 81 start preVote.

2024-05-21 07:00:47,667 INFO Node <naming_instance_metadata/nacos2:7848> term 81 start preVote.

2024-05-21 07:00:47,673 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=32, type=Follower] is going to quit

2024-05-21 07:00:47,676 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:47,688 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=31, type=Follower] is going to quit

2024-05-21 07:00:47,680 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=81, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:00:47,781 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=85, currTerm=84.

2024-05-21 07:00:47,832 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=81, granted=true.

2024-05-21 07:00:47,841 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=81.

2024-05-21 07:00:47,844 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:00:47,850 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=85, votedFor=0.0.0.0:0, cost time=60 ms

2024-05-21 07:00:47,878 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=85, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 07:00:47,895 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=82, votedFor=nacos2:7848, cost time=33 ms

2024-05-21 07:00:47,898 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=82, currTerm=82, granted=true, requestLastLogId=LogId [index=80, term=81], lastLogId=LogId [index=80, term=81].

2024-05-21 07:00:47,969 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:00:47,979 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:00:47,970 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=85, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=84], lastLogId=LogId [index=84, term=84].

2024-05-21 07:00:48,019 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=84, currTerm=83.

2024-05-21 07:00:48,007 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,018 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,013 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,024 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=84, votedFor=0.0.0.0:0, cost time=40 ms

2024-05-21 07:00:48,076 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:48,082 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:00:48,131 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=84, votedFor=nacos3:7848, cost time=32 ms

2024-05-21 07:00:48,135 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=82, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:00:48,154 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:00:48,168 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:00:48,165 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,177 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:00:48,204 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:00:48,229 INFO onLeaderStart: term=82.

2024-05-21 07:00:52,608 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=82, currTerm=81, granted=true, requestLastLogId=LogId [index=81, term=81], lastLogId=LogId [index=81, term=81].

2024-05-21 07:00:52,637 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=82, currTerm=81.

2024-05-21 07:00:52,638 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=81, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:00:52,650 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=82, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 07:00:52,660 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=82, votedFor=nacos3:7848, cost time=9 ms

2024-05-21 07:01:44,857 INFO Node <naming_persistent_service_v2/nacos2:7848> term 82 start preVote.

2024-05-21 07:01:44,872 INFO Node <naming_service_metadata/nacos2:7848> term 84 start preVote.

2024-05-21 07:01:44,716 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=82, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:01:45,066 INFO Node <naming_persistent_service/nacos2:7848> term 85 start preVote.

2024-05-21 07:01:45,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:01:45,085 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:01:45,100 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:01:45,175 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:01:45,222 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=82, granted=true.

2024-05-21 07:01:45,226 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=82.

2024-05-21 07:01:45,175 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 07:01:45,234 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=82, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:01:45,244 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=81, lastLogIncluded=0, lastLogIndex=81, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 07:01:45,257 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=85, granted=true.

2024-05-21 07:01:45,291 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=85.

2024-05-21 07:01:45,284 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=83, currTerm=82, granted=true, requestLastLogId=LogId [index=81, term=82], lastLogId=LogId [index=81, term=82].

2024-05-21 07:01:45,292 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=84, granted=true.

2024-05-21 07:01:45,300 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=84.

2024-05-21 07:01:45,308 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:01:45,333 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=83, votedFor=nacos2:7848, cost time=72 ms

2024-05-21 07:01:45,337 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=86, votedFor=nacos2:7848, cost time=30 ms

2024-05-21 07:01:45,368 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=83, currTerm=82.

2024-05-21 07:01:45,370 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=85, votedFor=nacos2:7848, cost time=45 ms

2024-05-21 07:01:45,404 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=83, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:01:45,418 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:01:45,421 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:01:45,429 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=83, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 07:01:45,429 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:01:45,442 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=83, currTerm=83, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:01:45,452 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:01:45,461 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=83, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 07:01:45,466 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=83, currTerm=83, granted=true, requestLastLogId=LogId [index=81, term=82], lastLogId=LogId [index=81, term=82].

2024-05-21 07:01:45,498 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:01:45,508 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=86, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:01:45,515 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:01:45,528 INFO onLeaderStart: term=83.

2024-05-21 07:01:45,539 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:01:45,548 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:01:45,593 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:01:45,609 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:01:45,609 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:01:45,610 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=85, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:01:45,620 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:01:45,634 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:01:45,643 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:01:45,651 INFO onLeaderStart: term=86.

2024-05-21 07:01:45,678 INFO onLeaderStart: term=85.

2024-05-21 07:05:28,483 INFO Node <naming_instance_metadata/nacos2:7848> term 83 start preVote.

2024-05-21 07:05:28,515 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=86, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:28,440 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=83, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:28,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:28,604 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=33, type=Follower] is going to quit

2024-05-21 07:05:28,597 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:28,580 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:28,579 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=32, type=Follower] is going to quit

2024-05-21 07:05:28,642 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=33, type=Follower] is going to quit

2024-05-21 07:05:28,583 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:28,630 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=85, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:28,648 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=34, type=Follower] is going to quit

2024-05-21 07:05:28,677 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=30, type=Follower] is going to quit

2024-05-21 07:05:28,689 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 07:05:28,698 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,702 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=84, lastLogIncluded=0, lastLogIndex=84, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=31, type=Follower] is going to quit

2024-05-21 07:05:28,711 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:28,715 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:28,716 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=86, currTerm=85.

2024-05-21 07:05:28,759 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=83, granted=true, requestLastLogId=LogId [index=83, term=83], lastLogId=LogId [index=83, term=83].

2024-05-21 07:05:28,759 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,882 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=84, currTerm=83.

2024-05-21 07:05:28,887 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=86, term=86], lastLogId=LogId [index=86, term=86].

2024-05-21 07:05:28,904 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=86, votedFor=0.0.0.0:0, cost time=172 ms

2024-05-21 07:05:28,911 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=87, currTerm=86.

2024-05-21 07:05:28,914 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=83, granted=true.

2024-05-21 07:05:28,919 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=83.

2024-05-21 07:05:28,919 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=86, granted=true, requestLastLogId=LogId [index=84, term=85], lastLogId=LogId [index=84, term=85].

2024-05-21 07:05:28,924 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:05:28,934 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=84, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-21 07:05:28,931 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=83, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:28,942 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=87, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 07:05:28,944 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=86, votedFor=nacos3:7848, cost time=20 ms

2024-05-21 07:05:28,955 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=84, votedFor=nacos3:7848, cost time=16 ms

2024-05-21 07:05:28,989 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:29,005 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:29,055 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=87, votedFor=nacos3:7848, cost time=102 ms

2024-05-21 07:05:29,056 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=84, votedFor=nacos2:7848, cost time=96 ms

2024-05-21 07:05:29,067 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:05:29,071 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=84, currTerm=84, granted=true, requestLastLogId=LogId [index=82, term=83], lastLogId=LogId [index=82, term=83].

2024-05-21 07:05:29,094 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=84, currTerm=84.

2024-05-21 07:05:29,127 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:29,131 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=84, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:29,143 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:05:29,166 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:29,183 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=84, currTerm=84.

2024-05-21 07:05:29,184 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 07:05:29,196 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=87, currTerm=87.

2024-05-21 07:05:29,212 INFO onLeaderStart: term=84.

2024-05-21 07:05:29,234 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:45,459 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=84, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:05:45,562 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:45,557 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:45,580 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:05:45,551 INFO Node <naming_persistent_service/nacos2:7848> term 87 start preVote.

2024-05-21 07:05:45,558 INFO Node <naming_service_metadata/nacos2:7848> term 86 start preVote.

2024-05-21 07:05:45,579 INFO Node <naming_persistent_service_v2/nacos2:7848> term 84 start preVote.

2024-05-21 07:05:45,902 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=36, type=Follower] is going to quit

2024-05-21 07:05:45,914 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:05:45,919 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=83, lastLogIncluded=0, lastLogIndex=83, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 07:05:45,985 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=85, currTerm=84, granted=true, requestLastLogId=LogId [index=83, term=84], lastLogId=LogId [index=83, term=84].

2024-05-21 07:05:46,138 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=87, currTerm=86, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:05:46,141 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=84, granted=true.

2024-05-21 07:05:46,169 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=84.

2024-05-21 07:05:46,150 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=87, granted=false.

2024-05-21 07:05:46,145 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=85, currTerm=84.

2024-05-21 07:05:46,169 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=86, granted=true.

2024-05-21 07:05:46,232 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=86.

2024-05-21 07:05:46,173 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=84, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:46,225 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=87, granted=true.

2024-05-21 07:05:46,239 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=87.

2024-05-21 07:05:46,237 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:46,238 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:46,239 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:05:46,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=85, votedFor=nacos2:7848, cost time=107 ms

2024-05-21 07:05:46,284 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:05:46,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=85, votedFor=0.0.0.0:0, cost time=57 ms

2024-05-21 07:05:46,288 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=85, currTerm=85, granted=true, requestLastLogId=LogId [index=83, term=84], lastLogId=LogId [index=83, term=84].

2024-05-21 07:05:46,291 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,290 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=87, votedFor=nacos2:7848, cost time=60 ms

2024-05-21 07:05:46,319 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=88, votedFor=nacos2:7848, cost time=62 ms

2024-05-21 07:05:46,323 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:05:46,334 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:05:46,358 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=88.

2024-05-21 07:05:46,352 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=85, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:46,372 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:05:46,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=85, votedFor=nacos3:7848, cost time=80 ms

2024-05-21 07:05:46,384 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:46,419 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=87, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:46,422 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:05:46,431 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:05:46,424 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:46,422 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=88, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:05:46,439 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:46,440 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:05:46,448 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:46,456 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:05:46,460 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:05:46,467 INFO onLeaderStart: term=85.

2024-05-21 07:05:46,506 INFO onLeaderStart: term=88.

2024-05-21 07:05:46,508 INFO onLeaderStart: term=87.

2024-05-21 07:22:36,436 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:22:36,607 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=85, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:22:36,541 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:22:36,531 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=87, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:22:36,520 INFO Node <naming_instance_metadata/nacos2:7848> term 85 start preVote.

2024-05-21 07:22:36,524 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 07:22:36,729 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=32, type=Follower] is going to quit

2024-05-21 07:22:36,736 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:22:36,746 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=86, lastLogIncluded=0, lastLogIndex=86, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=33, type=Follower] is going to quit

2024-05-21 07:22:36,727 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:22:36,753 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:22:36,724 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=34, type=Follower] is going to quit

2024-05-21 07:22:36,758 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=35, type=Follower] is going to quit

2024-05-21 07:22:36,756 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=86, currTerm=85, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:22:36,756 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:22:36,774 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=86, currTerm=85, granted=true, requestLastLogId=LogId [index=85, term=85], lastLogId=LogId [index=85, term=85].

2024-05-21 07:22:36,775 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=86, currTerm=85, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:22:36,797 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=89, currTerm=88, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,776 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=86, term=87], lastLogId=LogId [index=86, term=87].

2024-05-21 07:22:36,810 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=89, currTerm=88, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,812 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=89, currTerm=88, because the leader nacos2:7848's lease is still valid.

2024-05-21 07:22:36,787 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:36,934 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=88.

2024-05-21 07:22:36,934 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=87.

2024-05-21 07:22:36,937 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-21 07:22:36,949 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=86, currTerm=85.

2024-05-21 07:22:36,963 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=85, granted=true.

2024-05-21 07:22:36,965 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=85.

2024-05-21 07:22:36,971 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=85, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:22:36,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=86, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-21 07:22:36,995 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=88, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-21 07:22:36,997 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=88, currTerm=88.

2024-05-21 07:22:37,006 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=89, votedFor=0.0.0.0:0, cost time=58 ms

2024-05-21 07:22:37,009 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=36, type=Follower] is going to quit

2024-05-21 07:22:37,013 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=35, type=Follower] is going to quit

2024-05-21 07:22:37,012 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=86, votedFor=nacos2:7848, cost time=37 ms

2024-05-21 07:22:37,017 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=86, votedFor=nacos3:7848, cost time=25 ms

2024-05-21 07:22:37,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=88, votedFor=nacos1:7848, cost time=22 ms

2024-05-21 07:22:37,021 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:22:37,032 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:22:37,057 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=86, currTerm=86.

2024-05-21 07:22:37,093 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,127 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,126 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,147 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,157 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=86, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 07:22:37,169 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 07:22:37,182 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 07:22:37,184 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=89, votedFor=nacos3:7848, cost time=170 ms

2024-05-21 07:22:37,188 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 07:22:37,203 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,212 INFO onLeaderStart: term=86.

2024-05-21 07:22:37,264 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:22:37,269 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:56,344 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=86, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 07:38:56,721 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:38:56,720 INFO Node <naming_service_metadata/nacos2:7848> term 88 start preVote.

2024-05-21 07:38:56,735 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 07:38:56,740 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 07:38:56,759 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=87, term=88], lastLogId=LogId [index=87, term=88].

2024-05-21 07:38:56,774 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=85, lastLogIncluded=0, lastLogIndex=85, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=38, type=Follower] is going to quit

2024-05-21 07:38:56,780 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=87, currTerm=86, granted=true, requestLastLogId=LogId [index=85, term=86], lastLogId=LogId [index=85, term=86].

2024-05-21 07:38:56,797 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 07:38:56,809 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=88.

2024-05-21 07:38:56,825 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=87, currTerm=86.

2024-05-21 07:38:56,867 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=87, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-21 07:38:56,867 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=89, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-21 07:38:56,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=87, votedFor=nacos3:7848, cost time=22 ms

2024-05-21 07:38:56,896 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=89, votedFor=nacos3:7848, cost time=23 ms

2024-05-21 07:38:56,900 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=88, currTerm=89.

2024-05-21 07:38:56,907 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=88, currTerm=89.

2024-05-21 07:38:56,929 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=87, currTerm=86, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:56,971 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=87, currTerm=87, granted=true, requestLastLogId=LogId [index=85, term=86], lastLogId=LogId [index=85, term=86].

2024-05-21 07:38:57,037 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=87, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,074 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=88, currTerm=89.

2024-05-21 07:38:57,107 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=90, currTerm=89, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,133 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=90, currTerm=89, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,136 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=90, currTerm=89, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:38:57,195 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=87, currTerm=86.

2024-05-21 07:38:57,206 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=86, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:38:57,216 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=87, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-21 07:38:57,239 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=87, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 07:38:57,346 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=90, currTerm=89.

2024-05-21 07:38:57,352 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:38:57,360 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=90, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 07:38:57,369 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=90, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 07:55:12,175 INFO Node <naming_service_metadata/nacos2:7848> term 89 start preVote.

2024-05-21 07:55:12,172 INFO Node <naming_instance_metadata/nacos2:7848> term 87 start preVote.

2024-05-21 07:55:12,179 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:55:12,188 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 07:55:12,581 INFO Node <naming_persistent_service_v2/nacos2:7848> term 87 start preVote.

2024-05-21 07:55:12,193 INFO Node <naming_persistent_service/nacos2:7848> term 90 start preVote.

2024-05-21 07:55:12,645 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:55:12,646 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 07:55:12,776 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=90, term=90], lastLogId=LogId [index=90, term=90].

2024-05-21 07:55:12,792 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=88, currTerm=87, granted=true, requestLastLogId=LogId [index=87, term=87], lastLogId=LogId [index=87, term=87].

2024-05-21 07:55:12,813 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=90, currTerm=89, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:55:12,940 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=87, granted=true.

2024-05-21 07:55:12,996 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=87.

2024-05-21 07:55:13,000 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,007 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=90, granted=false.

2024-05-21 07:55:13,025 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=91, currTerm=90.

2024-05-21 07:55:13,067 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 07:55:13,028 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=88, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:55:13,081 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=88, currTerm=87, because the leader nacos3:7848's lease is still valid.

2024-05-21 07:55:13,062 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=89, granted=true.

2024-05-21 07:55:13,082 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=87, granted=true.

2024-05-21 07:55:13,091 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=87.

2024-05-21 07:55:13,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=88, votedFor=nacos2:7848, cost time=47 ms

2024-05-21 07:55:13,092 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=87, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,089 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=89.

2024-05-21 07:55:13,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 07:55:13,093 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,095 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=88, currTerm=88.

2024-05-21 07:55:13,103 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=91, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-21 07:55:13,145 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,149 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=90, currTerm=91.

2024-05-21 07:55:13,177 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=91, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 07:55:13,181 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=88, votedFor=nacos2:7848, cost time=23 ms

2024-05-21 07:55:13,188 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=88, currTerm=88.

2024-05-21 07:55:13,189 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=90, votedFor=nacos2:7848, cost time=41 ms

2024-05-21 07:55:13,204 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 07:55:13,208 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=90, currTerm=90.

2024-05-21 07:55:13,350 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 08:06:56,688 INFO Node <naming_service_metadata/nacos2:7848> term 90 start preVote.

2024-05-21 08:06:56,730 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:06:56,715 INFO Node <naming_instance_metadata/nacos2:7848> term 88 start preVote.

2024-05-21 08:06:56,717 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:06:56,734 INFO Node <naming_persistent_service_v2/nacos2:7848> term 88 start preVote.

2024-05-21 08:06:56,748 INFO Node <naming_instance_metadata/nacos2:7848> term 88 start preVote.

2024-05-21 08:06:56,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:06:57,074 INFO Node <naming_service_metadata/nacos2:7848> term 90 start preVote.

2024-05-21 08:06:57,077 INFO Node <naming_persistent_service/nacos2:7848> term 91 start preVote.

2024-05-21 08:06:57,087 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:06:57,371 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=89, currTerm=88, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:06:57,425 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=88, granted=true.

2024-05-21 08:06:57,455 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=89, currTerm=88, granted=true, requestLastLogId=LogId [index=88, term=88], lastLogId=LogId [index=88, term=88].

2024-05-21 08:06:57,449 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=91, currTerm=90, granted=true, requestLastLogId=LogId [index=89, term=90], lastLogId=LogId [index=89, term=90].

2024-05-21 08:06:57,457 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:06:57,456 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=88.

2024-05-21 08:06:57,480 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=88, granted=true.

2024-05-21 08:06:57,491 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=88.

2024-05-21 08:06:57,483 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=91, granted=false.

2024-05-21 08:06:57,484 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=90, granted=false.

2024-05-21 08:06:57,493 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=89, currTerm=89.

2024-05-21 08:06:57,499 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=90, granted=true.

2024-05-21 08:06:57,508 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=90.

2024-05-21 08:06:57,514 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,514 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=90, currTerm=91.

2024-05-21 08:06:57,580 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=89, votedFor=nacos2:7848, cost time=61 ms

2024-05-21 08:06:57,592 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=88, currTerm=89.

2024-05-21 08:06:57,594 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=89, votedFor=nacos2:7848, cost time=93 ms

2024-05-21 08:06:57,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=91, votedFor=nacos2:7848, cost time=75 ms

2024-05-21 08:06:57,668 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,595 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,727 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,731 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=89, currTerm=89.

2024-05-21 08:06:57,654 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=91, granted=true.

2024-05-21 08:06:57,725 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=91, currTerm=91.

2024-05-21 08:06:57,735 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:06:57,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=88, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,750 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=91.

2024-05-21 08:06:57,769 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:06:57,777 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,793 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 08:06:57,794 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:57,809 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:57,809 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 08:06:57,805 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 08:06:57,816 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_43.

2024-05-21 08:06:57,820 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_42.

2024-05-21 08:06:57,823 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_44.

2024-05-21 08:06:57,841 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=92, votedFor=nacos2:7848, cost time=57 ms

2024-05-21 08:06:57,848 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=92, currTerm=92.

2024-05-21 08:06:57,874 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:57,879 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 08:06:57,891 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 42 to 44, cost 16 ms.

2024-05-21 08:06:57,892 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 42 to 45, cost 13 ms.

2024-05-21 08:06:57,892 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 41 to 43, cost 6 ms.

2024-05-21 08:06:57,895 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_46.

2024-05-21 08:06:57,923 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 45 to 47, cost 8 ms.

2024-05-21 08:06:57,938 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=89, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:06:57,945 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:06:57,962 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:06:58,027 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 08:06:58,045 INFO onLeaderStart: term=89.

2024-05-21 08:20:32,724 INFO Node <naming_service_metadata/nacos2:7848> term 91 start preVote.

2024-05-21 08:20:33,163 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=89, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:20:33,216 INFO Node <naming_persistent_service_v2/nacos2:7848> term 89 start preVote.

2024-05-21 08:20:33,248 INFO Node <naming_persistent_service/nacos2:7848> term 92 start preVote.

2024-05-21 08:20:32,727 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:20:33,228 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=89, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:20:33,218 INFO Node <naming_service_metadata/nacos2:7848> term 91 start preVote.

2024-05-21 08:20:33,319 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:20:33,292 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=92, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:20:33,348 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=93, currTerm=92, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:20:33,343 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=41, type=Follower] is going to quit

2024-05-21 08:20:33,371 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=90, currTerm=89, granted=true, requestLastLogId=LogId [index=89, term=89], lastLogId=LogId [index=89, term=89].

2024-05-21 08:20:33,379 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=88, lastLogIncluded=0, lastLogIndex=88, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 08:20:33,389 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=90, currTerm=89.

2024-05-21 08:20:33,425 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=91, granted=true.

2024-05-21 08:20:33,430 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=91.

2024-05-21 08:20:33,457 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:20:33,559 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:20:33,436 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=89, granted=true.

2024-05-21 08:20:33,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:20:33,560 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=90, votedFor=0.0.0.0:0, cost time=165 ms

2024-05-21 08:20:33,568 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=89.

2024-05-21 08:20:33,593 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=93, currTerm=92.

2024-05-21 08:20:33,601 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=90, currTerm=90.

2024-05-21 08:20:33,611 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=90, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 08:20:33,611 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=92, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:20:33,615 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=90, currTerm=90, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 08:20:33,633 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=93, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-21 08:20:33,635 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=90, currTerm=90, granted=true, requestLastLogId=LogId [index=88, term=89], lastLogId=LogId [index=88, term=89].

2024-05-21 08:20:33,635 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=92, votedFor=nacos2:7848, cost time=53 ms

2024-05-21 08:20:33,661 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:20:33,656 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=92, currTerm=93.

2024-05-21 08:20:33,672 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=92, currTerm=93.

2024-05-21 08:20:33,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=90, votedFor=nacos2:7848, cost time=63 ms

2024-05-21 08:20:33,685 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:20:33,694 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 08:20:33,697 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=93, votedFor=nacos3:7848, cost time=17 ms

2024-05-21 08:20:33,695 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,700 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:20:33,717 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=92, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:20:33,722 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:20:33,736 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:20:33,747 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 08:20:33,762 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 08:20:33,785 INFO onLeaderStart: term=92.

2024-05-21 08:21:29,620 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=92, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 08:21:30,054 INFO Node <naming_persistent_service_v2/nacos2:7848> term 90 start preVote.

2024-05-21 08:21:30,622 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:30,617 INFO Node <naming_persistent_service/nacos2:7848> term 93 start preVote.

2024-05-21 08:21:30,609 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:30,798 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=34, type=Follower] is going to quit

2024-05-21 08:21:30,799 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=91, currTerm=90, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:21:30,610 INFO Node <naming_instance_metadata/nacos2:7848> term 90 start preVote.

2024-05-21 08:21:31,035 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=94, currTerm=93, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:21:30,074 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 08:21:30,797 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 08:21:30,961 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=35, type=Follower] is going to quit

2024-05-21 08:21:31,130 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 08:21:31,043 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=91, currTerm=90, because the leader nacos3:7848's lease is still valid.

2024-05-21 08:21:31,049 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=93, granted=false.

2024-05-21 08:21:31,140 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 08:21:31,156 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=90, granted=false.

2024-05-21 08:21:31,202 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=94, currTerm=93.

2024-05-21 08:21:31,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=93, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:21:31,232 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=94, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-21 08:21:31,245 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=94, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 08:21:31,269 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=92.

2024-05-21 08:21:31,285 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=91, currTerm=90.

2024-05-21 08:21:31,287 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:21:31,290 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=93, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 08:21:31,316 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=91, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-21 08:21:31,325 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=93, currTerm=94.

2024-05-21 08:21:31,354 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=93, votedFor=nacos1:7848, cost time=59 ms

2024-05-21 08:21:31,355 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=93, currTerm=93.

2024-05-21 08:21:31,397 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=91, currTerm=90.

2024-05-21 08:21:31,400 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=90, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:21:31,402 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=91, votedFor=nacos1:7848, cost time=71 ms

2024-05-21 08:21:31,411 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=90, currTerm=91.

2024-05-21 08:21:31,433 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=91, votedFor=0.0.0.0:0, cost time=34 ms

2024-05-21 08:21:31,452 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=90, currTerm=91.

2024-05-21 08:21:31,456 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=91, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 08:21:31,460 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=90, currTerm=91.

2024-05-21 08:21:31,482 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 08:50:28,345 INFO Node <naming_instance_metadata/nacos2:7848> term 91 start preVote.

2024-05-21 08:50:28,382 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,461 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=92, currTerm=91, because the leader nacos1:7848's lease is still valid.

2024-05-21 08:50:28,382 INFO Node <naming_persistent_service_v2/nacos2:7848> term 91 start preVote.

2024-05-21 08:50:28,380 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,416 INFO Node <naming_service_metadata/nacos2:7848> term 93 start preVote.

2024-05-21 08:50:28,379 INFO Node <naming_persistent_service/nacos2:7848> term 94 start preVote.

2024-05-21 08:50:28,346 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,461 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 08:50:28,476 INFO Node <naming_persistent_service_v2/nacos2:7848> term 91 start preVote.

2024-05-21 08:50:28,487 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=94, currTerm=93, granted=true, requestLastLogId=LogId [index=92, term=93], lastLogId=LogId [index=92, term=93].

2024-05-21 08:50:28,618 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=93.

2024-05-21 08:50:28,631 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=95, currTerm=94, granted=true, requestLastLogId=LogId [index=94, term=94], lastLogId=LogId [index=94, term=94].

2024-05-21 08:50:28,636 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=92, currTerm=91, granted=true, requestLastLogId=LogId [index=91, term=91], lastLogId=LogId [index=91, term=91].

2024-05-21 08:50:28,638 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=91, granted=false.

2024-05-21 08:50:28,653 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=94, granted=false.

2024-05-21 08:50:28,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=94, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-21 08:50:28,683 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 08:50:28,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=94, votedFor=nacos3:7848, cost time=21 ms

2024-05-21 08:50:28,755 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=93, currTerm=94.

2024-05-21 08:50:28,776 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=93, currTerm=94.

2024-05-21 08:50:28,810 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=94, granted=true.

2024-05-21 08:50:28,838 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=91, granted=true.

2024-05-21 08:50:28,886 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=91.

2024-05-21 08:50:28,884 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=94.

2024-05-21 08:50:28,888 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,888 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,904 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,918 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=91, granted=true.

2024-05-21 08:50:28,939 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=91.

2024-05-21 08:50:28,941 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=91, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 08:50:28,940 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=95, votedFor=nacos2:7848, cost time=51 ms

2024-05-21 08:50:28,956 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=92, votedFor=nacos2:7848, cost time=49 ms

2024-05-21 08:50:28,956 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=95, currTerm=95.

2024-05-21 08:50:28,967 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 08:50:28,972 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=95, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:50:28,970 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=92, currTerm=92.

2024-05-21 08:50:28,974 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:50:28,983 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:50:28,990 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=92, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:50:28,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=92, votedFor=nacos2:7848, cost time=29 ms

2024-05-21 08:50:28,993 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:50:29,000 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:50:28,997 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=92, currTerm=92.

2024-05-21 08:50:29,022 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=92, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 08:50:29,028 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 08:50:29,026 INFO onLeaderStart: term=95.

2024-05-21 08:50:29,030 INFO onLeaderStart: term=92.

2024-05-21 08:50:29,033 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 08:50:29,063 INFO onLeaderStart: term=92.

2024-05-21 09:01:38,918 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=95, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:01:38,935 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=38, type=Follower] is going to quit

2024-05-21 09:01:38,926 INFO Node <naming_service_metadata/nacos2:7848> term 94 start preVote.

2024-05-21 09:01:38,952 INFO Node <naming_service_metadata/nacos2:7848> term 94 start preVote.

2024-05-21 09:01:38,935 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:01:39,509 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=37, type=Follower] is going to quit

2024-05-21 09:01:39,527 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499449955s. [closed=[], open=[[remote_addr=nacos3/172.25.0.5:7848]]]], groupId=naming_persistent_service_v2

2024-05-21 09:01:38,935 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 09:01:39,466 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=92, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:01:39,568 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:01:39,485 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=92, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:01:39,568 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=43, type=Follower] is going to quit

2024-05-21 09:01:39,573 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:01:39,573 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=36, type=Follower] is going to quit

2024-05-21 09:01:39,575 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=92, lastLogIncluded=0, lastLogIndex=92, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=37, type=Follower] is going to quit

2024-05-21 09:01:39,574 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=91, lastLogIncluded=0, lastLogIndex=91, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=44, type=Follower] is going to quit

2024-05-21 09:01:39,584 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 09:01:39,628 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=91, term=92], lastLogId=LogId [index=91, term=92].

2024-05-21 09:01:39,639 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,640 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 09:01:39,626 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,651 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_88.

2024-05-21 09:01:39,682 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=94, granted=false.

2024-05-21 09:01:39,650 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,724 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=92.

2024-05-21 09:01:39,725 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=94, granted=true.

2024-05-21 09:01:39,727 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=94.

2024-05-21 09:01:39,730 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:01:39,736 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:01:39,739 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,742 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 09:01:39,743 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,743 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=93, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 09:01:39,747 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 09:01:39,759 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:01:39,757 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 09:01:39,765 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_87.

2024-05-21 09:01:39,773 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_89.

2024-05-21 09:01:39,774 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=93, votedFor=nacos1:7848, cost time=16 ms

2024-05-21 09:01:39,773 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,788 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=95, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:01:39,789 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 09:01:39,791 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 09:01:39,799 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 44 to 89, cost 1 ms.

2024-05-21 09:01:39,778 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 43 to 88, cost 2 ms.

2024-05-21 09:01:39,818 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=95, currTerm=95, because the leader nacos2:7848's lease is still valid.

2024-05-21 09:01:39,778 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 45 to 90, cost 0 ms.

2024-05-21 09:01:39,785 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,812 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=96, currTerm=95.

2024-05-21 09:01:39,827 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,837 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 09:01:39,822 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,845 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,827 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=93, currTerm=92, granted=true, requestLastLogId=LogId [index=92, term=92], lastLogId=LogId [index=92, term=92].

2024-05-21 09:01:39,836 INFO onLeaderStart: term=95.

2024-05-21 09:01:39,845 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=96, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 09:01:39,844 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_91.

2024-05-21 09:01:39,855 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,861 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=96, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 09:01:39,872 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,873 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,876 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 47 to 92, cost 0 ms.

2024-05-21 09:01:39,884 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=96, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 09:01:39,889 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 09:01:39,892 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,891 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,900 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,923 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:01:39,915 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,925 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,940 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:01:39,958 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=93, currTerm=92.

2024-05-21 09:01:39,969 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=93, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-21 09:01:39,979 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=93, votedFor=nacos1:7848, cost time=10 ms

2024-05-21 09:01:39,993 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:40,920 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 09:02:40,920 INFO Node <naming_instance_metadata/nacos2:7848> term 93 start preVote.

2024-05-21 09:02:41,665 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=95, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 09:02:41,709 INFO Node <naming_persistent_service/nacos2:7848> term 96 start preVote.

2024-05-21 09:02:41,810 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 09:02:41,714 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 09:02:41,764 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=94, currTerm=93, because the leader nacos1:7848's lease is still valid.

2024-05-21 09:02:41,800 INFO Node <naming_persistent_service_v2/nacos2:7848> term 93 start preVote.

2024-05-21 09:02:41,800 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 09:02:41,800 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=36, type=Follower] is going to quit

2024-05-21 09:02:41,989 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=37, type=Follower] is going to quit

2024-05-21 09:02:41,997 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 09:02:42,000 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 09:02:42,005 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,001 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=93, granted=true.

2024-05-21 09:02:41,999 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,011 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=95.

2024-05-21 09:02:42,012 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=94, currTerm=93, because the leader nacos1:7848's lease is still valid.

2024-05-21 09:02:42,015 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=96, granted=true.

2024-05-21 09:02:42,076 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=93.

2024-05-21 09:02:42,082 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=93, granted=true.

2024-05-21 09:02:42,082 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:42,080 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=96.

2024-05-21 09:02:42,084 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=93.

2024-05-21 09:02:42,087 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=93, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:42,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=96, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-21 09:02:42,111 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:02:42,119 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=94, votedFor=nacos2:7848, cost time=36 ms

2024-05-21 09:02:42,125 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=94, votedFor=nacos2:7848, cost time=39 ms

2024-05-21 09:02:42,124 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 09:02:42,126 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=94.

2024-05-21 09:02:42,127 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=96, votedFor=nacos3:7848, cost time=38 ms

2024-05-21 09:02:42,129 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:02:42,134 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 09:02:42,135 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=97, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 09:02:42,137 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 09:02:42,138 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=94, currTerm=94.

2024-05-21 09:02:42,159 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=97, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 09:02:42,161 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 09:02:42,165 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 09:02:42,173 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 09:02:42,186 INFO onLeaderStart: term=97.

2024-05-21 10:10:33,946 INFO Node <naming_persistent_service_v2/nacos2:7848> term 94 start preVote.

2024-05-21 10:10:34,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 10:10:34,256 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,390 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 10:10:34,396 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,429 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 10:10:34,254 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,312 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:33,966 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 10:10:33,966 INFO Node <naming_instance_metadata/nacos2:7848> term 94 start preVote.

2024-05-21 10:10:33,963 INFO Node <naming_service_metadata/nacos2:7848> term 96 start preVote.

2024-05-21 10:10:34,559 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:34,567 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:10:33,963 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 10:10:34,575 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_95.

2024-05-21 10:10:34,581 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,468 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=97, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 10:10:34,467 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=94, granted=true.

2024-05-21 10:10:34,595 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=94.

2024-05-21 10:10:34,488 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:10:34,488 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:10:34,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,490 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.358034811s. [closed=[], open=[[remote_addr=nacos3/172.25.0.5:7848]]]], groupId=naming_persistent_service

2024-05-21 10:10:34,494 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,496 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,614 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:10:34,573 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,594 INFO Node <naming_instance_metadata/nacos2:7848> term 94 start preVote.

2024-05-21 10:10:34,609 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=39, type=Follower] is going to quit

2024-05-21 10:10:34,624 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 10:10:34,605 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 92 to 96, cost 1 ms.

2024-05-21 10:10:34,613 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:10:34,613 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,620 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_92.

2024-05-21 10:10:34,607 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=95, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 10:10:34,691 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=95, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 10:10:34,698 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 10:10:34,624 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=40, type=Follower] is going to quit

2024-05-21 10:10:34,617 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 10:10:34,625 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 10:10:34,713 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=98, currTerm=97, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 10:10:34,723 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=98, currTerm=97.

2024-05-21 10:10:34,785 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:34,788 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:34,631 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 10:10:34,660 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_93.

2024-05-21 10:10:34,665 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 10:10:34,687 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_91.

2024-05-21 10:10:34,694 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 89 to 93, cost 0 ms.

2024-05-21 10:10:34,844 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=94, granted=true.

2024-05-21 10:10:34,845 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=94.

2024-05-21 10:10:34,847 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=94, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 10:10:34,704 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 10:10:34,866 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=95, votedFor=nacos2:7848, cost time=18 ms

2024-05-21 10:10:34,867 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 10:10:34,795 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:34,873 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 10:10:34,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=98, votedFor=0.0.0.0:0, cost time=80 ms

2024-05-21 10:10:34,828 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 90 to 94, cost 2 ms.

2024-05-21 10:10:34,868 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 10:10:34,934 INFO The channel nacos3:7848 has successfully established.

2024-05-21 10:10:34,874 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 88 to 92, cost 8 ms.

2024-05-21 10:10:34,883 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=98, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=97], lastLogId=LogId [index=97, term=97].

2024-05-21 10:10:34,999 INFO onLeaderStart: term=95.

2024-05-21 10:10:34,888 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 10:10:35,003 INFO The channel nacos3:7848 has successfully established.

2024-05-21 10:10:34,965 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=95, currTerm=95, granted=true, requestLastLogId=LogId [index=93, term=94], lastLogId=LogId [index=93, term=94].

2024-05-21 10:10:34,968 INFO Peer nacos3:7848 is connected.

2024-05-21 10:10:34,983 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=97, currTerm=96, because the leader nacos3:7848's lease is still valid.

2024-05-21 10:10:35,007 INFO Peer nacos3:7848 is connected.

2024-05-21 10:10:35,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=98, votedFor=nacos3:7848, cost time=28 ms

2024-05-21 10:10:35,056 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=95, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 10:10:35,058 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 10:10:35,085 INFO The channel nacos2:7848 has successfully established.

2024-05-21 10:10:35,065 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=97, currTerm=96, because the leader nacos3:7848's lease is still valid.

2024-05-21 10:10:35,092 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:35,076 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,079 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 10:10:35,097 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:35,103 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 10:10:35,103 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=96, granted=true.

2024-05-21 10:10:35,121 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=96.

2024-05-21 10:10:35,116 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 10:10:35,108 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,122 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:35,149 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:35,150 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:35,151 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 10:10:35,152 INFO The channel nacos1:7848 has successfully established.

2024-05-21 10:10:35,153 INFO Peer nacos1:7848 is connected.

2024-05-21 10:10:35,131 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 10:10:35,157 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 10:10:35,151 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=97, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 10:10:35,161 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=97, currTerm=97.

2024-05-21 10:10:35,183 INFO onLeaderStart: term=95.

2024-05-21 10:10:35,212 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 10:10:35,213 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 10:10:35,215 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 10:10:35,216 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 10:10:35,217 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=96, currTerm=97.

2024-05-21 10:10:39,121 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 10:10:39,124 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 10:10:39,124 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 10:10:39,125 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 10:10:39,210 INFO Connection disconnected: /172.25.0.5:51690

2024-05-21 10:10:39,237 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 10:10:39,252 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 10:10:39,255 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 10:10:39,420 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 10:10:39,454 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 10:10:39,703 INFO Connection disconnected: /172.25.0.3:58448

2024-05-21 10:40:33,744 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:33,746 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 10:40:33,747 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:33,747 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:33,747 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 10:40:33,748 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 10:40:33,749 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:33,750 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 10:40:33,750 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_94.

2024-05-21 10:40:33,753 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_97.

2024-05-21 10:40:33,753 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_95.

2024-05-21 10:40:33,756 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_93.

2024-05-21 10:40:33,756 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 93 to 95, cost 0 ms.

2024-05-21 10:40:33,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 94 to 96, cost 0 ms.

2024-05-21 10:40:33,759 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 96 to 98, cost 0 ms.

2024-05-21 10:40:33,762 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 92 to 94, cost 0 ms.

2024-05-21 10:40:34,458 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:40:34,996 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:40:35,115 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 10:40:35,176 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 10:40:39,858 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 10:40:39,966 INFO Connection disconnected: /172.25.0.2:54738

2024-05-21 10:40:40,007 INFO Connection disconnected: /172.25.0.2:54728

2024-05-21 11:10:33,691 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 98 to 99, cost 0 ms.

2024-05-21 11:10:33,691 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 95 to 96, cost 0 ms.

2024-05-21 11:10:33,691 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 96 to 97, cost 0 ms.

2024-05-21 11:10:33,692 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 94 to 95, cost 1 ms.

2024-05-21 11:40:33,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 11:40:33,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 11:40:33,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 11:40:33,651 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 12:10:33,552 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 12:10:33,552 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 0 ms.

2024-05-21 12:10:33,552 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 0 ms.

2024-05-21 12:10:33,552 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 0 ms.

2024-05-21 12:18:11,210 INFO Node <naming_service_metadata/nacos2:7848> term 97 start preVote.

2024-05-21 12:18:11,218 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:12,338 INFO Node <naming_persistent_service/nacos2:7848> term 98 start preVote.

2024-05-21 12:18:12,409 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=95, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:12,495 INFO Node <naming_service_metadata/nacos2:7848> term 97 start preVote.

2024-05-21 12:18:12,409 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=95, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:12,609 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=45, type=Follower] is going to quit

2024-05-21 12:18:12,614 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:12,597 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=39, type=Follower] is going to quit

2024-05-21 12:18:12,609 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:12,339 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=98, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:18:12,614 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 12:18:12,620 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 12:18:12,630 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 12:18:12,713 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=95, lastLogIncluded=0, lastLogIndex=95, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=38, type=Follower] is going to quit

2024-05-21 12:18:12,763 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 12:18:12,720 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=94, lastLogIncluded=0, lastLogIndex=94, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=46, type=Follower] is going to quit

2024-05-21 12:18:12,782 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,807 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,806 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,831 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=99, currTerm=98, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:18:12,810 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,816 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 12:18:12,816 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 12:18:12,817 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 12:18:12,842 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 12:18:12,845 INFO The channel nacos3:7848 has successfully established.

2024-05-21 12:18:12,816 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,839 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=98, currTerm=97, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:18:12,841 INFO The channel nacos3:7848 has successfully established.

2024-05-21 12:18:12,851 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=94, term=95], lastLogId=LogId [index=94, term=95].

2024-05-21 12:18:12,848 INFO Peer nacos3:7848 is connected.

2024-05-21 12:18:12,851 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 12:18:12,855 INFO The channel nacos1:7848 has successfully established.

2024-05-21 12:18:12,849 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 12:18:12,859 INFO Peer nacos1:7848 is connected.

2024-05-21 12:18:12,852 INFO Peer nacos3:7848 is connected.

2024-05-21 12:18:12,853 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,861 INFO The channel nacos1:7848 has successfully established.

2024-05-21 12:18:12,865 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 12:18:12,866 INFO Peer nacos1:7848 is connected.

2024-05-21 12:18:12,867 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=96, currTerm=95, granted=true, requestLastLogId=LogId [index=95, term=95], lastLogId=LogId [index=95, term=95].

2024-05-21 12:18:12,872 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=97, granted=false.

2024-05-21 12:18:12,874 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=97, granted=true.

2024-05-21 12:18:12,875 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=97.

2024-05-21 12:18:12,867 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=98.

2024-05-21 12:18:12,876 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=97, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:12,879 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=98, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:18:12,879 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=96, currTerm=95.

2024-05-21 12:18:12,884 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=95.

2024-05-21 12:18:12,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=99, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 12:18:12,890 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 12:18:12,892 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,896 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:12,904 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=99, votedFor=nacos1:7848, cost time=18 ms

2024-05-21 12:18:12,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=96, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-21 12:18:12,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=96, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-21 12:18:12,910 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=98, currTerm=99.

2024-05-21 12:18:12,915 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=98, currTerm=99.

2024-05-21 12:18:12,921 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=98, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:12,921 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=96, votedFor=nacos3:7848, cost time=14 ms

2024-05-21 12:18:12,922 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=96, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 12:18:12,923 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:12,925 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,925 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,927 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,927 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=96, currTerm=96.

2024-05-21 12:18:12,930 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:18:12,957 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,961 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:18:12,971 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:12,971 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:13,019 INFO onLeaderStart: term=98.

2024-05-21 12:18:58,545 INFO Node <naming_persistent_service/nacos2:7848> term 99 start preVote.

2024-05-21 12:18:59,284 INFO Node <naming_persistent_service/nacos2:7848> term 99 start preVote.

2024-05-21 12:18:59,425 INFO Node <naming_instance_metadata/nacos2:7848> term 96 start preVote.

2024-05-21 12:18:59,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:59,467 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=98, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:18:59,511 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=38, type=Follower] is going to quit

2024-05-21 12:18:59,428 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:18:59,426 INFO Node <naming_persistent_service_v2/nacos2:7848> term 96 start preVote.

2024-05-21 12:18:59,473 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:18:59,578 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=39, type=Follower] is going to quit

2024-05-21 12:18:59,585 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:18:59,592 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:18:59,604 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=97, currTerm=96, because the leader nacos1:7848's lease is still valid.

2024-05-21 12:18:59,622 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=98], lastLogId=LogId [index=97, term=98].

2024-05-21 12:18:59,651 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=99.

2024-05-21 12:18:59,714 WARN Node <naming_persistent_service/nacos2:7848> raise term 100 when get lastLogId.

2024-05-21 12:18:59,732 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=98], lastLogId=LogId [index=97, term=98].

2024-05-21 12:18:59,774 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:59,804 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=100, votedFor=nacos2:7848, cost time=28 ms

2024-05-21 12:18:59,819 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:59,821 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=100, currTerm=100.

2024-05-21 12:18:59,827 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=100, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=99], lastLogId=LogId [index=99, term=99].

2024-05-21 12:18:59,820 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=98.

2024-05-21 12:18:59,820 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=96, granted=false.

2024-05-21 12:18:59,826 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=97, currTerm=96, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:18:59,839 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=96, granted=true.

2024-05-21 12:18:59,840 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=96.

2024-05-21 12:18:59,840 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:59,861 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=99, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-21 12:18:59,898 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=96, granted=true.

2024-05-21 12:18:59,900 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=96.

2024-05-21 12:18:59,913 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=96, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:18:59,913 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=97, votedFor=nacos2:7848, cost time=60 ms

2024-05-21 12:18:59,925 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:18:59,925 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=97, currTerm=97, granted=true, requestLastLogId=LogId [index=96, term=96], lastLogId=LogId [index=96, term=96].

2024-05-21 12:18:59,930 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=97, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 12:18:59,933 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=99, votedFor=nacos3:7848, cost time=67 ms

2024-05-21 12:18:59,937 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=99.

2024-05-21 12:18:59,942 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,948 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=97, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:59,954 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:59,963 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:18:59,970 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:18:59,971 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=97, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:59,974 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:59,975 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:18:59,979 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:18:59,991 INFO onLeaderStart: term=97.

2024-05-21 12:18:59,993 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=100, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:18:59,995 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:18:59,998 INFO onLeaderStart: term=97.

2024-05-21 12:19:00,007 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:18:59,999 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:19:00,018 INFO onLeaderStart: term=100.

2024-05-21 12:19:12,234 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=100, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:19:12,256 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=97, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:19:12,264 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=41, type=Follower] is going to quit

2024-05-21 12:19:12,256 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=97, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:19:12,264 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=41, type=Follower] is going to quit

2024-05-21 12:19:12,264 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:19:12,264 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:19:12,265 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=42, type=Follower] is going to quit

2024-05-21 12:19:12,266 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:19:12,266 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=47, type=Follower] is going to quit

2024-05-21 12:19:12,266 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=100, lastLogIncluded=0, lastLogIndex=100, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=42, type=Follower] is going to quit

2024-05-21 12:19:12,268 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:12,268 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=96, lastLogIncluded=0, lastLogIndex=96, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=48, type=Follower] is going to quit

2024-05-21 12:19:12,269 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:12,269 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:12,270 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:12,270 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:12,271 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:13,765 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:15,253 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:17,030 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:17,086 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:17,090 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:19:17,338 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=100, term=100], lastLogId=LogId [index=100, term=100].

2024-05-21 12:19:17,354 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=100.

2024-05-21 12:19:17,365 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=101, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 12:19:17,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=101, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 12:19:17,626 INFO Node <naming_instance_metadata/nacos2:7848> term 97 start preVote.

2024-05-21 12:19:17,640 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=97, granted=true.

2024-05-21 12:19:17,641 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=97.

2024-05-21 12:19:17,656 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=98, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 12:19:17,657 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:19:17,671 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=98, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:19:17,672 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:19:17,674 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:19:17,675 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:19:17,680 INFO onLeaderStart: term=98.

2024-05-21 12:19:17,797 INFO Node <naming_persistent_service_v2/nacos2:7848> term 97 start preVote.

2024-05-21 12:19:17,809 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=97, granted=true.

2024-05-21 12:19:17,811 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=97.

2024-05-21 12:19:17,824 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=98, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 12:19:17,825 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:19:17,838 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=98, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:19:17,839 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:19:17,841 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:19:17,842 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:19:17,848 INFO onLeaderStart: term=98.

2024-05-21 12:34:51,755 INFO Node <naming_persistent_service/nacos2:7848> term 101 start preVote.

2024-05-21 12:34:52,684 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 12:34:52,458 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=98, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:34:51,755 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:34:51,755 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:34:51,755 INFO Node <naming_service_metadata/nacos2:7848> term 99 start preVote.

2024-05-21 12:34:52,688 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=98, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:34:52,690 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=49, type=Follower] is going to quit

2024-05-21 12:34:52,710 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=43, type=Follower] is going to quit

2024-05-21 12:34:52,714 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=98, lastLogIncluded=0, lastLogIndex=98, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=44, type=Follower] is going to quit

2024-05-21 12:34:52,711 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:34:52,712 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=97, lastLogIncluded=0, lastLogIndex=97, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=50, type=Follower] is going to quit

2024-05-21 12:34:52,691 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:34:52,805 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=101, granted=true.

2024-05-21 12:34:52,819 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=101.

2024-05-21 12:34:52,847 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:34:52,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=102, votedFor=nacos2:7848, cost time=33 ms

2024-05-21 12:34:52,869 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=102.

2024-05-21 12:34:52,874 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:34:52,876 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=99.

2024-05-21 12:34:52,878 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:34:52,880 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=100, votedFor=nacos2:7848, cost time=7 ms

2024-05-21 12:34:52,889 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:34:52,889 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=100.

2024-05-21 12:34:52,903 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:34:52,900 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,902 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,903 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=100, currTerm=100, granted=true, requestLastLogId=LogId [index=98, term=99], lastLogId=LogId [index=98, term=99].

2024-05-21 12:34:52,903 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=97, term=98], lastLogId=LogId [index=97, term=98].

2024-05-21 12:34:52,906 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=99, currTerm=98, granted=true, requestLastLogId=LogId [index=98, term=98], lastLogId=LogId [index=98, term=98].

2024-05-21 12:34:52,942 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,946 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,949 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=100, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:34:52,951 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:34:52,953 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:34:52,958 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:52,971 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=98.

2024-05-21 12:34:52,976 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=99, currTerm=98.

2024-05-21 12:34:52,977 INFO onLeaderStart: term=100.

2024-05-21 12:34:52,982 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=99, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 12:34:52,992 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=99, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 12:34:52,995 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=99, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 12:34:53,001 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=99, votedFor=nacos3:7848, cost time=8 ms

2024-05-21 12:34:52,998 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,014 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,022 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=99, currTerm=99.

2024-05-21 12:34:53,030 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:34:53,052 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:34:53,093 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,096 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:34:53,093 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:31,057 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,056 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,056 INFO Node <naming_instance_metadata/nacos2:7848> term 99 start preVote.

2024-05-21 12:35:31,054 INFO Node <naming_persistent_service_v2/nacos2:7848> term 99 start preVote.

2024-05-21 12:35:31,050 INFO Node <naming_persistent_service/nacos2:7848> term 102 start preVote.

2024-05-21 12:35:31,831 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=100, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:35:31,921 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=40, type=Follower] is going to quit

2024-05-21 12:35:31,953 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=41, type=Follower] is going to quit

2024-05-21 12:35:31,956 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:35:31,959 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:31,859 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 12:35:31,923 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:35:31,975 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=100, currTerm=99, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:31,979 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=99, granted=false.

2024-05-21 12:35:31,994 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=103, currTerm=102, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:31,994 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:35:32,019 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=100, currTerm=99, because the leader nacos3:7848's lease is still valid.

2024-05-21 12:35:32,102 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=99, granted=false.

2024-05-21 12:35:32,103 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=102, granted=false.

2024-05-21 12:35:32,103 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,115 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=100.

2024-05-21 12:35:32,130 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=101, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 12:35:32,136 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=101, votedFor=nacos1:7848, cost time=6 ms

2024-05-21 12:35:32,138 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=102, granted=true.

2024-05-21 12:35:32,141 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=102.

2024-05-21 12:35:32,145 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,139 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:35:32,142 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=99.

2024-05-21 12:35:32,151 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=99, granted=true.

2024-05-21 12:35:32,151 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 12:35:32,152 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=99.

2024-05-21 12:35:32,155 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=99, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 12:35:32,157 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=103, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 12:35:32,159 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=101, currTerm=101.

2024-05-21 12:35:32,160 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=100, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-21 12:35:32,166 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=100, votedFor=nacos2:7848, cost time=10 ms

2024-05-21 12:35:32,168 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=100, currTerm=100.

2024-05-21 12:35:32,173 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=100, votedFor=nacos1:7848, cost time=11 ms

2024-05-21 12:35:32,180 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=99, currTerm=100.

2024-05-21 12:35:32,196 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=100, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:35:32,219 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:35:32,228 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=103, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:35:32,234 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:35:32,235 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:35:32,236 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:35:32,244 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 12:35:32,249 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=103, currTerm=103.

2024-05-21 12:35:32,271 INFO onLeaderStart: term=103.

2024-05-21 12:35:32,274 INFO onLeaderStart: term=100.

2024-05-21 12:51:57,907 INFO Node <naming_persistent_service_v2/nacos2:7848> term 100 start preVote.

2024-05-21 12:51:58,176 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:51:58,168 INFO Node <naming_service_metadata/nacos2:7848> term 101 start preVote.

2024-05-21 12:51:58,065 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=103, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:51:58,064 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 12:51:58,208 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=44, type=Follower] is going to quit

2024-05-21 12:51:58,039 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=100, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 12:51:58,567 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:51:58,577 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=52, type=Follower] is going to quit

2024-05-21 12:51:58,578 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 12:51:58,563 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,570 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=45, type=Follower] is going to quit

2024-05-21 12:51:58,539 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=100, granted=false.

2024-05-21 12:51:58,603 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 12:51:58,578 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=99, lastLogIncluded=0, lastLogIndex=99, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=53, type=Follower] is going to quit

2024-05-21 12:51:58,579 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,612 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 12:51:58,612 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:51:58,613 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 12:51:58,613 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=99, term=100], lastLogId=LogId [index=99, term=100].

2024-05-21 12:51:58,617 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,618 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=100, granted=false.

2024-05-21 12:51:58,642 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_94.

2024-05-21 12:51:58,644 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,642 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=101, currTerm=100.

2024-05-21 12:51:58,667 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=101, granted=true.

2024-05-21 12:51:58,678 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=101.

2024-05-21 12:51:58,668 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:58,681 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 12:51:58,675 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 12:51:58,688 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_98.

2024-05-21 12:51:58,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=101, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-21 12:51:58,694 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=102, votedFor=nacos2:7848, cost time=15 ms

2024-05-21 12:51:58,701 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 99, cost 1 ms.

2024-05-21 12:51:58,702 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 95, cost 0 ms.

2024-05-21 12:51:58,679 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 12:51:58,689 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_95.

2024-05-21 12:51:58,733 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=102, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 12:51:58,737 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=101, currTerm=102.

2024-05-21 12:51:58,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=101, votedFor=nacos1:7848, cost time=60 ms

2024-05-21 12:51:58,756 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,689 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 12:51:58,732 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_96.

2024-05-21 12:51:58,756 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 12:51:58,767 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,775 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 96, cost 1 ms.

2024-05-21 12:51:58,767 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=103.

2024-05-21 12:51:58,789 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 97, cost 1 ms.

2024-05-21 12:51:58,808 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,812 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=104, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 12:51:58,814 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,870 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=104, votedFor=nacos1:7848, cost time=58 ms

2024-05-21 12:51:58,881 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=102, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 12:51:58,884 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 12:51:58,886 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 12:51:58,914 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 12:51:58,948 INFO onLeaderStart: term=102.

2024-05-21 12:51:58,983 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:08:24,514 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=102, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:08:25,352 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,353 INFO Node <naming_persistent_service_v2/nacos2:7848> term 100 start preVote.

2024-05-21 13:08:25,363 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,363 INFO Node <naming_persistent_service/nacos2:7848> term 104 start preVote.

2024-05-21 13:08:25,363 INFO Node <naming_instance_metadata/nacos2:7848> term 101 start preVote.

2024-05-21 13:08:25,363 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:08:25,572 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=42, type=Follower] is going to quit

2024-05-21 13:08:25,574 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:08:25,675 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=101, currTerm=100, granted=true, requestLastLogId=LogId [index=100, term=100], lastLogId=LogId [index=100, term=100].

2024-05-21 13:08:25,685 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=43, type=Follower] is going to quit

2024-05-21 13:08:25,714 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,718 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=100, granted=true.

2024-05-21 13:08:25,749 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=100.

2024-05-21 13:08:25,717 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:08:25,759 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:08:25,770 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=101, granted=true.

2024-05-21 13:08:25,770 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=101.

2024-05-21 13:08:25,772 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=101, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,775 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=100, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,715 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=105, currTerm=104, because the leader nacos1:7848's lease is still valid.

2024-05-21 13:08:25,777 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=104, granted=true.

2024-05-21 13:08:25,777 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=104.

2024-05-21 13:08:25,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=101, votedFor=nacos2:7848, cost time=16 ms

2024-05-21 13:08:25,778 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:08:25,784 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:08:25,814 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=102, votedFor=nacos2:7848, cost time=41 ms

2024-05-21 13:08:25,817 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=101, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:08:25,838 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=102, granted=true, requestLastLogId=LogId [index=100, term=101], lastLogId=LogId [index=100, term=101].

2024-05-21 13:08:25,841 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:08:25,845 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=105, votedFor=nacos2:7848, cost time=65 ms

2024-05-21 13:08:25,871 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=103, currTerm=102.

2024-05-21 13:08:25,884 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=103, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 13:08:25,891 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:08:25,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=103, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 13:08:25,845 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:08:25,902 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,916 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:08:25,902 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=105, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:08:25,915 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=102, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:08:25,918 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:08:25,926 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:08:25,921 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:08:25,928 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:08:25,931 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=105.

2024-05-21 13:08:25,934 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:08:25,935 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=102.

2024-05-21 13:08:25,939 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:08:25,940 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:08:25,944 INFO onLeaderStart: term=105.

2024-05-21 13:08:25,950 INFO onLeaderStart: term=102.

2024-05-21 13:08:25,953 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:08:25,979 INFO onLeaderStart: term=101.

2024-05-21 13:24:06,405 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=105, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:24:06,562 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=47, type=Follower] is going to quit

2024-05-21 13:24:06,563 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=105, lastLogIncluded=0, lastLogIndex=105, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=46, type=Follower] is going to quit

2024-05-21 13:24:06,564 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=102, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:24:06,566 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=55, type=Follower] is going to quit

2024-05-21 13:24:06,566 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:24:07,230 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:07,219 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 13:24:07,428 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:24:06,406 INFO Node <naming_service_metadata/nacos2:7848> term 103 start preVote.

2024-05-21 13:24:07,430 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,431 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:24:07,434 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_99.

2024-05-21 13:24:06,749 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:24:07,429 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=105, term=105], lastLogId=LogId [index=105, term=105].

2024-05-21 13:24:06,744 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:24:07,441 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 95 to 100, cost 2 ms.

2024-05-21 13:24:07,430 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=104, currTerm=103, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:24:06,745 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=101, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:24:07,431 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_100.

2024-05-21 13:24:07,436 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=54, type=Follower] is going to quit

2024-05-21 13:24:07,461 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,462 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=105.

2024-05-21 13:24:07,481 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,478 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:24:07,478 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=46, type=Follower] is going to quit

2024-05-21 13:24:07,481 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:24:07,502 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=103, granted=false.

2024-05-21 13:24:07,503 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=106, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-21 13:24:07,538 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_100.

2024-05-21 13:24:07,538 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=101, lastLogIncluded=0, lastLogIndex=101, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=45, type=Follower] is going to quit

2024-05-21 13:24:07,550 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=103, granted=true.

2024-05-21 13:24:07,546 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 97 to 101, cost 8 ms.

2024-05-21 13:24:07,548 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,559 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=106, votedFor=nacos3:7848, cost time=12 ms

2024-05-21 13:24:07,550 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,551 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 13:24:07,551 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,551 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=103.

2024-05-21 13:24:07,563 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 96 to 101, cost 1 ms.

2024-05-21 13:24:07,552 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=103, currTerm=102.

2024-05-21 13:24:07,559 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:24:07,561 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=102, currTerm=101, granted=true, requestLastLogId=LogId [index=101, term=101], lastLogId=LogId [index=101, term=101].

2024-05-21 13:24:07,571 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=104, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 13:24:07,573 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_103.

2024-05-21 13:24:07,581 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=103, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 13:24:07,586 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,591 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=104, currTerm=104.

2024-05-21 13:24:07,592 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=103, votedFor=nacos3:7848, cost time=6 ms

2024-05-21 13:24:07,596 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=103, currTerm=103, granted=true, requestLastLogId=LogId [index=101, term=102], lastLogId=LogId [index=101, term=102].

2024-05-21 13:24:07,602 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,604 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 99 to 104, cost 2 ms.

2024-05-21 13:24:07,606 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,629 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=102, currTerm=101.

2024-05-21 13:24:07,646 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=102, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 13:24:07,648 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,658 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=102, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 13:24:07,669 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:24:07,670 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=102, currTerm=102.

2024-05-21 13:24:07,723 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:25:27,313 INFO Node <naming_instance_metadata/nacos2:7848> term 103 start preVote.

2024-05-21 13:25:27,313 INFO Node <naming_service_metadata/nacos2:7848> term 104 start preVote.

2024-05-21 13:25:27,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=102, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 13:25:27,313 INFO Node <naming_persistent_service/nacos2:7848> term 106 start preVote.

2024-05-21 13:25:27,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,313 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=104, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:25:27,313 INFO Node <naming_persistent_service_v2/nacos2:7848> term 102 start preVote.

2024-05-21 13:25:27,770 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=103, granted=true.

2024-05-21 13:25:27,788 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=103, currTerm=102, granted=true, requestLastLogId=LogId [index=102, term=102], lastLogId=LogId [index=102, term=102].

2024-05-21 13:25:27,788 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=104, granted=true.

2024-05-21 13:25:27,834 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=104.

2024-05-21 13:25:27,831 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=103.

2024-05-21 13:25:27,834 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=102, granted=true.

2024-05-21 13:25:27,946 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=106, granted=true.

2024-05-21 13:25:27,949 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=106.

2024-05-21 13:25:27,948 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=102.

2024-05-21 13:25:27,961 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:27,977 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=103, currTerm=103.

2024-05-21 13:25:27,966 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=104, votedFor=nacos2:7848, cost time=17 ms

2024-05-21 13:25:27,967 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=107, votedFor=nacos2:7848, cost time=14 ms

2024-05-21 13:25:27,977 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=105, votedFor=nacos2:7848, cost time=140 ms

2024-05-21 13:25:28,000 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=104, granted=true, requestLastLogId=LogId [index=102, term=103], lastLogId=LogId [index=102, term=103].

2024-05-21 13:25:28,005 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:28,000 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 13:25:28,006 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=104, currTerm=105.

2024-05-21 13:25:28,016 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:28,018 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=105, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:25:28,019 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:25:28,021 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:25:28,019 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=107.

2024-05-21 13:25:28,087 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=107, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 13:25:28,021 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 13:25:28,088 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=107, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:25:28,090 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=104, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:25:28,090 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-21 13:25:28,091 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:25:28,093 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:25:28,097 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:25:28,093 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=103, votedFor=nacos2:7848, cost time=46 ms

2024-05-21 13:25:28,095 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=105, currTerm=105, granted=false, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=104, term=105].

2024-05-21 13:25:28,102 INFO onLeaderStart: term=105.

2024-05-21 13:25:28,095 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:25:28,108 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=104.

2024-05-21 13:25:28,130 INFO onLeaderStart: term=104.

2024-05-21 13:25:28,134 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:25:28,135 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:25:28,150 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 13:25:28,151 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 13:25:28,168 INFO onLeaderStart: term=107.

2024-05-21 13:26:09,577 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499799555s. [closed=[], open=[[remote_addr=nacos1/172.25.0.2:7848]]]], groupId=naming_persistent_service

2024-05-21 13:31:51,954 INFO Node <naming_persistent_service_v2/nacos2:7848> term 103 start preVote.

2024-05-21 13:31:51,982 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=103, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 13:31:52,783 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=103, granted=false.

2024-05-21 13:31:52,881 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=104, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:31:52,880 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=107, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:31:52,880 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=105, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 13:31:52,885 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=48, type=Follower] is going to quit

2024-05-21 13:31:52,883 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:31:52,883 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=56, type=Follower] is going to quit

2024-05-21 13:31:52,885 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:31:52,885 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 13:31:52,885 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=45, type=Follower] is going to quit

2024-05-21 13:31:52,915 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=46, type=Follower] is going to quit

2024-05-21 13:31:52,886 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=49, type=Follower] is going to quit

2024-05-21 13:31:52,894 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=103, lastLogIncluded=0, lastLogIndex=103, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=57, type=Follower] is going to quit

2024-05-21 13:31:52,918 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:31:52,920 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=104.

2024-05-21 13:31:52,953 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=103, granted=true.

2024-05-21 13:31:53,355 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=103.

2024-05-21 13:31:53,385 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=0.0.0.0:0, cost time=464 ms

2024-05-21 13:31:53,385 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=105, currTerm=105, granted=true, requestLastLogId=LogId [index=103, term=104], lastLogId=LogId [index=103, term=104].

2024-05-21 13:31:53,389 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:53,316 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:53,457 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=108, currTerm=107.

2024-05-21 13:31:53,423 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos3:7848, cost time=33 ms

2024-05-21 13:31:53,462 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=105, currTerm=105.

2024-05-21 13:31:53,473 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:53,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos2:7848, cost time=85 ms

2024-05-21 13:31:53,625 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=103, currTerm=104.

2024-05-21 13:31:53,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=0.0.0.0:0, cost time=67 ms

2024-05-21 13:31:53,582 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:53,598 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=106, currTerm=105.

2024-05-21 13:31:53,636 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=104, currTerm=104.

2024-05-21 13:31:53,685 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=104, currTerm=104, granted=true, requestLastLogId=LogId [index=103, term=103], lastLogId=LogId [index=103, term=103].

2024-05-21 13:31:53,984 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos1:7848, cost time=354 ms

2024-05-21 13:31:53,984 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=0.0.0.0:0, cost time=339 ms

2024-05-21 13:31:54,007 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=108, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:54,010 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=108, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-21 13:31:54,013 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=108, currTerm=108.

2024-05-21 13:31:54,035 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,038 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos1:7848, cost time=28 ms

2024-05-21 13:31:54,047 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=106, currTerm=106, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 13:31:54,051 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=106.

2024-05-21 13:31:54,057 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,096 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=106, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 13:31:54,049 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,116 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,213 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,213 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=104, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 13:31:54,215 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-21 13:31:54,216 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-21 13:31:54,288 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 13:31:54,306 INFO onLeaderStart: term=104.

2024-05-21 13:54:06,408 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:06,410 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 13:54:06,410 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:06,410 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:06,410 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:06,411 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 13:54:06,411 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 13:54:06,412 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 13:54:06,412 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_105.

2024-05-21 13:54:06,417 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_102.

2024-05-21 13:54:06,420 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_101.

2024-05-21 13:54:06,420 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_101.

2024-05-21 13:54:06,424 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 104 to 106, cost 2 ms.

2024-05-21 13:54:06,426 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 101 to 103, cost 0 ms.

2024-05-21 13:54:06,427 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 100 to 102, cost 0 ms.

2024-05-21 13:54:06,427 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 101 to 102, cost 0 ms.

2024-05-21 13:56:29,512 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 13:56:29,684 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 13:56:29,852 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 13:56:29,878 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 14:01:52,904 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-21 14:01:53,500 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-21 14:01:58,443 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:01:58,445 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:01:58,447 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:01:58,448 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:01:58,938 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 14:01:58,940 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 14:01:58,941 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 14:01:58,944 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 14:01:59,111 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:01:59,111 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 14:24:06,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 103 to 106, cost 0 ms.

2024-05-21 14:24:06,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:24:06,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 102 to 105, cost 0 ms.

2024-05-21 14:24:06,337 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 106 to 109, cost 0 ms.

2024-05-21 14:54:06,318 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 14:54:06,318 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 14:54:06,318 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 14:54:06,318 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:24:06,283 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 15:24:06,284 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 15:24:06,284 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 15:24:06,284 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 1 ms.

2024-05-21 15:37:43,484 INFO Node <naming_service_metadata/nacos2:7848> shutdown, currTerm=106 state=STATE_FOLLOWER.

2024-05-21 15:37:43,487 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=106, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:43,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=106, votedFor=nacos1:7848, cost time=23 ms

2024-05-21 15:37:43,519 INFO Shutting down FSMCaller...

2024-05-21 15:37:43,521 INFO onShutdown.

2024-05-21 15:37:43,526 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=307, target=nacos3:7848}}.

2024-05-21 15:37:43,528 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,529 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,531 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=311, target=nacos1:7848}}.

2024-05-21 15:37:43,533 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,534 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,569 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-21 15:37:43,570 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-21 15:37:43,593 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-21 15:37:43,593 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-21 15:37:43,579 INFO The number of active nodes decrement to 3.

2024-05-21 15:37:43,593 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4d49321c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 169].

2024-05-21 15:37:43,628 INFO Node <naming_service_metadata/nacos2:7848> shutdown, currTerm=106 state=STATE_SHUTTING.

2024-05-21 15:37:43,629 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:43,629 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=108 state=STATE_FOLLOWER.

2024-05-21 15:37:43,638 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=108, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:43,652 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@472f6e4e[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 2449].

2024-05-21 15:37:43,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=108, votedFor=nacos1:7848, cost time=40 ms

2024-05-21 15:37:43,680 INFO Shutting down FSMCaller...

2024-05-21 15:37:43,686 INFO onShutdown.

2024-05-21 15:37:43,687 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=284, target=nacos3:7848}}.

2024-05-21 15:37:43,694 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,696 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,697 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-21 15:37:43,699 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,699 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,745 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 15:37:43,745 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 15:37:43,747 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 15:37:43,747 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 15:37:43,753 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@643935bd[Shutting down, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 137].

2024-05-21 15:37:43,754 INFO The number of active nodes decrement to 2.

2024-05-21 15:37:43,804 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=108 state=STATE_SHUTTING.

2024-05-21 15:37:43,848 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:43,849 INFO Node <naming_instance_metadata/nacos2:7848> shutdown, currTerm=105 state=STATE_FOLLOWER.

2024-05-21 15:37:43,876 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 15:37:43,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=105, votedFor=nacos3:7848, cost time=19 ms

2024-05-21 15:37:43,984 INFO Shutting down FSMCaller...

2024-05-21 15:37:43,996 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=351, target=nacos3:7848}}.

2024-05-21 15:37:43,997 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,997 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:43,997 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=364, target=nacos1:7848}}.

2024-05-21 15:37:43,998 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:43,998 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,005 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-21 15:37:43,974 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@717f3f31[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 32312].

2024-05-21 15:37:44,006 INFO onShutdown.

2024-05-21 15:37:44,020 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 15:37:44,011 INFO The number of active nodes decrement to 1.

2024-05-21 15:37:44,054 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 15:37:44,012 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-21 15:37:44,070 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-21 15:37:44,071 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-21 15:37:44,052 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@64e8e1bf[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 58901].

2024-05-21 15:37:44,087 INFO Node <naming_instance_metadata/nacos2:7848> shutdown, currTerm=105 state=STATE_SHUTTING.

2024-05-21 15:37:44,116 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,116 INFO Node <naming_persistent_service_v2/nacos2:7848> shutdown, currTerm=104 state=STATE_LEADER.

2024-05-21 15:37:44,132 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 15:37:44,138 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 15:37:44,134 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_service_metadata/log.

2024-05-21 15:37:44,136 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=48, type=Follower] is going to quit

2024-05-21 15:37:44,178 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7790af95[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 166].

2024-05-21 15:37:44,196 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=47, type=Follower] stops sending entries.

2024-05-21 15:37:44,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=104, votedFor=nacos2:7848, cost time=22 ms

2024-05-21 15:37:44,214 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=47, type=Follower] is going to quit

2024-05-21 15:37:44,218 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=104, lastLogIncluded=0, lastLogIndex=104, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=47, type=Follower] already destroyed, ignore error code: 1001

2024-05-21 15:37:44,218 INFO Shutting down FSMCaller...

2024-05-21 15:37:44,219 INFO onShutdown.

2024-05-21 15:37:44,220 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=349, target=nacos3:7848}}.

2024-05-21 15:37:44,220 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,220 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,221 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=362, target=nacos1:7848}}.

2024-05-21 15:37:44,222 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,222 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,232 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_instance_metadata/log.

2024-05-21 15:37:44,252 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-21 15:37:44,306 INFO The number of active nodes decrement to 0.

2024-05-21 15:37:44,321 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@2fe5dbb2[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 151].

2024-05-21 15:37:44,322 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@55ab4e01[Shutting down, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 62569].

2024-05-21 15:37:44,365 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@38693670[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 14852].

2024-05-21 15:37:44,367 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-21 15:37:44,378 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@296036e2[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 121].

2024-05-21 15:37:44,380 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-21 15:37:44,383 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4e937f0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 15885].

2024-05-21 15:37:44,388 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-21 15:37:44,393 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@34a6dbeb[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 76].

2024-05-21 15:37:44,397 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-21 15:37:44,410 INFO Node <naming_persistent_service_v2/nacos2:7848> shutdown, currTerm=104 state=STATE_SHUTTING.

2024-05-21 15:37:44,414 INFO Stop the RaftGroupService successfully.

2024-05-21 15:37:44,433 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=316, target=nacos3:7848}}.

2024-05-21 15:37:44,434 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,435 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,449 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-21 15:37:44,451 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log.

2024-05-21 15:37:44,457 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,459 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,461 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 15:37:44,461 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 15:37:44,462 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 15:37:44,464 INFO Connection disconnected: /172.25.0.3:41680

2024-05-21 15:37:44,499 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@21680fb9[Shutting down, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 50701].

2024-05-21 22:01:35,393 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:01:35,831 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:01:36,591 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:01:36,593 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:01:36,594 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:01:36,597 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:01:36,605 INFO The number of active nodes increment to 1.

2024-05-21 22:01:36,940 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 1 ms.

2024-05-21 22:01:36,949 INFO Starts FSMCaller successfully.

2024-05-21 22:01:36,964 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:01:37,066 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:01:37,067 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:01:37,076 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:01:37,080 INFO Node <naming_persistent_service/nacos2:7848> init, term=108, lastLogId=LogId [index=108, term=108], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:01:37,085 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:01:37,085 INFO Start the RaftGroupService successfully.

2024-05-21 22:01:37,290 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:37,493 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:37,496 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:37,497 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:37,497 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:37,499 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:01:37,535 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:01:37,742 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:01:37,743 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:01:37,965 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:01:37,966 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:01:38,004 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:01:38,005 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:01:39,100 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:39,107 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:39,108 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:40,141 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:40,145 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:40,145 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:40,145 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:40,146 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:41,165 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:41,166 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:41,167 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,094 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,097 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,097 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,099 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,110 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:42,111 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,112 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,195 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:42,197 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:42,197 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:42,197 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:42,198 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:42,395 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=108, term=108], lastLogId=LogId [index=108, term=108].

2024-05-21 22:01:42,410 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=109, currTerm=108.

2024-05-21 22:01:42,422 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=109, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 22:01:42,431 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=109, votedFor=nacos1:7848, cost time=6 ms

2024-05-21 22:01:42,473 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:01:42,888 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=109 state=STATE_FOLLOWER.

2024-05-21 22:01:42,889 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=109, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 22:01:42,900 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=109, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 22:01:42,900 INFO Shutting down FSMCaller...

2024-05-21 22:01:42,901 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@6bffbc6d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,902 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7749bf93[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,903 INFO The number of active nodes decrement to 0.

2024-05-21 22:01:42,902 INFO onShutdown.

2024-05-21 22:01:42,906 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@bab85a4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:01:42,906 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:01:42,907 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@13330ac6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,907 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:01:42,908 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@539d019[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,909 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:01:42,910 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@5711df59[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:01:42,911 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:01:42,912 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=109 state=STATE_SHUTTING.

2024-05-21 22:01:42,917 INFO Stop the RaftGroupService successfully.

2024-05-21 22:01:42,918 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-21 22:01:42,920 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,921 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,919 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:01:42,922 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-21 22:01:42,923 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,923 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,932 INFO Connection disconnected: /172.25.0.3:51108

2024-05-21 22:01:42,936 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:01:42,936 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:01:42,937 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:01:42,949 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@737a216e[Shutting down, pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:01:42,953 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 22:01:42,977 INFO Connection disconnected: /172.25.0.2:36650

2024-05-21 22:01:54,555 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:01:54,862 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:01:55,902 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:01:55,904 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:01:55,906 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:01:55,908 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:01:55,916 INFO The number of active nodes increment to 1.

2024-05-21 22:01:56,292 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 1 ms.

2024-05-21 22:01:56,299 INFO Starts FSMCaller successfully.

2024-05-21 22:01:56,316 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:01:56,509 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:01:56,512 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:01:56,514 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:01:56,545 INFO Node <naming_persistent_service/nacos2:7848> init, term=109, lastLogId=LogId [index=109, term=109], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:01:56,548 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:01:56,551 INFO Start the RaftGroupService successfully.

2024-05-21 22:01:56,976 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:01:57,216 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:01:57,218 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:01:57,221 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:01:57,222 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:01:57,231 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:01:57,370 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:01:57,800 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:01:57,801 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:01:57,924 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:01:57,929 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:01:58,039 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:01:58,043 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:01:59,083 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:01:59,088 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:01:59,089 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:00,128 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:00,139 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:00,140 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:00,149 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:00,152 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:01,175 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:01,177 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:01,179 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:01,567 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:01,571 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:01,571 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:01,572 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:01,590 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:01,591 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:01,592 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:01,688 INFO Node <naming_persistent_service/nacos2:7848> term 109 start preVote.

2024-05-21 22:02:01,691 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:01,692 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:01,692 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:01,693 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:01,693 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:01,694 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:01,695 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:01,701 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:01,702 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:01,704 INFO Peer nacos1:7848 is connected.

2024-05-21 22:02:01,727 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=109, granted=true.

2024-05-21 22:02:01,728 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=109.

2024-05-21 22:02:01,730 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:01,732 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:01,733 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:01,736 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:02:01,749 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=110, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 22:02:01,765 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=110, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:01,780 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:01,785 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:01,786 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:01,786 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-21 22:02:01,788 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-21 22:02:01,790 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-21 22:02:01,787 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:01,799 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 22:02:01,829 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:01,885 INFO onLeaderStart: term=110.

2024-05-21 22:02:02,207 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:02,211 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:02,212 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:02,212 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:02,213 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:02,824 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=110 state=STATE_LEADER.

2024-05-21 22:02:02,829 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 22:02:02,844 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=110, lastLogIncluded=0, lastLogIndex=110, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-21 22:02:02,849 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=110, votedFor=nacos2:7848, cost time=5 ms

2024-05-21 22:02:02,850 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=110, lastLogIncluded=0, lastLogIndex=110, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 22:02:02,852 INFO Shutting down FSMCaller...

2024-05-21 22:02:02,853 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=26, target=nacos3:7848}}.

2024-05-21 22:02:02,854 INFO onShutdown.

2024-05-21 22:02:02,854 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,855 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,856 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-21 22:02:02,856 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,857 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,866 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@634c9d98[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-21 22:02:02,867 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@71df14b[Shutting down, pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2].

2024-05-21 22:02:02,869 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:02,870 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1c69387a[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:02,874 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:02,874 INFO Connection disconnected: /172.25.0.2:48826

2024-05-21 22:02:02,875 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@19bd9eb3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,876 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:02,877 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2cc5a09d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,877 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:02,878 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@788890a9[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:02,878 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:02,879 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=110 state=STATE_SHUTTING.

2024-05-21 22:02:02,881 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:02,882 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=28, target=nacos3:7848}}.

2024-05-21 22:02:02,883 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,886 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,886 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:02,888 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-21 22:02:02,889 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,890 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,893 INFO Connection disconnected: /172.25.0.3:43696

2024-05-21 22:02:02,894 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:02,894 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:02,895 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:02,901 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@15b7ffa0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:15,958 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:16,220 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:17,019 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:17,020 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:17,022 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:17,026 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:17,034 INFO The number of active nodes increment to 1.

2024-05-21 22:02:17,438 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 1 ms.

2024-05-21 22:02:17,452 INFO Starts FSMCaller successfully.

2024-05-21 22:02:17,465 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:17,599 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:17,601 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:17,607 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:02:17,621 INFO Node <naming_persistent_service/nacos2:7848> init, term=110, lastLogId=LogId [index=110, term=110], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:17,629 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:17,630 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:17,825 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:17,959 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:17,961 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:17,963 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:17,964 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:17,966 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:18,006 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:18,261 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:18,265 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:18,310 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:18,312 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:18,320 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:18,321 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:19,352 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:19,355 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:19,355 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:20,377 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:20,381 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:20,382 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:20,383 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:20,384 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:21,404 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:21,406 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:21,408 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:22,430 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:22,435 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:22,435 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:22,436 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:22,436 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:22,655 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:22,669 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:22,671 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:22,783 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=111, currTerm=110, granted=true, requestLastLogId=LogId [index=110, term=110], lastLogId=LogId [index=110, term=110].

2024-05-21 22:02:22,873 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:22,877 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:22,878 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:22,878 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:22,886 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=111, currTerm=110.

2024-05-21 22:02:22,938 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=111, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-21 22:02:22,952 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=111, votedFor=nacos1:7848, cost time=9 ms

2024-05-21 22:02:23,117 INFO Connection disconnected: /172.25.0.2:49106

2024-05-21 22:02:23,172 INFO Connection disconnected: /172.25.0.2:54102

2024-05-21 22:02:23,429 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=111 state=STATE_FOLLOWER.

2024-05-21 22:02:23,442 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=111, votedFor=nacos1:7848, cost time=8 ms

2024-05-21 22:02:23,443 INFO Shutting down FSMCaller...

2024-05-21 22:02:23,444 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@524f3b3a[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,444 INFO onShutdown.

2024-05-21 22:02:23,445 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@49ff7d8c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,447 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@25d9fab0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:23,446 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:23,450 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:23,453 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@29526c05[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,454 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:23,454 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2ef14fe[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,455 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:23,455 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@b6aba04[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:23,456 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:23,457 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=111 state=STATE_SHUTTING.

2024-05-21 22:02:23,461 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:23,463 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-21 22:02:23,465 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,463 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:23,468 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,470 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-21 22:02:23,471 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,471 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,479 INFO Connection disconnected: /172.25.0.3:52590

2024-05-21 22:02:23,480 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=7, target=nacos1:7848}}.

2024-05-21 22:02:23,481 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:23,481 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:23,488 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@71efa873[Shutting down, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:34,315 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:34,613 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:35,325 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:35,328 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:35,330 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:35,335 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:35,341 INFO The number of active nodes increment to 1.

2024-05-21 22:02:35,610 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:02:35,625 INFO Starts FSMCaller successfully.

2024-05-21 22:02:35,648 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:35,763 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:35,766 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:35,770 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:02:35,791 INFO Node <naming_persistent_service/nacos2:7848> init, term=111, lastLogId=LogId [index=110, term=110], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:35,801 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:35,802 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:36,158 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:36,371 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:36,375 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:36,375 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:36,376 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:36,382 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:36,465 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:37,065 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:37,067 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:37,214 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:37,216 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:37,262 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:37,265 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:38,363 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:38,367 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:38,367 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:39,403 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:39,408 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:39,408 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:39,410 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:39,411 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:40,438 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:40,443 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:40,445 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:40,818 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:40,821 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:40,822 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:40,822 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:40,845 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:40,846 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:40,847 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:41,171 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=112, currTerm=111, granted=true, requestLastLogId=LogId [index=110, term=110], lastLogId=LogId [index=110, term=110].

2024-05-21 22:02:41,188 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=112, currTerm=111.

2024-05-21 22:02:41,203 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=112, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-21 22:02:41,210 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=112, votedFor=nacos1:7848, cost time=4 ms

2024-05-21 22:02:41,257 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:41,475 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:41,479 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:41,481 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:41,482 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:41,482 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:41,955 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=112.

2024-05-21 22:02:41,960 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=112, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 22:02:41,962 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:41,964 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:41,965 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:41,965 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:41,966 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:41,967 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:41,969 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:41,985 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:41,987 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:41,988 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 22:02:41,992 INFO Peer nacos1:7848 is connected.

2024-05-21 22:02:42,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=113, votedFor=nacos2:7848, cost time=12 ms

2024-05-21 22:02:42,032 INFO Node <naming_persistent_service/nacos2:7848> received TimeoutNowRequest from nacos1:7848, term=112.

2024-05-21 22:02:42,038 INFO Connection disconnected: /172.25.0.2:52022

2024-05-21 22:02:42,045 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[ENOENT<1012>: Peer id not found: nacos1:7848, group: naming_persistent_service].

2024-05-21 22:02:42,195 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=113 state=STATE_CANDIDATE.

2024-05-21 22:02:42,211 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=113, votedFor=nacos2:7848, cost time=11 ms

2024-05-21 22:02:42,213 INFO Shutting down FSMCaller...

2024-05-21 22:02:42,214 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=23, target=nacos3:7848}}.

2024-05-21 22:02:42,217 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,217 INFO onShutdown.

2024-05-21 22:02:42,218 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,221 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=25, target=nacos1:7848}}.

2024-05-21 22:02:42,221 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,222 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,235 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@77e8f573[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:42,238 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@76f4b65[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,242 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:42,245 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@329dee10[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:42,246 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:42,246 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3d25aa45[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,247 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:42,248 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@c94fd30[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,249 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:42,249 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1074bcd4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:42,251 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:42,252 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=113 state=STATE_SHUTTING.

2024-05-21 22:02:42,254 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:42,255 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-21 22:02:42,256 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:42,256 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,257 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,258 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-21 22:02:42,260 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,260 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,261 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:42,261 INFO Connection disconnected: /172.25.0.3:38436

2024-05-21 22:02:42,262 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:42,262 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:42,270 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4df74b0f[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:02:52,606 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:02:52,719 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:02:53,295 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:02:53,296 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:02:53,298 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:02:53,301 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:02:53,306 INFO The number of active nodes increment to 1.

2024-05-21 22:02:53,545 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:02:53,559 INFO Starts FSMCaller successfully.

2024-05-21 22:02:53,572 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:02:53,641 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:02:53,642 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:02:53,647 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:02:53,654 INFO Node <naming_persistent_service/nacos2:7848> init, term=113, lastLogId=LogId [index=111, term=112], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:53,657 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:02:53,658 INFO Start the RaftGroupService successfully.

2024-05-21 22:02:53,772 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:53,921 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:53,921 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:53,922 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:53,921 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:53,927 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:53,959 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:54,714 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:54,716 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:54,882 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:02:54,887 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:02:55,020 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:02:55,023 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:02:56,092 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:56,097 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:56,098 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:57,123 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:57,130 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:57,130 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:57,132 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:57,132 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:58,146 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:58,149 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:58,150 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:58,668 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:58,673 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:58,673 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:58,674 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:58,692 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:58,693 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:58,694 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,010 INFO Node <naming_persistent_service/nacos2:7848> term 113 start preVote.

2024-05-21 22:02:59,015 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:59,017 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:59,018 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:59,018 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:02:59,018 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:59,020 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:02:59,022 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:02:59,032 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:02:59,036 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:02:59,040 INFO Peer nacos1:7848 is connected.

2024-05-21 22:02:59,066 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=113, currTerm=113, granted=true, requestLastLogId=LogId [index=111, term=112], lastLogId=LogId [index=111, term=112].

2024-05-21 22:02:59,105 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=113, granted=true.

2024-05-21 22:02:59,106 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=113.

2024-05-21 22:02:59,109 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:02:59,110 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,112 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,114 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-21 22:02:59,124 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=114, votedFor=nacos2:7848, cost time=10 ms

2024-05-21 22:02:59,145 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=114, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:02:59,154 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:59,157 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:59,157 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:59,158 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:59,159 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-21 22:02:59,161 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-21 22:02:59,161 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-21 22:02:59,168 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-21 22:02:59,168 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:02:59,182 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:02:59,183 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:02:59,187 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:02:59,188 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:02:59,192 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:02:59,279 INFO onLeaderStart: term=114.

2024-05-21 22:02:59,478 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=114 state=STATE_LEADER.

2024-05-21 22:02:59,482 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-21 22:02:59,489 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=112, lastLogIncluded=0, lastLogIndex=112, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-21 22:02:59,497 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=114, votedFor=nacos2:7848, cost time=8 ms

2024-05-21 22:02:59,497 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=112, lastLogIncluded=0, lastLogIndex=112, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-21 22:02:59,499 INFO Shutting down FSMCaller...

2024-05-21 22:02:59,501 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=27, target=nacos3:7848}}.

2024-05-21 22:02:59,503 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,501 INFO onShutdown.

2024-05-21 22:02:59,504 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,506 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-21 22:02:59,506 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,507 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,520 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@34d9b93d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-21 22:02:59,522 INFO The number of active nodes decrement to 0.

2024-05-21 22:02:59,523 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6f3d3781[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,528 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@22ff49d0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:02:59,530 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:59,531 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2717e06d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,532 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:59,532 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4f4eee00[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,533 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:59,535 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@538d9a8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:02:59,535 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:02:59,536 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=114 state=STATE_SHUTTING.

2024-05-21 22:02:59,538 INFO Stop the RaftGroupService successfully.

2024-05-21 22:02:59,538 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=29, target=nacos3:7848}}.

2024-05-21 22:02:59,541 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,541 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,541 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:02:59,542 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-21 22:02:59,544 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,544 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,546 INFO Connection disconnected: /172.25.0.3:32884

2024-05-21 22:02:59,549 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:02:59,550 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:02:59,550 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:02:59,557 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4e2b82f7[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 18].

2024-05-21 22:03:12,960 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 22:03:13,209 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 22:03:13,852 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 22:03:13,853 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 22:03:13,855 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 22:03:13,860 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 22:03:13,865 INFO The number of active nodes increment to 1.

2024-05-21 22:03:14,074 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 0 ms.

2024-05-21 22:03:14,078 INFO Starts FSMCaller successfully.

2024-05-21 22:03:14,092 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 22:03:14,178 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 22:03:14,179 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 22:03:14,186 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 22:03:14,191 INFO Node <naming_persistent_service/nacos2:7848> init, term=114, lastLogId=LogId [index=112, term=114], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 22:03:14,194 WARN RPC server is not started in RaftGroupService.

2024-05-21 22:03:14,195 INFO Start the RaftGroupService successfully.

2024-05-21 22:03:14,484 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:14,697 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:14,700 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:14,701 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:14,703 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:14,707 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:03:14,785 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:03:15,142 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:03:15,145 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:03:15,271 INFO Creating new channel to: nacos2:7848.

2024-05-21 22:03:15,273 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 22:03:15,338 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 22:03:15,339 INFO The channel nacos2:7848 has successfully established.

2024-05-21 22:03:16,365 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:16,371 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:16,374 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:17,405 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:17,409 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:17,409 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:17,413 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:17,412 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:18,436 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:18,439 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:18,441 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:19,205 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,211 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,211 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,212 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,228 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-21 22:03:19,229 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:19,230 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:19,255 INFO Node <naming_persistent_service/nacos2:7848> term 114 start preVote.

2024-05-21 22:03:19,258 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,263 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,263 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,265 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,264 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-21 22:03:19,267 INFO Creating new channel to: nacos1:7848.

2024-05-21 22:03:19,269 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 22:03:19,275 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 22:03:19,275 INFO The channel nacos1:7848 has successfully established.

2024-05-21 22:03:19,277 INFO Peer nacos1:7848 is connected.

2024-05-21 22:03:19,296 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term 115, expect=114.

2024-05-21 22:03:19,309 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=115, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-21 22:03:19,473 INFO Creating new channel to: nacos3:7848.

2024-05-21 22:03:19,476 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-21 22:03:19,476 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-21 22:03:19,478 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-21 22:03:19,479 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 22:03:19,618 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=115, granted=true, requestLastLogId=LogId [index=112, term=114], lastLogId=LogId [index=112, term=114].

2024-05-21 22:03:19,630 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=116, currTerm=115.

2024-05-21 22:03:19,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-21 22:03:19,645 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=nacos1:7848, cost time=4 ms

2024-05-21 22:03:19,694 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 22:03:20,120 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=116 state=STATE_FOLLOWER.

2024-05-21 22:03:20,121 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=116, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-21 22:03:20,129 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=116, votedFor=nacos1:7848, cost time=5 ms

2024-05-21 22:03:20,129 INFO Shutting down FSMCaller...

2024-05-21 22:03:20,130 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-21 22:03:20,131 INFO onShutdown.

2024-05-21 22:03:20,131 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,134 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,135 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-21 22:03:20,135 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,136 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,146 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@799c5b18[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:03:20,146 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@31dadd46[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,149 INFO The number of active nodes decrement to 0.

2024-05-21 22:03:20,152 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@562d5978[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-21 22:03:20,153 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:03:20,153 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4ed5eb72[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,154 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:03:20,154 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@12f9af83[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,155 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:03:20,156 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6e682c12[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-21 22:03:20,156 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-21 22:03:20,159 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=116 state=STATE_SHUTTING.

2024-05-21 22:03:20,161 INFO Stop the RaftGroupService successfully.

2024-05-21 22:03:20,161 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=26, target=nacos3:7848}}.

2024-05-21 22:03:20,162 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,164 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,163 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-21 22:03:20,165 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-21 22:03:20,169 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,170 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,172 INFO Connection disconnected: /172.25.0.3:59854

2024-05-21 22:03:20,175 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-21 22:03:20,177 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-21 22:03:20,178 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-21 22:03:20,190 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7be6565c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-21 22:03:20,192 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-21 22:03:20,218 INFO Connection disconnected: /172.25.0.2:39592

2024-05-21 23:07:26,713 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-21 23:07:26,885 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-21 23:07:27,453 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-21 23:07:27,455 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-21 23:07:27,456 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-21 23:07:27,459 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-21 23:07:27,463 INFO The number of active nodes increment to 1.

2024-05-21 23:07:27,902 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 109, cost 1 ms.

2024-05-21 23:07:27,917 INFO Starts FSMCaller successfully.

2024-05-21 23:07:27,939 INFO Loading snapshot, meta=last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:28,095 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 108
last_included_term: 108
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:28,098 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:28,110 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 1 ms.

2024-05-21 23:07:28,132 INFO Node <naming_persistent_service/nacos2:7848> init, term=116, lastLogId=LogId [index=113, term=116], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:28,136 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:28,137 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:28,432 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:07:28,644 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:07:29,403 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:07:29,412 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:07:29,486 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: deadline exceeded after 0.839845486s. [closed=[], open=[[buffered_nanos=757144494, remote_addr=nacos3/172.25.0.4:7848]]].

2024-05-21 23:07:29,490 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-21 23:07:29,512 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:07:29,533 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:07:29,568 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:07:29,570 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:07:29,638 INFO Creating new channel to: nacos2:7848.

2024-05-21 23:07:29,641 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:07:29,662 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:07:29,665 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:07:32,890 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=109, currTerm=116.

2024-05-21 23:07:33,278 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=117, currTerm=116, granted=true, requestLastLogId=LogId [index=113, term=116], lastLogId=LogId [index=113, term=116].

2024-05-21 23:07:33,298 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=117, currTerm=116.

2024-05-21 23:07:33,313 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=117, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 23:07:33,323 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=117, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 23:07:33,381 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-21 23:07:42,961 INFO The number of active nodes increment to 2.

2024-05-21 23:07:43,164 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 0 to 105, cost 1 ms.

2024-05-21 23:07:43,170 INFO Starts FSMCaller successfully.

2024-05-21 23:07:43,174 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,197 INFO Node <naming_persistent_service_v2/nacos2:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 104
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,200 INFO Node <naming_persistent_service_v2/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,207 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:43,209 INFO Node <naming_persistent_service_v2/nacos2:7848> init, term=104, lastLogId=LogId [index=104, term=104], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,210 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,211 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:43,230 INFO The number of active nodes increment to 3.

2024-05-21 23:07:43,362 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 0 to 105, cost 0 ms.

2024-05-21 23:07:43,374 INFO Starts FSMCaller successfully.

2024-05-21 23:07:43,379 INFO Loading snapshot, meta=last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,386 INFO Node <naming_instance_metadata/nacos2:7848> onSnapshotLoadDone, last_included_index: 104
last_included_term: 105
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,394 INFO Node <naming_instance_metadata/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,394 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:07:43,422 INFO Node <naming_instance_metadata/nacos2:7848> init, term=105, lastLogId=LogId [index=104, term=105], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,431 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,432 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:43,450 INFO The number of active nodes increment to 4.

2024-05-21 23:07:43,603 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 0 to 106, cost 1 ms.

2024-05-21 23:07:43,609 INFO Starts FSMCaller successfully.

2024-05-21 23:07:43,615 INFO Loading snapshot, meta=last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-21 23:07:43,619 INFO Node <naming_service_metadata/nacos2:7848> onSnapshotLoadDone, last_included_index: 105
last_included_term: 106
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-21 23:07:43,622 INFO Node <naming_service_metadata/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-21 23:07:43,628 INFO Node <naming_service_metadata/nacos2:7848> init, term=106, lastLogId=LogId [index=105, term=106], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:07:43,628 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 23:07:43,632 WARN RPC server is not started in RaftGroupService.

2024-05-21 23:07:43,633 INFO Start the RaftGroupService successfully.

2024-05-21 23:07:47,488 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=105, currTerm=104, granted=true, requestLastLogId=LogId [index=104, term=104], lastLogId=LogId [index=104, term=104].

2024-05-21 23:07:47,577 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=105, currTerm=104.

2024-05-21 23:07:47,591 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=105, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 23:07:47,619 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=105, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 23:07:48,150 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=106, currTerm=105, granted=true, requestLastLogId=LogId [index=104, term=105], lastLogId=LogId [index=104, term=105].

2024-05-21 23:07:48,204 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=106, currTerm=105.

2024-05-21 23:07:48,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=106, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-21 23:07:48,222 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=106, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 23:07:48,517 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=105, term=106], lastLogId=LogId [index=105, term=106].

2024-05-21 23:07:48,543 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=106.

2024-05-21 23:07:48,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=107, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-21 23:07:48,559 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=107, votedFor=nacos1:7848, cost time=7 ms

2024-05-21 23:24:29,876 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:24:29,878 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-21 23:24:29,883 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_104.

2024-05-21 23:24:29,936 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 105, cost 2 ms.

2024-05-21 23:25:59,467 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:25:59,468 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-21 23:25:59,470 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_104.

2024-05-21 23:25:59,476 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 105, cost 0 ms.

2024-05-21 23:33:22,325 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:33:22,328 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-21 23:33:22,330 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_108.

2024-05-21 23:33:22,339 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 109, cost 0 ms.

2024-05-21 23:35:07,820 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:35:07,821 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-21 23:35:07,824 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_105.

2024-05-21 23:35:07,829 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 106, cost 0 ms.

2024-05-21 23:37:37,924 INFO Connection disconnected: /172.25.0.4:35428

2024-05-21 23:37:48,142 INFO The channel nacos2:7848 is in state: IDLE.

2024-05-21 23:37:53,144 INFO Connection disconnected: /172.25.0.5:60602

2024-05-21 23:37:53,338 INFO Connection disconnected: /172.25.0.4:35422

2024-05-21 23:37:53,587 INFO Connection disconnected: /172.25.0.3:37850

2024-05-21 23:47:44,895 INFO Node <naming_service_metadata/nacos2:7848> term 107 start preVote.

2024-05-21 23:47:44,905 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 23:47:44,901 INFO Node <naming_persistent_service_v2/nacos2:7848> term 105 start preVote.

2024-05-21 23:47:44,896 INFO Node <naming_persistent_service/nacos2:7848> term 117 start preVote.

2024-05-21 23:47:44,897 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=117, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:44,896 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:44,898 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-21 23:47:44,897 INFO Node <naming_instance_metadata/nacos2:7848> term 106 start preVote.

2024-05-21 23:47:45,166 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,167 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,170 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,211 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,211 INFO Creating new channel to: nacos3:7848.

2024-05-21 23:47:45,218 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,241 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,251 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-21 23:47:45,524 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,527 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,536 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,538 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,539 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,547 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,558 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,561 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,563 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,565 INFO The channel nacos3:7848 is in state: READY.

2024-05-21 23:47:45,570 INFO The channel nacos3:7848 has successfully established.

2024-05-21 23:47:45,569 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:47:45,581 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:47:45,582 INFO Peer nacos3:7848 is connected.

2024-05-21 23:47:45,586 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,591 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,596 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,597 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,602 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,606 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,611 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,626 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,637 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:47:45,628 INFO Creating new channel to: nacos1:7848.

2024-05-21 23:47:45,638 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=107, currTerm=106, because the leader nacos3:7848's lease is still valid.

2024-05-21 23:47:45,661 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,663 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=106, granted=true.

2024-05-21 23:47:45,687 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=106.

2024-05-21 23:47:45,693 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=108, currTerm=107, because the leader nacos1:7848's lease is still valid.

2024-05-21 23:47:45,664 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-21 23:47:45,707 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,729 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=107, granted=true.

2024-05-21 23:47:45,733 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=107.

2024-05-21 23:47:45,732 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,734 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,735 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=107, votedFor=nacos2:7848, cost time=39 ms

2024-05-21 23:47:45,743 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=106, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:45,743 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=107, currTerm=107.

2024-05-21 23:47:45,749 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 23:47:45,754 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:47:45,755 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:45,755 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-21 23:47:45,774 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=118, currTerm=117, because the leader nacos1:7848's lease is still valid.

2024-05-21 23:47:45,785 INFO The channel nacos1:7848 is in state: READY.

2024-05-21 23:47:45,791 INFO The channel nacos1:7848 has successfully established.

2024-05-21 23:47:45,787 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=118, currTerm=117.

2024-05-21 23:47:45,793 INFO Peer nacos1:7848 is connected.

2024-05-21 23:47:45,801 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-21 23:47:45,801 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=108, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:45,813 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=106, currTerm=105, because the leader nacos3:7848's lease is still valid.

2024-05-21 23:47:45,817 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=118, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-21 23:47:45,818 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=106, currTerm=105.

2024-05-21 23:47:45,834 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=118, votedFor=nacos3:7848, cost time=13 ms

2024-05-21 23:47:45,836 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=106, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-21 23:47:45,845 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=117, currTerm=118.

2024-05-21 23:47:45,849 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=117, currTerm=118.

2024-05-21 23:47:45,849 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=117, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:45,850 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=106, votedFor=nacos1:7848, cost time=14 ms

2024-05-21 23:47:45,885 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=105, currTerm=106.

2024-05-21 23:47:45,897 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=118, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-21 23:47:45,898 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-21 23:47:45,916 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=105, currTerm=106.

2024-05-21 23:47:45,910 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=105, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:45,925 INFO The channel nacos2:7848 is in state: READY.

2024-05-21 23:47:45,929 INFO The channel nacos2:7848 has successfully established.

2024-05-21 23:47:45,952 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:47:45,993 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:47:46,002 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:46,080 INFO onLeaderStart: term=108.

2024-05-21 23:47:56,977 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=108, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-21 23:47:57,307 INFO Node <naming_instance_metadata/nacos2:7848> term 107 start preVote.

2024-05-21 23:47:57,310 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-21 23:47:57,455 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=2, type=Follower] is going to quit

2024-05-21 23:47:57,457 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-21 23:47:57,493 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=107, granted=false.

2024-05-21 23:47:57,507 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=107, currTerm=106, granted=true, requestLastLogId=LogId [index=106, term=106], lastLogId=LogId [index=106, term=106].

2024-05-21 23:47:57,512 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=107, currTerm=106.

2024-05-21 23:47:57,513 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=106, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:47:57,524 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=1, type=Follower] is going to quit

2024-05-21 23:47:57,535 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=107, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-21 23:47:57,538 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=106, currTerm=107.

2024-05-21 23:47:57,542 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,578 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,568 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=107, granted=true.

2024-05-21 23:47:57,582 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=107.

2024-05-21 23:47:57,584 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-21 23:47:57,595 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:57,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=107, votedFor=nacos3:7848, cost time=29 ms

2024-05-21 23:47:57,606 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=108, votedFor=nacos2:7848, cost time=13 ms

2024-05-21 23:47:57,631 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=108, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-21 23:47:57,633 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-21 23:47:57,636 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-21 23:47:57,652 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-21 23:47:57,664 INFO onLeaderStart: term=108.

2024-05-21 23:47:58,221 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:58,383 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-21 23:47:58,621 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=108], lastLogId=LogId [index=107, term=108].

2024-05-21 23:47:58,631 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=109, currTerm=108.

2024-05-21 23:47:58,645 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=109, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-21 23:47:58,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=109, votedFor=nacos3:7848, cost time=7 ms

2024-05-21 23:48:02,798 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=115, term=118], lastLogId=LogId [index=115, term=118].

2024-05-21 23:48:02,803 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=119, currTerm=118.

2024-05-21 23:48:02,804 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=118, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-21 23:48:02,809 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=119, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-21 23:48:02,817 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=119, votedFor=nacos1:7848, cost time=7 ms

