2024-05-26 00:04:12,569 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=228, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 00:04:12,570 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=222, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 00:04:12,632 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=225, currTerm=224, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,659 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 00:04:12,690 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 00:04:12,690 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=154, type=Follower] is going to quit

2024-05-26 00:04:12,659 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=164, type=Follower] is going to quit

2024-05-26 00:04:12,694 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=225, currTerm=224, because the leader nacos2:7848's lease is still valid.

2024-05-26 00:04:12,707 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=153, type=Follower] is going to quit

2024-05-26 00:04:12,710 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=163, type=Follower] is going to quit

2024-05-26 00:04:12,721 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=223, currTerm=222, granted=true, requestLastLogId=LogId [index=213, term=222], lastLogId=LogId [index=213, term=222].

2024-05-26 00:04:12,724 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,724 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,725 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=229, currTerm=228, granted=true, requestLastLogId=LogId [index=219, term=228], lastLogId=LogId [index=219, term=228].

2024-05-26 00:04:12,724 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,731 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,732 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=true, requestLastLogId=LogId [index=213, term=222], lastLogId=LogId [index=213, term=222].

2024-05-26 00:04:12,743 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=229, currTerm=228, granted=true, requestLastLogId=LogId [index=219, term=228], lastLogId=LogId [index=219, term=228].

2024-05-26 00:04:12,755 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=229, currTerm=228.

2024-05-26 00:04:12,752 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,764 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=229, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-26 00:04:12,752 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,777 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=229, votedFor=nacos3:7848, cost time=10 ms

2024-05-26 00:04:12,753 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=223, currTerm=222.

2024-05-26 00:04:12,755 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,800 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=223, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 00:04:12,800 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:04:12,806 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=223, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 00:10:12,651 INFO Node <naming_service_metadata/nacos2:7848> term 223 start preVote.

2024-05-26 00:10:12,943 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499777760s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-26 00:10:12,654 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=220, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 00:10:12,654 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=224, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 00:10:13,161 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=169, type=Follower] is going to quit

2024-05-26 00:10:12,945 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499779427s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-26 00:10:12,653 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 00:10:12,651 INFO Node <naming_persistent_service/nacos2:7848> term 229 start preVote.

2024-05-26 00:10:12,653 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=223, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 00:10:13,091 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-26 00:10:13,145 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 00:10:13,180 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=229, granted=true.

2024-05-26 00:10:13,181 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=229.

2024-05-26 00:10:13,181 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 00:10:13,163 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 00:10:13,166 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=168, type=Follower] is going to quit

2024-05-26 00:10:13,172 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=223, granted=false.

2024-05-26 00:10:13,174 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=137, type=Follower] is going to quit

2024-05-26 00:10:13,188 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=214, term=223], lastLogId=LogId [index=214, term=223].

2024-05-26 00:10:13,188 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=230, votedFor=nacos2:7848, cost time=6 ms

2024-05-26 00:10:13,190 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,195 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,193 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=213, lastLogIncluded=0, lastLogIndex=213, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=136, type=Follower] is going to quit

2024-05-26 00:10:13,193 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=225, currTerm=224, granted=true, requestLastLogId=LogId [index=213, term=224], lastLogId=LogId [index=213, term=224].

2024-05-26 00:10:13,194 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=224, currTerm=223.

2024-05-26 00:10:13,195 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 00:10:13,204 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=225, currTerm=224.

2024-05-26 00:10:13,206 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,206 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,206 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=221, currTerm=220.

2024-05-26 00:10:13,214 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=224, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 00:10:13,215 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=225, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 00:10:13,215 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=223, currTerm=224.

2024-05-26 00:10:13,217 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,218 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=221, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 00:10:13,220 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 00:10:13,220 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=221, currTerm=221, granted=true, requestLastLogId=LogId [index=213, term=220], lastLogId=LogId [index=213, term=220].

2024-05-26 00:10:13,222 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=221, currTerm=221, granted=true, requestLastLogId=LogId [index=213, term=220], lastLogId=LogId [index=213, term=220].

2024-05-26 00:10:13,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=225, votedFor=nacos3:7848, cost time=33 ms

2024-05-26 00:10:13,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=224, votedFor=nacos3:7848, cost time=31 ms

2024-05-26 00:10:13,257 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=230, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 00:10:13,273 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 00:10:13,274 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 00:10:13,283 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=221, votedFor=nacos3:7848, cost time=26 ms

2024-05-26 00:10:13,302 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 00:10:13,303 INFO onLeaderStart: term=230.

2024-05-26 00:25:25,149 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 00:25:25,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 00:25:25,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 00:25:25,151 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 00:25:25,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 00:25:25,150 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 00:25:25,151 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 00:25:25,153 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 00:25:25,153 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_212.

2024-05-26 00:25:25,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_212.

2024-05-26 00:25:25,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_212.

2024-05-26 00:25:25,155 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_218.

2024-05-26 00:25:25,158 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:25:25,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 218 to 219, cost 0 ms.

2024-05-26 00:25:25,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:25:25,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 212 to 213, cost 0 ms.

2024-05-26 00:34:17,586 INFO Connection disconnected: /172.25.0.5:32962

2024-05-26 00:34:17,630 INFO Connection disconnected: /172.25.0.5:32956

2024-05-26 00:40:12,812 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-26 00:40:12,828 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-26 00:40:12,987 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-26 00:40:13,043 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:13,091 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:13,093 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:13,192 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 00:40:17,862 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 00:40:18,071 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 00:40:18,073 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 00:40:18,073 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 00:40:18,074 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 00:55:25,043 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 213 to 215, cost 0 ms.

2024-05-26 00:55:25,044 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 219 to 222, cost 0 ms.

2024-05-26 00:55:25,043 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 213 to 216, cost 0 ms.

2024-05-26 00:55:25,043 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 213 to 215, cost 0 ms.

2024-05-26 01:10:54,610 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=230, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:10:54,883 INFO Node <naming_persistent_service_v2/nacos2:7848> term 225 start preVote.

2024-05-26 01:10:55,165 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 01:10:55,174 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=221, lastLogIncluded=0, lastLogIndex=221, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=165, type=Follower] is going to quit

2024-05-26 01:10:55,175 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=221, lastLogIncluded=0, lastLogIndex=221, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=166, type=Follower] is going to quit

2024-05-26 01:10:55,174 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:10:55,177 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,188 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-26 01:10:55,189 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,211 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,218 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:10:55,218 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:10:55,228 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 01:10:55,239 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=225, currTerm=224, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:10:55,226 INFO The channel nacos3:7848 is in state: READY.

2024-05-26 01:10:55,243 INFO The channel nacos3:7848 has successfully established.

2024-05-26 01:10:55,230 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=226, currTerm=225, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:10:55,248 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=226, currTerm=225, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:10:55,250 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,233 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:10:55,254 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:10:55,246 INFO Peer nacos3:7848 is connected.

2024-05-26 01:10:55,252 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,252 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=222, currTerm=221, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:10:55,258 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=222, currTerm=221, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:10:55,253 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=225, granted=true.

2024-05-26 01:10:55,253 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:10:55,262 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:10:55,253 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,267 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=231, currTerm=230.

2024-05-26 01:10:55,257 INFO Peer nacos1:7848 is connected.

2024-05-26 01:10:55,261 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=225.

2024-05-26 01:10:55,267 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=225, currTerm=224.

2024-05-26 01:10:55,270 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:10:55,273 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=224, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:10:55,276 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=222, currTerm=221.

2024-05-26 01:10:55,278 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=221, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=226, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=225, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=222, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 01:10:55,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=231, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-26 01:10:55,287 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=226, currTerm=226.

2024-05-26 01:10:55,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=222, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 01:10:55,296 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:10:55,298 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=231, votedFor=nacos3:7848, cost time=8 ms

2024-05-26 01:10:55,298 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=225, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 01:10:55,302 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=231, currTerm=231, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 01:10:55,306 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=226, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:10:55,306 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 01:10:55,307 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:10:55,309 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:10:55,310 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,309 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,322 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:10:55,327 INFO onLeaderStart: term=226.

2024-05-26 01:26:54,881 INFO Node <naming_service_metadata/nacos2:7848> term 225 start preVote.

2024-05-26 01:26:55,007 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:26:55,324 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-26 01:26:55,003 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=226, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:26:54,882 INFO Node <naming_persistent_service/nacos2:7848> term 231 start preVote.

2024-05-26 01:26:54,881 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=222, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:26:54,882 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 01:26:55,342 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=226, currTerm=225, because the leader nacos1:7848's lease is still valid.

2024-05-26 01:26:55,345 INFO The channel nacos3:7848 is in state: READY.

2024-05-26 01:26:55,351 INFO The channel nacos3:7848 has successfully established.

2024-05-26 01:26:54,882 INFO Node <naming_instance_metadata/nacos2:7848> term 222 start preVote.

2024-05-26 01:26:55,332 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:26:55,332 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=215, lastLogIncluded=0, lastLogIndex=215, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=170, type=Follower] is going to quit

2024-05-26 01:26:55,334 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=232, currTerm=231, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 01:26:55,351 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:26:55,351 INFO Peer nacos3:7848 is connected.

2024-05-26 01:26:55,356 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=215, lastLogIncluded=0, lastLogIndex=215, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=171, type=Follower] is going to quit

2024-05-26 01:26:55,374 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:26:55,434 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:26:55,353 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=223, currTerm=222, granted=true, requestLastLogId=LogId [index=215, term=222], lastLogId=LogId [index=215, term=222].

2024-05-26 01:26:55,374 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:26:55,428 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,457 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=223, currTerm=222.

2024-05-26 01:26:55,458 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:26:55,459 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:26:55,463 INFO Peer nacos1:7848 is connected.

2024-05-26 01:26:55,465 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=222, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:26:55,428 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,428 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=215, term=226], lastLogId=LogId [index=215, term=226].

2024-05-26 01:26:55,430 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,430 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=231, granted=true.

2024-05-26 01:26:55,468 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=231.

2024-05-26 01:26:55,431 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:26:55,471 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:26:55,434 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=225, granted=true.

2024-05-26 01:26:55,472 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=225.

2024-05-26 01:26:55,442 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_214.

2024-05-26 01:26:55,447 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:26:55,464 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-26 01:26:55,467 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,467 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=215, term=226], lastLogId=LogId [index=215, term=226].

2024-05-26 01:26:55,477 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=215, term=226], lastLogId=LogId [index=215, term=226].

2024-05-26 01:26:55,467 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=223, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-26 01:26:55,480 INFO The channel nacos3:7848 is in state: READY.

2024-05-26 01:26:55,480 INFO The channel nacos3:7848 has successfully established.

2024-05-26 01:26:55,481 INFO Peer nacos3:7848 is connected.

2024-05-26 01:26:55,468 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,468 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 01:26:55,471 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=232.

2024-05-26 01:26:55,488 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_214.

2024-05-26 01:26:55,471 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:26:55,472 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=225, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:26:55,497 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 215 to 215, cost 4 ms.

2024-05-26 01:26:55,472 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=226, currTerm=226.

2024-05-26 01:26:55,473 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_221.

2024-05-26 01:26:55,478 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=226, granted=true, requestLastLogId=LogId [index=215, term=226], lastLogId=LogId [index=215, term=226].

2024-05-26 01:26:55,481 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_215.

2024-05-26 01:26:55,502 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 215 to 215, cost 0 ms.

2024-05-26 01:26:55,498 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 01:26:55,504 INFO The channel nacos1:7848 has successfully established.

2024-05-26 01:26:55,501 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,501 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=227, currTerm=226.

2024-05-26 01:26:55,502 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=223, votedFor=nacos3:7848, cost time=19 ms

2024-05-26 01:26:55,508 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 222 to 222, cost 0 ms.

2024-05-26 01:26:55,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=232, votedFor=nacos2:7848, cost time=19 ms

2024-05-26 01:26:55,507 INFO Peer nacos1:7848 is connected.

2024-05-26 01:26:55,510 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=222, currTerm=223.

2024-05-26 01:26:55,512 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=227, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 01:26:55,510 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 216 to 216, cost 0 ms.

2024-05-26 01:26:55,513 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:26:55,512 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=226, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 01:26:55,516 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:26:55,518 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=227, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 01:26:55,518 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:26:55,524 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=222, currTerm=223.

2024-05-26 01:43:23,229 INFO Node <naming_service_metadata/nacos2:7848> term 226 start preVote.

2024-05-26 01:43:23,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=227, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:43:23,230 INFO Node <naming_persistent_service_v2/nacos2:7848> term 227 start preVote.

2024-05-26 01:43:23,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:43:23,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=223, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 01:43:23,229 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=226, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 01:43:23,229 INFO Node <naming_persistent_service/nacos2:7848> term 232 start preVote.

2024-05-26 01:43:23,230 INFO Node <naming_instance_metadata/nacos2:7848> term 223 start preVote.

2024-05-26 01:43:24,240 INFO Node <naming_instance_metadata/nacos2:7848> term 223 start preVote.

2024-05-26 01:43:24,247 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=233, currTerm=232, granted=true, requestLastLogId=LogId [index=223, term=232], lastLogId=LogId [index=223, term=232].

2024-05-26 01:43:24,256 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=227, currTerm=226, because the leader nacos3:7848's lease is still valid.

2024-05-26 01:43:24,249 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=224, currTerm=223, granted=true, requestLastLogId=LogId [index=216, term=223], lastLogId=LogId [index=216, term=223].

2024-05-26 01:43:24,355 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=223, granted=false.

2024-05-26 01:43:24,367 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=223, granted=false.

2024-05-26 01:43:24,369 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=226, granted=false.

2024-05-26 01:43:24,369 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=227, granted=true.

2024-05-26 01:43:24,376 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=227.

2024-05-26 01:43:24,377 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=227, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:43:24,378 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=224, currTerm=223.

2024-05-26 01:43:24,382 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=232, granted=true.

2024-05-26 01:43:24,382 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=223, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 01:43:24,384 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=232.

2024-05-26 01:43:24,390 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=228, votedFor=nacos2:7848, cost time=14 ms

2024-05-26 01:43:24,391 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:43:24,405 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=228, currTerm=228, granted=true, requestLastLogId=LogId [index=216, term=227], lastLogId=LogId [index=216, term=227].

2024-05-26 01:43:24,410 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=224, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 01:43:24,427 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=233, votedFor=nacos2:7848, cost time=33 ms

2024-05-26 01:43:24,439 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:43:24,440 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=226, granted=true.

2024-05-26 01:43:24,453 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=226.

2024-05-26 01:43:24,454 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=226, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:43:24,455 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=228, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:43:24,456 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 01:43:24,457 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:43:24,458 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 01:43:24,463 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=224, votedFor=nacos1:7848, cost time=36 ms

2024-05-26 01:43:24,466 INFO onLeaderStart: term=228.

2024-05-26 01:43:24,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=227, votedFor=nacos2:7848, cost time=18 ms

2024-05-26 01:43:24,472 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=233, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:43:24,474 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 01:43:24,476 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:43:24,487 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=223, currTerm=224.

2024-05-26 01:43:24,490 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=223, currTerm=224.

2024-05-26 01:43:24,493 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=227, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:43:24,493 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 01:43:24,494 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:43:24,496 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:43:24,498 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:43:24,500 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:43:24,506 INFO onLeaderStart: term=233.

2024-05-26 01:43:24,517 INFO onLeaderStart: term=227.

2024-05-26 01:59:51,678 INFO Node <naming_instance_metadata/nacos2:7848> term 224 start preVote.

2024-05-26 01:59:51,729 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=233, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:59:51,834 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=168, type=Follower] is going to quit

2024-05-26 01:59:52,148 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=224, lastLogIncluded=0, lastLogIndex=224, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=167, type=Follower] is going to quit

2024-05-26 01:59:52,149 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:51,711 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 01:59:52,153 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 01:59:52,155 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 01:59:51,717 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=227, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:59:52,158 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:59:52,165 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_216.

2024-05-26 01:59:51,736 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=228, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 01:59:51,834 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:59:52,178 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 216 to 217, cost 0 ms.

2024-05-26 01:59:52,189 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 01:59:51,987 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 01:59:52,191 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 01:59:52,148 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=224, granted=true.

2024-05-26 01:59:52,221 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=224.

2024-05-26 01:59:52,158 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=155, type=Follower] is going to quit

2024-05-26 01:59:52,171 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 01:59:52,171 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=217, lastLogIncluded=0, lastLogIndex=217, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=173, type=Follower] is going to quit

2024-05-26 01:59:52,228 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=217, lastLogIncluded=0, lastLogIndex=217, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=172, type=Follower] is going to quit

2024-05-26 01:59:52,172 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=224, term=233], lastLogId=LogId [index=224, term=233].

2024-05-26 01:59:52,190 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 01:59:52,227 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=156, type=Follower] is going to quit

2024-05-26 01:59:52,240 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-26 01:59:52,232 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,233 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=229, currTerm=228.

2024-05-26 01:59:52,234 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_222.

2024-05-26 01:59:52,246 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=225, votedFor=nacos2:7848, cost time=23 ms

2024-05-26 01:59:52,236 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,241 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,241 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,241 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=218, term=227], lastLogId=LogId [index=218, term=227].

2024-05-26 01:59:52,253 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=228, currTerm=227.

2024-05-26 01:59:52,242 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 01:59:52,260 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 01:59:52,242 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_215.

2024-05-26 01:59:52,246 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=233.

2024-05-26 01:59:52,248 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=224, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 01:59:52,249 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 01:59:52,258 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 222 to 223, cost 1 ms.

2024-05-26 01:59:52,260 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=229, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-26 01:59:52,263 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=225, currTerm=225, granted=true, requestLastLogId=LogId [index=217, term=224], lastLogId=LogId [index=217, term=224].

2024-05-26 01:59:52,265 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_215.

2024-05-26 01:59:52,266 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 215 to 216, cost 0 ms.

2024-05-26 01:59:52,268 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=228, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 01:59:52,269 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,272 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=234, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-26 01:59:52,276 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=225, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 01:59:52,274 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 215 to 216, cost 2 ms.

2024-05-26 01:59:52,277 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=229, votedFor=nacos1:7848, cost time=13 ms

2024-05-26 01:59:52,278 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 01:59:52,281 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 01:59:52,280 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=229, currTerm=229, granted=true, requestLastLogId=LogId [index=217, term=228], lastLogId=LogId [index=217, term=228].

2024-05-26 01:59:52,282 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,284 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=228, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 01:59:52,282 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,287 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=234, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 01:59:52,289 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 01:59:52,293 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 01:59:52,299 INFO onLeaderStart: term=225.

2024-05-26 01:59:52,296 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:00:25,229 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.420288095s. [closed=[], committed=[remote_addr=nacos3/172.25.0.3:7848]]], groupId=naming_instance_metadata

2024-05-26 02:00:25,238 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499765150s. [closed=[], committed=[remote_addr=nacos1/172.25.0.5:7848]]], groupId=naming_instance_metadata

2024-05-26 02:00:25,671 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=225, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:00:26,017 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=139, type=Follower] is going to quit

2024-05-26 02:00:26,103 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=218, lastLogIncluded=0, lastLogIndex=218, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=138, type=Follower] is going to quit

2024-05-26 02:00:26,017 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:00:26,130 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:00:26,138 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:00:28,827 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:00:31,040 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:00:31,837 INFO Node <naming_instance_metadata/nacos2:7848> term 225 start preVote.

2024-05-26 02:00:32,821 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=225, granted=true.

2024-05-26 02:00:33,439 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=225.

2024-05-26 02:00:33,549 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:00:33,682 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=226, currTerm=226, granted=true, requestLastLogId=LogId [index=218, term=225], lastLogId=LogId [index=218, term=225].

2024-05-26 02:00:34,447 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=226, votedFor=nacos2:7848, cost time=176 ms

2024-05-26 02:00:35,148 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=226, currTerm=226.

2024-05-26 02:00:36,786 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:16:14,625 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=226, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 02:16:14,625 INFO Node <naming_instance_metadata/nacos2:7848> term 226 start preVote.

2024-05-26 02:16:14,624 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:16:14,624 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:16:14,624 INFO Node <naming_persistent_service_v2/nacos2:7848> term 229 start preVote.

2024-05-26 02:16:14,623 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:16:14,623 INFO Node <naming_service_metadata/nacos2:7848> term 228 start preVote.

2024-05-26 02:16:14,621 INFO Node <naming_persistent_service/nacos2:7848> term 234 start preVote.

2024-05-26 02:16:15,476 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=228, granted=true.

2024-05-26 02:16:15,477 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=228.

2024-05-26 02:16:15,478 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=234, granted=true.

2024-05-26 02:16:15,480 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=234.

2024-05-26 02:16:15,485 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=226, granted=true.

2024-05-26 02:16:15,503 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=226.

2024-05-26 02:16:15,491 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=229, votedFor=nacos2:7848, cost time=12 ms

2024-05-26 02:16:15,492 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=229, granted=true.

2024-05-26 02:16:15,541 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=229.

2024-05-26 02:16:15,542 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=229, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:16:15,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=235, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 02:16:15,520 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=229, currTerm=229, granted=true, requestLastLogId=LogId [index=219, term=228], lastLogId=LogId [index=219, term=228].

2024-05-26 02:16:15,550 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=229, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:16:15,554 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:16:15,556 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:16:15,541 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=227, votedFor=nacos2:7848, cost time=36 ms

2024-05-26 02:16:15,562 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:16:15,565 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=226, currTerm=227.

2024-05-26 02:16:15,566 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=235, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:16:15,573 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:16:15,578 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:16:15,588 INFO onLeaderStart: term=229.

2024-05-26 02:16:15,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=230, votedFor=nacos2:7848, cost time=44 ms

2024-05-26 02:16:15,589 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=227, currTerm=227, granted=true, requestLastLogId=LogId [index=219, term=226], lastLogId=LogId [index=219, term=226].

2024-05-26 02:16:15,596 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=227, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:16:15,596 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:16:15,599 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:16:15,600 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:16:15,602 INFO onLeaderStart: term=235.

2024-05-26 02:16:15,614 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:16:15,615 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 02:16:15,619 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 02:16:15,619 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=230, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:16:15,623 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:16:15,624 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:16:15,626 INFO onLeaderStart: term=227.

2024-05-26 02:16:15,645 INFO onLeaderStart: term=230.

2024-05-26 02:16:15,647 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=230, currTerm=230, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:16:15,649 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=230, currTerm=230, because the leader nacos2:7848's lease is still valid.

2024-05-26 02:16:15,650 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 02:16:15,650 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:16:15,652 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:16:20,451 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 02:16:20,453 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 02:16:20,454 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 02:16:20,454 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 02:17:01,081 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=230, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:17:01,853 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=175, type=Follower] is going to quit

2024-05-26 02:17:01,081 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=235, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:17:01,081 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=227, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:17:01,081 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=229, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:17:01,854 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:17:02,044 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=158, type=Follower] is going to quit

2024-05-26 02:17:01,862 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=219, lastLogIncluded=0, lastLogIndex=219, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=174, type=Follower] is going to quit

2024-05-26 02:17:01,878 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=169, type=Follower] is going to quit

2024-05-26 02:17:02,050 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=170, type=Follower] is going to quit

2024-05-26 02:17:01,879 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:17:01,990 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=141, type=Follower] is going to quit

2024-05-26 02:17:02,059 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=140, type=Follower] is going to quit

2024-05-26 02:17:02,062 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=220, term=227], lastLogId=LogId [index=220, term=227].

2024-05-26 02:17:02,023 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:17:02,044 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:17:02,048 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=220, lastLogIncluded=0, lastLogIndex=220, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=157, type=Follower] is going to quit

2024-05-26 02:17:02,049 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=219, term=230], lastLogId=LogId [index=219, term=230].

2024-05-26 02:17:02,105 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=219, term=230], lastLogId=LogId [index=219, term=230].

2024-05-26 02:17:02,051 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,051 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=236, currTerm=235, granted=true, requestLastLogId=LogId [index=226, term=235], lastLogId=LogId [index=226, term=235].

2024-05-26 02:17:02,152 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,051 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,095 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=228, currTerm=227, granted=true, requestLastLogId=LogId [index=220, term=227], lastLogId=LogId [index=220, term=227].

2024-05-26 02:17:02,102 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,103 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=230, currTerm=229, granted=true, requestLastLogId=LogId [index=220, term=229], lastLogId=LogId [index=220, term=229].

2024-05-26 02:17:02,151 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=219, term=230], lastLogId=LogId [index=219, term=230].

2024-05-26 02:17:02,160 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,157 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=228, currTerm=227.

2024-05-26 02:17:02,160 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=231, currTerm=230.

2024-05-26 02:17:02,161 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=230, currTerm=229, granted=true, requestLastLogId=LogId [index=220, term=229], lastLogId=LogId [index=220, term=229].

2024-05-26 02:17:02,164 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=236, currTerm=235.

2024-05-26 02:17:02,169 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=228, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 02:17:02,171 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=230, currTerm=229.

2024-05-26 02:17:02,173 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=231, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 02:17:02,175 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=236, votedFor=0.0.0.0:0, cost time=7 ms

2024-05-26 02:17:02,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=228, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 02:17:02,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=230, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 02:17:02,177 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,177 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,179 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=236, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 02:17:02,182 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=231, votedFor=nacos1:7848, cost time=8 ms

2024-05-26 02:17:02,183 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=230, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 02:17:02,184 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=230, currTerm=230.

2024-05-26 02:17:02,184 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=231, currTerm=231.

2024-05-26 02:17:02,188 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,184 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,187 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,195 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,188 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,191 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,200 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,193 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:17:02,200 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:33:26,929 INFO Node <naming_persistent_service/nacos2:7848> term 236 start preVote.

2024-05-26 02:33:28,022 INFO Node <naming_service_metadata/nacos2:7848> term 230 start preVote.

2024-05-26 02:33:28,023 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,043 INFO Node <naming_instance_metadata/nacos2:7848> term 228 start preVote.

2024-05-26 02:33:28,043 INFO Node <naming_persistent_service_v2/nacos2:7848> term 231 start preVote.

2024-05-26 02:33:28,043 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:28,043 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:26,935 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 02:33:27,984 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,127 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,111 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 02:33:28,148 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 02:33:28,150 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_218.

2024-05-26 02:33:28,122 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,178 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 02:33:28,178 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=232, currTerm=231, because the leader nacos1:7848's lease is still valid.

2024-05-26 02:33:28,179 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=228, granted=true.

2024-05-26 02:33:28,202 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=228.

2024-05-26 02:33:28,184 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=236, granted=true.

2024-05-26 02:33:28,203 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=236.

2024-05-26 02:33:28,183 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 02:33:28,206 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 02:33:28,184 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_217.

2024-05-26 02:33:28,197 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 217 to 219, cost 0 ms.

2024-05-26 02:33:28,197 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_217.

2024-05-26 02:33:28,203 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=228, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:33:28,205 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:33:28,213 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=221, term=230], lastLogId=LogId [index=221, term=230].

2024-05-26 02:33:28,265 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 216 to 218, cost 0 ms.

2024-05-26 02:33:28,266 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=230, granted=true.

2024-05-26 02:33:28,268 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=230.

2024-05-26 02:33:28,268 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=232, currTerm=231, because the leader nacos1:7848's lease is still valid.

2024-05-26 02:33:28,278 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=231, granted=true.

2024-05-26 02:33:28,281 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=231.

2024-05-26 02:33:28,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=229, votedFor=nacos2:7848, cost time=78 ms

2024-05-26 02:33:28,285 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=229, currTerm=229, granted=true, requestLastLogId=LogId [index=221, term=228], lastLogId=LogId [index=221, term=228].

2024-05-26 02:33:28,282 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=237, votedFor=nacos2:7848, cost time=77 ms

2024-05-26 02:33:28,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 02:33:28,285 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,287 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=232, currTerm=232, granted=true, requestLastLogId=LogId [index=220, term=231], lastLogId=LogId [index=220, term=231].

2024-05-26 02:33:28,285 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 02:33:28,287 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 02:33:28,286 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=237, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:33:28,290 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:33:28,291 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:33:28,293 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=231, votedFor=nacos2:7848, cost time=24 ms

2024-05-26 02:33:28,287 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,292 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_224.

2024-05-26 02:33:28,295 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 216 to 218, cost 2 ms.

2024-05-26 02:33:28,296 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 02:33:28,296 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=229, currTerm=229.

2024-05-26 02:33:28,298 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=229, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:33:28,296 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 02:33:28,297 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=231, currTerm=231.

2024-05-26 02:33:28,300 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:33:28,302 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:33:28,301 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:33:28,302 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=230, currTerm=231.

2024-05-26 02:33:28,304 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=232, votedFor=nacos2:7848, cost time=7 ms

2024-05-26 02:33:28,304 INFO onLeaderStart: term=237.

2024-05-26 02:33:28,305 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 223 to 225, cost 0 ms.

2024-05-26 02:33:28,312 INFO onLeaderStart: term=229.

2024-05-26 02:33:28,318 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=232, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 02:33:28,323 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 02:33:28,329 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 02:33:28,330 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 02:33:28,336 INFO onLeaderStart: term=232.

2024-05-26 02:49:50,261 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=229, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:49:51,373 INFO Node <naming_service_metadata/nacos2:7848> term 231 start preVote.

2024-05-26 02:49:51,368 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=237, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:49:51,472 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=171, type=Follower] is going to quit

2024-05-26 02:49:51,473 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=172, type=Follower] is going to quit

2024-05-26 02:49:51,298 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=232, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 02:49:51,396 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 02:49:51,480 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:49:51,480 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=142, type=Follower] is going to quit

2024-05-26 02:49:51,485 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=222, lastLogIncluded=0, lastLogIndex=222, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=143, type=Follower] is going to quit

2024-05-26 02:49:51,480 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:49:50,262 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.102599481s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-26 02:49:51,491 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=221, lastLogIncluded=0, lastLogIndex=221, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=176, type=Follower] is going to quit

2024-05-26 02:49:51,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=221, lastLogIncluded=0, lastLogIndex=221, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=177, type=Follower] is going to quit

2024-05-26 02:49:51,500 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,507 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,512 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,484 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 02:49:51,512 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=233, currTerm=232, granted=true, requestLastLogId=LogId [index=221, term=232], lastLogId=LogId [index=221, term=232].

2024-05-26 02:49:51,516 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=230, currTerm=229, granted=true, requestLastLogId=LogId [index=222, term=229], lastLogId=LogId [index=222, term=229].

2024-05-26 02:49:51,518 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,552 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=230, currTerm=229, granted=true, requestLastLogId=LogId [index=222, term=229], lastLogId=LogId [index=222, term=229].

2024-05-26 02:49:51,520 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=238, currTerm=237, granted=true, requestLastLogId=LogId [index=228, term=237], lastLogId=LogId [index=228, term=237].

2024-05-26 02:49:51,554 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,558 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=233, currTerm=232.

2024-05-26 02:49:51,559 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=231, granted=false.

2024-05-26 02:49:51,560 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=231, granted=false.

2024-05-26 02:49:51,560 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,564 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=230, currTerm=229.

2024-05-26 02:49:51,574 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,575 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=233, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 02:49:51,576 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=238, currTerm=237.

2024-05-26 02:49:51,575 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,579 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=230, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-26 02:49:51,591 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=238, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-26 02:49:51,593 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=233, votedFor=nacos1:7848, cost time=13 ms

2024-05-26 02:49:51,597 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=230, votedFor=nacos1:7848, cost time=8 ms

2024-05-26 02:49:51,599 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=238, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 02:49:51,600 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,600 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=238, currTerm=238, granted=true, requestLastLogId=LogId [index=228, term=237], lastLogId=LogId [index=228, term=237].

2024-05-26 02:49:51,601 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=238, currTerm=238, granted=true, requestLastLogId=LogId [index=228, term=237], lastLogId=LogId [index=228, term=237].

2024-05-26 02:49:51,605 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=230, currTerm=230.

2024-05-26 02:49:51,606 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,605 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,605 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,612 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,616 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,617 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 02:49:51,617 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:06:12,219 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=233, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:13,148 INFO Node <naming_service_metadata/nacos2:7848> term 231 start preVote.

2024-05-26 03:06:13,171 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=231, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:06:12,214 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:12,253 INFO Node <naming_persistent_service/nacos2:7848> term 238 start preVote.

2024-05-26 03:06:12,253 INFO Node <naming_persistent_service_v2/nacos2:7848> term 233 start preVote.

2024-05-26 03:06:13,213 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=231, currTerm=230, granted=true, requestLastLogId=LogId [index=223, term=230], lastLogId=LogId [index=223, term=230].

2024-05-26 03:06:13,259 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term 232, expect=231.

2024-05-26 03:06:13,298 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:06:13,301 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:06:13,262 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=230, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:06:13,262 INFO Node <naming_instance_metadata/nacos2:7848> term 230 start preVote.

2024-05-26 03:06:13,262 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=239, currTerm=238, because the leader nacos1:7848's lease is still valid.

2024-05-26 03:06:13,280 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:06:13,313 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:06:13,290 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:06:13,319 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:06:13,326 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:06:13,329 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:06:13,310 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_227.

2024-05-26 03:06:13,312 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=239, currTerm=238, because the leader nacos1:7848's lease is still valid.

2024-05-26 03:06:13,319 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_221.

2024-05-26 03:06:13,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=232, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-26 03:06:13,329 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_220.

2024-05-26 03:06:13,331 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term 234, expect=233.

2024-05-26 03:06:13,354 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 219 to 222, cost 1 ms.

2024-05-26 03:06:13,333 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term 231, expect=230.

2024-05-26 03:06:13,334 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=239, currTerm=238.

2024-05-26 03:06:13,378 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:06:13,338 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_221.

2024-05-26 03:06:13,349 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=231, currTerm=232.

2024-05-26 03:06:13,388 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=231, currTerm=232.

2024-05-26 03:06:13,390 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=232, currTerm=232, granted=true, requestLastLogId=LogId [index=222, term=231], lastLogId=LogId [index=222, term=231].

2024-05-26 03:06:13,349 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 225 to 228, cost 0 ms.

2024-05-26 03:06:13,354 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=233, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term pre_vote_response.]].

2024-05-26 03:06:13,373 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 218 to 221, cost 1 ms.

2024-05-26 03:06:13,380 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=234, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 03:06:13,399 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=234, currTerm=234, granted=true, requestLastLogId=LogId [index=222, term=233], lastLogId=LogId [index=222, term=233].

2024-05-26 03:06:13,400 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=234, currTerm=234.

2024-05-26 03:06:13,402 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=234, currTerm=234, granted=true, requestLastLogId=LogId [index=222, term=233], lastLogId=LogId [index=222, term=233].

2024-05-26 03:06:13,385 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=231, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 03:06:13,392 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=239, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-26 03:06:13,392 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 218 to 222, cost 0 ms.

2024-05-26 03:06:13,396 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=232.

2024-05-26 03:06:13,404 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=233, currTerm=234.

2024-05-26 03:06:13,405 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=230, currTerm=231.

2024-05-26 03:06:13,409 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=231, currTerm=231.

2024-05-26 03:06:13,412 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=239, votedFor=nacos3:7848, cost time=5 ms

2024-05-26 03:06:13,413 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=238, currTerm=239.

2024-05-26 03:06:13,413 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=238, currTerm=239.

2024-05-26 03:06:13,413 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=232, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 03:06:13,415 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=231, votedFor=nacos3:7848, cost time=5 ms

2024-05-26 03:06:13,416 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=234, votedFor=nacos3:7848, cost time=7 ms

2024-05-26 03:06:13,425 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=234, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:06:17,158 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:06:17,158 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:06:17,159 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:06:17,159 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:06:17,164 INFO Connection disconnected: /172.25.0.3:60632

2024-05-26 03:11:11,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=234, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:11:11,099 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:11:11,121 INFO Node <naming_service_metadata/nacos2:7848> term 232 start preVote.

2024-05-26 03:11:11,099 INFO Node <naming_persistent_service_v2/nacos2:7848> term 234 start preVote.

2024-05-26 03:11:11,121 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:11:11,853 INFO Node <naming_persistent_service_v2/nacos2:7848> term 234 start preVote.

2024-05-26 03:11:11,854 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=235, currTerm=234, because the leader nacos3:7848's lease is still valid.

2024-05-26 03:11:11,097 INFO Node <naming_persistent_service/nacos2:7848> term 239 start preVote.

2024-05-26 03:11:11,856 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=232, currTerm=231, because the leader nacos3:7848's lease is still valid.

2024-05-26 03:11:11,874 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=232, currTerm=231.

2024-05-26 03:11:11,871 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=233, currTerm=232, granted=true, requestLastLogId=LogId [index=223, term=232], lastLogId=LogId [index=223, term=232].

2024-05-26 03:11:11,876 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 03:11:11,885 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=234, granted=false.

2024-05-26 03:11:11,883 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=231, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:11:11,881 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=232, granted=true.

2024-05-26 03:11:11,911 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=232.

2024-05-26 03:11:11,922 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=239, granted=true.

2024-05-26 03:11:11,981 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=239.

2024-05-26 03:11:11,976 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=234, granted=false.

2024-05-26 03:11:11,987 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:11:12,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=232, votedFor=0.0.0.0:0, cost time=146 ms

2024-05-26 03:11:12,033 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=240, votedFor=nacos2:7848, cost time=48 ms

2024-05-26 03:11:12,034 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=240, currTerm=240.

2024-05-26 03:11:12,055 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=233, votedFor=nacos2:7848, cost time=68 ms

2024-05-26 03:11:12,057 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=233, currTerm=233.

2024-05-26 03:11:12,061 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:11:12,064 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=232, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 03:11:12,066 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:11:12,068 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=235, currTerm=234.

2024-05-26 03:11:12,069 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=234, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:11:12,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=235, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-26 03:11:12,082 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=234, currTerm=235.

2024-05-26 03:11:12,093 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=235, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 03:11:12,095 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=234, currTerm=235.

2024-05-26 03:11:12,118 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 03:11:12,122 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 03:27:31,390 INFO Node <naming_persistent_service_v2/nacos2:7848> term 235 start preVote.

2024-05-26 03:27:31,391 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:27:31,390 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=232, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:27:31,390 INFO Node <naming_instance_metadata/nacos2:7848> term 232 start preVote.

2024-05-26 03:27:31,390 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=235, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:27:31,390 INFO Node <naming_persistent_service/nacos2:7848> term 240 start preVote.

2024-05-26 03:27:31,394 INFO Node <naming_service_metadata/nacos2:7848> term 233 start preVote.

2024-05-26 03:27:31,394 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=233, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:27:31,412 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=235, granted=true.

2024-05-26 03:27:31,418 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=235.

2024-05-26 03:27:31,414 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=241, currTerm=240, because the leader nacos1:7848's lease is still valid.

2024-05-26 03:27:31,419 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=241, currTerm=240.

2024-05-26 03:27:31,419 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=233, granted=false.

2024-05-26 03:27:31,423 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=235, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 03:27:31,424 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=224, term=233], lastLogId=LogId [index=224, term=233].

2024-05-26 03:27:31,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=241, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 03:27:31,451 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=233, currTerm=232.

2024-05-26 03:27:31,457 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=233.

2024-05-26 03:27:31,461 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:27:31,468 WARN Node <naming_persistent_service/nacos2:7848> raise term 241 when get lastLogId.

2024-05-26 03:27:31,484 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=236, votedFor=nacos2:7848, cost time=61 ms

2024-05-26 03:27:31,484 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 03:27:31,492 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=233, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 03:27:31,492 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=233, currTerm=233, granted=true, requestLastLogId=LogId [index=225, term=232], lastLogId=LogId [index=225, term=232].

2024-05-26 03:27:31,494 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=232, currTerm=233.

2024-05-26 03:27:31,495 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=234, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 03:27:31,497 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=233, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:27:31,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=241, votedFor=nacos3:7848, cost time=15 ms

2024-05-26 03:27:31,497 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=232, currTerm=233.

2024-05-26 03:27:31,501 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=236, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:27:31,502 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 03:27:31,504 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:27:31,505 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=234, votedFor=nacos1:7848, cost time=7 ms

2024-05-26 03:27:31,511 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=233, votedFor=nacos3:7848, cost time=11 ms

2024-05-26 03:27:31,513 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=233, currTerm=234.

2024-05-26 03:27:31,516 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=233, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-26 03:27:31,522 INFO onLeaderStart: term=236.

2024-05-26 03:27:31,530 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:43:48,076 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-26 03:43:48,795 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 03:43:48,795 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=233, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:43:48,216 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 03:43:48,159 INFO Node <naming_service_metadata/nacos2:7848> term 234 start preVote.

2024-05-26 03:43:48,159 INFO Node <naming_instance_metadata/nacos2:7848> term 233 start preVote.

2024-05-26 03:43:48,159 INFO Node <naming_persistent_service/nacos2:7848> term 241 start preVote.

2024-05-26 03:43:48,987 INFO Node <naming_persistent_service/nacos2:7848> term 241 start preVote.

2024-05-26 03:43:48,077 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=236, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 03:43:48,982 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.133557868s. [closed=[], open=[[remote_addr=nacos3/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-26 03:43:48,155 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-26 03:43:49,000 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 03:43:49,001 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=234, granted=true.

2024-05-26 03:43:49,007 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=234.

2024-05-26 03:43:49,004 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 03:43:49,009 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 03:43:49,011 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 03:43:49,015 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=233, granted=false.

2024-05-26 03:43:49,018 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_229.

2024-05-26 03:43:49,021 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=235, votedFor=nacos2:7848, cost time=8 ms

2024-05-26 03:43:49,026 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 228 to 230, cost 0 ms.

2024-05-26 03:43:49,026 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=234, currTerm=233, granted=true, requestLastLogId=LogId [index=226, term=233], lastLogId=LogId [index=226, term=233].

2024-05-26 03:43:49,037 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 03:43:49,005 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-26 03:43:49,004 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=225, lastLogIncluded=0, lastLogIndex=225, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=179, type=Follower] is going to quit

2024-05-26 03:43:49,040 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=225, lastLogIncluded=0, lastLogIndex=225, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=178, type=Follower] is going to quit

2024-05-26 03:43:49,044 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=237, currTerm=236, granted=true, requestLastLogId=LogId [index=225, term=236], lastLogId=LogId [index=225, term=236].

2024-05-26 03:43:49,064 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,063 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_222.

2024-05-26 03:43:49,069 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=234, currTerm=233.

2024-05-26 03:43:49,006 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 03:43:49,079 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=234, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 03:43:49,008 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-26 03:43:49,007 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 03:43:49,041 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=234, currTerm=235.

2024-05-26 03:43:49,088 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=235, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 03:43:49,061 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=242, currTerm=241, because the leader nacos3:7848's lease is still valid.

2024-05-26 03:43:49,069 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=237, currTerm=236.

2024-05-26 03:43:49,097 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=234, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 03:43:49,099 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=233, currTerm=234.

2024-05-26 03:43:49,105 INFO The channel nacos3:7848 is in state: READY.

2024-05-26 03:43:49,108 INFO The channel nacos3:7848 has successfully established.

2024-05-26 03:43:49,076 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 222 to 223, cost 0 ms.

2024-05-26 03:43:49,089 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 03:43:49,102 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_223.

2024-05-26 03:43:49,106 INFO The channel nacos1:7848 is in state: READY.

2024-05-26 03:43:49,117 INFO The channel nacos1:7848 has successfully established.

2024-05-26 03:43:49,106 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=237, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-26 03:43:49,107 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 03:43:49,119 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 03:43:49,109 INFO Peer nacos3:7848 is connected.

2024-05-26 03:43:49,117 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=242, currTerm=241.

2024-05-26 03:43:49,118 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 03:43:49,118 INFO Peer nacos1:7848 is connected.

2024-05-26 03:43:49,119 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,119 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,119 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 03:43:49,123 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_222.

2024-05-26 03:43:49,125 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 03:43:49,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=237, votedFor=nacos1:7848, cost time=9 ms

2024-05-26 03:43:49,119 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 222 to 224, cost 0 ms.

2024-05-26 03:43:49,120 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=241, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 03:43:49,128 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=242, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 03:43:49,128 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 221 to 223, cost 0 ms.

2024-05-26 03:43:49,135 INFO onLeaderStart: term=235.

2024-05-26 03:43:49,136 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=242, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 03:43:49,138 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=241, currTerm=242.

2024-05-26 03:43:49,138 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=241, currTerm=242.

2024-05-26 03:43:49,140 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=241, currTerm=242.

2024-05-26 03:43:49,143 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=241, currTerm=242.

2024-05-26 03:43:49,149 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 03:43:53,041 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:43:53,043 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:43:53,044 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:43:53,044 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-26 03:43:53,842 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 03:43:53,843 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 03:43:53,843 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 03:43:53,844 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 04:00:15,604 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=235, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:00:15,631 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:00:15,629 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=160, type=Follower] is going to quit

2024-05-26 04:00:15,646 INFO Node <naming_persistent_service/nacos2:7848> term 242 start preVote.

2024-05-26 04:00:15,651 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:00:16,408 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=226, lastLogIncluded=0, lastLogIndex=226, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=159, type=Follower] is going to quit

2024-05-26 04:00:16,422 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:00:16,415 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=235, currTerm=234, granted=true, requestLastLogId=LogId [index=227, term=234], lastLogId=LogId [index=227, term=234].

2024-05-26 04:00:16,425 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:00:16,426 INFO Node <naming_persistent_service/nacos2:7848> term 242 start preVote.

2024-05-26 04:00:16,434 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=234, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:00:16,434 INFO Node <naming_instance_metadata/nacos2:7848> term 234 start preVote.

2024-05-26 04:00:16,442 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=242, granted=true.

2024-05-26 04:00:16,443 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=242.

2024-05-26 04:00:16,445 WARN Node <naming_persistent_service/nacos2:7848> raise term 243 when get lastLogId.

2024-05-26 04:00:16,445 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:00:16,450 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=235, currTerm=234.

2024-05-26 04:00:16,462 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=235, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-26 04:00:16,461 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=243, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 04:00:16,464 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=236, currTerm=235, granted=true, requestLastLogId=LogId [index=226, term=235], lastLogId=LogId [index=226, term=235].

2024-05-26 04:00:16,466 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=243, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 04:00:16,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=235, votedFor=nacos3:7848, cost time=125 ms

2024-05-26 04:00:16,591 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=236, currTerm=235, granted=true, requestLastLogId=LogId [index=226, term=235], lastLogId=LogId [index=226, term=235].

2024-05-26 04:00:16,604 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=236, currTerm=235.

2024-05-26 04:00:16,613 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=243, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:00:16,614 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:00:16,614 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=234, currTerm=235.

2024-05-26 04:00:16,628 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:00:16,635 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=234, currTerm=235.

2024-05-26 04:00:16,638 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=236, votedFor=0.0.0.0:0, cost time=33 ms

2024-05-26 04:00:16,653 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=236, votedFor=nacos1:7848, cost time=6 ms

2024-05-26 04:00:16,681 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:00:16,681 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=234, currTerm=235.

2024-05-26 04:00:16,685 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:00:16,687 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:00:16,687 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 04:00:16,694 INFO onLeaderStart: term=243.

2024-05-26 04:00:16,694 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:00:20,624 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-26 04:00:21,439 INFO Node <naming_persistent_service_v2/nacos2:7848> term 237 start preVote.

2024-05-26 04:00:21,439 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:00:21,444 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=237, granted=false.

2024-05-26 04:00:21,444 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=237, granted=true.

2024-05-26 04:00:21,445 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=237.

2024-05-26 04:00:21,452 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=238, votedFor=nacos2:7848, cost time=5 ms

2024-05-26 04:00:21,456 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=238, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:00:21,457 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:00:21,457 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:00:21,458 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:00:21,462 INFO onLeaderStart: term=238.

2024-05-26 04:10:38,086 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=243, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:10:38,788 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=173, type=Follower] is going to quit

2024-05-26 04:10:38,791 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=234, lastLogIncluded=0, lastLogIndex=234, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=174, type=Follower] is going to quit

2024-05-26 04:10:38,394 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:10:38,394 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=238, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:10:38,797 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=227, lastLogIncluded=0, lastLogIndex=227, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=180, type=Follower] is going to quit

2024-05-26 04:10:38,800 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=227, lastLogIncluded=0, lastLogIndex=227, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=181, type=Follower] is going to quit

2024-05-26 04:10:38,784 INFO Node <naming_instance_metadata/nacos2:7848> term 235 start preVote.

2024-05-26 04:10:38,784 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=235, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 04:10:38,393 INFO Node <naming_service_metadata/nacos2:7848> term 236 start preVote.

2024-05-26 04:10:38,817 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=237, currTerm=236, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:10:38,788 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:10:38,795 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=234, term=243], lastLogId=LogId [index=234, term=243].

2024-05-26 04:10:38,797 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:10:38,805 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=239, currTerm=238, granted=true, requestLastLogId=LogId [index=227, term=238], lastLogId=LogId [index=227, term=238].

2024-05-26 04:10:39,027 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:38,849 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=235, granted=false.

2024-05-26 04:10:39,025 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=234, term=243], lastLogId=LogId [index=234, term=243].

2024-05-26 04:10:39,027 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,045 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=239, currTerm=238.

2024-05-26 04:10:39,048 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=236, granted=true.

2024-05-26 04:10:39,049 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=236.

2024-05-26 04:10:39,049 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=244, currTerm=243.

2024-05-26 04:10:39,050 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=236, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:10:39,070 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=235, granted=true.

2024-05-26 04:10:39,071 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=235.

2024-05-26 04:10:39,072 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=235, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:10:39,074 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=244, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-26 04:10:39,074 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=239, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-26 04:10:39,076 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,074 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=237, votedFor=nacos2:7848, cost time=24 ms

2024-05-26 04:10:39,076 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,081 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:10:39,083 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=236, votedFor=nacos2:7848, cost time=10 ms

2024-05-26 04:10:39,083 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=237, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:10:39,084 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=244, votedFor=nacos1:7848, cost time=8 ms

2024-05-26 04:10:39,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=239, votedFor=nacos1:7848, cost time=10 ms

2024-05-26 04:10:39,087 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=239, currTerm=239, granted=true, requestLastLogId=LogId [index=227, term=238], lastLogId=LogId [index=227, term=238].

2024-05-26 04:10:39,090 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:10:39,090 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,088 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,093 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:10:39,097 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=236, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:10:39,109 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:10:39,112 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:10:39,106 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,111 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=237, currTerm=237.

2024-05-26 04:10:39,125 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:10:39,126 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:10:39,131 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:10:39,147 INFO onLeaderStart: term=237.

2024-05-26 04:10:39,152 INFO onLeaderStart: term=236.

2024-05-26 04:11:16,612 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=237, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:11:16,892 INFO Node <naming_persistent_service_v2/nacos2:7848> term 239 start preVote.

2024-05-26 04:11:16,914 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:11:16,915 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=236, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:11:17,347 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:11:16,912 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:11:16,957 INFO Node <naming_persistent_service/nacos2:7848> term 244 start preVote.

2024-05-26 04:11:17,352 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=162, type=Follower] is going to quit

2024-05-26 04:11:17,353 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:11:17,336 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=229, lastLogIncluded=0, lastLogIndex=229, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=144, type=Follower] is going to quit

2024-05-26 04:11:17,411 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=229, lastLogIncluded=0, lastLogIndex=229, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=145, type=Follower] is going to quit

2024-05-26 04:11:17,401 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=228, lastLogIncluded=0, lastLogIndex=228, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=163, type=Follower] is going to quit

2024-05-26 04:11:17,470 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,477 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,507 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=238, currTerm=237, granted=true, requestLastLogId=LogId [index=228, term=237], lastLogId=LogId [index=228, term=237].

2024-05-26 04:11:17,535 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=239, granted=true.

2024-05-26 04:11:17,538 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=239.

2024-05-26 04:11:17,539 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:11:17,543 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=237, currTerm=236, granted=true, requestLastLogId=LogId [index=229, term=236], lastLogId=LogId [index=229, term=236].

2024-05-26 04:11:17,561 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=244, granted=true.

2024-05-26 04:11:17,563 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=244.

2024-05-26 04:11:17,564 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:11:17,565 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=238, currTerm=237.

2024-05-26 04:11:17,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=240, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 04:11:17,586 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,587 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:11:17,590 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=240, currTerm=240, granted=true, requestLastLogId=LogId [index=228, term=239], lastLogId=LogId [index=228, term=239].

2024-05-26 04:11:17,590 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=245, votedFor=nacos2:7848, cost time=24 ms

2024-05-26 04:11:17,591 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=238, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-26 04:11:17,592 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:11:17,595 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,625 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=237, currTerm=236.

2024-05-26 04:11:17,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=238, votedFor=nacos1:7848, cost time=42 ms

2024-05-26 04:11:17,641 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,645 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=237, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-26 04:11:17,647 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,647 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,658 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,667 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=237, votedFor=nacos1:7848, cost time=18 ms

2024-05-26 04:11:17,669 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:11:17,703 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=245, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:11:17,711 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=240, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:11:17,722 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:11:17,729 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:11:17,735 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:11:17,740 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:11:17,752 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:11:17,777 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:11:17,828 INFO onLeaderStart: term=240.

2024-05-26 04:11:17,829 INFO onLeaderStart: term=245.

2024-05-26 04:12:42,146 INFO Node <naming_service_metadata/nacos2:7848> term 238 start preVote.

2024-05-26 04:12:42,194 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=240, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:12:42,195 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=245, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:12:42,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:12:42,147 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:12:42,270 INFO Node <naming_instance_metadata/nacos2:7848> term 237 start preVote.

2024-05-26 04:12:42,302 INFO Node <naming_service_metadata/nacos2:7848> term 238 start preVote.

2024-05-26 04:12:42,361 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:12:42,336 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=176, type=Follower] is going to quit

2024-05-26 04:12:42,355 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=229, lastLogIncluded=0, lastLogIndex=229, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=183, type=Follower] is going to quit

2024-05-26 04:12:42,365 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:12:42,405 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=229, lastLogIncluded=0, lastLogIndex=229, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=182, type=Follower] is going to quit

2024-05-26 04:12:42,419 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=236, lastLogIncluded=0, lastLogIndex=236, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=175, type=Follower] is going to quit

2024-05-26 04:12:42,609 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=237, granted=true.

2024-05-26 04:12:42,609 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=237.

2024-05-26 04:12:42,620 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=237, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:12:42,647 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=238, granted=true.

2024-05-26 04:12:42,652 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=238.

2024-05-26 04:12:42,653 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=241, currTerm=240, granted=true, requestLastLogId=LogId [index=229, term=240], lastLogId=LogId [index=229, term=240].

2024-05-26 04:12:42,676 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=238, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:12:42,676 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:12:42,707 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=238, votedFor=nacos2:7848, cost time=87 ms

2024-05-26 04:12:42,714 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=239, votedFor=nacos2:7848, cost time=25 ms

2024-05-26 04:12:42,768 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=238, currTerm=238, granted=true, requestLastLogId=LogId [index=230, term=237], lastLogId=LogId [index=230, term=237].

2024-05-26 04:12:42,800 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:12:42,813 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=239, currTerm=239, granted=true, requestLastLogId=LogId [index=229, term=238], lastLogId=LogId [index=229, term=238].

2024-05-26 04:12:42,816 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:42,824 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:42,832 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=236, term=245], lastLogId=LogId [index=236, term=245].

2024-05-26 04:12:42,863 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=238, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:12:42,864 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:12:42,867 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=241, currTerm=240.

2024-05-26 04:12:42,872 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:42,874 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:12:42,875 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:12:42,888 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:42,890 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:12:42,893 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=246, currTerm=245.

2024-05-26 04:12:42,904 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=241, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-26 04:12:42,914 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=239, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:12:42,938 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:12:42,944 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:12:42,945 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=241, votedFor=nacos3:7848, cost time=38 ms

2024-05-26 04:12:42,948 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=246, votedFor=0.0.0.0:0, cost time=48 ms

2024-05-26 04:12:42,963 INFO onLeaderStart: term=238.

2024-05-26 04:12:42,967 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:42,957 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:43,025 INFO onLeaderStart: term=239.

2024-05-26 04:12:43,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=246, votedFor=nacos3:7848, cost time=62 ms

2024-05-26 04:12:43,028 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:43,064 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:12:43,066 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:12:43,073 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:29:03,928 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=238, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:29:03,958 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=239, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:29:04,054 INFO Node <naming_persistent_service_v2/nacos2:7848> term 241 start preVote.

2024-05-26 04:29:04,106 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 04:29:04,024 INFO Node <naming_persistent_service/nacos2:7848> term 246 start preVote.

2024-05-26 04:29:04,097 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 04:29:04,505 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:29:04,680 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:29:04,563 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=165, type=Follower] is going to quit

2024-05-26 04:29:04,744 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=230, lastLogIncluded=0, lastLogIndex=230, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=164, type=Follower] is going to quit

2024-05-26 04:29:04,700 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=231, lastLogIncluded=0, lastLogIndex=231, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=147, type=Follower] is going to quit

2024-05-26 04:29:04,763 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=231, lastLogIncluded=0, lastLogIndex=231, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=146, type=Follower] is going to quit

2024-05-26 04:29:04,753 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=241, granted=true.

2024-05-26 04:29:04,767 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=239, currTerm=238, granted=true, requestLastLogId=LogId [index=231, term=238], lastLogId=LogId [index=231, term=238].

2024-05-26 04:29:04,768 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=241.

2024-05-26 04:29:04,775 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=246, granted=true, requestLastLogId=LogId [index=237, term=246], lastLogId=LogId [index=237, term=246].

2024-05-26 04:29:04,779 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=246, granted=true, requestLastLogId=LogId [index=237, term=246], lastLogId=LogId [index=237, term=246].

2024-05-26 04:29:04,779 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=240, currTerm=239, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 04:29:04,812 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=246, granted=true.

2024-05-26 04:29:04,816 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=246.

2024-05-26 04:29:04,949 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=239, currTerm=238.

2024-05-26 04:29:05,028 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:29:05,034 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=240, currTerm=239.

2024-05-26 04:29:05,056 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=239, votedFor=0.0.0.0:0, cost time=103 ms

2024-05-26 04:29:05,052 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=247, votedFor=nacos2:7848, cost time=100 ms

2024-05-26 04:29:05,045 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=242, votedFor=nacos2:7848, cost time=251 ms

2024-05-26 04:29:05,060 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=246, currTerm=247.

2024-05-26 04:29:05,077 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=242, currTerm=242, granted=true, requestLastLogId=LogId [index=230, term=241], lastLogId=LogId [index=230, term=241].

2024-05-26 04:29:05,167 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=247, currTerm=247.

2024-05-26 04:29:05,187 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=242, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:29:05,194 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:29:05,200 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=240, votedFor=0.0.0.0:0, cost time=141 ms

2024-05-26 04:29:05,243 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=239, votedFor=nacos1:7848, cost time=75 ms

2024-05-26 04:29:05,249 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:29:05,254 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=240, votedFor=nacos1:7848, cost time=24 ms

2024-05-26 04:29:05,254 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=240, currTerm=240, granted=true, requestLastLogId=LogId [index=230, term=239], lastLogId=LogId [index=230, term=239].

2024-05-26 04:29:05,348 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=239, currTerm=239, because the leader nacos1:7848's lease is still valid.

2024-05-26 04:29:05,402 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 04:29:05,483 INFO onLeaderStart: term=242.

2024-05-26 04:29:05,496 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:29:05,518 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=247, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:29:05,531 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:29:05,549 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:29:05,570 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 04:29:05,615 INFO onLeaderStart: term=247.

2024-05-26 04:45:24,865 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=247, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:45:25,249 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:45:24,982 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:45:25,303 INFO Node <naming_instance_metadata/nacos2:7848> term 239 start preVote.

2024-05-26 04:45:24,973 INFO Node <naming_service_metadata/nacos2:7848> term 240 start preVote.

2024-05-26 04:45:25,314 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=239, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:45:24,957 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=242, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:45:25,431 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=231, lastLogIncluded=0, lastLogIndex=231, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=185, type=Follower] is going to quit

2024-05-26 04:45:25,452 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 04:45:25,466 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=231, lastLogIncluded=0, lastLogIndex=231, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=184, type=Follower] is going to quit

2024-05-26 04:45:25,483 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=231, term=242], lastLogId=LogId [index=231, term=242].

2024-05-26 04:45:25,490 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=178, type=Follower] is going to quit

2024-05-26 04:45:25,522 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=238, lastLogIncluded=0, lastLogIndex=238, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=179, type=Follower] is going to quit

2024-05-26 04:45:25,527 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 04:45:25,533 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 04:45:25,555 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=239, granted=true.

2024-05-26 04:45:25,565 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=239.

2024-05-26 04:45:25,604 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=240, granted=true.

2024-05-26 04:45:25,628 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=240.

2024-05-26 04:45:25,643 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=240, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 04:45:25,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=240, votedFor=nacos2:7848, cost time=87 ms

2024-05-26 04:45:25,699 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=231, term=242], lastLogId=LogId [index=231, term=242].

2024-05-26 04:45:25,732 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=243, currTerm=242.

2024-05-26 04:45:25,733 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=240, currTerm=240, granted=true, requestLastLogId=LogId [index=232, term=239], lastLogId=LogId [index=232, term=239].

2024-05-26 04:45:25,744 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 04:45:25,784 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:45:25,896 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_231.

2024-05-26 04:45:25,897 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=247.

2024-05-26 04:45:25,955 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_231.

2024-05-26 04:45:25,960 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_231.

2024-05-26 04:45:25,960 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=241, votedFor=nacos2:7848, cost time=320 ms

2024-05-26 04:45:25,961 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_232.

2024-05-26 04:45:25,962 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=243, votedFor=0.0.0.0:0, cost time=179 ms

2024-05-26 04:45:25,987 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=243, currTerm=243.

2024-05-26 04:45:25,979 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_232.

2024-05-26 04:45:25,978 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_231.

2024-05-26 04:45:25,967 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_238.

2024-05-26 04:45:25,993 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_238.

2024-05-26 04:45:25,991 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=240, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:45:25,985 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:25,965 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 04:45:26,003 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_226.

2024-05-26 04:45:25,994 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_225.

2024-05-26 04:45:25,994 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:26,003 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_232.

2024-05-26 04:45:26,003 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=241, currTerm=241, granted=true, requestLastLogId=LogId [index=231, term=240], lastLogId=LogId [index=231, term=240].

2024-05-26 04:45:26,005 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_225.

2024-05-26 04:45:26,044 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=241, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 04:45:26,005 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=243, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 04:45:26,012 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=248, votedFor=0.0.0.0:0, cost time=50 ms

2024-05-26 04:45:26,019 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:45:26,064 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 04:45:26,066 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=248, currTerm=248.

2024-05-26 04:45:26,071 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:45:26,086 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:26,102 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 223 to 226, cost 1 ms.

2024-05-26 04:45:26,087 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 04:45:26,098 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 230 to 233, cost 10 ms.

2024-05-26 04:45:26,107 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=248, votedFor=nacos3:7848, cost time=33 ms

2024-05-26 04:45:26,108 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:45:26,097 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 224 to 227, cost 1 ms.

2024-05-26 04:45:26,110 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 223 to 226, cost 28 ms.

2024-05-26 04:45:26,107 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:26,129 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:26,129 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 04:45:26,127 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 04:45:26,150 INFO onLeaderStart: term=241.

2024-05-26 04:45:26,135 INFO onLeaderStart: term=240.

2024-05-26 04:57:38,329 INFO Node <naming_persistent_service_v2/nacos2:7848> term 243 start preVote.

2024-05-26 04:57:38,468 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=241, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:57:38,469 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=240, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 04:57:38,351 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 04:57:38,414 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 04:57:38,413 INFO Node <naming_persistent_service/nacos2:7848> term 248 start preVote.

2024-05-26 05:12:54,993 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=233, lastLogIncluded=0, lastLogIndex=233, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=148, type=Follower] is going to quit

2024-05-26 05:12:55,025 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:12:55,035 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=232, lastLogIncluded=0, lastLogIndex=232, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=166, type=Follower] is going to quit

2024-05-26 05:12:55,127 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=232, lastLogIncluded=0, lastLogIndex=232, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=167, type=Follower] is going to quit

2024-05-26 05:12:55,048 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:12:55,076 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=233, lastLogIncluded=0, lastLogIndex=233, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=149, type=Follower] is going to quit

2024-05-26 05:12:55,215 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=241, currTerm=240, granted=true, requestLastLogId=LogId [index=233, term=240], lastLogId=LogId [index=233, term=240].

2024-05-26 05:12:55,260 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=248, granted=true.

2024-05-26 05:12:55,285 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=248.

2024-05-26 05:12:55,277 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=242, currTerm=241, granted=true, requestLastLogId=LogId [index=232, term=241], lastLogId=LogId [index=232, term=241].

2024-05-26 05:12:55,272 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=243, granted=true.

2024-05-26 05:12:55,300 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=243.

2024-05-26 05:12:55,288 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=249, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 05:12:55,313 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=249, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 05:12:55,306 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:12:55,407 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=249, votedFor=nacos2:7848, cost time=87 ms

2024-05-26 05:12:55,465 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=248, currTerm=249.

2024-05-26 05:12:55,413 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=241, currTerm=240.

2024-05-26 05:12:55,416 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:12:55,408 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=244, votedFor=nacos2:7848, cost time=86 ms

2024-05-26 05:12:55,411 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:12:55,411 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:12:55,481 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=242, currTerm=241.

2024-05-26 05:12:55,500 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=241, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-26 05:12:55,508 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=242, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 05:12:55,515 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:12:55,521 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=242, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 05:12:55,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=241, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 05:12:55,538 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=244, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:12:55,538 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=249, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:12:55,544 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:12:55,550 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:12:55,555 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:12:55,557 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:12:55,570 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:12:55,586 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:12:55,588 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 05:12:55,602 INFO onLeaderStart: term=244.

2024-05-26 05:12:55,603 INFO onLeaderStart: term=249.

2024-05-26 05:13:10,876 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=249, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:11,022 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:11,068 INFO Node <naming_service_metadata/nacos2:7848> term 242 start preVote.

2024-05-26 05:13:11,071 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:13:11,084 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=181, type=Follower] is going to quit

2024-05-26 05:13:11,108 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=182, type=Follower] is going to quit

2024-05-26 05:13:11,142 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=244, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:11,147 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=233, lastLogIncluded=0, lastLogIndex=233, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=186, type=Follower] is going to quit

2024-05-26 05:13:11,152 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=233, lastLogIncluded=0, lastLogIndex=233, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=187, type=Follower] is going to quit

2024-05-26 05:13:11,154 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:11,339 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 05:13:11,362 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 05:13:11,388 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=242, granted=true.

2024-05-26 05:13:11,471 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=242.

2024-05-26 05:13:11,475 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=242, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:11,477 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=242, currTerm=241, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:13:11,529 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=250, currTerm=249.

2024-05-26 05:13:11,552 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:11,563 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:11,586 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=243, votedFor=nacos2:7848, cost time=92 ms

2024-05-26 05:13:11,589 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=250, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-26 05:13:11,591 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=243, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 05:13:11,591 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:11,595 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:11,600 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=243, currTerm=243.

2024-05-26 05:13:11,602 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:11,606 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=243, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 05:13:11,607 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=250, votedFor=nacos1:7848, cost time=14 ms

2024-05-26 05:13:11,608 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=243, granted=true, requestLastLogId=LogId [index=233, term=242], lastLogId=LogId [index=233, term=242].

2024-05-26 05:13:11,615 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:11,610 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:12,099 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:13,292 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:16,325 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:16,657 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=245, currTerm=244, granted=true, requestLastLogId=LogId [index=233, term=244], lastLogId=LogId [index=233, term=244].

2024-05-26 05:13:16,677 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=245, currTerm=244.

2024-05-26 05:13:16,683 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=245, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-26 05:13:16,691 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=245, votedFor=nacos3:7848, cost time=7 ms

2024-05-26 05:13:28,118 INFO Node <naming_persistent_service_v2/nacos2:7848> term 245 start preVote.

2024-05-26 05:13:28,211 INFO Node <naming_instance_metadata/nacos2:7848> term 241 start preVote.

2024-05-26 05:13:28,229 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:13:28,213 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:13:28,209 INFO Node <naming_persistent_service/nacos2:7848> term 250 start preVote.

2024-05-26 05:13:28,176 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=245, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:13:28,336 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:13:28,334 INFO Node <naming_service_metadata/nacos2:7848> term 243 start preVote.

2024-05-26 05:13:28,637 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=243, granted=true.

2024-05-26 05:13:28,639 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=250, granted=false.

2024-05-26 05:13:28,673 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=243.

2024-05-26 05:13:28,688 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:28,682 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=241, granted=false.

2024-05-26 05:13:28,674 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=245, granted=true.

2024-05-26 05:13:28,795 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=245.

2024-05-26 05:13:28,798 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=245, currTerm=246.

2024-05-26 05:13:28,799 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=241, granted=true.

2024-05-26 05:13:28,800 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=246, granted=true, requestLastLogId=LogId [index=234, term=245], lastLogId=LogId [index=234, term=245].

2024-05-26 05:13:28,801 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=241.

2024-05-26 05:13:28,806 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=250, granted=true.

2024-05-26 05:13:28,812 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=250.

2024-05-26 05:13:28,813 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:28,811 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=241, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:13:28,969 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=251, votedFor=nacos2:7848, cost time=150 ms

2024-05-26 05:13:28,970 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=244, votedFor=nacos2:7848, cost time=279 ms

2024-05-26 05:13:28,971 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:28,974 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=242, votedFor=nacos2:7848, cost time=156 ms

2024-05-26 05:13:28,976 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=246, votedFor=nacos2:7848, cost time=170 ms

2024-05-26 05:13:28,978 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:13:28,981 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=246.

2024-05-26 05:13:28,983 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=244, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:28,987 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:13:28,990 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:28,998 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=242, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:29,000 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:13:29,004 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=251, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:29,014 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:29,016 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=246, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:13:29,018 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:13:29,014 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:13:29,025 INFO onLeaderStart: term=244.

2024-05-26 05:13:29,022 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:29,026 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:29,023 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:13:29,038 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:29,041 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:13:29,060 INFO onLeaderStart: term=246.

2024-05-26 05:13:29,061 INFO onLeaderStart: term=251.

2024-05-26 05:13:29,070 INFO onLeaderStart: term=242.

2024-05-26 05:13:43,640 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=246, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:43,682 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=244, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:43,680 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=251, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:44,082 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:43,687 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=242, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:13:44,083 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=189, type=Follower] is going to quit

2024-05-26 05:13:44,085 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:44,083 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:44,084 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=169, type=Follower] is going to quit

2024-05-26 05:13:44,102 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=168, type=Follower] is going to quit

2024-05-26 05:13:44,090 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=183, type=Follower] is going to quit

2024-05-26 05:13:44,094 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:13:44,092 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=150, type=Follower] is going to quit

2024-05-26 05:13:44,105 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=151, type=Follower] is going to quit

2024-05-26 05:13:44,102 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=235, lastLogIncluded=0, lastLogIndex=235, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=190, type=Follower] is going to quit

2024-05-26 05:13:44,105 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=184, type=Follower] is going to quit

2024-05-26 05:13:44,132 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,131 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,134 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,213 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,297 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=245, currTerm=244, granted=true, requestLastLogId=LogId [index=235, term=244], lastLogId=LogId [index=235, term=244].

2024-05-26 05:13:44,299 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=235, term=242], lastLogId=LogId [index=235, term=242].

2024-05-26 05:13:44,341 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,362 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=243, currTerm=242, granted=true, requestLastLogId=LogId [index=235, term=242], lastLogId=LogId [index=235, term=242].

2024-05-26 05:13:44,360 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 05:13:44,381 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,390 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,390 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,398 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,407 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,415 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,460 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=245, currTerm=244.

2024-05-26 05:13:44,470 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=252, currTerm=251.

2024-05-26 05:13:44,508 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=243, currTerm=242.

2024-05-26 05:13:44,514 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=245, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-26 05:13:44,519 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=252, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-26 05:13:44,521 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:44,537 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=243, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 05:13:44,546 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=245, votedFor=nacos3:7848, cost time=25 ms

2024-05-26 05:13:44,552 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=252, votedFor=nacos3:7848, cost time=24 ms

2024-05-26 05:13:44,553 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=243, votedFor=nacos3:7848, cost time=14 ms

2024-05-26 05:13:45,314 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:45,325 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:46,214 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 05:13:49,475 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=247, currTerm=246, granted=true, requestLastLogId=LogId [index=235, term=246], lastLogId=LogId [index=235, term=246].

2024-05-26 05:13:49,489 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=247, currTerm=246.

2024-05-26 05:13:49,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=247, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-26 05:13:49,507 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=247, votedFor=nacos1:7848, cost time=5 ms

2024-05-26 05:15:59,882 INFO Node <naming_persistent_service/nacos2:7848> term 252 start preVote.

2024-05-26 05:15:59,856 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=243, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:15:59,852 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:15:59,858 INFO Node <naming_service_metadata/nacos2:7848> term 245 start preVote.

2024-05-26 05:15:59,880 INFO Node <naming_instance_metadata/nacos2:7848> term 243 start preVote.

2024-05-26 05:15:59,880 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=245, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:15:59,968 INFO Node <naming_persistent_service_v2/nacos2:7848> term 247 start preVote.

2024-05-26 05:15:59,968 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:16:00,245 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=236, term=245], lastLogId=LogId [index=236, term=245].

2024-05-26 05:16:00,240 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=244, currTerm=243, granted=true, requestLastLogId=LogId [index=236, term=243], lastLogId=LogId [index=236, term=243].

2024-05-26 05:16:00,263 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=243, granted=true.

2024-05-26 05:16:00,274 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=243.

2024-05-26 05:16:00,283 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=247, granted=true.

2024-05-26 05:16:00,292 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=252, granted=true.

2024-05-26 05:16:00,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=244, votedFor=nacos2:7848, cost time=256 ms

2024-05-26 05:16:00,308 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=245, granted=true.

2024-05-26 05:16:00,303 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=247.

2024-05-26 05:16:00,556 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=252.

2024-05-26 05:16:00,561 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=245.

2024-05-26 05:16:00,565 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:16:00,562 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=248, currTerm=248.

2024-05-26 05:16:00,560 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=243, currTerm=244.

2024-05-26 05:16:00,566 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=246.

2024-05-26 05:16:00,562 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:16:00,570 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=252, currTerm=253.

2024-05-26 05:16:00,586 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=253, currTerm=253.

2024-05-26 05:16:00,572 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:16:00,579 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=245, currTerm=246.

2024-05-26 05:16:00,592 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=248, currTerm=248, granted=true, requestLastLogId=LogId [index=236, term=247], lastLogId=LogId [index=236, term=247].

2024-05-26 05:16:00,576 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=244, currTerm=244.

2024-05-26 05:16:00,596 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:16:00,605 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:16:00,618 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=248, votedFor=nacos2:7848, cost time=11 ms

2024-05-26 05:16:00,637 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=253, votedFor=nacos2:7848, cost time=13 ms

2024-05-26 05:16:00,640 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=243, term=252], lastLogId=LogId [index=243, term=252].

2024-05-26 05:16:00,642 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=246, votedFor=nacos2:7848, cost time=12 ms

2024-05-26 05:16:00,676 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:16:00,677 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:16:00,681 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:32:21,352 INFO Node <naming_persistent_service_v2/nacos2:7848> term 248 start preVote.

2024-05-26 05:32:21,358 INFO Node <naming_service_metadata/nacos2:7848> term 246 start preVote.

2024-05-26 05:32:21,383 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,384 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:32:21,453 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,415 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:32:21,404 INFO Node <naming_persistent_service/nacos2:7848> term 253 start preVote.

2024-05-26 05:32:21,383 INFO Node <naming_instance_metadata/nacos2:7848> term 244 start preVote.

2024-05-26 05:32:21,836 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=237, term=248], lastLogId=LogId [index=237, term=248].

2024-05-26 05:32:21,981 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=248, granted=true.

2024-05-26 05:32:21,991 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=245, currTerm=244, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:32:22,044 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=245, currTerm=244.

2024-05-26 05:32:22,005 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=247, currTerm=246, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:32:22,048 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=246, granted=true.

2024-05-26 05:32:22,049 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=246.

2024-05-26 05:32:22,007 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=254, currTerm=253, because the leader nacos1:7848's lease is still valid.

2024-05-26 05:32:22,041 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=248.

2024-05-26 05:32:22,046 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=244, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-26 05:32:22,056 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=253, granted=true.

2024-05-26 05:32:22,063 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:32:22,072 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=253.

2024-05-26 05:32:22,078 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=245, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-26 05:32:22,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=247, votedFor=nacos2:7848, cost time=22 ms

2024-05-26 05:32:22,090 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,091 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=253, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:32:22,116 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=247, currTerm=247.

2024-05-26 05:32:22,117 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=245, votedFor=nacos3:7848, cost time=32 ms

2024-05-26 05:32:22,123 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=244, currTerm=245.

2024-05-26 05:32:22,123 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=254, votedFor=nacos2:7848, cost time=23 ms

2024-05-26 05:32:22,124 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=249, votedFor=nacos2:7848, cost time=36 ms

2024-05-26 05:32:22,128 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=248, currTerm=249.

2024-05-26 05:32:22,129 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=249, currTerm=249.

2024-05-26 05:32:22,126 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=244, currTerm=245.

2024-05-26 05:32:22,128 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,150 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=254, currTerm=254.

2024-05-26 05:32:22,153 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=254, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:32:22,162 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:32:22,163 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:32:22,171 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:32:22,190 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:32:22,210 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:32:22,331 INFO onLeaderStart: term=254.

2024-05-26 05:48:41,540 INFO Node <naming_instance_metadata/nacos2:7848> term 245 start preVote.

2024-05-26 05:48:42,128 INFO Node <naming_instance_metadata/nacos2:7848> term 245 start preVote.

2024-05-26 05:48:41,886 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=245, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:48:42,101 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 05:48:42,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=247, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 05:48:42,067 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=254, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 05:48:42,076 INFO Node <naming_persistent_service_v2/nacos2:7848> term 249 start preVote.

2024-05-26 05:48:42,070 INFO Node <naming_service_metadata/nacos2:7848> term 247 start preVote.

2024-05-26 05:48:42,353 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 05:48:42,364 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=245, lastLogIncluded=0, lastLogIndex=245, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=185, type=Follower] is going to quit

2024-05-26 05:48:42,370 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=246, currTerm=245, granted=true, requestLastLogId=LogId [index=238, term=245], lastLogId=LogId [index=238, term=245].

2024-05-26 05:48:42,370 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=245, lastLogIncluded=0, lastLogIndex=245, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=186, type=Follower] is going to quit

2024-05-26 05:48:42,407 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=245, granted=true.

2024-05-26 05:48:42,509 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=245.

2024-05-26 05:48:42,399 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=255, currTerm=254, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 05:48:42,537 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=254, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 05:48:42,485 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=247, granted=true.

2024-05-26 05:48:42,547 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=247.

2024-05-26 05:48:42,549 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=247, currTerm=248.

2024-05-26 05:48:42,490 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=249, granted=true.

2024-05-26 05:48:42,547 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=254, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 05:48:42,568 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=246, votedFor=nacos2:7848, cost time=41 ms

2024-05-26 05:48:42,553 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,577 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=248, granted=true, requestLastLogId=LogId [index=238, term=247], lastLogId=LogId [index=238, term=247].

2024-05-26 05:48:42,566 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=249.

2024-05-26 05:48:42,587 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 05:48:42,571 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,571 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=255, currTerm=254.

2024-05-26 05:48:42,640 WARN Node <naming_instance_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=245, currTerm=246.

2024-05-26 05:48:42,649 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=250, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 05:48:42,652 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=250, currTerm=250.

2024-05-26 05:48:42,650 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=246, currTerm=246.

2024-05-26 05:48:42,659 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,655 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=248, votedFor=nacos2:7848, cost time=32 ms

2024-05-26 05:48:42,658 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=255, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 05:48:42,656 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,662 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 05:48:42,669 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=250, currTerm=250, granted=true, requestLastLogId=LogId [index=238, term=249], lastLogId=LogId [index=238, term=249].

2024-05-26 05:48:42,697 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=255, votedFor=nacos1:7848, cost time=15 ms

2024-05-26 05:48:42,708 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=248, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 05:48:42,719 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 05:48:42,732 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 05:48:42,753 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=248.

2024-05-26 05:48:42,770 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 05:48:42,775 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 05:48:42,795 INFO onLeaderStart: term=248.

2024-05-26 06:04:57,686 INFO Node <naming_instance_metadata/nacos2:7848> term 246 start preVote.

2024-05-26 06:04:57,704 INFO Node <naming_persistent_service/nacos2:7848> term 255 start preVote.

2024-05-26 06:04:57,711 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:04:57,718 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:04:57,735 INFO Node <naming_instance_metadata/nacos2:7848> term 246 start preVote.

2024-05-26 06:04:57,737 INFO Node <naming_persistent_service_v2/nacos2:7848> term 250 start preVote.

2024-05-26 06:04:57,738 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 06:04:57,784 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=248, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:04:57,974 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:04:58,012 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=251, currTerm=250, granted=true, requestLastLogId=LogId [index=239, term=250], lastLogId=LogId [index=239, term=250].

2024-05-26 06:04:58,034 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=256, currTerm=255, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,036 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=247, currTerm=246, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,063 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=171, type=Follower] is going to quit

2024-05-26 06:04:58,059 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=256, currTerm=255, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:04:58,077 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=250, granted=true.

2024-05-26 06:04:58,087 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=239, lastLogIncluded=0, lastLogIndex=239, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=172, type=Follower] is going to quit

2024-05-26 06:04:58,091 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=246, granted=false.

2024-05-26 06:04:58,083 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=255, granted=false.

2024-05-26 06:04:58,094 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=250.

2024-05-26 06:04:58,102 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 06:04:58,165 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=249, currTerm=248, granted=true, requestLastLogId=LogId [index=239, term=248], lastLogId=LogId [index=239, term=248].

2024-05-26 06:04:58,155 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=246, granted=false.

2024-05-26 06:04:58,162 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:04:58,171 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=246, granted=true.

2024-05-26 06:04:58,178 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=246.

2024-05-26 06:04:58,182 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=246, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:04:58,194 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=255, granted=true.

2024-05-26 06:04:58,251 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=255.

2024-05-26 06:04:58,253 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:04:58,250 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=249, currTerm=248.

2024-05-26 06:04:58,299 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=251, votedFor=nacos2:7848, cost time=113 ms

2024-05-26 06:04:58,299 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=247, votedFor=nacos2:7848, cost time=116 ms

2024-05-26 06:04:58,303 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=249, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-26 06:04:58,302 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=251, currTerm=251.

2024-05-26 06:04:58,304 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=256, votedFor=nacos2:7848, cost time=48 ms

2024-05-26 06:04:58,305 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:04:58,617 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=247, currTerm=247.

2024-05-26 06:04:58,307 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=249, currTerm=249.

2024-05-26 06:04:58,554 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=256, currTerm=256.

2024-05-26 06:04:58,648 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=249, votedFor=nacos1:7848, cost time=27 ms

2024-05-26 06:04:58,662 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=247, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:04:58,663 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=256, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:04:58,674 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:04:58,664 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=251, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:04:58,686 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:04:58,674 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:04:58,666 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:04:58,676 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:04:58,672 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:04:58,687 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:04:58,690 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:04:58,700 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:04:58,740 INFO onLeaderStart: term=251.

2024-05-26 06:04:58,743 INFO onLeaderStart: term=256.

2024-05-26 06:04:58,744 INFO onLeaderStart: term=247.

2024-05-26 06:05:16,099 INFO Node <naming_service_metadata/nacos2:7848> term 249 start preVote.

2024-05-26 06:05:16,226 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:05:16,083 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=256, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:05:16,118 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=251, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:05:16,113 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=247, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:05:16,350 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=154, type=Follower] is going to quit

2024-05-26 06:05:16,388 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=153, type=Follower] is going to quit

2024-05-26 06:05:16,540 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:05:16,498 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=192, type=Follower] is going to quit

2024-05-26 06:05:16,605 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=240, lastLogIncluded=0, lastLogIndex=240, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=193, type=Follower] is going to quit

2024-05-26 06:05:16,480 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:05:16,401 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=247, lastLogIncluded=0, lastLogIndex=247, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=188, type=Follower] is going to quit

2024-05-26 06:05:16,373 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:05:16,627 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=247, lastLogIncluded=0, lastLogIndex=247, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=189, type=Follower] is going to quit

2024-05-26 06:05:16,635 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=248, currTerm=247, granted=true, requestLastLogId=LogId [index=240, term=247], lastLogId=LogId [index=240, term=247].

2024-05-26 06:05:16,646 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=247, term=256], lastLogId=LogId [index=247, term=256].

2024-05-26 06:05:16,678 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=248, currTerm=247.

2024-05-26 06:05:16,693 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=240, term=251], lastLogId=LogId [index=240, term=251].

2024-05-26 06:05:16,709 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=249, granted=true.

2024-05-26 06:05:16,716 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=249.

2024-05-26 06:05:16,724 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=249, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:05:16,736 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=248, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-26 06:05:16,757 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=240, term=251], lastLogId=LogId [index=240, term=251].

2024-05-26 06:05:16,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=250, votedFor=nacos2:7848, cost time=33 ms

2024-05-26 06:05:16,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=248, votedFor=nacos1:7848, cost time=30 ms

2024-05-26 06:05:16,865 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=256.

2024-05-26 06:05:16,867 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=248, currTerm=248, granted=true, requestLastLogId=LogId [index=240, term=247], lastLogId=LogId [index=240, term=247].

2024-05-26 06:05:16,871 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 06:05:16,871 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=251.

2024-05-26 06:05:16,873 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=250, currTerm=250, granted=true, requestLastLogId=LogId [index=240, term=249], lastLogId=LogId [index=240, term=249].

2024-05-26 06:05:16,889 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=250, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:05:16,893 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:05:16,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=252, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-26 06:05:16,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=257, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-26 06:05:16,903 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:05:16,905 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=257, currTerm=257, granted=true, requestLastLogId=LogId [index=247, term=256], lastLogId=LogId [index=247, term=256].

2024-05-26 06:05:16,914 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=257, currTerm=257, granted=true, requestLastLogId=LogId [index=247, term=256], lastLogId=LogId [index=247, term=256].

2024-05-26 06:05:16,921 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=252, votedFor=nacos1:7848, cost time=19 ms

2024-05-26 06:05:16,924 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=252, currTerm=252.

2024-05-26 06:05:16,930 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:05:16,942 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=257, votedFor=nacos1:7848, cost time=21 ms

2024-05-26 06:05:16,940 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 06:05:16,981 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:05:16,989 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:05:16,995 INFO onLeaderStart: term=250.

2024-05-26 06:05:17,010 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:15:38,959 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=250, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:15:39,385 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:15:39,388 INFO Node <naming_instance_metadata/nacos2:7848> term 248 start preVote.

2024-05-26 06:15:39,389 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:15:39,391 INFO Node <naming_persistent_service_v2/nacos2:7848> term 252 start preVote.

2024-05-26 06:15:39,385 INFO Node <naming_persistent_service/nacos2:7848> term 257 start preVote.

2024-05-26 06:15:39,402 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:15:39,502 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=241, lastLogIncluded=0, lastLogIndex=241, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=174, type=Follower] is going to quit

2024-05-26 06:15:39,502 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:15:39,680 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=241, lastLogIncluded=0, lastLogIndex=241, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=173, type=Follower] is going to quit

2024-05-26 06:15:39,870 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=251, currTerm=250, granted=true, requestLastLogId=LogId [index=241, term=250], lastLogId=LogId [index=241, term=250].

2024-05-26 06:15:39,881 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=248, term=257], lastLogId=LogId [index=248, term=257].

2024-05-26 06:15:39,902 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=249, currTerm=248, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:15:39,904 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=252, granted=true.

2024-05-26 06:15:39,918 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=252.

2024-05-26 06:15:39,921 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:15:39,928 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=249, currTerm=248, because the leader nacos1:7848's lease is still valid.

2024-05-26 06:15:39,937 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=257, granted=false.

2024-05-26 06:15:39,923 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:15:39,944 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=248, granted=true.

2024-05-26 06:15:39,952 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=248.

2024-05-26 06:15:39,956 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=248, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:15:40,041 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=251, currTerm=250.

2024-05-26 06:15:40,042 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=253, votedFor=nacos2:7848, cost time=112 ms

2024-05-26 06:15:40,044 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=258, currTerm=257.

2024-05-26 06:15:40,059 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=249, votedFor=nacos2:7848, cost time=90 ms

2024-05-26 06:15:40,058 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=253, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:15:40,066 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=251, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-26 06:15:40,067 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=249, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:15:40,077 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:15:40,078 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:15:40,080 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=258, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-26 06:15:40,083 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=257, currTerm=258.

2024-05-26 06:15:40,087 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:15:40,084 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:15:40,088 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=251, votedFor=nacos3:7848, cost time=13 ms

2024-05-26 06:15:40,098 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:15:40,102 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=258, votedFor=nacos3:7848, cost time=14 ms

2024-05-26 06:15:40,104 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=241, term=250], lastLogId=LogId [index=241, term=250].

2024-05-26 06:15:40,108 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 06:15:40,120 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 06:15:40,140 INFO onLeaderStart: term=253.

2024-05-26 06:15:40,142 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 06:15:40,156 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 06:15:40,161 INFO onLeaderStart: term=249.

2024-05-26 06:31:59,827 INFO Node <naming_persistent_service/nacos2:7848> term 258 start preVote.

2024-05-26 06:31:59,839 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 06:31:59,843 INFO Node <naming_service_metadata/nacos2:7848> term 251 start preVote.

2024-05-26 06:31:59,855 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=251, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 06:32:00,147 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=249, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:32:00,075 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=253, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:32:00,288 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:32:00,267 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=194, type=Follower] is going to quit

2024-05-26 06:32:00,288 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:32:00,338 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=195, type=Follower] is going to quit

2024-05-26 06:32:00,296 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 06:32:00,262 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=155, type=Follower] is going to quit

2024-05-26 06:32:00,381 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=242, lastLogIncluded=0, lastLogIndex=242, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=156, type=Follower] is going to quit

2024-05-26 06:32:00,340 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=259, currTerm=258, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 06:32:00,358 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=254, currTerm=253, granted=true, requestLastLogId=LogId [index=242, term=253], lastLogId=LogId [index=242, term=253].

2024-05-26 06:32:00,378 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=242, term=251], lastLogId=LogId [index=242, term=251].

2024-05-26 06:32:00,390 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=258, granted=true.

2024-05-26 06:32:00,387 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=250, currTerm=249, granted=true, requestLastLogId=LogId [index=242, term=249], lastLogId=LogId [index=242, term=249].

2024-05-26 06:32:00,397 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=251, granted=true.

2024-05-26 06:32:00,410 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=251.

2024-05-26 06:32:00,401 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=258.

2024-05-26 06:32:00,462 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=259, votedFor=nacos2:7848, cost time=38 ms

2024-05-26 06:32:00,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=252, votedFor=nacos2:7848, cost time=38 ms

2024-05-26 06:32:00,577 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=251, currTerm=252.

2024-05-26 06:32:00,579 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=253.

2024-05-26 06:32:00,581 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=258, currTerm=259.

2024-05-26 06:32:00,596 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=252.

2024-05-26 06:32:00,599 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=250, currTerm=249.

2024-05-26 06:32:00,599 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=259, currTerm=259.

2024-05-26 06:32:00,625 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=254, votedFor=0.0.0.0:0, cost time=36 ms

2024-05-26 06:32:00,626 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=254, currTerm=254, granted=true, requestLastLogId=LogId [index=242, term=253], lastLogId=LogId [index=242, term=253].

2024-05-26 06:32:00,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=250, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-26 06:32:00,687 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=250, currTerm=250, granted=true, requestLastLogId=LogId [index=242, term=249], lastLogId=LogId [index=242, term=249].

2024-05-26 06:32:00,687 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,776 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=254, votedFor=nacos1:7848, cost time=90 ms

2024-05-26 06:32:00,780 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,783 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=250, votedFor=nacos1:7848, cost time=40 ms

2024-05-26 06:32:00,788 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,806 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,807 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 06:32:00,817 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=259, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 06:32:00,825 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 06:32:00,842 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 06:32:00,877 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 06:32:00,897 INFO onLeaderStart: term=259.

2024-05-26 06:32:00,888 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 06:32:00,907 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=251, currTerm=252.

2024-05-26 06:48:15,198 INFO Node <naming_instance_metadata/nacos2:7848> term 250 start preVote.

2024-05-26 06:48:15,270 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,253 INFO Node <naming_service_metadata/nacos2:7848> term 252 start preVote.

2024-05-26 06:48:15,212 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=259, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 06:48:15,254 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,237 INFO Node <naming_persistent_service_v2/nacos2:7848> term 254 start preVote.

2024-05-26 06:48:15,215 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 06:48:15,682 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=191, type=Follower] is going to quit

2024-05-26 06:48:15,684 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 06:48:15,730 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=190, type=Follower] is going to quit

2024-05-26 06:48:15,802 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=252, granted=true.

2024-05-26 06:48:15,806 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=250, granted=true.

2024-05-26 06:48:15,806 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=252.

2024-05-26 06:48:15,808 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=250.

2024-05-26 06:48:15,815 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=250, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:48:15,811 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:48:15,866 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=251, votedFor=nacos2:7848, cost time=44 ms

2024-05-26 06:48:15,866 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=253, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 06:48:15,870 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=243, term=252], lastLogId=LogId [index=243, term=252].

2024-05-26 06:48:15,881 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=254, granted=true.

2024-05-26 06:48:15,884 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=254.

2024-05-26 06:48:15,889 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 06:48:15,918 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:03:44,399 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=255, votedFor=nacos2:7848, cost time=40 ms

2024-05-26 07:03:44,405 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=255, granted=true, requestLastLogId=LogId [index=243, term=254], lastLogId=LogId [index=243, term=254].

2024-05-26 07:03:44,417 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=243, term=250], lastLogId=LogId [index=243, term=250].

2024-05-26 07:03:44,428 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=243, term=250], lastLogId=LogId [index=243, term=250].

2024-05-26 07:03:44,426 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=255, granted=true, requestLastLogId=LogId [index=243, term=254], lastLogId=LogId [index=243, term=254].

2024-05-26 07:03:44,434 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=243, term=250], lastLogId=LogId [index=243, term=250].

2024-05-26 07:03:44,440 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=251, currTerm=251, granted=true, requestLastLogId=LogId [index=243, term=250], lastLogId=LogId [index=243, term=250].

2024-05-26 07:03:44,443 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=251, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:03:44,449 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:03:44,470 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:03:44,478 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=253, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:03:44,489 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:03:44,496 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=255, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:03:44,507 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:03:44,602 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:03:44,611 INFO onLeaderStart: term=251.

2024-05-26 07:03:44,533 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:03:44,617 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 07:03:44,606 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:03:44,619 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=251, currTerm=251.

2024-05-26 07:03:44,619 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:03:44,638 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:03:44,638 INFO onLeaderStart: term=253.

2024-05-26 07:03:44,644 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 07:03:44,645 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=255, currTerm=255.

2024-05-26 07:03:44,647 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 07:03:44,653 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:03:44,660 INFO onLeaderStart: term=255.

2024-05-26 07:03:45,877 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:03:45,950 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:03:47,907 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:03:49,551 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=250, term=259], lastLogId=LogId [index=250, term=259].

2024-05-26 07:03:49,560 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=260, currTerm=259.

2024-05-26 07:03:49,580 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=260, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-26 07:03:49,593 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=260, votedFor=nacos3:7848, cost time=12 ms

2024-05-26 07:04:07,505 INFO Node <naming_persistent_service/nacos2:7848> term 260 start preVote.

2024-05-26 07:04:07,530 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 07:04:07,749 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=251, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:04:07,849 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=253, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:04:07,852 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=255, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:04:07,917 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=176, type=Follower] is going to quit

2024-05-26 07:04:07,892 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=158, type=Follower] is going to quit

2024-05-26 07:04:07,967 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=175, type=Follower] is going to quit

2024-05-26 07:04:08,001 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=157, type=Follower] is going to quit

2024-05-26 07:04:07,971 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:04:07,994 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:04:07,991 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:04:07,988 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=196, type=Follower] is going to quit

2024-05-26 07:04:08,060 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,063 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,061 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=244, term=251], lastLogId=LogId [index=244, term=251].

2024-05-26 07:04:08,072 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=244, lastLogIncluded=0, lastLogIndex=244, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=197, type=Follower] is going to quit

2024-05-26 07:04:08,099 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=261, currTerm=260, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 07:04:08,118 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=254, currTerm=253, granted=true, requestLastLogId=LogId [index=244, term=253], lastLogId=LogId [index=244, term=253].

2024-05-26 07:04:08,128 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=260, granted=true.

2024-05-26 07:04:08,162 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=260.

2024-05-26 07:04:08,143 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=244, term=255], lastLogId=LogId [index=244, term=255].

2024-05-26 07:04:08,190 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=244, term=255], lastLogId=LogId [index=244, term=255].

2024-05-26 07:04:08,191 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=244, term=251], lastLogId=LogId [index=244, term=251].

2024-05-26 07:04:08,179 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:04:08,209 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=252, currTerm=251, granted=true, requestLastLogId=LogId [index=244, term=251], lastLogId=LogId [index=244, term=251].

2024-05-26 07:04:08,223 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=261, votedFor=nacos2:7848, cost time=45 ms

2024-05-26 07:04:08,224 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:04:08,199 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,236 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=253.

2024-05-26 07:04:08,301 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=252, currTerm=251.

2024-05-26 07:04:08,233 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,239 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,301 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=244, term=255], lastLogId=LogId [index=244, term=255].

2024-05-26 07:04:08,314 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=254, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 07:04:08,315 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=256, currTerm=255.

2024-05-26 07:04:08,319 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=254, votedFor=nacos1:7848, cost time=11 ms

2024-05-26 07:04:08,332 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=252, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-26 07:04:08,335 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=252, currTerm=252.

2024-05-26 07:04:08,335 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=256, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-26 07:04:08,351 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=261, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:04:08,356 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:04:08,360 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=252, votedFor=nacos1:7848, cost time=22 ms

2024-05-26 07:04:08,364 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=256, votedFor=nacos3:7848, cost time=25 ms

2024-05-26 07:04:08,367 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:04:08,381 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:04:08,383 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,383 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:04:08,403 INFO onLeaderStart: term=261.

2024-05-26 07:05:27,921 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=261, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:05:27,987 INFO Node <naming_service_metadata/nacos2:7848> term 254 start preVote.

2024-05-26 07:05:28,019 INFO Node <naming_instance_metadata/nacos2:7848> term 252 start preVote.

2024-05-26 07:05:28,031 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:05:27,988 INFO Node <naming_persistent_service_v2/nacos2:7848> term 256 start preVote.

2024-05-26 07:05:28,008 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 07:05:28,105 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:05:27,996 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:05:28,167 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=193, type=Follower] is going to quit

2024-05-26 07:05:28,214 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=192, type=Follower] is going to quit

2024-05-26 07:05:28,303 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=252, term=261], lastLogId=LogId [index=252, term=261].

2024-05-26 07:05:28,334 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=245, term=256], lastLogId=LogId [index=245, term=256].

2024-05-26 07:05:28,348 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=254, granted=true.

2024-05-26 07:05:28,356 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=245, term=256], lastLogId=LogId [index=245, term=256].

2024-05-26 07:05:28,358 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=252, granted=true.

2024-05-26 07:05:28,487 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=252.

2024-05-26 07:05:28,458 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 07:05:28,466 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=254.

2024-05-26 07:05:28,497 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:05:28,499 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:05:28,498 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:05:28,499 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=256, granted=true.

2024-05-26 07:05:28,513 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=256.

2024-05-26 07:05:28,501 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=252, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:05:28,521 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:05:28,525 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=262, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-26 07:05:28,526 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:05:28,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=253, votedFor=nacos2:7848, cost time=30 ms

2024-05-26 07:05:28,530 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:05:28,534 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=245, term=252], lastLogId=LogId [index=245, term=252].

2024-05-26 07:05:28,538 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=245, term=252], lastLogId=LogId [index=245, term=252].

2024-05-26 07:05:28,539 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=253, currTerm=253, granted=true, requestLastLogId=LogId [index=245, term=252], lastLogId=LogId [index=245, term=252].

2024-05-26 07:05:28,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=255, votedFor=nacos2:7848, cost time=20 ms

2024-05-26 07:05:28,543 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=255, granted=true, requestLastLogId=LogId [index=245, term=254], lastLogId=LogId [index=245, term=254].

2024-05-26 07:05:28,550 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=262, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 07:05:28,599 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=257, votedFor=nacos2:7848, cost time=60 ms

2024-05-26 07:05:28,615 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:05:28,671 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=257.

2024-05-26 07:05:28,673 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=253, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:05:28,684 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:05:28,687 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:05:28,691 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:05:28,697 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=257, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:05:28,704 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=255, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:05:28,726 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:05:28,730 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:05:28,733 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:05:28,735 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:05:28,739 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:05:28,749 INFO onLeaderStart: term=253.

2024-05-26 07:05:28,756 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:05:28,766 INFO onLeaderStart: term=255.

2024-05-26 07:05:28,766 INFO onLeaderStart: term=257.

2024-05-26 07:15:58,407 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=253, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:15:58,577 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:15:58,570 INFO Node <naming_persistent_service/nacos2:7848> term 262 start preVote.

2024-05-26 07:15:58,836 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:15:58,566 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=255, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:15:58,854 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=178, type=Follower] is going to quit

2024-05-26 07:15:58,855 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:15:58,505 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=257, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:15:58,881 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=198, type=Follower] is going to quit

2024-05-26 07:15:58,887 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=199, type=Follower] is going to quit

2024-05-26 07:15:58,834 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=160, type=Follower] is going to quit

2024-05-26 07:15:58,895 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=159, type=Follower] is going to quit

2024-05-26 07:15:58,860 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=246, lastLogIncluded=0, lastLogIndex=246, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=177, type=Follower] is going to quit

2024-05-26 07:15:58,882 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:15:58,938 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=246, term=257], lastLogId=LogId [index=246, term=257].

2024-05-26 07:15:58,940 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=254, currTerm=253, granted=true, requestLastLogId=LogId [index=246, term=253], lastLogId=LogId [index=246, term=253].

2024-05-26 07:15:58,942 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=246, term=257], lastLogId=LogId [index=246, term=257].

2024-05-26 07:15:59,013 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=254, currTerm=253.

2024-05-26 07:15:59,016 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=258, currTerm=257.

2024-05-26 07:15:59,023 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=256, currTerm=255, granted=true, requestLastLogId=LogId [index=246, term=255], lastLogId=LogId [index=246, term=255].

2024-05-26 07:15:59,028 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=262, granted=true.

2024-05-26 07:15:59,038 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=262.

2024-05-26 07:15:59,043 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=254, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-26 07:15:59,048 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:15:59,049 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=258, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-26 07:15:59,072 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=256, currTerm=255.

2024-05-26 07:15:59,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=254, votedFor=nacos1:7848, cost time=31 ms

2024-05-26 07:15:59,078 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:15:59,086 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=263, votedFor=nacos2:7848, cost time=37 ms

2024-05-26 07:15:59,141 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=254, currTerm=254, granted=true, requestLastLogId=LogId [index=246, term=253], lastLogId=LogId [index=246, term=253].

2024-05-26 07:15:59,151 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=258, votedFor=nacos1:7848, cost time=67 ms

2024-05-26 07:15:59,153 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=263, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:15:59,160 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:15:59,168 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:15:59,162 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=256, votedFor=0.0.0.0:0, cost time=84 ms

2024-05-26 07:15:59,174 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:15:59,179 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 07:15:59,187 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=254, currTerm=254, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:15:59,200 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=263, currTerm=263, because the leader nacos2:7848's lease is still valid.

2024-05-26 07:15:59,252 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=256, votedFor=nacos1:7848, cost time=67 ms

2024-05-26 07:15:59,253 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=256, currTerm=256, granted=true, requestLastLogId=LogId [index=246, term=255], lastLogId=LogId [index=246, term=255].

2024-05-26 07:15:59,253 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:15:59,272 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:15:59,281 INFO onLeaderStart: term=263.

2024-05-26 07:15:59,328 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:32:13,704 INFO Node <naming_service_metadata/nacos2:7848> term 256 start preVote.

2024-05-26 07:32:13,921 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:13,919 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:13,912 INFO Node <naming_persistent_service_v2/nacos2:7848> term 258 start preVote.

2024-05-26 07:32:13,905 INFO Node <naming_instance_metadata/nacos2:7848> term 254 start preVote.

2024-05-26 07:32:13,905 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=263, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:32:13,912 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:32:14,264 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=195, type=Follower] is going to quit

2024-05-26 07:32:14,265 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:32:14,282 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=194, type=Follower] is going to quit

2024-05-26 07:32:14,395 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=254, term=263], lastLogId=LogId [index=254, term=263].

2024-05-26 07:32:14,429 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=258, granted=true.

2024-05-26 07:32:14,439 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=258.

2024-05-26 07:32:14,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:32:14,511 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=259, votedFor=nacos2:7848, cost time=56 ms

2024-05-26 07:32:14,512 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=247, term=258], lastLogId=LogId [index=247, term=258].

2024-05-26 07:32:14,513 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=257, currTerm=256, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:32:14,536 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=256, granted=true.

2024-05-26 07:32:14,542 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=256.

2024-05-26 07:32:14,544 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=256, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:32:14,586 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=255, currTerm=254, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:32:14,632 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,637 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=254, granted=true.

2024-05-26 07:32:14,646 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=254.

2024-05-26 07:32:14,641 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:32:14,656 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=257, votedFor=nacos2:7848, cost time=93 ms

2024-05-26 07:32:14,640 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:32:14,643 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=247, term=258], lastLogId=LogId [index=247, term=258].

2024-05-26 07:32:14,644 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=263.

2024-05-26 07:32:14,640 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:32:14,657 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=254, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:32:14,657 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=255, votedFor=nacos2:7848, cost time=19 ms

2024-05-26 07:32:14,700 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:32:14,711 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=264, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-26 07:32:14,717 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=255, currTerm=255, granted=true, requestLastLogId=LogId [index=247, term=254], lastLogId=LogId [index=247, term=254].

2024-05-26 07:32:14,721 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=255, currTerm=255.

2024-05-26 07:32:14,720 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=257, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:32:14,731 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=264, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 07:32:14,735 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:32:14,746 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:32:14,747 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=259, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:32:14,759 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:32:14,783 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:32:14,789 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:32:14,816 INFO onLeaderStart: term=257.

2024-05-26 07:32:14,797 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:32:14,831 INFO onLeaderStart: term=259.

2024-05-26 07:48:34,935 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=259, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:48:35,020 INFO Node <naming_instance_metadata/nacos2:7848> term 255 start preVote.

2024-05-26 07:48:34,947 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=257, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 07:48:35,049 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:48:35,027 INFO Node <naming_persistent_service/nacos2:7848> term 264 start preVote.

2024-05-26 07:48:35,029 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 07:48:35,032 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 07:48:35,059 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 07:48:35,059 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=201, type=Follower] is going to quit

2024-05-26 07:48:35,079 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=180, type=Follower] is going to quit

2024-05-26 07:48:35,176 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=179, type=Follower] is going to quit

2024-05-26 07:48:35,187 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=248, lastLogIncluded=0, lastLogIndex=248, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=200, type=Follower] is going to quit

2024-05-26 07:48:35,215 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=248, term=257], lastLogId=LogId [index=248, term=257].

2024-05-26 07:48:35,279 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=256, currTerm=255, because the leader nacos3:7848's lease is still valid.

2024-05-26 07:48:35,348 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=248, term=259], lastLogId=LogId [index=248, term=259].

2024-05-26 07:48:35,426 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=265, currTerm=264, because the leader nacos1:7848's lease is still valid.

2024-05-26 07:48:35,432 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=264, granted=true.

2024-05-26 07:48:35,498 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=264.

2024-05-26 07:48:35,430 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=255, granted=true.

2024-05-26 07:48:35,521 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:48:35,519 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=255.

2024-05-26 07:48:35,524 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=258, currTerm=257, granted=true, requestLastLogId=LogId [index=248, term=257], lastLogId=LogId [index=248, term=257].

2024-05-26 07:48:35,552 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=258, currTerm=257.

2024-05-26 07:48:35,550 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=255, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 07:48:35,595 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=265, votedFor=nacos2:7848, cost time=54 ms

2024-05-26 07:48:35,597 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=265, currTerm=265, granted=true, requestLastLogId=LogId [index=255, term=264], lastLogId=LogId [index=255, term=264].

2024-05-26 07:48:35,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=258, votedFor=0.0.0.0:0, cost time=43 ms

2024-05-26 07:48:35,593 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=260, currTerm=259.

2024-05-26 07:48:35,601 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:48:35,616 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:48:35,620 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:48:35,616 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=265, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:48:35,635 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=260, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 07:48:35,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=258, votedFor=nacos1:7848, cost time=30 ms

2024-05-26 07:48:35,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=256, votedFor=nacos2:7848, cost time=34 ms

2024-05-26 07:48:35,658 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:48:35,659 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=258, currTerm=258, granted=true, requestLastLogId=LogId [index=248, term=257], lastLogId=LogId [index=248, term=257].

2024-05-26 07:48:35,662 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 07:48:35,673 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:48:35,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=260, votedFor=nacos1:7848, cost time=17 ms

2024-05-26 07:48:35,681 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=260, granted=true, requestLastLogId=LogId [index=248, term=259], lastLogId=LogId [index=248, term=259].

2024-05-26 07:48:35,696 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=260, granted=true, requestLastLogId=LogId [index=248, term=259], lastLogId=LogId [index=248, term=259].

2024-05-26 07:48:35,697 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=256, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 07:48:35,707 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:48:35,712 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:48:35,709 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 07:48:35,723 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:48:35,744 INFO onLeaderStart: term=265.

2024-05-26 07:48:35,744 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 07:48:35,756 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 07:48:35,764 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 07:48:35,783 INFO onLeaderStart: term=256.

2024-05-26 08:05:01,042 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=265, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:05:01,087 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=256, lastLogIncluded=0, lastLogIndex=256, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=197, type=Follower] is going to quit

2024-05-26 08:05:01,256 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:05:01,281 INFO Node <naming_service_metadata/nacos2:7848> term 258 start preVote.

2024-05-26 08:05:01,369 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=256, lastLogIncluded=0, lastLogIndex=256, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=196, type=Follower] is going to quit

2024-05-26 08:05:01,300 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=258, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:05:01,370 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=256, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:05:01,390 INFO Node <naming_persistent_service_v2/nacos2:7848> term 260 start preVote.

2024-05-26 08:05:01,409 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:05:01,425 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=249, lastLogIncluded=0, lastLogIndex=249, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=161, type=Follower] is going to quit

2024-05-26 08:05:01,427 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:05:01,431 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=249, lastLogIncluded=0, lastLogIndex=249, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=162, type=Follower] is going to quit

2024-05-26 08:05:01,468 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=266, currTerm=265, granted=true, requestLastLogId=LogId [index=256, term=265], lastLogId=LogId [index=256, term=265].

2024-05-26 08:05:01,491 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=258, granted=true.

2024-05-26 08:05:01,494 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=258.

2024-05-26 08:05:01,511 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=260, granted=true.

2024-05-26 08:05:01,619 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=260.

2024-05-26 08:05:01,631 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:05:01,612 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=266, currTerm=265.

2024-05-26 08:05:01,612 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=257, currTerm=256, granted=true, requestLastLogId=LogId [index=249, term=256], lastLogId=LogId [index=249, term=256].

2024-05-26 08:05:01,712 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=259, votedFor=nacos2:7848, cost time=205 ms

2024-05-26 08:05:01,714 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 08:05:01,714 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=257, currTerm=256.

2024-05-26 08:05:01,721 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=266, votedFor=0.0.0.0:0, cost time=79 ms

2024-05-26 08:05:01,720 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:05:01,728 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=266, currTerm=266, granted=true, requestLastLogId=LogId [index=256, term=265], lastLogId=LogId [index=256, term=265].

2024-05-26 08:05:01,733 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=261, votedFor=nacos2:7848, cost time=21 ms

2024-05-26 08:05:01,735 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:05:01,735 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=259, currTerm=259, granted=true, requestLastLogId=LogId [index=249, term=258], lastLogId=LogId [index=249, term=258].

2024-05-26 08:05:01,738 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=261, currTerm=261, granted=true, requestLastLogId=LogId [index=249, term=260], lastLogId=LogId [index=249, term=260].

2024-05-26 08:05:01,741 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:05:01,754 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=257, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-26 08:05:01,755 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=261, currTerm=261.

2024-05-26 08:05:01,754 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=259, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:05:01,768 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=266, votedFor=nacos1:7848, cost time=24 ms

2024-05-26 08:05:01,775 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=257, votedFor=nacos1:7848, cost time=19 ms

2024-05-26 08:05:01,782 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:05:01,785 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:05:01,789 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:05:01,783 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:05:01,796 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=261, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:05:01,795 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:05:01,806 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:05:01,820 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:05:01,821 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:05:01,831 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:05:01,868 INFO onLeaderStart: term=261.

2024-05-26 08:05:01,875 INFO onLeaderStart: term=259.

2024-05-26 08:20:06,664 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=259, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:20:06,661 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=261, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:20:06,842 INFO Node <naming_instance_metadata/nacos2:7848> term 257 start preVote.

2024-05-26 08:20:06,775 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=182, type=Follower] is going to quit

2024-05-26 08:20:06,907 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:20:06,982 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=202, type=Follower] is going to quit

2024-05-26 08:20:06,998 INFO Node <naming_persistent_service/nacos2:7848> term 266 start preVote.

2024-05-26 08:20:06,989 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:20:06,789 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:07,072 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:07,114 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=183, type=Follower] is going to quit

2024-05-26 08:20:07,117 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=250, lastLogIncluded=0, lastLogIndex=250, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=203, type=Follower] is going to quit

2024-05-26 08:20:07,244 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=250, term=259], lastLogId=LogId [index=250, term=259].

2024-05-26 08:20:07,268 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=250, term=261], lastLogId=LogId [index=250, term=261].

2024-05-26 08:20:07,295 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,324 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=257, granted=true.

2024-05-26 08:20:07,316 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=266, granted=true.

2024-05-26 08:20:07,398 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=266.

2024-05-26 08:20:07,411 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=266, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:07,320 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,303 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,419 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,338 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,333 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=257.

2024-05-26 08:20:07,438 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:07,324 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:07,411 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=250, term=259], lastLogId=LogId [index=250, term=259].

2024-05-26 08:20:07,412 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:07,439 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=257, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:07,477 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 08:20:07,448 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=259, granted=true, requestLastLogId=LogId [index=250, term=259], lastLogId=LogId [index=250, term=259].

2024-05-26 08:20:07,491 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=260, currTerm=259.

2024-05-26 08:20:07,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=267, votedFor=nacos2:7848, cost time=38 ms

2024-05-26 08:20:07,504 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=267, currTerm=267, granted=true, requestLastLogId=LogId [index=257, term=266], lastLogId=LogId [index=257, term=266].

2024-05-26 08:20:07,502 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=258, votedFor=nacos2:7848, cost time=44 ms

2024-05-26 08:20:07,505 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=267, currTerm=267.

2024-05-26 08:20:07,509 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=260, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-26 08:20:07,509 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=262, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-26 08:20:07,517 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=258, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:20:07,522 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:20:07,528 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=262, votedFor=nacos1:7848, cost time=16 ms

2024-05-26 08:20:07,529 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=267, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:20:07,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=260, votedFor=nacos1:7848, cost time=18 ms

2024-05-26 08:20:07,531 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:20:07,536 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:20:07,543 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:20:07,556 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:20:07,573 INFO onLeaderStart: term=267.

2024-05-26 08:20:07,575 INFO onLeaderStart: term=258.

2024-05-26 08:20:33,028 INFO Node <naming_persistent_service_v2/nacos2:7848> term 262 start preVote.

2024-05-26 08:20:33,193 INFO Node <naming_service_metadata/nacos2:7848> term 260 start preVote.

2024-05-26 08:20:33,187 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=258, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:20:33,187 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=267, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:20:33,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:33,281 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=258, lastLogIncluded=0, lastLogIndex=258, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=199, type=Follower] is going to quit

2024-05-26 08:20:33,283 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:20:33,302 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=251, lastLogIncluded=0, lastLogIndex=251, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=165, type=Follower] is going to quit

2024-05-26 08:20:33,456 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:20:33,446 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=258, lastLogIncluded=0, lastLogIndex=258, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=200, type=Follower] is going to quit

2024-05-26 08:20:33,458 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=251, lastLogIncluded=0, lastLogIndex=251, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=164, type=Follower] is going to quit

2024-05-26 08:20:33,472 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:20:33,485 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=258, term=267], lastLogId=LogId [index=258, term=267].

2024-05-26 08:20:33,486 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=259, currTerm=258, granted=true, requestLastLogId=LogId [index=251, term=258], lastLogId=LogId [index=251, term=258].

2024-05-26 08:20:33,465 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:33,466 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:33,628 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=258, term=267], lastLogId=LogId [index=258, term=267].

2024-05-26 08:20:33,629 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=258, term=267], lastLogId=LogId [index=258, term=267].

2024-05-26 08:20:33,631 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=260, granted=true.

2024-05-26 08:20:33,639 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=258, term=267], lastLogId=LogId [index=258, term=267].

2024-05-26 08:20:33,650 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=263, currTerm=262, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:20:33,657 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=263, currTerm=262, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:20:33,661 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=262, granted=true.

2024-05-26 08:20:33,664 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=259, currTerm=258, granted=true, requestLastLogId=LogId [index=251, term=258], lastLogId=LogId [index=251, term=258].

2024-05-26 08:20:33,679 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=259, currTerm=258.

2024-05-26 08:20:33,651 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=260.

2024-05-26 08:20:33,673 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=262.

2024-05-26 08:20:33,722 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:33,718 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,724 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=268, currTerm=267.

2024-05-26 08:20:33,733 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:20:33,733 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=259, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-26 08:20:33,753 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=261, currTerm=261, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 08:20:33,816 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=263, votedFor=nacos2:7848, cost time=77 ms

2024-05-26 08:20:33,819 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:20:33,821 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=259, votedFor=nacos1:7848, cost time=29 ms

2024-05-26 08:20:33,821 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=268, votedFor=0.0.0.0:0, cost time=52 ms

2024-05-26 08:20:33,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=261, votedFor=nacos2:7848, cost time=26 ms

2024-05-26 08:20:33,833 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=261, currTerm=261, granted=true, requestLastLogId=LogId [index=251, term=260], lastLogId=LogId [index=251, term=260].

2024-05-26 08:20:33,827 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:33,830 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=268, currTerm=268.

2024-05-26 08:20:33,829 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=263, currTerm=263.

2024-05-26 08:20:33,834 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=261, currTerm=261.

2024-05-26 08:20:33,852 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=263, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:20:33,855 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=268, votedFor=nacos3:7848, cost time=17 ms

2024-05-26 08:20:33,857 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:20:33,857 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:20:33,865 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:20:33,871 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:20:33,915 INFO onLeaderStart: term=263.

2024-05-26 08:36:50,334 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=263, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:36:50,678 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:36:50,639 INFO Node <naming_service_metadata/nacos2:7848> term 261 start preVote.

2024-05-26 08:36:50,640 INFO Node <naming_persistent_service/nacos2:7848> term 268 start preVote.

2024-05-26 08:36:50,640 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=261, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 08:36:50,651 INFO Node <naming_instance_metadata/nacos2:7848> term 259 start preVote.

2024-05-26 08:36:50,654 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:36:50,647 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=268, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 08:36:50,685 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=205, type=Follower] is going to quit

2024-05-26 08:36:50,802 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=252, lastLogIncluded=0, lastLogIndex=252, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=204, type=Follower] is going to quit

2024-05-26 08:36:50,985 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=259, term=268], lastLogId=LogId [index=259, term=268].

2024-05-26 08:36:51,011 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=252, term=263], lastLogId=LogId [index=252, term=263].

2024-05-26 08:36:51,013 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=252, term=261], lastLogId=LogId [index=252, term=261].

2024-05-26 08:36:51,007 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=268, granted=true.

2024-05-26 08:36:51,048 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=268.

2024-05-26 08:36:51,046 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=261, granted=true.

2024-05-26 08:36:51,082 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=259, granted=true.

2024-05-26 08:36:51,279 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=261.

2024-05-26 08:36:51,276 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=263.

2024-05-26 08:36:51,280 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=259.

2024-05-26 08:36:51,340 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=259, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:36:51,379 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=262, votedFor=nacos2:7848, cost time=73 ms

2024-05-26 08:36:51,385 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:36:51,393 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=261, currTerm=262.

2024-05-26 08:36:51,424 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=269, votedFor=nacos2:7848, cost time=110 ms

2024-05-26 08:36:51,428 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=262.

2024-05-26 08:36:51,425 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=264, votedFor=0.0.0.0:0, cost time=112 ms

2024-05-26 08:36:51,427 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=268, currTerm=269.

2024-05-26 08:36:51,441 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:36:51,450 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=260, votedFor=nacos2:7848, cost time=129 ms

2024-05-26 08:36:51,457 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:36:51,457 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=268, currTerm=269.

2024-05-26 08:36:51,465 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=260, currTerm=260, granted=true, requestLastLogId=LogId [index=252, term=259], lastLogId=LogId [index=252, term=259].

2024-05-26 08:36:51,472 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=260, currTerm=260.

2024-05-26 08:36:51,466 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=264, votedFor=nacos1:7848, cost time=26 ms

2024-05-26 08:36:51,481 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 08:36:51,504 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=269.

2024-05-26 08:36:51,488 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=264, currTerm=264, granted=true, requestLastLogId=LogId [index=252, term=263], lastLogId=LogId [index=252, term=263].

2024-05-26 08:36:51,505 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-26 08:36:51,505 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:36:51,516 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 08:53:05,799 INFO Node <naming_persistent_service_v2/nacos2:7848> term 264 start preVote.

2024-05-26 08:53:05,972 INFO Node <naming_instance_metadata/nacos2:7848> term 260 start preVote.

2024-05-26 08:53:05,984 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 08:53:05,803 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:05,804 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:05,800 INFO Node <naming_service_metadata/nacos2:7848> term 262 start preVote.

2024-05-26 08:53:06,001 INFO Node <naming_persistent_service/nacos2:7848> term 269 start preVote.

2024-05-26 08:53:06,010 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=269, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 08:53:06,347 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=270, currTerm=269, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:53:06,350 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=265, currTerm=264, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:53:06,369 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=265, currTerm=264, because the leader nacos1:7848's lease is still valid.

2024-05-26 08:53:06,397 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=263, currTerm=262, granted=true, requestLastLogId=LogId [index=253, term=262], lastLogId=LogId [index=253, term=262].

2024-05-26 08:53:06,433 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=269, granted=true.

2024-05-26 08:53:06,434 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=264, granted=false.

2024-05-26 08:53:06,452 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=260, granted=true.

2024-05-26 08:53:06,442 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=269.

2024-05-26 08:53:06,453 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=262, granted=true.

2024-05-26 08:53:06,456 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=260.

2024-05-26 08:53:06,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=269, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,459 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=262.

2024-05-26 08:53:06,467 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=260, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,476 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:06,477 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=270, votedFor=nacos2:7848, cost time=52 ms

2024-05-26 08:53:06,526 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:06,528 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=264, granted=true.

2024-05-26 08:53:06,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=261, votedFor=nacos2:7848, cost time=54 ms

2024-05-26 08:53:06,530 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=263, votedFor=nacos2:7848, cost time=46 ms

2024-05-26 08:53:06,536 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=264.

2024-05-26 08:53:06,541 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 08:53:06,553 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=263, currTerm=263.

2024-05-26 08:53:06,545 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=261, currTerm=261, granted=true, requestLastLogId=LogId [index=253, term=260], lastLogId=LogId [index=253, term=260].

2024-05-26 08:53:06,557 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:06,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=265, votedFor=nacos2:7848, cost time=17 ms

2024-05-26 08:53:06,561 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=265, currTerm=265.

2024-05-26 08:53:06,571 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=261, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:06,576 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:53:06,580 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=270, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:06,585 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:53:06,585 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:06,601 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:06,613 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:53:06,613 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:53:06,631 INFO onLeaderStart: term=261.

2024-05-26 08:53:06,638 INFO onLeaderStart: term=270.

2024-05-26 08:53:22,313 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=261, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:53:22,332 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=270, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 08:53:22,410 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:53:22,429 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=261, lastLogIncluded=0, lastLogIndex=261, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=201, type=Follower] is going to quit

2024-05-26 08:53:22,431 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 08:53:22,443 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=166, type=Follower] is going to quit

2024-05-26 08:53:22,446 INFO Node <naming_service_metadata/nacos2:7848> term 263 start preVote.

2024-05-26 08:53:22,448 INFO Node <naming_persistent_service_v2/nacos2:7848> term 265 start preVote.

2024-05-26 08:53:22,465 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=261, lastLogIncluded=0, lastLogIndex=261, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=202, type=Follower] is going to quit

2024-05-26 08:53:22,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=263, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 08:53:22,447 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=254, lastLogIncluded=0, lastLogIndex=254, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=167, type=Follower] is going to quit

2024-05-26 08:53:22,462 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=265, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 08:53:22,483 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=262, currTerm=261, granted=true, requestLastLogId=LogId [index=254, term=261], lastLogId=LogId [index=254, term=261].

2024-05-26 08:53:22,486 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=254, term=263], lastLogId=LogId [index=254, term=263].

2024-05-26 08:53:22,515 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=263, granted=true.

2024-05-26 08:53:22,535 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=263.

2024-05-26 08:53:22,501 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=271, currTerm=270, granted=true, requestLastLogId=LogId [index=261, term=270], lastLogId=LogId [index=261, term=270].

2024-05-26 08:53:22,531 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=265, granted=true.

2024-05-26 08:53:22,597 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=265.

2024-05-26 08:53:22,600 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=262, currTerm=261.

2024-05-26 08:53:22,646 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=271, currTerm=270.

2024-05-26 08:53:22,664 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=264, votedFor=nacos2:7848, cost time=58 ms

2024-05-26 08:53:22,666 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=264, currTerm=264.

2024-05-26 08:53:22,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=262, votedFor=0.0.0.0:0, cost time=63 ms

2024-05-26 08:53:22,671 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=266, votedFor=nacos2:7848, cost time=53 ms

2024-05-26 08:53:22,677 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=271, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-26 08:53:22,697 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=263, currTerm=264.

2024-05-26 08:53:22,699 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=262, votedFor=nacos1:7848, cost time=24 ms

2024-05-26 08:53:22,702 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=271, votedFor=nacos1:7848, cost time=19 ms

2024-05-26 08:53:22,705 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=271, currTerm=271, granted=true, requestLastLogId=LogId [index=261, term=270], lastLogId=LogId [index=261, term=270].

2024-05-26 08:53:22,720 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=266, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:22,731 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:53:22,769 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:22,845 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=265, currTerm=266.

2024-05-26 08:53:22,889 INFO onLeaderStart: term=266.

2024-05-26 08:53:22,899 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 08:53:22,917 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 08:53:22,928 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 08:53:22,930 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=264, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 08:53:22,949 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 08:53:22,961 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 08:53:22,986 INFO onLeaderStart: term=264.

2024-05-26 09:10:10,928 INFO Node <naming_instance_metadata/nacos2:7848> term 262 start preVote.

2024-05-26 09:10:10,971 INFO Node <naming_persistent_service/nacos2:7848> term 271 start preVote.

2024-05-26 09:10:10,966 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=266, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:10:10,947 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:10:11,027 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=264, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:10:10,971 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:10:11,087 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:10:11,115 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=255, lastLogIncluded=0, lastLogIndex=255, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=186, type=Follower] is going to quit

2024-05-26 09:10:11,128 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=255, lastLogIncluded=0, lastLogIndex=255, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=185, type=Follower] is going to quit

2024-05-26 09:10:11,147 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:10:11,133 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=265, currTerm=264, granted=true, requestLastLogId=LogId [index=255, term=264], lastLogId=LogId [index=255, term=264].

2024-05-26 09:10:11,151 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=255, lastLogIncluded=0, lastLogIndex=255, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=207, type=Follower] is going to quit

2024-05-26 09:10:11,158 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=255, lastLogIncluded=0, lastLogIndex=255, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=206, type=Follower] is going to quit

2024-05-26 09:10:11,175 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=262, granted=true.

2024-05-26 09:10:11,316 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=262.

2024-05-26 09:10:11,338 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=272, currTerm=271, because the leader nacos1:7848's lease is still valid.

2024-05-26 09:10:11,324 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=265, currTerm=264.

2024-05-26 09:10:11,327 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=255, term=266], lastLogId=LogId [index=255, term=266].

2024-05-26 09:10:11,353 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=262, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 09:10:11,395 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:10:11,411 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=271, granted=true.

2024-05-26 09:10:11,422 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=267, currTerm=266.

2024-05-26 09:10:11,427 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=263, currTerm=263, granted=true, requestLastLogId=LogId [index=255, term=262], lastLogId=LogId [index=255, term=262].

2024-05-26 09:10:11,434 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=271.

2024-05-26 09:10:11,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=265, votedFor=0.0.0.0:0, cost time=45 ms

2024-05-26 09:10:11,459 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=271, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-26 09:10:11,478 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=267, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-26 09:10:11,478 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=267, granted=true, requestLastLogId=LogId [index=255, term=266], lastLogId=LogId [index=255, term=266].

2024-05-26 09:10:11,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=263, votedFor=nacos2:7848, cost time=25 ms

2024-05-26 09:10:11,482 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=263, currTerm=263.

2024-05-26 09:10:11,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=265, votedFor=nacos1:7848, cost time=24 ms

2024-05-26 09:10:11,490 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=265, currTerm=265, granted=true, requestLastLogId=LogId [index=255, term=264], lastLogId=LogId [index=255, term=264].

2024-05-26 09:10:11,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=272, votedFor=nacos2:7848, cost time=27 ms

2024-05-26 09:10:11,494 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 09:10:11,499 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-26 09:10:11,513 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=267, votedFor=nacos1:7848, cost time=23 ms

2024-05-26 09:10:11,527 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=272, currTerm=272.

2024-05-26 09:10:11,527 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=267, currTerm=267, granted=true, requestLastLogId=LogId [index=255, term=266], lastLogId=LogId [index=255, term=266].

2024-05-26 09:10:11,536 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=263, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:10:11,546 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=272, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:10:11,557 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 09:10:11,558 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-26 09:10:11,549 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 09:10:11,563 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:10:11,566 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:10:11,576 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 09:10:11,583 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-26 09:10:11,603 INFO onLeaderStart: term=263.

2024-05-26 09:10:11,622 INFO onLeaderStart: term=272.

2024-05-26 09:17:46,220 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=263, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:17:46,239 INFO Node <naming_persistent_service_v2/nacos2:7848> term 267 start preVote.

2024-05-26 09:17:46,234 INFO Node <naming_service_metadata/nacos2:7848> term 265 start preVote.

2024-05-26 09:17:46,391 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=272, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:17:46,383 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=267, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:17:46,408 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=256, lastLogIncluded=0, lastLogIndex=256, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=169, type=Follower] is going to quit

2024-05-26 09:17:46,510 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=256, lastLogIncluded=0, lastLogIndex=256, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=168, type=Follower] is going to quit

2024-05-26 09:17:46,409 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:17:46,391 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=265, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-26 09:17:46,527 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=266, currTerm=265, granted=true, requestLastLogId=LogId [index=256, term=265], lastLogId=LogId [index=256, term=265].

2024-05-26 09:17:46,499 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:17:46,526 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=268, currTerm=267, granted=true, requestLastLogId=LogId [index=256, term=267], lastLogId=LogId [index=256, term=267].

2024-05-26 09:17:46,497 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=203, type=Follower] is going to quit

2024-05-26 09:17:46,525 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=256, term=263], lastLogId=LogId [index=256, term=263].

2024-05-26 09:17:46,569 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=265, granted=true.

2024-05-26 09:17:46,579 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=265.

2024-05-26 09:17:46,571 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=263, lastLogIncluded=0, lastLogIndex=263, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=204, type=Follower] is going to quit

2024-05-26 09:17:46,607 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=273, currTerm=272, granted=true, requestLastLogId=LogId [index=263, term=272], lastLogId=LogId [index=263, term=272].

2024-05-26 09:17:46,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=266, votedFor=nacos2:7848, cost time=66 ms

2024-05-26 09:17:46,678 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=273, currTerm=272, granted=true, requestLastLogId=LogId [index=263, term=272], lastLogId=LogId [index=263, term=272].

2024-05-26 09:17:46,687 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=264, currTerm=263, granted=true, requestLastLogId=LogId [index=256, term=263], lastLogId=LogId [index=256, term=263].

2024-05-26 09:17:46,722 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=268, currTerm=267.

2024-05-26 09:17:46,732 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=266, currTerm=266.

2024-05-26 09:17:46,748 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=273, currTerm=272.

2024-05-26 09:17:46,750 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=264, currTerm=263.

2024-05-26 09:17:46,748 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=268, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-26 09:17:46,776 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=273, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-26 09:17:46,778 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=268, votedFor=nacos3:7848, cost time=19 ms

2024-05-26 09:17:46,778 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=264, votedFor=0.0.0.0:0, cost time=26 ms

2024-05-26 09:17:46,781 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=267, currTerm=268.

2024-05-26 09:17:46,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=273, votedFor=nacos3:7848, cost time=30 ms

2024-05-26 09:17:46,809 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=273, currTerm=273.

2024-05-26 09:17:46,815 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=264, votedFor=nacos3:7848, cost time=24 ms

2024-05-26 09:17:46,814 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-26 09:17:46,884 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=266, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-26 09:17:46,904 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-26 09:17:46,931 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-26 09:17:46,938 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=267, currTerm=268.

2024-05-26 09:17:46,936 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-26 09:17:46,959 INFO onLeaderStart: term=266.

2024-05-26 09:19:04,327 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=264, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 09:19:04,324 INFO Node <naming_persistent_service_v2/nacos2:7848> term 268 start preVote.

2024-05-26 09:19:04,986 INFO Node <naming_instance_metadata/nacos2:7848> term 264 start preVote.

2024-05-26 09:19:04,852 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=266, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-26 09:19:04,335 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=273, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 09:19:04,331 INFO Node <naming_persistent_service/nacos2:7848> term 273 start preVote.

2024-05-26 09:19:04,332 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=268, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-26 09:19:05,949 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=188, type=Follower] is going to quit

2024-05-26 09:19:05,951 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-26 09:19:05,955 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=265, currTerm=264, granted=true, requestLastLogId=LogId [index=257, term=264], lastLogId=LogId [index=257, term=264].

2024-05-26 09:19:05,976 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=257, lastLogIncluded=0, lastLogIndex=257, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=187, type=Follower] is going to quit

2024-05-26 09:19:06,018 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=267, currTerm=266, granted=true, requestLastLogId=LogId [index=257, term=266], lastLogId=LogId [index=257, term=266].

2024-05-26 09:19:06,164 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=269, currTerm=268, granted=true, requestLastLogId=LogId [index=257, term=268], lastLogId=LogId [index=257, term=268].

2024-05-26 09:19:06,181 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=274, currTerm=273, granted=true, requestLastLogId=LogId [index=264, term=273], lastLogId=LogId [index=264, term=273].

2024-05-26 09:19:06,208 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=268, granted=true.

2024-05-26 09:19:06,209 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=264, granted=true.

2024-05-26 09:19:06,211 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=264.

2024-05-26 09:19:06,210 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=268.

2024-05-26 09:19:06,218 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=273, granted=true.

2024-05-26 09:19:06,219 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=273.

2024-05-26 09:19:06,251 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=267, currTerm=266.

2024-05-26 09:19:06,279 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=269, votedFor=nacos2:7848, cost time=42 ms

2024-05-26 09:19:06,280 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=269, currTerm=269.

2024-05-26 09:19:06,549 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=268, currTerm=269.

2024-05-26 09:19:06,551 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=265, votedFor=nacos2:7848, cost time=330 ms

2024-05-26 09:19:06,566 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=274, votedFor=nacos2:7848, cost time=333 ms

2024-05-26 09:19:06,591 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=267, votedFor=0.0.0.0:0, cost time=324 ms

2024-05-26 09:19:06,802 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=265, currTerm=265.

2024-05-26 09:19:06,805 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=274, currTerm=274.

2024-05-26 09:19:06,865 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=267, votedFor=nacos1:7848, cost time=41 ms

2024-05-26 09:19:06,893 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=273, currTerm=274.

2024-05-26 09:19:07,203 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=267, currTerm=267, because the leader nacos1:7848's lease is still valid.

2024-05-26 09:19:07,535 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

