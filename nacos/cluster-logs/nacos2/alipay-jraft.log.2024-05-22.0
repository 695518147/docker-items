2024-05-22 00:00:30,073 INFO Node <naming_persistent_service_v2/nacos2:7848> term 107 start preVote.

2024-05-22 00:00:31,170 INFO Node <naming_persistent_service/nacos2:7848> term 119 start preVote.

2024-05-22 00:00:31,374 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=108, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 00:00:31,170 INFO Node <naming_service_metadata/nacos2:7848> term 109 start preVote.

2024-05-22 00:00:31,581 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=1, type=Follower] is going to quit

2024-05-22 00:00:31,584 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=107, lastLogIncluded=0, lastLogIndex=107, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=2, type=Follower] is going to quit

2024-05-22 00:00:31,171 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=109, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 00:00:31,098 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 00:00:31,618 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 00:00:31,576 INFO Node <naming_persistent_service_v2/nacos2:7848> term 107 start preVote.

2024-05-22 00:00:31,512 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=119, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 00:00:32,025 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_107.

2024-05-22 00:00:32,153 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=109, granted=true.

2024-05-22 00:00:32,360 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=109.

2024-05-22 00:00:32,362 WARN Node <naming_service_metadata/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=109, currTerm=110.

2024-05-22 00:00:32,363 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=110, currTerm=110, granted=true, requestLastLogId=LogId [index=108, term=109], lastLogId=LogId [index=108, term=109].

2024-05-22 00:00:32,161 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=119, granted=true.

2024-05-22 00:00:32,365 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=119.

2024-05-22 00:00:32,353 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=108, currTerm=107, granted=true, requestLastLogId=LogId [index=107, term=107], lastLogId=LogId [index=107, term=107].

2024-05-22 00:00:32,369 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=119, currTerm=120.

2024-05-22 00:00:32,360 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_107.

2024-05-22 00:00:32,371 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_107.

2024-05-22 00:00:32,373 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=120, currTerm=120, granted=true, requestLastLogId=LogId [index=116, term=119], lastLogId=LogId [index=116, term=119].

2024-05-22 00:00:32,377 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_105.

2024-05-22 00:00:32,392 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_107.

2024-05-22 00:00:32,372 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=107, granted=false.

2024-05-22 00:00:32,419 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=120, votedFor=nacos2:7848, cost time=38 ms

2024-05-22 00:00:32,420 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=107, granted=true.

2024-05-22 00:00:32,525 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 105 to 106, cost 5 ms.

2024-05-22 00:00:32,422 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=110, votedFor=nacos2:7848, cost time=51 ms

2024-05-22 00:00:32,519 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_105.

2024-05-22 00:00:32,536 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=108], lastLogId=LogId [index=107, term=108].

2024-05-22 00:00:32,533 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=107.

2024-05-22 00:00:32,543 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=107, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 00:00:32,569 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=110, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 00:00:32,562 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 105 to 106, cost 1 ms.

2024-05-22 00:00:32,570 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 00:00:32,603 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 00:00:32,594 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=108, votedFor=nacos2:7848, cost time=41 ms

2024-05-22 00:00:32,587 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=120, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 00:00:32,606 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=108, currTerm=108.

2024-05-22 00:00:32,607 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=107, term=108], lastLogId=LogId [index=107, term=108].

2024-05-22 00:00:32,622 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=109, currTerm=108.

2024-05-22 00:00:32,609 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 00:00:32,627 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 00:00:32,630 INFO onLeaderStart: term=110.

2024-05-22 00:00:32,633 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 00:00:32,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=109, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-22 00:00:32,645 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 00:00:32,659 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=109, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 00:00:32,686 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 00:00:32,687 INFO onLeaderStart: term=120.

2024-05-22 00:00:32,689 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 00:00:32,762 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 00:00:32,775 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 00:00:32,821 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 00:00:32,853 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 00:00:32,854 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=108, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 00:00:32,857 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 00:00:32,859 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 00:00:32,912 INFO onLeaderStart: term=108.

2024-05-22 00:03:22,265 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_117.

2024-05-22 00:03:22,266 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_117.

2024-05-22 00:03:22,269 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_114.

2024-05-22 00:03:22,292 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 109 to 115, cost 19 ms.

2024-05-22 00:05:07,769 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_109.

2024-05-22 00:05:07,770 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_109.

2024-05-22 00:05:07,773 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_106.

2024-05-22 00:05:07,778 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 106 to 107, cost 0 ms.

2024-05-22 00:30:31,495 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_108.

2024-05-22 00:30:31,496 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_108.

2024-05-22 00:30:31,498 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_107.

2024-05-22 00:30:31,503 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 106 to 108, cost 2 ms.

2024-05-22 00:30:31,696 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_108.

2024-05-22 00:30:31,696 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_108.

2024-05-22 00:30:31,698 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_107.

2024-05-22 00:30:31,704 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 106 to 108, cost 2 ms.

2024-05-22 00:30:32,648 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 00:30:32,708 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 00:30:37,505 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 00:30:37,508 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 00:30:37,512 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 00:30:37,513 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 00:30:37,568 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 00:30:37,571 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 00:30:37,577 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 00:30:37,579 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 00:30:37,734 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 00:33:22,251 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 115 to 118, cost 0 ms.

2024-05-22 00:35:07,770 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 107 to 110, cost 1 ms.

2024-05-22 01:00:31,437 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 108 to 109, cost 1 ms.

2024-05-22 01:00:31,647 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 108 to 109, cost 0 ms.

2024-05-22 01:03:22,189 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 118 to 118, cost 0 ms.

2024-05-22 01:19:42,796 INFO Node <naming_instance_metadata/nacos2:7848> term 109 start preVote.

2024-05-22 01:19:43,116 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 110 to 110, cost 2 ms.

2024-05-22 01:19:42,890 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=109, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 01:19:43,170 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=110, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 01:19:43,375 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=108, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 01:19:43,379 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=120, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 01:19:43,477 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=2, type=Follower] is going to quit

2024-05-22 01:19:43,478 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-22 01:19:43,404 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 01:19:43,408 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=4, type=Follower] is going to quit

2024-05-22 01:19:43,446 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 01:19:43,455 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 01:19:43,449 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=108, lastLogIncluded=0, lastLogIndex=108, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=1, type=Follower] is going to quit

2024-05-22 01:19:43,595 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=108, lastLogIncluded=0, lastLogIndex=108, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=2, type=Follower] is going to quit

2024-05-22 01:19:43,585 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=3, type=Follower] is going to quit

2024-05-22 01:19:43,607 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,585 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,637 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 01:19:43,647 INFO The channel nacos1:7848 has successfully established.

2024-05-22 01:19:43,478 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 01:19:43,478 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 01:19:43,699 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,593 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,723 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,717 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,608 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,651 INFO Peer nacos1:7848 is connected.

2024-05-22 01:19:43,651 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,742 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=109, currTerm=108, granted=true, requestLastLogId=LogId [index=108, term=108], lastLogId=LogId [index=108, term=108].

2024-05-22 01:19:43,746 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=120], lastLogId=LogId [index=117, term=120].

2024-05-22 01:19:43,747 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=111, currTerm=110, granted=true, requestLastLogId=LogId [index=109, term=110], lastLogId=LogId [index=109, term=110].

2024-05-22 01:19:43,753 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=109, granted=true.

2024-05-22 01:19:43,761 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=109.

2024-05-22 01:19:43,774 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=109, currTerm=108.

2024-05-22 01:19:43,757 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,776 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=111, currTerm=110.

2024-05-22 01:19:43,780 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=109, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 01:19:43,781 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=121, currTerm=120.

2024-05-22 01:19:43,783 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 01:19:43,795 INFO The channel nacos3:7848 has successfully established.

2024-05-22 01:19:43,797 INFO Peer nacos3:7848 is connected.

2024-05-22 01:19:43,797 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=109, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-22 01:19:43,801 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=110, votedFor=nacos2:7848, cost time=16 ms

2024-05-22 01:19:43,817 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=111, votedFor=0.0.0.0:0, cost time=28 ms

2024-05-22 01:19:43,821 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=121, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-22 01:19:43,828 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=109, votedFor=nacos1:7848, cost time=27 ms

2024-05-22 01:19:43,829 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=109, currTerm=109, granted=true, requestLastLogId=LogId [index=108, term=108], lastLogId=LogId [index=108, term=108].

2024-05-22 01:19:43,830 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=111, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 01:19:43,831 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=111, currTerm=111, granted=true, requestLastLogId=LogId [index=109, term=110], lastLogId=LogId [index=109, term=110].

2024-05-22 01:19:43,833 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=121, votedFor=nacos1:7848, cost time=10 ms

2024-05-22 01:19:43,833 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=121, currTerm=121, granted=true, requestLastLogId=LogId [index=117, term=120], lastLogId=LogId [index=117, term=120].

2024-05-22 01:19:43,834 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,866 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,869 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 01:19:43,870 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=110, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 01:19:43,877 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 01:19:43,881 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 01:19:43,914 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 01:19:43,931 INFO onLeaderStart: term=110.

2024-05-22 01:19:43,944 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 01:21:19,371 INFO Node <naming_persistent_service_v2/nacos2:7848> term 109 start preVote.

2024-05-22 01:21:19,812 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=111, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 01:21:19,866 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=122, currTerm=121, because the leader nacos1:7848's lease is still valid.

2024-05-22 01:21:19,372 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=109, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 01:21:19,812 INFO Node <naming_service_metadata/nacos2:7848> term 111 start preVote.

2024-05-22 01:21:20,290 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=111, currTerm=110, because the leader nacos2:7848's lease is still valid.

2024-05-22 01:21:20,346 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=110, currTerm=109, because the leader nacos1:7848's lease is still valid.

2024-05-22 01:21:20,412 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=112, currTerm=111, because the leader nacos1:7848's lease is still valid.

2024-05-22 01:21:20,444 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=111, granted=true.

2024-05-22 01:21:20,423 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=122, currTerm=121.

2024-05-22 01:21:20,448 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=111.

2024-05-22 01:21:20,441 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=109, granted=false.

2024-05-22 01:21:20,452 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=121, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 01:21:20,462 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=111, currTerm=110, because the leader nacos2:7848's lease is still valid.

2024-05-22 01:21:20,464 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=109, granted=true.

2024-05-22 01:21:20,464 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=111, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 01:21:20,467 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=122, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-22 01:21:20,468 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=109.

2024-05-22 01:21:20,472 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=109, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 01:21:20,487 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=112, votedFor=nacos2:7848, cost time=21 ms

2024-05-22 01:21:20,490 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=110, votedFor=nacos2:7848, cost time=16 ms

2024-05-22 01:21:20,491 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=112, currTerm=112.

2024-05-22 01:21:20,493 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=110, currTerm=110.

2024-05-22 01:21:20,491 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=122, votedFor=nacos3:7848, cost time=20 ms

2024-05-22 01:21:20,495 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 01:21:20,517 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=110, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 01:21:20,537 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 01:21:20,539 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 01:21:20,591 INFO onLeaderStart: term=110.

2024-05-22 01:30:31,423 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_109.

2024-05-22 01:30:31,427 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_109.

2024-05-22 01:30:31,432 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_108.

2024-05-22 01:30:31,437 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 109 to 109, cost 0 ms.

2024-05-22 01:30:31,627 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_110.

2024-05-22 01:30:31,628 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_110.

2024-05-22 01:30:31,630 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_108.

2024-05-22 01:30:31,635 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 109 to 109, cost 0 ms.

2024-05-22 01:33:22,541 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_119.

2024-05-22 01:33:22,556 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_119.

2024-05-22 01:33:22,575 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_117.

2024-05-22 01:33:22,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 118 to 118, cost 0 ms.

2024-05-22 01:49:42,992 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_111.

2024-05-22 01:49:42,994 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_111.

2024-05-22 01:49:42,996 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_109.

2024-05-22 01:49:43,011 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 110 to 110, cost 0 ms.

2024-05-22 01:49:43,753 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 01:49:43,767 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 01:51:20,549 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 01:51:20,579 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 01:51:20,622 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 01:51:24,986 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 01:51:24,991 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 01:51:24,997 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 01:51:25,002 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 01:51:25,543 INFO Connection disconnected: /172.25.0.4:55438

2024-05-22 01:51:25,566 INFO Connection disconnected: /172.25.0.4:53654

2024-05-22 02:00:31,414 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 109 to 110, cost 2 ms.

2024-05-22 02:00:31,613 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 109 to 111, cost 0 ms.

2024-05-22 02:03:22,292 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 118 to 120, cost 2 ms.

2024-05-22 02:19:07,282 INFO Node <naming_persistent_service/nacos2:7848> term 122 start preVote.

2024-05-22 02:19:07,478 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=110, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:19:07,480 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=110, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:19:07,630 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=110, lastLogIncluded=0, lastLogIndex=110, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=5, type=Follower] is going to quit

2024-05-22 02:19:07,284 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=122, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:19:07,663 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:19:07,665 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=4, type=Follower] is going to quit

2024-05-22 02:19:07,780 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=109, lastLogIncluded=0, lastLogIndex=109, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=3, type=Follower] is going to quit

2024-05-22 02:19:07,731 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:19:07,822 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 02:19:07,749 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=110, lastLogIncluded=0, lastLogIndex=110, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=4, type=Follower] is going to quit

2024-05-22 02:19:07,789 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 02:19:07,966 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 02:19:07,967 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=111, currTerm=110, granted=true, requestLastLogId=LogId [index=110, term=110], lastLogId=LogId [index=110, term=110].

2024-05-22 02:19:07,968 INFO The channel nacos1:7848 has successfully established.

2024-05-22 02:19:07,980 INFO Peer nacos1:7848 is connected.

2024-05-22 02:19:07,967 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=123, currTerm=122, because the leader nacos3:7848's lease is still valid.

2024-05-22 02:19:07,968 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=113, currTerm=112, because the leader nacos3:7848's lease is still valid.

2024-05-22 02:19:08,030 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=122, granted=false.

2024-05-22 02:19:08,052 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 02:19:08,062 INFO The channel nacos3:7848 has successfully established.

2024-05-22 02:19:08,054 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=111, currTerm=110.

2024-05-22 02:19:08,065 INFO Peer nacos3:7848 is connected.

2024-05-22 02:19:08,085 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,088 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=111, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-22 02:19:08,100 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=111, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 02:19:08,102 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,102 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,114 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=113, currTerm=112.

2024-05-22 02:19:08,134 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 02:19:08,138 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=111, currTerm=110, granted=true, requestLastLogId=LogId [index=109, term=110], lastLogId=LogId [index=109, term=110].

2024-05-22 02:19:08,138 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=112, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 02:19:08,151 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,143 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,157 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=111, currTerm=111, because the leader nacos1:7848's lease is still valid.

2024-05-22 02:19:08,150 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 02:19:08,162 INFO The channel nacos1:7848 has successfully established.

2024-05-22 02:19:08,161 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=113, votedFor=0.0.0.0:0, cost time=29 ms

2024-05-22 02:19:08,163 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=123, currTerm=122.

2024-05-22 02:19:08,164 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=122, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 02:19:08,174 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=123, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 02:19:08,177 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=113, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 02:19:08,191 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,205 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=111, currTerm=110.

2024-05-22 02:19:08,193 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,206 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=123, votedFor=nacos1:7848, cost time=30 ms

2024-05-22 02:19:08,208 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=122, currTerm=123.

2024-05-22 02:19:08,241 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=111, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-22 02:19:08,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=111, votedFor=nacos3:7848, cost time=13 ms

2024-05-22 02:19:08,279 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:08,280 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:19:21,593 INFO Node <naming_persistent_service/nacos2:7848> term 123 start preVote.

2024-05-22 02:19:21,593 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=123, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 02:19:21,597 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=123, granted=true.

2024-05-22 02:19:21,598 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=123.

2024-05-22 02:19:21,609 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=124, votedFor=nacos2:7848, cost time=9 ms

2024-05-22 02:19:21,610 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 02:19:21,630 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=124, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:19:21,633 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:19:21,638 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:19:21,642 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:19:21,659 INFO onLeaderStart: term=124.

2024-05-22 02:19:42,977 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_112.

2024-05-22 02:19:42,978 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_112.

2024-05-22 02:19:42,980 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_111.

2024-05-22 02:19:42,989 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 110 to 112, cost 2 ms.

2024-05-22 02:35:20,588 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=121, term=124], lastLogId=LogId [index=121, term=124].

2024-05-22 02:35:20,645 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=124, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:35:20,649 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:35:20,646 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=111, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:35:20,648 INFO Node <naming_instance_metadata/nacos2:7848> term 111 start preVote.

2024-05-22 02:35:20,706 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=114, currTerm=113, because the leader nacos1:7848's lease is still valid.

2024-05-22 02:35:20,713 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=121, lastLogIncluded=0, lastLogIndex=121, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=3, type=Follower] is going to quit

2024-05-22 02:35:20,724 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=121, lastLogIncluded=0, lastLogIndex=121, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=4, type=Follower] is going to quit

2024-05-22 02:35:20,725 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_110.

2024-05-22 02:35:20,728 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_110.

2024-05-22 02:35:20,730 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=121, term=124], lastLogId=LogId [index=121, term=124].

2024-05-22 02:35:20,774 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_109.

2024-05-22 02:35:20,808 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_121.

2024-05-22 02:35:20,810 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_121.

2024-05-22 02:35:20,810 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=111, granted=true.

2024-05-22 02:35:20,813 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 110 to 110, cost 0 ms.

2024-05-22 02:35:20,813 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_111.

2024-05-22 02:35:20,821 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=111.

2024-05-22 02:35:20,832 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_119.

2024-05-22 02:35:20,837 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_111.

2024-05-22 02:35:20,837 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=125, currTerm=124.

2024-05-22 02:35:20,854 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_110.

2024-05-22 02:35:20,859 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 120 to 120, cost 6 ms.

2024-05-22 02:35:20,865 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=112, votedFor=nacos2:7848, cost time=18 ms

2024-05-22 02:35:20,865 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=125, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 02:35:20,865 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 111 to 111, cost 0 ms.

2024-05-22 02:35:20,872 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=114, currTerm=113.

2024-05-22 02:35:20,873 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=113, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 02:35:20,880 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=125, votedFor=nacos3:7848, cost time=14 ms

2024-05-22 02:35:20,881 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:35:20,883 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=114, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-22 02:35:20,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=114, votedFor=nacos3:7848, cost time=13 ms

2024-05-22 02:35:20,908 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=112, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:35:20,909 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:35:20,910 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:35:20,931 INFO onLeaderStart: term=112.

2024-05-22 02:35:20,969 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 02:35:20,996 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=125, currTerm=125.

2024-05-22 02:35:20,998 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=112, currTerm=112, granted=false, requestLastLogId=LogId [index=110, term=111], lastLogId=LogId [index=111, term=112].

2024-05-22 02:35:21,006 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=112, currTerm=112, granted=false, requestLastLogId=LogId [index=110, term=111], lastLogId=LogId [index=111, term=112].

2024-05-22 02:35:21,026 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:35:25,595 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=112, currTerm=111, granted=true, requestLastLogId=LogId [index=111, term=111], lastLogId=LogId [index=111, term=111].

2024-05-22 02:35:25,599 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=112, currTerm=111.

2024-05-22 02:35:25,600 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=111, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 02:35:25,606 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=112, votedFor=0.0.0.0:0, cost time=5 ms

2024-05-22 02:35:25,610 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=112, votedFor=nacos3:7848, cost time=4 ms

2024-05-22 02:35:41,459 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.498583709s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-22 02:35:49,710 INFO Node <naming_service_metadata/nacos2:7848> term 114 start preVote.

2024-05-22 02:35:49,863 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=114, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:35:50,688 INFO Node <naming_persistent_service/nacos2:7848> term 125 start preVote.

2024-05-22 02:35:50,785 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=125, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:35:50,867 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=112, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:35:51,251 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:35:51,183 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=111, lastLogIncluded=0, lastLogIndex=111, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=5, type=Follower] is going to quit

2024-05-22 02:35:52,519 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=111, lastLogIncluded=0, lastLogIndex=111, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=6, type=Follower] is going to quit

2024-05-22 02:35:52,850 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 02:35:53,391 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 02:35:53,884 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=125, granted=true.

2024-05-22 02:35:54,221 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=125.

2024-05-22 02:35:53,598 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=113, currTerm=112, granted=true, requestLastLogId=LogId [index=112, term=112], lastLogId=LogId [index=112, term=112].

2024-05-22 02:35:54,431 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=115, currTerm=114, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:35:54,465 INFO Node <naming_persistent_service_v2/nacos2:7848> term 112 start preVote.

2024-05-22 02:35:54,529 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=112, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:35:55,152 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=126, votedFor=nacos2:7848, cost time=600 ms

2024-05-22 02:35:55,350 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 02:35:55,418 INFO The channel nacos1:7848 has successfully established.

2024-05-22 02:35:55,473 INFO Peer nacos1:7848 is connected.

2024-05-22 02:35:56,764 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term 113, expect=112.

2024-05-22 02:35:57,198 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.354329130s. [closed=[], open=[[buffered_nanos=2964180290, waiting_for_connection]]]].

2024-05-22 02:35:57,230 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=126, currTerm=126, granted=true, requestLastLogId=LogId [index=122, term=125], lastLogId=LogId [index=122, term=125].

2024-05-22 02:35:57,276 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=115, currTerm=114.

2024-05-22 02:35:57,910 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=113, votedFor=0.0.0.0:0, cost time=684 ms

2024-05-22 02:35:58,126 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=113, currTerm=113.

2024-05-22 02:35:58,159 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=126, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:35:58,354 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=115, votedFor=0.0.0.0:0, cost time=1018 ms

2024-05-22 02:36:00,205 INFO Node <naming_instance_metadata/nacos2:7848> term 112 start preVote.

2024-05-22 02:36:00,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=113, votedFor=nacos1:7848, cost time=2624 ms

2024-05-22 02:36:01,957 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=115, votedFor=nacos1:7848, cost time=1853 ms

2024-05-22 02:36:02,486 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:36:20,566 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999731969s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:36:09,121 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.734029037s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:36:09,188 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:14,235 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=114, currTerm=115.

2024-05-22 02:36:14,655 INFO Node <naming_persistent_service_v2/nacos2:7848> term 113 start preVote.

2024-05-22 02:36:25,217 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:23,642 INFO Node <naming_instance_metadata/nacos2:7848> term 112 start preVote.

2024-05-22 02:36:23,663 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:36:26,024 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=125, currTerm=126.

2024-05-22 02:36:26,907 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.811917737s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:36:25,389 INFO Node <naming_service_metadata/nacos2:7848> term 115 start preVote.

2024-05-22 02:36:25,729 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 02:36:26,953 INFO The channel nacos3:7848 has successfully established.

2024-05-22 02:36:26,835 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=113, currTerm=112, granted=true, requestLastLogId=LogId [index=111, term=112], lastLogId=LogId [index=111, term=112].

2024-05-22 02:36:26,965 INFO Peer nacos3:7848 is connected.

2024-05-22 02:36:26,876 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999766906s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:36:26,998 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499753974s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 02:36:27,005 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999922882s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 02:36:27,160 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=113, currTerm=113, granted=true, requestLastLogId=LogId [index=112, term=112], lastLogId=LogId [index=112, term=112].

2024-05-22 02:36:27,221 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=115, currTerm=115, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:36:27,329 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:27,389 INFO onLeaderStart: term=126.

2024-05-22 02:36:27,443 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=115, granted=true.

2024-05-22 02:36:27,446 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=115.

2024-05-22 02:36:27,486 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=116, votedFor=nacos2:7848, cost time=23 ms

2024-05-22 02:36:27,608 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=113, granted=true.

2024-05-22 02:36:27,612 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=113.

2024-05-22 02:36:27,641 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=114, votedFor=nacos2:7848, cost time=24 ms

2024-05-22 02:36:27,646 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=116, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:36:27,654 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=116, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:36:27,721 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:27,819 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=114, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:36:27,823 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:36:27,834 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:36:27,824 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:27,983 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=127, currTerm=126, granted=false, requestLastLogId=LogId [index=122, term=125], lastLogId=LogId [index=123, term=126].

2024-05-22 02:36:28,038 INFO onLeaderStart: term=114.

2024-05-22 02:36:28,054 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:28,105 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:28,164 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=112, granted=false.

2024-05-22 02:36:28,179 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:28,203 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=113, currTerm=112, granted=true, requestLastLogId=LogId [index=111, term=112], lastLogId=LogId [index=111, term=112].

2024-05-22 02:36:28,204 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=114, currTerm=114, granted=false, requestLastLogId=LogId [index=112, term=112], lastLogId=LogId [index=113, term=114].

2024-05-22 02:36:28,212 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=113, currTerm=112, granted=true, requestLastLogId=LogId [index=111, term=112], lastLogId=LogId [index=111, term=112].

2024-05-22 02:36:28,241 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=112, granted=true.

2024-05-22 02:36:28,248 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=112.

2024-05-22 02:36:28,251 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:28,261 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 02:36:28,318 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=113, votedFor=nacos2:7848, cost time=49 ms

2024-05-22 02:36:28,324 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 02:36:28,342 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=116, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:36:28,360 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:36:28,355 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:36:28,382 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:36:28,394 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:36:28,406 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:36:28,420 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=113, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:36:28,427 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:36:28,430 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:36:28,896 INFO onLeaderStart: term=116.

2024-05-22 02:36:29,138 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:36:29,170 INFO onLeaderStart: term=113.

2024-05-22 02:51:35,754 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=114, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:51:36,120 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=126, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:51:36,125 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=113, lastLogIncluded=0, lastLogIndex=113, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=6, type=Follower] is going to quit

2024-05-22 02:51:36,120 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=113, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 02:51:36,129 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=113, lastLogIncluded=0, lastLogIndex=113, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=7, type=Follower] is going to quit

2024-05-22 02:51:36,125 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:51:36,129 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=112, lastLogIncluded=0, lastLogIndex=112, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=8, type=Follower] is going to quit

2024-05-22 02:51:36,139 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=112, lastLogIncluded=0, lastLogIndex=112, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=7, type=Follower] is going to quit

2024-05-22 02:51:36,152 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:51:36,152 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=123, lastLogIncluded=0, lastLogIndex=123, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=5, type=Follower] is going to quit

2024-05-22 02:51:36,155 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=123, lastLogIncluded=0, lastLogIndex=123, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=6, type=Follower] is going to quit

2024-05-22 02:51:36,135 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_114.

2024-05-22 02:51:36,177 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_114.

2024-05-22 02:51:36,140 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 02:51:36,229 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=114, currTerm=113, granted=true, requestLastLogId=LogId [index=112, term=113], lastLogId=LogId [index=112, term=113].

2024-05-22 02:51:36,230 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=114, currTerm=113.

2024-05-22 02:51:36,229 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=117, currTerm=116, because the leader nacos2:7848's lease is still valid.

2024-05-22 02:51:36,242 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=114, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 02:51:36,246 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,248 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_112.

2024-05-22 02:51:36,251 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=114, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 02:51:36,231 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=127, currTerm=126, granted=true, requestLastLogId=LogId [index=123, term=126], lastLogId=LogId [index=123, term=126].

2024-05-22 02:51:36,256 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=114, currTerm=114, granted=true, requestLastLogId=LogId [index=112, term=113], lastLogId=LogId [index=112, term=113].

2024-05-22 02:51:36,257 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=117, currTerm=116, because the leader nacos2:7848's lease is still valid.

2024-05-22 02:51:36,256 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,257 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=115, currTerm=114, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:51:36,258 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=114, currTerm=114, granted=true, requestLastLogId=LogId [index=112, term=113], lastLogId=LogId [index=112, term=113].

2024-05-22 02:51:36,275 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,288 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=127, currTerm=126.

2024-05-22 02:51:36,288 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,286 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,286 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 112 to 113, cost 0 ms.

2024-05-22 02:51:36,302 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,311 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=127, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-22 02:51:36,312 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,319 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=127, votedFor=nacos3:7848, cost time=6 ms

2024-05-22 02:51:36,337 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,346 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,376 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=117, currTerm=116.

2024-05-22 02:51:36,377 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 02:51:36,388 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=117, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 02:51:36,389 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=114, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=5, type=Follower] is going to quit

2024-05-22 02:51:36,389 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=114, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=6, type=Follower] is going to quit

2024-05-22 02:51:36,401 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=117, votedFor=nacos3:7848, cost time=11 ms

2024-05-22 02:51:36,413 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=115, currTerm=114.

2024-05-22 02:51:36,417 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,426 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=115, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 02:51:36,435 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=115, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 02:51:36,437 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:51:36,442 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 02:52:05,845 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=115, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:05,838 INFO Node <naming_persistent_service_v2/nacos2:7848> term 115 start preVote.

2024-05-22 02:52:08,058 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=115, granted=false.

2024-05-22 02:52:12,208 INFO Node <naming_persistent_service/nacos2:7848> term 127 start preVote.

2024-05-22 02:52:12,332 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=127, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:12,501 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=115, granted=false.

2024-05-22 02:52:14,885 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=127, granted=false.

2024-05-22 02:52:15,794 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=127, granted=false.

2024-05-22 02:52:17,931 INFO Node <naming_service_metadata/nacos2:7848> term 117 start preVote.

2024-05-22 02:52:18,599 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=114, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:17,937 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=117, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:18,114 INFO Node <naming_instance_metadata/nacos2:7848> term 114 start preVote.

2024-05-22 02:52:22,344 INFO Node <naming_persistent_service_v2/nacos2:7848> term 115 start preVote.

2024-05-22 02:52:22,439 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=115, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:24,214 INFO Node <naming_persistent_service_v2/nacos2:7848> term 115 start preVote.

2024-05-22 02:52:25,056 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=114, granted=true.

2024-05-22 02:52:25,087 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=114.

2024-05-22 02:52:25,209 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 02:52:25,585 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 02:52:25,643 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=115, granted=true.

2024-05-22 02:52:25,943 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=115.

2024-05-22 02:52:25,655 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=114, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 02:52:25,851 INFO Node <naming_persistent_service/nacos2:7848> term 127 start preVote.

2024-05-22 02:52:25,857 INFO Node <naming_service_metadata/nacos2:7848> term 117 start preVote.

2024-05-22 02:52:25,861 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=127, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 02:52:26,199 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=115, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 02:52:27,058 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 02:52:27,215 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 02:52:28,095 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=117, granted=true.

2024-05-22 02:52:27,966 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=127, granted=false.

2024-05-22 02:52:28,611 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999378064s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:28,843 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=116, votedFor=nacos2:7848, cost time=1374 ms

2024-05-22 02:52:28,021 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999000505s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:28,204 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=117.

2024-05-22 02:52:33,449 WARN Node <naming_service_metadata/nacos2:7848> raise term 118 when get lastLogId.

2024-05-22 02:52:33,640 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=115, votedFor=nacos2:7848, cost time=5365 ms

2024-05-22 02:52:32,099 INFO Node <naming_persistent_service/nacos2:7848> term 127 start preVote.

2024-05-22 02:52:33,811 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=115, currTerm=115, granted=true, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=113, term=114].

2024-05-22 02:52:34,468 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999550712s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:37,308 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=118, votedFor=nacos2:7848, cost time=1715 ms

2024-05-22 02:52:37,611 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=115, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:52:37,682 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:52:32,704 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.696094468s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:32,945 WARN Candidate node <naming_persistent_service_v2/nacos2:7848> term 116 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 02:52:39,660 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999718057s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:34,681 WARN Node <naming_persistent_service_v2/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999682856s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:37,732 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=127, granted=true.

2024-05-22 02:52:41,369 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=127.

2024-05-22 02:52:41,395 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 02:52:37,481 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=118, currTerm=118.

2024-05-22 02:52:39,709 INFO Node <naming_persistent_service_v2/nacos2:7848> term 116 start preVote.

2024-05-22 02:52:42,782 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=128, votedFor=nacos2:7848, cost time=1183 ms

2024-05-22 02:52:42,798 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 02:52:39,777 WARN Node <naming_service_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999661348s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:42,948 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.987633456s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 02:52:41,521 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:52:41,588 WARN Candidate node <naming_service_metadata/nacos2:7848> term 118 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 02:52:43,104 INFO Node <naming_service_metadata/nacos2:7848> term 118 start preVote.

2024-05-22 02:52:41,927 WARN Node <naming_persistent_service_v2/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999896685s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 02:52:42,999 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=116, granted=true.

2024-05-22 02:52:43,206 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 02:52:43,026 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 02:52:43,032 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999700115s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-22 02:52:43,033 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999694516s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 02:52:43,085 WARN Node <naming_service_metadata/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999619852s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 02:52:43,097 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=115, granted=false, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=114, term=115].

2024-05-22 02:52:43,219 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=116.

2024-05-22 02:52:43,258 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=115, granted=false, requestLastLogId=LogId [index=113, term=114], lastLogId=LogId [index=114, term=115].

2024-05-22 02:52:43,284 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 02:52:43,326 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=117, votedFor=nacos2:7848, cost time=64 ms

2024-05-22 02:52:43,353 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 02:52:43,396 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=117, currTerm=117, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 02:52:43,406 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 02:52:43,420 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=118, granted=true.

2024-05-22 02:52:43,422 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=118.

2024-05-22 02:52:43,466 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=117, currTerm=117, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 02:52:43,468 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=128, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:52:43,483 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:52:43,487 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:52:43,550 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=119, votedFor=nacos2:7848, cost time=102 ms

2024-05-22 02:52:43,556 INFO Node <naming_service_metadata/nacos2:7848> ignore RequestVoteRequest from nacos3:7848, term=118, currTerm=119.

2024-05-22 02:52:43,575 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=119, currTerm=119.

2024-05-22 02:52:43,585 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:52:43,601 INFO onLeaderStart: term=115.

2024-05-22 02:52:43,614 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=117, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 02:52:43,621 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 02:52:43,631 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 02:52:43,717 INFO onLeaderStart: term=128.

2024-05-22 02:52:43,724 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 02:52:43,957 INFO onLeaderStart: term=117.

2024-05-22 02:52:44,110 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=118, currTerm=119.

2024-05-22 02:52:44,115 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 03:02:42,813 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=115, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:02:42,827 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=119, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 03:02:42,820 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=117, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:02:42,818 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=128, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:02:43,565 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:02:43,565 INFO Node <naming_service_metadata/nacos2:7848> term 119 start preVote.

2024-05-22 03:02:43,593 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=114, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=10, type=Follower] is going to quit

2024-05-22 03:02:43,630 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=115, lastLogIncluded=0, lastLogIndex=115, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=9, type=Follower] is going to quit

2024-05-22 03:02:43,676 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=115, lastLogIncluded=0, lastLogIndex=115, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=8, type=Follower] is going to quit

2024-05-22 03:02:43,681 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,631 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:02:43,643 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=125, lastLogIncluded=0, lastLogIndex=125, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=7, type=Follower] is going to quit

2024-05-22 03:02:43,643 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:02:43,691 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=125, lastLogIncluded=0, lastLogIndex=125, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=8, type=Follower] is going to quit

2024-05-22 03:02:43,667 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=114, lastLogIncluded=0, lastLogIndex=114, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=9, type=Follower] is going to quit

2024-05-22 03:02:43,682 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 03:02:43,700 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 03:02:43,694 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,696 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=129, currTerm=128, granted=true, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=125, term=128].

2024-05-22 03:02:43,713 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,726 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,710 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,703 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,714 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=129, currTerm=128, granted=true, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=125, term=128].

2024-05-22 03:02:43,731 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=115, term=117], lastLogId=LogId [index=115, term=117].

2024-05-22 03:02:43,731 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=116, currTerm=115, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 03:02:43,756 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=115, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 03:02:43,735 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,736 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=129, currTerm=128.

2024-05-22 03:02:43,815 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=119, granted=false.

2024-05-22 03:02:43,829 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,838 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=116, currTerm=115, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 03:02:43,838 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=118, currTerm=117.

2024-05-22 03:02:43,843 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=119, granted=true.

2024-05-22 03:02:43,846 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=119.

2024-05-22 03:02:43,847 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=119, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 03:02:43,853 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=129, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 03:02:43,854 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=116, currTerm=115, granted=true, requestLastLogId=LogId [index=114, term=115], lastLogId=LogId [index=114, term=115].

2024-05-22 03:02:43,861 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,861 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=129, currTerm=129.

2024-05-22 03:02:43,884 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=129, votedFor=nacos3:7848, cost time=17 ms

2024-05-22 03:02:43,884 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,891 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=118, votedFor=0.0.0.0:0, cost time=46 ms

2024-05-22 03:02:43,895 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=116, currTerm=115.

2024-05-22 03:02:43,894 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,902 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=120, votedFor=nacos2:7848, cost time=12 ms

2024-05-22 03:02:43,907 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=118, votedFor=nacos3:7848, cost time=13 ms

2024-05-22 03:02:43,909 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=116, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 03:02:43,913 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,951 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=116, votedFor=nacos3:7848, cost time=38 ms

2024-05-22 03:02:43,974 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:43,989 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=120, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:02:44,004 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:02:44,018 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:02:43,984 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:02:44,031 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:02:44,043 INFO onLeaderStart: term=120.

2024-05-22 03:18:56,112 INFO Node <naming_instance_metadata/nacos2:7848> term 116 start preVote.

2024-05-22 03:18:57,206 INFO Node <naming_persistent_service/nacos2:7848> term 129 start preVote.

2024-05-22 03:18:57,230 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=116, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:18:57,207 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=118, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:18:57,207 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=120], lastLogId=LogId [index=117, term=120].

2024-05-22 03:18:57,290 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=120, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:18:57,293 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=8, type=Follower] is going to quit

2024-05-22 03:18:57,207 INFO Node <naming_persistent_service_v2/nacos2:7848> term 118 start preVote.

2024-05-22 03:18:57,206 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=129, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:18:57,296 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:18:57,303 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=7, type=Follower] is going to quit

2024-05-22 03:18:57,311 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_116.

2024-05-22 03:18:57,323 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_116.

2024-05-22 03:18:57,326 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=120], lastLogId=LogId [index=117, term=120].

2024-05-22 03:18:57,341 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=120], lastLogId=LogId [index=117, term=120].

2024-05-22 03:18:57,331 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_126.

2024-05-22 03:18:57,345 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_126.

2024-05-22 03:18:57,348 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_111.

2024-05-22 03:18:57,353 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=129, granted=true.

2024-05-22 03:18:57,354 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=129.

2024-05-22 03:18:57,356 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_121.

2024-05-22 03:18:57,362 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 111 to 112, cost 0 ms.

2024-05-22 03:18:57,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=130, votedFor=nacos2:7848, cost time=17 ms

2024-05-22 03:18:57,364 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_115.

2024-05-22 03:18:57,391 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 120 to 122, cost 0 ms.

2024-05-22 03:18:57,392 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=117, currTerm=116, because the leader nacos3:7848's lease is still valid.

2024-05-22 03:18:57,400 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_115.

2024-05-22 03:18:57,403 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=116, term=118], lastLogId=LogId [index=116, term=118].

2024-05-22 03:18:57,407 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=117, currTerm=116, because the leader nacos3:7848's lease is still valid.

2024-05-22 03:18:57,408 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=119, currTerm=118, granted=true, requestLastLogId=LogId [index=116, term=118], lastLogId=LogId [index=116, term=118].

2024-05-22 03:18:57,408 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:18:57,415 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:18:57,411 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=116, granted=true.

2024-05-22 03:18:57,416 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=116.

2024-05-22 03:18:57,412 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 03:18:57,417 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_110.

2024-05-22 03:18:57,423 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=118, granted=true.

2024-05-22 03:18:57,423 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=118.

2024-05-22 03:18:57,418 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=116, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 03:18:57,440 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=121, currTerm=120.

2024-05-22 03:18:57,447 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=119, votedFor=nacos2:7848, cost time=11 ms

2024-05-22 03:18:57,447 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=117, votedFor=nacos2:7848, cost time=28 ms

2024-05-22 03:18:57,452 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=121, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 03:18:57,451 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 110 to 111, cost 7 ms.

2024-05-22 03:18:57,454 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 03:18:57,453 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=130, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:18:57,456 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:18:57,458 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:18:57,467 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=121, votedFor=nacos3:7848, cost time=14 ms

2024-05-22 03:18:57,468 INFO onLeaderStart: term=130.

2024-05-22 03:18:57,470 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=117, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:18:57,477 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:18:57,485 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:18:57,487 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 03:18:57,492 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=119, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:18:57,493 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:18:57,495 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=121, currTerm=121.

2024-05-22 03:18:57,492 INFO onLeaderStart: term=117.

2024-05-22 03:18:57,496 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:18:57,498 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=130, currTerm=130, granted=false, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=127, term=130].

2024-05-22 03:18:57,508 INFO onLeaderStart: term=119.

2024-05-22 03:18:57,511 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=119, currTerm=119.

2024-05-22 03:18:57,533 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:18:57,539 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=117, currTerm=117.

2024-05-22 03:18:57,543 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:18:57,556 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:19:47,768 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499781425s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 03:19:48,137 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499786875s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-22 03:19:48,953 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=119, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:19:49,363 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=11, type=Follower] is going to quit

2024-05-22 03:19:49,539 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=117, lastLogIncluded=0, lastLogIndex=117, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=12, type=Follower] is going to quit

2024-05-22 03:19:49,367 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:19:49,671 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:19:50,112 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:19:51,165 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:19:55,316 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:19:55,711 INFO Node <naming_persistent_service_v2/nacos2:7848> term 119 start preVote.

2024-05-22 03:19:56,084 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499517578s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-22 03:20:00,727 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=119, granted=true.

2024-05-22 03:20:00,778 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=119.

2024-05-22 03:20:00,809 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:20:01,104 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=120, votedFor=nacos2:7848, cost time=284 ms

2024-05-22 03:20:01,106 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 03:20:01,112 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=120, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=119], lastLogId=LogId [index=117, term=119].

2024-05-22 03:20:01,117 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=120, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=119], lastLogId=LogId [index=117, term=119].

2024-05-22 03:20:01,123 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:20:01,139 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=120, currTerm=120, granted=true, requestLastLogId=LogId [index=117, term=119], lastLogId=LogId [index=117, term=119].

2024-05-22 03:20:01,191 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=120, currTerm=120.

2024-05-22 03:20:01,211 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=120, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:20:01,218 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:20:01,221 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:20:01,227 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:20:01,237 INFO onLeaderStart: term=120.

2024-05-22 03:35:27,650 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=117, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:35:28,265 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=121, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:35:27,656 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=120, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:35:27,653 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=130, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 03:35:28,464 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:35:28,265 INFO Node <naming_service_metadata/nacos2:7848> term 121 start preVote.

2024-05-22 03:35:28,310 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=116, lastLogIncluded=0, lastLogIndex=116, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=11, type=Follower] is going to quit

2024-05-22 03:35:28,498 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=116, lastLogIncluded=0, lastLogIndex=116, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=12, type=Follower] is going to quit

2024-05-22 03:35:28,310 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:35:28,456 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=118, lastLogIncluded=0, lastLogIndex=118, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=13, type=Follower] is going to quit

2024-05-22 03:35:28,456 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 03:35:28,465 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=127, lastLogIncluded=0, lastLogIndex=127, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=10, type=Follower] is going to quit

2024-05-22 03:35:28,518 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=127, lastLogIncluded=0, lastLogIndex=127, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=11, type=Follower] is going to quit

2024-05-22 03:35:28,498 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_118.

2024-05-22 03:35:28,589 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_118.

2024-05-22 03:35:28,500 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=118, lastLogIncluded=0, lastLogIndex=118, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=14, type=Follower] is going to quit

2024-05-22 03:35:28,669 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_114.

2024-05-22 03:35:28,504 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=122, currTerm=121, granted=true, requestLastLogId=LogId [index=118, term=121], lastLogId=LogId [index=118, term=121].

2024-05-22 03:35:28,731 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=121, granted=false.

2024-05-22 03:35:28,776 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=116, term=117], lastLogId=LogId [index=116, term=117].

2024-05-22 03:35:28,776 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=118, term=120], lastLogId=LogId [index=118, term=120].

2024-05-22 03:35:28,784 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=116, term=117], lastLogId=LogId [index=116, term=117].

2024-05-22 03:35:28,784 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=118, term=120], lastLogId=LogId [index=118, term=120].

2024-05-22 03:35:28,784 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 113 to 115, cost 0 ms.

2024-05-22 03:35:28,807 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=118, term=120], lastLogId=LogId [index=118, term=120].

2024-05-22 03:35:28,811 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,824 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,836 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=121, currTerm=120.

2024-05-22 03:35:28,851 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,853 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=122, currTerm=121.

2024-05-22 03:35:28,854 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,855 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=121, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 03:35:28,858 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=118, currTerm=117, granted=true, requestLastLogId=LogId [index=116, term=117], lastLogId=LogId [index=116, term=117].

2024-05-22 03:35:28,860 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=121, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 03:35:28,868 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=122, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 03:35:28,873 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=121, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 03:35:28,885 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,892 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=122, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 03:35:28,898 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=127, term=130], lastLogId=LogId [index=127, term=130].

2024-05-22 03:35:28,906 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=118, currTerm=117.

2024-05-22 03:35:28,911 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,913 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=121, currTerm=121.

2024-05-22 03:35:28,923 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=118, votedFor=0.0.0.0:0, cost time=14 ms

2024-05-22 03:35:28,926 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,943 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,945 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=121, currTerm=122.

2024-05-22 03:35:28,947 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,946 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,958 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=118, votedFor=nacos1:7848, cost time=24 ms

2024-05-22 03:35:28,961 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,975 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,986 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:28,986 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:29,000 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=131, currTerm=130.

2024-05-22 03:35:29,004 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:29,014 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=131, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 03:35:29,017 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:29,024 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=131, votedFor=nacos3:7848, cost time=6 ms

2024-05-22 03:35:29,024 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 03:35:33,745 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 03:35:33,747 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 03:35:33,747 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 03:35:33,748 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 03:51:59,265 INFO Node <naming_service_metadata/nacos2:7848> term 122 start preVote.

2024-05-22 03:51:59,854 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=122, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 03:51:59,265 INFO Node <naming_instance_metadata/nacos2:7848> term 118 start preVote.

2024-05-22 03:51:59,818 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=118, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 03:51:59,818 INFO Node <naming_persistent_service_v2/nacos2:7848> term 121 start preVote.

2024-05-22 03:51:59,265 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=131, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:52:00,310 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=122, currTerm=121, granted=true, requestLastLogId=LogId [index=119, term=121], lastLogId=LogId [index=119, term=121].

2024-05-22 03:51:59,265 INFO Node <naming_persistent_service/nacos2:7848> term 131 start preVote.

2024-05-22 03:52:00,244 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=121, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 03:52:00,311 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_119.

2024-05-22 03:52:00,316 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_119.

2024-05-22 03:52:00,315 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=122, currTerm=121, because the leader nacos3:7848's lease is still valid.

2024-05-22 03:52:00,328 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_116.

2024-05-22 03:52:00,364 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=121, granted=false.

2024-05-22 03:52:00,375 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 112 to 117, cost 0 ms.

2024-05-22 03:52:00,379 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_117.

2024-05-22 03:52:00,380 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_117.

2024-05-22 03:52:00,399 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_115.

2024-05-22 03:52:00,409 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=122, currTerm=121.

2024-05-22 03:52:00,412 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=121, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 03:52:00,411 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=123, currTerm=122, because the leader nacos1:7848's lease is still valid.

2024-05-22 03:52:00,438 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=122, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-22 03:52:00,450 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_128.

2024-05-22 03:52:00,451 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=118, granted=true.

2024-05-22 03:52:00,496 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=118.

2024-05-22 03:52:00,455 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=132, currTerm=131, granted=true, requestLastLogId=LogId [index=128, term=131], lastLogId=LogId [index=128, term=131].

2024-05-22 03:52:00,455 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 111 to 116, cost 0 ms.

2024-05-22 03:52:00,456 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=122, granted=true.

2024-05-22 03:52:00,517 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=122.

2024-05-22 03:52:00,521 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=122, votedFor=nacos1:7848, cost time=28 ms

2024-05-22 03:52:00,496 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_128.

2024-05-22 03:52:00,533 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=122, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 03:52:00,497 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=118, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 03:52:00,499 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=131, granted=true.

2024-05-22 03:52:00,566 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=131.

2024-05-22 03:52:00,615 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=123, votedFor=nacos2:7848, cost time=60 ms

2024-05-22 03:52:00,502 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=119, votedFor=nacos2:7848, cost time=4 ms

2024-05-22 03:52:00,534 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_126.

2024-05-22 03:52:00,616 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=121, currTerm=122.

2024-05-22 03:52:00,619 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 03:52:00,620 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 03:52:00,638 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=119, currTerm=119, because the leader nacos3:7848's lease is still valid.

2024-05-22 03:52:00,639 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=119, currTerm=119.

2024-05-22 03:52:00,639 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=132, currTerm=132, granted=true, requestLastLogId=LogId [index=128, term=131], lastLogId=LogId [index=128, term=131].

2024-05-22 03:52:00,640 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=123, currTerm=123.

2024-05-22 03:52:00,641 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=132, currTerm=132.

2024-05-22 03:52:00,641 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=118, currTerm=119.

2024-05-22 03:52:00,646 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 03:52:00,648 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 03:52:00,654 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 122 to 127, cost 1 ms.

2024-05-22 03:52:00,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=132, votedFor=nacos2:7848, cost time=35 ms

2024-05-22 03:52:00,692 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=123, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 03:52:00,695 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 03:52:00,702 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 03:52:00,707 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 03:52:00,717 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 03:52:00,719 INFO onLeaderStart: term=123.

2024-05-22 03:52:04,830 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 03:52:04,835 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 03:52:04,835 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 03:52:04,835 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 04:08:33,020 INFO Node <naming_instance_metadata/nacos2:7848> term 119 start preVote.

2024-05-22 04:08:33,021 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:08:33,021 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=119, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:08:33,021 INFO Node <naming_persistent_service/nacos2:7848> term 132 start preVote.

2024-05-22 04:08:33,020 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=122, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:08:33,057 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=123, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:08:33,448 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=120, lastLogIncluded=0, lastLogIndex=120, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=10, type=Follower] is going to quit

2024-05-22 04:08:33,451 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:08:33,020 INFO Node <naming_persistent_service_v2/nacos2:7848> term 122 start preVote.

2024-05-22 04:08:33,282 INFO Node <naming_instance_metadata/nacos2:7848> term 119 start preVote.

2024-05-22 04:08:33,453 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=120, lastLogIncluded=0, lastLogIndex=120, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=11, type=Follower] is going to quit

2024-05-22 04:08:33,547 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=123, currTerm=122, because the leader nacos1:7848's lease is still valid.

2024-05-22 04:08:33,549 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:08:33,612 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=120, currTerm=119, because the leader nacos3:7848's lease is still valid.

2024-05-22 04:08:33,613 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=133, currTerm=132, because the leader nacos3:7848's lease is still valid.

2024-05-22 04:08:33,613 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=124, currTerm=123, granted=true, requestLastLogId=LogId [index=120, term=123], lastLogId=LogId [index=120, term=123].

2024-05-22 04:08:33,638 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=123, currTerm=122.

2024-05-22 04:08:33,655 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=122, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 04:08:33,650 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:08:33,650 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=132, granted=false.

2024-05-22 04:08:33,652 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_120.

2024-05-22 04:08:33,668 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_120.

2024-05-22 04:08:33,669 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=124, currTerm=123, granted=true, requestLastLogId=LogId [index=120, term=123], lastLogId=LogId [index=120, term=123].

2024-05-22 04:08:33,672 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=124, currTerm=123, granted=true, requestLastLogId=LogId [index=120, term=123], lastLogId=LogId [index=120, term=123].

2024-05-22 04:08:33,670 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=123, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-22 04:08:33,674 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_118.

2024-05-22 04:08:33,686 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 115 to 119, cost 0 ms.

2024-05-22 04:08:33,689 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=123, votedFor=nacos3:7848, cost time=9 ms

2024-05-22 04:08:33,693 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=124, currTerm=123.

2024-05-22 04:08:33,695 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=132, granted=true.

2024-05-22 04:08:33,697 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=132.

2024-05-22 04:08:33,701 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:08:33,701 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=119, granted=false.

2024-05-22 04:08:33,713 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=124, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-22 04:08:33,715 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=133, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 04:08:33,725 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=124, votedFor=nacos1:7848, cost time=9 ms

2024-05-22 04:08:33,731 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=122, currTerm=123.

2024-05-22 04:08:33,747 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=119, granted=true.

2024-05-22 04:08:33,748 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=119.

2024-05-22 04:08:33,749 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=119, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:08:33,760 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=120, votedFor=nacos2:7848, cost time=8 ms

2024-05-22 04:08:33,765 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:08:33,787 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:08:33,810 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=120, currTerm=120.

2024-05-22 04:08:33,822 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=133, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:08:33,823 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:08:33,826 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:08:33,828 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=122, currTerm=123.

2024-05-22 04:08:33,842 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:08:33,858 INFO onLeaderStart: term=133.

2024-05-22 04:08:33,862 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=124, currTerm=124.

2024-05-22 04:08:33,870 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=120, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:08:33,872 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:08:33,874 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:08:33,893 INFO onLeaderStart: term=120.

2024-05-22 04:09:33,410 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=120, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:09:33,637 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=119, lastLogIncluded=0, lastLogIndex=119, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=14, type=Follower] is going to quit

2024-05-22 04:09:33,480 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.344942521s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-22 04:09:33,682 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:09:34,937 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=119, lastLogIncluded=0, lastLogIndex=119, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=13, type=Follower] is going to quit

2024-05-22 04:09:34,947 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.466482232s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 04:09:35,307 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:09:35,922 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:09:36,349 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:22,735 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=133, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:19:23,453 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=124, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:19:23,443 INFO Node <naming_service_metadata/nacos2:7848> term 124 start preVote.

2024-05-22 04:19:23,774 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=13, type=Follower] is going to quit

2024-05-22 04:19:23,445 INFO Node <naming_instance_metadata/nacos2:7848> term 120 start preVote.

2024-05-22 04:19:23,775 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:19:23,831 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:23,941 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=124, currTerm=123, because the leader nacos3:7848's lease is still valid.

2024-05-22 04:19:23,832 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:23,996 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=124, granted=true.

2024-05-22 04:19:23,999 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=124.

2024-05-22 04:19:23,830 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=12, type=Follower] is going to quit

2024-05-22 04:19:23,887 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=120, granted=true, requestLastLogId=LogId [index=119, term=120], lastLogId=LogId [index=119, term=120].

2024-05-22 04:19:24,063 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=134, currTerm=133, granted=true, requestLastLogId=LogId [index=130, term=133], lastLogId=LogId [index=130, term=133].

2024-05-22 04:19:24,064 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=121, currTerm=120.

2024-05-22 04:19:24,063 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,064 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,031 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,081 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=125, votedFor=nacos2:7848, cost time=50 ms

2024-05-22 04:19:24,083 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=125, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:19:24,086 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:19:24,095 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:19:24,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=121, votedFor=0.0.0.0:0, cost time=23 ms

2024-05-22 04:19:24,096 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:19:24,091 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,098 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 04:19:24,108 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=125, currTerm=125.

2024-05-22 04:19:24,111 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=121, votedFor=nacos1:7848, cost time=15 ms

2024-05-22 04:19:24,112 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=124, currTerm=123.

2024-05-22 04:19:24,112 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=121, currTerm=121, granted=true, requestLastLogId=LogId [index=119, term=120], lastLogId=LogId [index=119, term=120].

2024-05-22 04:19:24,114 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=123, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 04:19:24,114 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=125, currTerm=125, granted=false, requestLastLogId=LogId [index=121, term=124], lastLogId=LogId [index=122, term=125].

2024-05-22 04:19:24,115 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=121, currTerm=121, granted=true, requestLastLogId=LogId [index=119, term=120], lastLogId=LogId [index=119, term=120].

2024-05-22 04:19:24,115 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=125, currTerm=125, granted=false, requestLastLogId=LogId [index=121, term=124], lastLogId=LogId [index=122, term=125].

2024-05-22 04:19:24,115 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=121, currTerm=121.

2024-05-22 04:19:24,118 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=134, currTerm=133.

2024-05-22 04:19:24,119 INFO onLeaderStart: term=125.

2024-05-22 04:19:24,123 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=120, currTerm=121.

2024-05-22 04:19:24,124 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=125, currTerm=125, granted=false, requestLastLogId=LogId [index=121, term=124], lastLogId=LogId [index=122, term=125].

2024-05-22 04:19:24,125 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=120, currTerm=121.

2024-05-22 04:19:24,125 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=124, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 04:19:24,146 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,158 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:19:24,158 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=124, votedFor=nacos1:7848, cost time=8 ms

2024-05-22 04:19:24,160 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=134, votedFor=0.0.0.0:0, cost time=41 ms

2024-05-22 04:19:24,191 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=134, votedFor=nacos3:7848, cost time=26 ms

2024-05-22 04:19:24,196 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:21:58,925 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-22 04:21:58,926 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_120.

2024-05-22 04:21:58,926 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_122.

2024-05-22 04:21:58,927 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_122.

2024-05-22 04:21:58,926 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-22 04:21:58,927 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_120.

2024-05-22 04:21:58,928 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_119.

2024-05-22 04:21:58,929 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_117.

2024-05-22 04:21:58,929 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_128.

2024-05-22 04:21:58,934 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 117 to 120, cost 0 ms.

2024-05-22 04:21:58,937 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 116 to 118, cost 0 ms.

2024-05-22 04:21:58,937 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 127 to 129, cost 0 ms.

2024-05-22 04:42:10,770 INFO Node <naming_persistent_service_v2/nacos2:7848> term 124 start preVote.

2024-05-22 04:42:11,593 INFO Node <naming_instance_metadata/nacos2:7848> term 121 start preVote.

2024-05-22 04:42:11,535 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=124, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:42:11,534 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=134, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:42:11,533 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=125, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:42:12,050 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=122, lastLogIncluded=0, lastLogIndex=122, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=12, type=Follower] is going to quit

2024-05-22 04:42:12,051 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=122, lastLogIncluded=0, lastLogIndex=122, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=13, type=Follower] is going to quit

2024-05-22 04:42:11,595 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=121, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:42:11,501 INFO Node <naming_persistent_service/nacos2:7848> term 134 start preVote.

2024-05-22 04:42:11,508 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 04:42:12,050 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:42:12,054 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_122.

2024-05-22 04:42:12,067 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_122.

2024-05-22 04:42:12,066 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=125, currTerm=124, because the leader nacos1:7848's lease is still valid.

2024-05-22 04:42:12,077 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_120.

2024-05-22 04:42:12,109 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=124, granted=true.

2024-05-22 04:42:12,112 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=124.

2024-05-22 04:42:12,113 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=124, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:42:12,127 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=125, votedFor=nacos2:7848, cost time=13 ms

2024-05-22 04:42:12,129 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:12,166 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=126, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=125], lastLogId=LogId [index=122, term=125].

2024-05-22 04:42:12,167 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=126, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=125], lastLogId=LogId [index=122, term=125].

2024-05-22 04:42:12,168 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 04:42:12,170 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=134, granted=false.

2024-05-22 04:42:12,172 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 119 to 121, cost 0 ms.

2024-05-22 04:42:12,171 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=121, granted=true.

2024-05-22 04:42:12,176 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=121.

2024-05-22 04:42:12,178 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=121, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:42:12,178 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=122, currTerm=122, granted=true, requestLastLogId=LogId [index=120, term=121], lastLogId=LogId [index=120, term=121].

2024-05-22 04:42:12,205 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:12,205 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:12,208 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=126, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=125], lastLogId=LogId [index=122, term=125].

2024-05-22 04:42:12,209 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=135, currTerm=134, because the leader nacos3:7848's lease is still valid.

2024-05-22 04:42:12,222 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=135, currTerm=134, because the leader nacos3:7848's lease is still valid.

2024-05-22 04:42:12,209 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 04:42:12,225 INFO The channel nacos1:7848 has successfully established.

2024-05-22 04:42:12,213 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=122, votedFor=nacos2:7848, cost time=26 ms

2024-05-22 04:42:12,230 INFO Peer nacos1:7848 is connected.

2024-05-22 04:42:12,230 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:42:12,239 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=122, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:42:12,265 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:42:12,279 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:42:12,254 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=134, granted=true.

2024-05-22 04:42:12,288 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=134.

2024-05-22 04:42:12,293 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=134, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:42:12,252 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:12,269 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=126, currTerm=125.

2024-05-22 04:42:12,277 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=125, currTerm=125.

2024-05-22 04:42:12,298 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:42:12,293 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=122, currTerm=122.

2024-05-22 04:42:12,307 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=135, votedFor=nacos2:7848, cost time=15 ms

2024-05-22 04:42:12,309 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=126, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-22 04:42:12,311 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:42:12,311 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=135, currTerm=135.

2024-05-22 04:42:12,320 INFO onLeaderStart: term=122.

2024-05-22 04:42:12,317 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=126, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 04:42:12,325 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=126, currTerm=126.

2024-05-22 04:42:12,323 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 04:42:12,328 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 04:42:12,332 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:12,330 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:42:15,775 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 04:42:15,778 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 04:42:15,780 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 04:42:15,782 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 04:42:16,556 INFO Connection disconnected: /172.25.0.3:42684

2024-05-22 04:42:58,232 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499753131s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-22 04:42:58,938 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=122, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:43:00,625 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:43:04,020 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=121, lastLogIncluded=0, lastLogIndex=121, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=16, type=Follower] is going to quit

2024-05-22 04:43:04,094 INFO Node <naming_service_metadata/nacos2:7848> term 126 start preVote.

2024-05-22 04:43:04,115 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=126, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:43:04,137 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=125, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:43:04,138 INFO Node <naming_persistent_service_v2/nacos2:7848> term 125 start preVote.

2024-05-22 04:43:04,441 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=121, lastLogIncluded=0, lastLogIndex=121, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=15, type=Follower] is going to quit

2024-05-22 04:43:05,168 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:43:05,220 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=127, currTerm=126, granted=true, requestLastLogId=LogId [index=123, term=126], lastLogId=LogId [index=123, term=126].

2024-05-22 04:43:05,178 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=123, currTerm=122, granted=true, requestLastLogId=LogId [index=121, term=122], lastLogId=LogId [index=121, term=122].

2024-05-22 04:43:05,259 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=127, currTerm=126.

2024-05-22 04:43:05,339 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:43:05,710 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=127, votedFor=0.0.0.0:0, cost time=266 ms

2024-05-22 04:43:05,769 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=126, currTerm=127.

2024-05-22 04:43:05,783 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=127, currTerm=127, granted=true, requestLastLogId=LogId [index=123, term=126], lastLogId=LogId [index=123, term=126].

2024-05-22 04:43:06,982 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=127, votedFor=nacos1:7848, cost time=1149 ms

2024-05-22 04:43:07,090 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=125, granted=false.

2024-05-22 04:43:07,999 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:43:08,969 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=126, currTerm=127.

2024-05-22 04:43:08,018 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=123, currTerm=122.

2024-05-22 04:43:09,030 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=125, granted=true.

2024-05-22 04:58:10,803 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=125.

2024-05-22 04:58:10,873 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=125, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 04:58:10,778 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-22 04:58:10,875 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-22 04:58:10,794 INFO Node <naming_persistent_service/nacos2:7848> term 135 start preVote.

2024-05-22 04:58:10,795 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=135, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:58:10,873 INFO Node <naming_service_metadata/nacos2:7848> term 127 start preVote.

2024-05-22 04:58:10,874 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=127, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 04:58:10,923 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_131.

2024-05-22 04:58:10,940 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 129 to 132, cost 1 ms.

2024-05-22 04:58:10,941 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=126, votedFor=nacos2:7848, cost time=36 ms

2024-05-22 04:58:10,978 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=135, granted=true.

2024-05-22 04:58:11,001 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=135.

2024-05-22 04:58:10,941 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=123, votedFor=0.0.0.0:0, cost time=146 ms

2024-05-22 04:58:10,977 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_123.

2024-05-22 04:58:11,006 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_123.

2024-05-22 04:58:10,986 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=126, currTerm=126, granted=true, requestLastLogId=LogId [index=123, term=125], lastLogId=LogId [index=123, term=125].

2024-05-22 04:58:11,010 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_122.

2024-05-22 04:58:11,078 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=128, currTerm=127, granted=true, requestLastLogId=LogId [index=123, term=126], lastLogId=LogId [index=123, term=126].

2024-05-22 04:58:11,083 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=136, votedFor=nacos2:7848, cost time=47 ms

2024-05-22 04:58:11,087 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=123, votedFor=nacos3:7848, cost time=75 ms

2024-05-22 04:58:11,091 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=127, granted=false.

2024-05-22 04:58:11,078 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=126, currTerm=126, granted=true, requestLastLogId=LogId [index=123, term=125], lastLogId=LogId [index=123, term=125].

2024-05-22 04:58:11,087 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 120 to 123, cost 0 ms.

2024-05-22 04:58:11,087 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=136, currTerm=136, granted=true, requestLastLogId=LogId [index=132, term=135], lastLogId=LogId [index=132, term=135].

2024-05-22 04:58:11,097 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_121.

2024-05-22 04:58:11,106 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=124, currTerm=123, granted=true, requestLastLogId=LogId [index=121, term=122], lastLogId=LogId [index=121, term=122].

2024-05-22 04:58:11,115 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=128, currTerm=127.

2024-05-22 04:58:11,117 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:58:11,118 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_121.

2024-05-22 04:58:11,138 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_120.

2024-05-22 04:58:11,149 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=124, currTerm=123.

2024-05-22 04:58:11,150 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=136, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:58:11,151 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:58:11,152 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=128, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-22 04:58:11,152 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 118 to 121, cost 0 ms.

2024-05-22 04:58:11,153 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:58:11,153 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=126, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:58:11,161 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:58:11,163 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:58:11,186 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=124, votedFor=0.0.0.0:0, cost time=35 ms

2024-05-22 04:58:11,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=128, votedFor=nacos3:7848, cost time=37 ms

2024-05-22 04:58:11,194 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=124, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 04:58:11,199 INFO onLeaderStart: term=136.

2024-05-22 04:58:11,202 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=127, currTerm=128.

2024-05-22 04:58:11,203 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:58:11,219 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:58:11,221 INFO onLeaderStart: term=126.

2024-05-22 04:58:11,220 WARN Node <naming_service_metadata/nacos2:7848> reject term_unmatched AppendEntriesRequest from nacos3:7848, term=128, prevLogIndex=124, prevLogTerm=127, localPrevLogTerm=0, lastLogIndex=123, entriesSize=0.

2024-05-22 04:58:11,241 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:58:44,378 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499742778s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 04:58:46,436 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499681953s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 04:58:46,911 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=136, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:58:47,019 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=14, type=Follower] is going to quit

2024-05-22 04:58:47,020 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:58:47,127 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=15, type=Follower] is going to quit

2024-05-22 04:58:47,201 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:58:48,931 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:58:50,442 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499692288s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 04:58:52,260 INFO Node <naming_persistent_service/nacos2:7848> term 136 start preVote.

2024-05-22 04:58:52,993 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:58:53,101 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:58:53,886 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=136, granted=true.

2024-05-22 04:58:53,934 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=136.

2024-05-22 04:58:54,066 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=137, currTerm=137, granted=true, requestLastLogId=LogId [index=133, term=136], lastLogId=LogId [index=133, term=136].

2024-05-22 04:58:55,703 INFO Node <naming_service_metadata/nacos2:7848> term 128 start preVote.

2024-05-22 04:58:55,477 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=128, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:58:58,692 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=137, votedFor=nacos2:7848, cost time=1232 ms

2024-05-22 04:58:59,017 INFO Node <naming_instance_metadata/nacos2:7848> term 124 start preVote.

2024-05-22 04:58:59,119 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=126, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:58:59,258 INFO Node <naming_instance_metadata/nacos2:7848> term 124 start preVote.

2024-05-22 04:58:59,018 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=124, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 04:58:59,765 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:58:59,103 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=129, currTerm=128, granted=true, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=125, term=128].

2024-05-22 04:58:59,283 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499653690s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 04:58:59,380 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=124, lastLogIncluded=0, lastLogIndex=124, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=15, type=Follower] is going to quit

2024-05-22 04:58:59,400 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:58:59,907 WARN Candidate node <naming_persistent_service/nacos2:7848> term 137 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 04:59:01,149 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 1.700368869s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:02,229 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=124, lastLogIncluded=0, lastLogIndex=124, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=16, type=Follower] is going to quit

2024-05-22 04:59:03,147 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=128, granted=true.

2024-05-22 04:59:03,216 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=128.

2024-05-22 04:59:02,223 INFO Node <naming_persistent_service/nacos2:7848> term 137 start preVote.

2024-05-22 04:59:01,409 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:04,217 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:04,381 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:04,922 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:04,260 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=137, currTerm=137, granted=true, requestLastLogId=LogId [index=133, term=136], lastLogId=LogId [index=133, term=136].

2024-05-22 04:59:04,414 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=129, votedFor=nacos2:7848, cost time=1164 ms

2024-05-22 04:59:04,415 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999909811s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 04:59:04,523 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:05,326 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=124, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:04,974 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999187656s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:05,268 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=129, currTerm=129, granted=true, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=125, term=128].

2024-05-22 04:59:05,440 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=124, granted=true.

2024-05-22 04:59:05,441 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=138, currTerm=137, granted=true, requestLastLogId=LogId [index=133, term=136], lastLogId=LogId [index=133, term=136].

2024-05-22 04:59:05,665 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=137, granted=true.

2024-05-22 04:59:05,636 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=124.

2024-05-22 04:59:05,538 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=129, currTerm=129.

2024-05-22 04:59:05,699 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=127, currTerm=126.

2024-05-22 04:59:06,850 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:05,706 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=137.

2024-05-22 04:59:06,844 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=129, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 04:59:08,142 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 04:59:08,539 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 04:59:08,394 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=138, votedFor=nacos2:7848, cost time=976 ms

2024-05-22 04:59:09,479 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=138, currTerm=138.

2024-05-22 04:59:09,492 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=127, votedFor=0.0.0.0:0, cost time=461 ms

2024-05-22 04:59:12,910 WARN Candidate node <naming_persistent_service/nacos2:7848> term 138 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 04:59:13,110 INFO Node <naming_persistent_service/nacos2:7848> term 138 start preVote.

2024-05-22 04:59:12,547 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 04:59:13,367 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 04:59:13,134 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=125, votedFor=nacos2:7848, cost time=4020 ms

2024-05-22 04:59:13,439 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:13,532 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=125, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:13,312 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999690785s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:12,927 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499005486s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-22 04:59:12,697 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999223177s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:13,554 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=125, currTerm=125.

2024-05-22 04:59:14,959 WARN Candidate node <naming_instance_metadata/nacos2:7848> term 125 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 04:59:13,582 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=130, currTerm=129, granted=false, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=126, term=129].

2024-05-22 04:59:13,626 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=139, currTerm=138, granted=true, requestLastLogId=LogId [index=133, term=136], lastLogId=LogId [index=133, term=136].

2024-05-22 04:59:14,684 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999774583s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 04:59:15,183 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=129, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 04:59:15,282 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499721380s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-22 04:59:15,283 ERROR Fail to run ConfigurationChangeDone, status: Status[EPERM<1008>: Leader stepped down].

2024-05-22 04:59:14,724 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.998087040s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:14,731 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.902501950s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 04:59:14,998 INFO Node <naming_instance_metadata/nacos2:7848> term 125 start preVote.

2024-05-22 04:59:15,142 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=127, votedFor=nacos1:7848, cost time=1879 ms

2024-05-22 04:59:15,287 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 04:59:15,356 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=126, lastLogIncluded=0, lastLogIndex=126, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=14, type=Follower] is going to quit

2024-05-22 04:59:15,592 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=127, currTerm=127, granted=true, requestLastLogId=LogId [index=124, term=126], lastLogId=LogId [index=124, term=126].

2024-05-22 04:59:15,583 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,587 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=138, granted=true.

2024-05-22 04:59:15,595 INFO Replicator Replicator [state=Probe, statInfo=<running=BLOCKING, firstLogIndex=126, lastLogIncluded=0, lastLogIndex=125, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=-1, type=Follower] is going to quit

2024-05-22 04:59:15,599 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=124, currTerm=125.

2024-05-22 04:59:15,600 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=127, currTerm=127, granted=true, requestLastLogId=LogId [index=124, term=126], lastLogId=LogId [index=124, term=126].

2024-05-22 04:59:15,628 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=138.

2024-05-22 04:59:15,675 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=128, currTerm=127, granted=true, requestLastLogId=LogId [index=124, term=126], lastLogId=LogId [index=124, term=126].

2024-05-22 04:59:15,666 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=130, currTerm=129, granted=false, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=126, term=129].

2024-05-22 04:59:15,735 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=128, currTerm=127, granted=true, requestLastLogId=LogId [index=124, term=126], lastLogId=LogId [index=124, term=126].

2024-05-22 04:59:15,745 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=128, currTerm=127.

2024-05-22 04:59:15,674 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,719 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 04:59:15,737 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=130, currTerm=129, granted=false, requestLastLogId=LogId [index=125, term=128], lastLogId=LogId [index=126, term=129].

2024-05-22 04:59:15,741 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=139, votedFor=nacos2:7848, cost time=56 ms

2024-05-22 04:59:15,768 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=126, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:15,776 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,781 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 04:59:15,787 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=130, currTerm=129.

2024-05-22 04:59:15,787 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=126, currTerm=125, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:15,797 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=139, currTerm=139.

2024-05-22 04:59:15,804 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=128, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-22 04:59:15,805 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=126, currTerm=125.

2024-05-22 04:59:15,808 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=128, currTerm=128.

2024-05-22 04:59:15,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=128, votedFor=nacos3:7848, cost time=46 ms

2024-05-22 04:59:15,872 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=126, votedFor=0.0.0.0:0, cost time=60 ms

2024-05-22 04:59:15,873 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=130, votedFor=0.0.0.0:0, cost time=74 ms

2024-05-22 04:59:15,898 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,935 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,940 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,908 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,914 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=126, votedFor=nacos1:7848, cost time=29 ms

2024-05-22 04:59:15,950 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=125, currTerm=126.

2024-05-22 04:59:15,951 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 04:59:15,953 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=125, currTerm=126.

2024-05-22 04:59:15,955 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=126, currTerm=126.

2024-05-22 04:59:15,958 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=126, currTerm=126, granted=true, requestLastLogId=LogId [index=122, term=124], lastLogId=LogId [index=122, term=124].

2024-05-22 04:59:15,998 WARN Truncating storage to lastIndexKept=125.

2024-05-22 05:14:36,061 INFO Node <naming_persistent_service/nacos2:7848> term 139 start preVote.

2024-05-22 05:14:36,061 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:14:36,066 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=130], lastLogId=LogId [index=126, term=130].

2024-05-22 05:14:36,070 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=130], lastLogId=LogId [index=126, term=130].

2024-05-22 05:14:36,077 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_126.

2024-05-22 05:14:36,082 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_126.

2024-05-22 05:14:36,104 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=139, granted=true.

2024-05-22 05:14:36,108 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=139.

2024-05-22 05:14:36,126 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:14:36,127 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_122.

2024-05-22 05:14:36,127 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=127, currTerm=126, because the leader nacos1:7848's lease is still valid.

2024-05-22 05:14:36,128 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 05:14:36,142 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 05:14:36,161 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=131, currTerm=130.

2024-05-22 05:14:36,161 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 05:14:36,185 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 121 to 123, cost 1 ms.

2024-05-22 05:14:36,189 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=130, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:14:36,202 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=140, votedFor=nacos2:7848, cost time=18 ms

2024-05-22 05:14:36,221 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=140, currTerm=140.

2024-05-22 05:14:36,233 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=140, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:14:36,234 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:14:36,236 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:14:36,235 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=131, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-22 05:14:36,259 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=131, votedFor=nacos1:7848, cost time=15 ms

2024-05-22 05:14:36,265 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=127, currTerm=126.

2024-05-22 05:14:36,282 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=126, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:14:36,292 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=127, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-22 05:14:36,309 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=127, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 05:14:36,316 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:14:36,329 INFO onLeaderStart: term=140.

2024-05-22 05:14:40,537 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=129, currTerm=128, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:14:40,543 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=129, currTerm=128.

2024-05-22 05:14:40,544 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=128, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:14:40,553 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=129, votedFor=0.0.0.0:0, cost time=10 ms

2024-05-22 05:14:40,559 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=129, votedFor=nacos1:7848, cost time=5 ms

2024-05-22 05:15:06,531 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=140, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:15:06,687 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:15:06,791 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=16, type=Follower] is going to quit

2024-05-22 05:15:07,261 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.477454375s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-22 05:15:09,189 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=17, type=Follower] is going to quit

2024-05-22 05:15:09,267 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:15:11,697 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:15:14,392 INFO Node <naming_persistent_service/nacos2:7848> term 140 start preVote.

2024-05-22 05:15:18,172 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:15:14,516 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=132, currTerm=131.

2024-05-22 05:15:13,301 INFO Node <naming_persistent_service_v2/nacos2:7848> term 129 start preVote.

2024-05-22 05:15:14,826 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=129, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:15:20,765 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 05:15:20,849 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=131, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:15:20,875 INFO Node <naming_persistent_service_v2/nacos2:7848> term 129 start preVote.

2024-05-22 05:15:20,958 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:15:21,153 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=130, currTerm=129, granted=true, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=126, term=129].

2024-05-22 05:15:21,435 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 05:15:21,765 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=141, currTerm=140.

2024-05-22 05:15:21,847 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=132, votedFor=0.0.0.0:0, cost time=1006 ms

2024-05-22 05:15:22,784 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=132, currTerm=132, granted=true, requestLastLogId=LogId [index=127, term=131], lastLogId=LogId [index=127, term=131].

2024-05-22 05:15:22,846 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=141, votedFor=0.0.0.0:0, cost time=958 ms

2024-05-22 05:15:24,405 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=141, votedFor=nacos1:7848, cost time=574 ms

2024-05-22 05:15:25,504 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=141, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 05:15:25,583 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=141, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 05:15:25,599 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=141, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 05:15:24,656 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=132, votedFor=nacos3:7848, cost time=1764 ms

2024-05-22 05:15:25,891 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=133, currTerm=132, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:15:26,195 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999586012s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 05:15:26,218 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=128, currTerm=127, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:15:26,838 INFO Node <naming_persistent_service_v2/nacos2:7848> term 129 start preVote.

2024-05-22 05:15:27,707 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.998738368s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 05:15:28,466 INFO Node <naming_persistent_service_v2/nacos2:7848> term 129 start preVote.

2024-05-22 05:15:28,635 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=130, currTerm=129.

2024-05-22 05:15:28,685 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999616999s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 05:15:29,384 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999592753s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 05:15:29,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=130, votedFor=0.0.0.0:0, cost time=803 ms

2024-05-22 05:15:29,420 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999578620s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 05:15:29,652 WARN Node <naming_persistent_service_v2/nacos2:7848> raise term 130 when get lastLogId.

2024-05-22 05:15:29,796 WARN Node <naming_persistent_service_v2/nacos2:7848> raise term 130 when get lastLogId.

2024-05-22 05:15:29,842 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=129, currTerm=130.

2024-05-22 05:15:31,390 INFO Node <naming_service_metadata/nacos2:7848> term 132 start preVote.

2024-05-22 05:15:31,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:15:32,328 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=127, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:15:32,423 INFO Node <naming_instance_metadata/nacos2:7848> term 127 start preVote.

2024-05-22 05:15:32,329 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=130, votedFor=nacos1:7848, cost time=2003 ms

2024-05-22 05:15:34,352 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=130, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=126, term=129].

2024-05-22 05:15:34,439 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=128, currTerm=127, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 05:15:34,657 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=126, term=129].

2024-05-22 05:15:34,724 INFO Node <naming_service_metadata/nacos2:7848> term 132 start preVote.

2024-05-22 05:15:36,204 INFO Node <naming_persistent_service_v2/nacos2:7848> term 130 start preVote.

2024-05-22 05:15:36,470 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=132, granted=false.

2024-05-22 05:15:36,545 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=132, granted=false.

2024-05-22 05:15:37,338 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=127, granted=true.

2024-05-22 05:15:38,700 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=127.

2024-05-22 05:15:36,570 INFO Node <naming_persistent_service_v2/nacos2:7848> term 130 start preVote.

2024-05-22 05:15:39,320 INFO Node <naming_persistent_service/nacos2:7848> term 141 start preVote.

2024-05-22 05:15:39,343 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:15:40,676 INFO Node <naming_persistent_service_v2/nacos2:7848> term 130 start preVote.

2024-05-22 05:15:40,827 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=128, votedFor=nacos2:7848, cost time=1858 ms

2024-05-22 05:15:40,922 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=126, term=129].

2024-05-22 05:15:40,924 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.255962154s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 05:15:40,984 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=142, currTerm=141, granted=false, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=136, term=141].

2024-05-22 05:15:41,053 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=128, currTerm=128.

2024-05-22 05:15:41,071 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 05:15:41,057 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=131, currTerm=130, granted=true, requestLastLogId=LogId [index=126, term=129], lastLogId=LogId [index=126, term=129].

2024-05-22 05:15:41,071 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=132, granted=false.

2024-05-22 05:15:41,074 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=128, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 05:15:41,082 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=131, currTerm=130.

2024-05-22 05:15:41,083 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=129, currTerm=128, granted=true, requestLastLogId=LogId [index=124, term=127], lastLogId=LogId [index=124, term=127].

2024-05-22 05:15:41,164 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=132, granted=false.

2024-05-22 05:15:41,195 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=131, votedFor=0.0.0.0:0, cost time=100 ms

2024-05-22 05:15:41,203 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=130, currTerm=131.

2024-05-22 05:15:41,207 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=130, currTerm=131.

2024-05-22 05:15:41,205 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=141, granted=true.

2024-05-22 05:15:41,231 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=141.

2024-05-22 05:15:41,230 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=130, currTerm=131.

2024-05-22 05:15:41,241 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=129, currTerm=128.

2024-05-22 05:15:41,255 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=131, currTerm=131.

2024-05-22 05:15:41,257 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=130, currTerm=131.

2024-05-22 05:15:41,262 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=130, currTerm=131.

2024-05-22 05:15:41,291 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=129, votedFor=0.0.0.0:0, cost time=39 ms

2024-05-22 05:15:41,264 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=142, votedFor=nacos2:7848, cost time=26 ms

2024-05-22 05:15:41,323 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=142, currTerm=142, granted=true, requestLastLogId=LogId [index=136, term=141], lastLogId=LogId [index=136, term=141].

2024-05-22 05:15:41,321 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=131, votedFor=nacos1:7848, cost time=29 ms

2024-05-22 05:15:41,326 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:15:41,329 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=130, currTerm=131.

2024-05-22 05:15:41,376 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=129, votedFor=nacos3:7848, cost time=62 ms

2024-05-22 05:15:41,381 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 05:15:41,400 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=142, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:15:41,405 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:15:41,410 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:15:41,478 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:15:41,538 INFO onLeaderStart: term=142.

2024-05-22 05:20:24,475 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=131, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:20:24,475 INFO Node <naming_persistent_service_v2/nacos2:7848> term 131 start preVote.

2024-05-22 05:20:23,754 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:20:23,779 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=142, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:20:25,008 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=136, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=19, type=Follower] is going to quit

2024-05-22 05:20:25,019 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=18, type=Follower] is going to quit

2024-05-22 05:20:25,010 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:20:23,754 INFO Node <naming_service_metadata/nacos2:7848> term 132 start preVote.

2024-05-22 05:20:25,043 INFO Node <naming_persistent_service_v2/nacos2:7848> term 131 start preVote.

2024-05-22 05:20:25,044 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 05:20:25,049 INFO Node <naming_service_metadata/nacos2:7848> term 132 start preVote.

2024-05-22 05:20:25,053 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 05:20:25,053 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 05:20:25,055 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=133, currTerm=132, granted=true, requestLastLogId=LogId [index=128, term=132], lastLogId=LogId [index=127, term=131].

2024-05-22 05:20:25,057 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 05:20:25,057 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=133, currTerm=132, granted=true, requestLastLogId=LogId [index=128, term=132], lastLogId=LogId [index=127, term=131].

2024-05-22 05:20:25,081 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 05:20:25,087 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=132, currTerm=131.

2024-05-22 05:20:25,090 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=130, currTerm=129, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:20:25,090 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=133, currTerm=132.

2024-05-22 05:20:25,091 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=130, currTerm=129, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:20:25,100 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=132, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 05:20:25,144 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=131, currTerm=132.

2024-05-22 05:20:25,146 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=132, currTerm=132, granted=true, requestLastLogId=LogId [index=127, term=131], lastLogId=LogId [index=127, term=131].

2024-05-22 05:20:25,150 WARN Node <naming_persistent_service_v2/nacos2:7848> raise term 132 when get lastLogId.

2024-05-22 05:20:25,148 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=133, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-22 05:20:25,162 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=133, currTerm=133.

2024-05-22 05:20:25,164 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=132, currTerm=133.

2024-05-22 05:20:25,188 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=132, currTerm=133.

2024-05-22 05:20:25,189 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=132, currTerm=133.

2024-05-22 05:20:25,195 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=132, currTerm=133.

2024-05-22 05:20:25,166 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=143, currTerm=142.

2024-05-22 05:20:25,199 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=130, currTerm=129.

2024-05-22 05:20:25,201 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=129, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:20:25,187 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:20:25,202 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=132, votedFor=nacos3:7848, cost time=49 ms

2024-05-22 05:20:25,205 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=133, votedFor=nacos1:7848, cost time=8 ms

2024-05-22 05:20:25,205 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=131, currTerm=132.

2024-05-22 05:20:25,209 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=143, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-22 05:20:25,209 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=130, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 05:20:25,217 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=131, currTerm=132.

2024-05-22 05:20:25,223 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=130, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 05:20:25,219 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=143, currTerm=143.

2024-05-22 05:20:25,225 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:20:25,232 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=143, votedFor=nacos3:7848, cost time=5 ms

2024-05-22 05:20:25,234 WARN Node <naming_service_metadata/nacos2:7848> reject term_unmatched AppendEntriesRequest from nacos1:7848, term=133, prevLogIndex=128, prevLogTerm=132, localPrevLogTerm=0, lastLogIndex=127, entriesSize=0.

2024-05-22 05:20:25,249 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:20:25,249 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:21:13,292 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=134, currTerm=133, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:21:15,063 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=134, currTerm=133.

2024-05-22 05:21:17,661 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=133, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:21:18,390 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=134, votedFor=0.0.0.0:0, cost time=614 ms

2024-05-22 05:21:18,463 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=134, currTerm=134, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:21:18,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=134, votedFor=nacos1:7848, cost time=424 ms

2024-05-22 05:21:20,630 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=135, currTerm=134, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:21:21,290 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=135, currTerm=134.

2024-05-22 05:21:21,576 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=135, votedFor=0.0.0.0:0, cost time=265 ms

2024-05-22 05:21:22,592 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=135, votedFor=nacos1:7848, cost time=759 ms

2024-05-22 05:36:56,050 INFO Node <naming_persistent_service_v2/nacos2:7848> term 132 start preVote.

2024-05-22 05:36:56,777 INFO Node <naming_persistent_service/nacos2:7848> term 143 start preVote.

2024-05-22 05:36:56,802 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=136, currTerm=135, granted=true, requestLastLogId=LogId [index=130, term=135], lastLogId=LogId [index=130, term=135].

2024-05-22 05:36:56,797 INFO Node <naming_persistent_service_v2/nacos2:7848> term 132 start preVote.

2024-05-22 05:36:57,011 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_126.

2024-05-22 05:36:57,065 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_126.

2024-05-22 05:36:57,098 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=136, currTerm=135.

2024-05-22 05:36:57,105 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_121.

2024-05-22 05:36:56,050 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:36:56,811 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=144, currTerm=143, because the leader nacos3:7848's lease is still valid.

2024-05-22 05:36:57,149 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=143, granted=true.

2024-05-22 05:36:56,860 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=143, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:36:57,058 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_128.

2024-05-22 05:36:57,105 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=135, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 05:36:57,120 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=136, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-22 05:36:57,121 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 121 to 122, cost 0 ms.

2024-05-22 05:36:57,150 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=143.

2024-05-22 05:36:57,150 INFO Node <naming_persistent_service_v2/nacos2:7848> term 132 start preVote.

2024-05-22 05:36:57,154 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_138.

2024-05-22 05:36:57,177 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_138.

2024-05-22 05:36:57,154 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_128.

2024-05-22 05:36:57,172 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=143, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 05:36:57,174 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=132, granted=true.

2024-05-22 05:36:57,242 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=132.

2024-05-22 05:36:57,176 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=136, votedFor=nacos3:7848, cost time=8 ms

2024-05-22 05:36:57,205 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_132.

2024-05-22 05:36:57,238 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_123.

2024-05-22 05:36:57,241 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=144, votedFor=nacos2:7848, cost time=63 ms

2024-05-22 05:36:57,276 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 132 to 133, cost 0 ms.

2024-05-22 05:36:57,292 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:36:57,303 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=133, currTerm=133, granted=true, requestLastLogId=LogId [index=128, term=132], lastLogId=LogId [index=128, term=132].

2024-05-22 05:36:57,304 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=133, currTerm=133, granted=true, requestLastLogId=LogId [index=128, term=132], lastLogId=LogId [index=128, term=132].

2024-05-22 05:36:57,307 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:36:57,308 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=144, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:36:57,310 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:36:57,308 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 123 to 124, cost 0 ms.

2024-05-22 05:36:57,355 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:36:57,365 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=133, votedFor=nacos2:7848, cost time=18 ms

2024-05-22 05:36:57,366 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=133, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:36:57,368 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:36:57,373 INFO onLeaderStart: term=144.

2024-05-22 05:36:57,373 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:36:57,392 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 05:36:57,393 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 05:36:57,393 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=133, currTerm=133.

2024-05-22 05:36:57,402 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:36:57,412 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 05:36:57,413 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:36:57,415 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 05:36:57,418 INFO onLeaderStart: term=133.

2024-05-22 05:37:02,549 INFO Node <naming_instance_metadata/nacos2:7848> term 130 start preVote.

2024-05-22 05:37:02,549 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=130, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:37:02,554 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=130, granted=true.

2024-05-22 05:37:02,555 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=130.

2024-05-22 05:37:02,563 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=131, votedFor=nacos2:7848, cost time=6 ms

2024-05-22 05:37:02,564 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:37:02,573 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=131, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:37:02,575 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:37:02,575 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:37:02,576 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:37:02,580 INFO onLeaderStart: term=131.

2024-05-22 05:37:44,248 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499070043s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 05:37:44,957 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499645428s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-22 05:37:45,070 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499593585s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 05:37:57,412 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499681976s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 05:37:58,172 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=144, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:37:58,204 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=131, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:37:58,172 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=133, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:37:58,304 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=127, lastLogIncluded=0, lastLogIndex=127, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=17, type=Follower] is going to quit

2024-05-22 05:38:00,720 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=127, lastLogIncluded=0, lastLogIndex=127, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=18, type=Follower] is going to quit

2024-05-22 05:38:00,547 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:38:00,513 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=129, lastLogIncluded=0, lastLogIndex=129, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=18, type=Follower] is going to quit

2024-05-22 05:38:01,221 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=129, lastLogIncluded=0, lastLogIndex=129, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=19, type=Follower] is going to quit

2024-05-22 05:38:00,495 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:38:00,412 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:37:59,490 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:38:01,291 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:37:59,490 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:38:00,853 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=21, type=Follower] is going to quit

2024-05-22 05:38:01,026 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=132, currTerm=131, granted=true, requestLastLogId=LogId [index=127, term=131], lastLogId=LogId [index=127, term=131].

2024-05-22 05:38:01,288 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,291 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:38:01,316 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=22, type=Follower] is going to quit

2024-05-22 05:38:01,370 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,318 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,325 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=134, currTerm=133, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:38:01,392 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,323 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,323 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=132, currTerm=131.

2024-05-22 05:38:01,364 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:38:01,370 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,424 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=134, currTerm=133.

2024-05-22 05:38:01,424 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:01,441 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=136, granted=false.

2024-05-22 05:38:01,432 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=132, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-22 05:38:01,444 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=136, granted=false.

2024-05-22 05:38:01,475 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=136, granted=false.

2024-05-22 05:38:01,480 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=136, granted=false.

2024-05-22 05:38:01,482 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=136, granted=false.

2024-05-22 05:38:01,485 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=136, granted=false.

2024-05-22 05:38:01,496 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=132, votedFor=nacos1:7848, cost time=41 ms

2024-05-22 05:38:01,501 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=132, currTerm=132, granted=true, requestLastLogId=LogId [index=127, term=131], lastLogId=LogId [index=127, term=131].

2024-05-22 05:38:01,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=134, votedFor=0.0.0.0:0, cost time=56 ms

2024-05-22 05:38:01,597 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=134, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 05:38:01,620 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=134, votedFor=nacos3:7848, cost time=23 ms

2024-05-22 05:38:02,390 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:02,921 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:38:03,324 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:28,798 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:53:29,557 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:53:28,802 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:53:28,799 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=134, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 05:53:28,799 INFO Node <naming_persistent_service_v2/nacos2:7848> term 134 start preVote.

2024-05-22 05:53:28,798 INFO Node <naming_persistent_service/nacos2:7848> term 144 start preVote.

2024-05-22 05:53:30,077 INFO Node <naming_service_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 05:53:30,102 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:30,106 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=139, term=144], lastLogId=LogId [index=139, term=144].

2024-05-22 05:53:30,107 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=135, currTerm=134, granted=true, requestLastLogId=LogId [index=130, term=134], lastLogId=LogId [index=130, term=134].

2024-05-22 05:53:30,107 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=136, granted=true.

2024-05-22 05:53:30,153 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=139, term=144], lastLogId=LogId [index=139, term=144].

2024-05-22 05:53:30,156 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=136.

2024-05-22 05:53:30,158 WARN Node <naming_service_metadata/nacos2:7848> raise term 137 when get lastLogId.

2024-05-22 05:53:30,177 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=137, currTerm=137, granted=true, requestLastLogId=LogId [index=131, term=136], lastLogId=LogId [index=131, term=136].

2024-05-22 05:53:30,184 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=144, granted=true.

2024-05-22 05:53:30,185 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=144.

2024-05-22 05:53:30,192 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=134, granted=true.

2024-05-22 05:53:30,194 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-22 05:53:30,195 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-22 05:53:30,194 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=134.

2024-05-22 05:53:30,204 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:53:30,208 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_126.

2024-05-22 05:53:30,209 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=137, votedFor=nacos2:7848, cost time=24 ms

2024-05-22 05:53:30,211 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:53:30,213 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:53:30,216 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=135, votedFor=nacos2:7848, cost time=12 ms

2024-05-22 05:53:30,227 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=135, currTerm=135.

2024-05-22 05:53:30,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=145, votedFor=nacos2:7848, cost time=15 ms

2024-05-22 05:53:30,226 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:53:30,226 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 123 to 127, cost 0 ms.

2024-05-22 05:53:30,235 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=145, currTerm=145.

2024-05-22 05:53:30,272 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=135, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:53:30,273 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:53:30,269 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:30,276 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:53:30,277 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=137, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:53:30,285 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:53:30,285 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:30,286 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:53:30,289 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:30,291 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:53:30,300 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:53:30,302 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=144, currTerm=145.

2024-05-22 05:53:30,320 INFO onLeaderStart: term=137.

2024-05-22 05:53:30,323 INFO onLeaderStart: term=135.

2024-05-22 05:53:35,417 INFO Node <naming_instance_metadata/nacos2:7848> term 132 start preVote.

2024-05-22 05:53:35,417 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=132, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 05:53:35,425 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=132, granted=true.

2024-05-22 05:53:35,426 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=132.

2024-05-22 05:53:35,428 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:53:35,439 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=133, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 05:53:35,448 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=133, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:53:35,449 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:53:35,450 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:53:35,451 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:53:35,455 INFO onLeaderStart: term=133.

2024-05-22 05:54:14,932 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=135, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:54:15,029 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:54:15,029 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=131, lastLogIncluded=0, lastLogIndex=131, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=21, type=Follower] is going to quit

2024-05-22 05:54:15,676 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=131, lastLogIncluded=0, lastLogIndex=131, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=22, type=Follower] is going to quit

2024-05-22 05:54:16,373 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:16,489 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:17,604 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=133, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:54:17,633 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=129, lastLogIncluded=0, lastLogIndex=129, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=19, type=Follower] is going to quit

2024-05-22 05:54:17,829 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=129, lastLogIncluded=0, lastLogIndex=129, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=20, type=Follower] is going to quit

2024-05-22 05:54:18,180 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:54:18,170 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:18,689 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:18,721 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:20,843 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=136, currTerm=135, granted=true, requestLastLogId=LogId [index=131, term=135], lastLogId=LogId [index=131, term=135].

2024-05-22 05:54:20,988 INFO Node <naming_persistent_service_v2/nacos2:7848> term 135 start preVote.

2024-05-22 05:54:21,633 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=136, currTerm=135.

2024-05-22 05:54:22,025 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=136, votedFor=0.0.0.0:0, cost time=220 ms

2024-05-22 05:54:22,056 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:22,059 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=135, currTerm=136.

2024-05-22 05:54:22,174 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=135, currTerm=136.

2024-05-22 05:54:22,634 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:22,927 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=136, votedFor=nacos3:7848, cost time=666 ms

2024-05-22 05:54:24,251 INFO Node <naming_instance_metadata/nacos2:7848> term 133 start preVote.

2024-05-22 05:54:24,538 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:25,912 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=134, currTerm=133, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:54:26,115 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=133, granted=true.

2024-05-22 05:54:26,257 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=133.

2024-05-22 05:54:26,534 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:28,521 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=134, votedFor=nacos2:7848, cost time=480 ms

2024-05-22 05:54:29,821 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 05:54:31,098 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=134, currTerm=134.

2024-05-22 05:54:31,130 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=137, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 05:54:31,663 WARN Candidate node <naming_instance_metadata/nacos2:7848> term 134 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 05:54:31,704 INFO Node <naming_instance_metadata/nacos2:7848> term 134 start preVote.

2024-05-22 05:54:34,173 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 05:54:34,319 WARN Received entries of which the lastLog=132 is not greater than appliedIndex=132, return immediately with nothing changed.

2024-05-22 05:54:31,676 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=132, lastLogIncluded=0, lastLogIndex=132, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=16, type=Follower] is going to quit

2024-05-22 05:54:34,486 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=132, lastLogIncluded=0, lastLogIndex=132, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=15, type=Follower] is going to quit

2024-05-22 05:54:31,678 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 05:54:34,165 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 3.527991862s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 05:54:34,376 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=134, currTerm=134, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:54:34,594 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=138, currTerm=137, granted=true, requestLastLogId=LogId [index=132, term=137], lastLogId=LogId [index=132, term=137].

2024-05-22 05:54:34,680 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=135, currTerm=134, granted=true, requestLastLogId=LogId [index=129, term=133], lastLogId=LogId [index=129, term=133].

2024-05-22 05:54:34,681 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:34,681 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:34,689 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=134, granted=true.

2024-05-22 05:54:34,715 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=134.

2024-05-22 05:54:34,722 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 05:54:34,803 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=138, currTerm=137.

2024-05-22 05:54:34,807 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=135, votedFor=nacos2:7848, cost time=80 ms

2024-05-22 05:54:34,815 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=135, currTerm=135.

2024-05-22 05:54:34,885 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=138, votedFor=0.0.0.0:0, cost time=76 ms

2024-05-22 05:54:34,919 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=138, votedFor=nacos1:7848, cost time=31 ms

2024-05-22 05:54:34,935 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=135, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 05:54:35,047 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 05:54:35,052 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 05:54:35,076 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 05:54:35,078 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 05:54:35,130 INFO onLeaderStart: term=135.

2024-05-22 06:10:01,579 INFO Node <naming_persistent_service_v2/nacos2:7848> term 136 start preVote.

2024-05-22 06:10:02,309 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:10:02,309 INFO Node <naming_persistent_service/nacos2:7848> term 145 start preVote.

2024-05-22 06:10:02,320 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:10:02,884 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=136, granted=true.

2024-05-22 06:10:02,321 INFO Node <naming_service_metadata/nacos2:7848> term 138 start preVote.

2024-05-22 06:10:02,322 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=138, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:10:01,772 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=135, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:10:02,902 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=21, type=Follower] is going to quit

2024-05-22 06:10:02,902 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:10:02,878 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_140.

2024-05-22 06:10:02,906 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_140.

2024-05-22 06:10:02,907 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=139, currTerm=138, granted=true, requestLastLogId=LogId [index=133, term=138], lastLogId=LogId [index=133, term=138].

2024-05-22 06:10:02,888 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=136.

2024-05-22 06:10:02,890 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=140, term=145], lastLogId=LogId [index=140, term=145].

2024-05-22 06:10:02,909 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=145, granted=true.

2024-05-22 06:10:02,910 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=145.

2024-05-22 06:10:02,915 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-22 06:10:02,918 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-22 06:10:02,921 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=137, votedFor=nacos2:7848, cost time=8 ms

2024-05-22 06:10:02,922 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_128.

2024-05-22 06:10:02,904 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=130, lastLogIncluded=0, lastLogIndex=130, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=22, type=Follower] is going to quit

2024-05-22 06:10:02,909 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:10:02,935 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=139, currTerm=138.

2024-05-22 06:10:02,945 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=138, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 06:10:02,941 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 124 to 129, cost 0 ms.

2024-05-22 06:10:02,949 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=146, votedFor=nacos2:7848, cost time=38 ms

2024-05-22 06:10:02,943 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_138.

2024-05-22 06:10:02,958 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=146, currTerm=146, granted=true, requestLastLogId=LogId [index=140, term=145], lastLogId=LogId [index=140, term=145].

2024-05-22 06:10:02,959 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:10:02,960 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:10:02,960 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=136, currTerm=135, granted=true, requestLastLogId=LogId [index=130, term=135], lastLogId=LogId [index=130, term=135].

2024-05-22 06:10:02,985 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=137, currTerm=137, granted=true, requestLastLogId=LogId [index=132, term=136], lastLogId=LogId [index=132, term=136].

2024-05-22 06:10:02,988 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=137, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:10:02,996 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:10:03,011 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:10:02,965 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:10:02,966 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=139, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-22 06:10:02,970 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 133 to 139, cost 1 ms.

2024-05-22 06:10:03,020 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:10:02,994 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=136, currTerm=135, granted=true, requestLastLogId=LogId [index=130, term=135], lastLogId=LogId [index=130, term=135].

2024-05-22 06:10:03,013 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 06:10:03,025 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:10:03,025 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=136, currTerm=135.

2024-05-22 06:10:03,029 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-22 06:10:03,031 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-22 06:10:03,032 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 06:10:03,037 INFO onLeaderStart: term=137.

2024-05-22 06:10:03,038 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_126.

2024-05-22 06:10:03,038 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=139, votedFor=nacos3:7848, cost time=21 ms

2024-05-22 06:10:03,044 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=138, currTerm=139.

2024-05-22 06:10:03,045 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=138, currTerm=139.

2024-05-22 06:10:03,046 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 122 to 127, cost 1 ms.

2024-05-22 06:10:03,046 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=136, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-22 06:10:03,055 INFO onLeaderStart: term=146.

2024-05-22 06:10:03,060 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:10:03,060 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=136, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 06:10:03,062 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:10:03,062 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:10:59,514 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499710102s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 06:11:04,233 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499806370s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 06:11:04,727 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499685938s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 06:21:26,698 INFO Node <naming_instance_metadata/nacos2:7848> term 136 start preVote.

2024-05-22 06:21:26,706 INFO Node <naming_service_metadata/nacos2:7848> term 139 start preVote.

2024-05-22 06:21:26,743 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=137, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:21:27,698 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=23, type=Follower] is going to quit

2024-05-22 06:21:27,704 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:21:26,743 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=146, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:21:27,707 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=25, type=Follower] is going to quit

2024-05-22 06:21:27,711 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=24, type=Follower] is going to quit

2024-05-22 06:21:26,706 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:21:27,503 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:21:27,512 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=137, currTerm=136, granted=true, requestLastLogId=LogId [index=131, term=136], lastLogId=LogId [index=131, term=136].

2024-05-22 06:21:27,710 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=24, type=Follower] is going to quit

2024-05-22 06:21:27,710 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:21:27,713 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:21:27,713 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:21:27,979 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=136, granted=true.

2024-05-22 06:21:27,980 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=136.

2024-05-22 06:21:27,774 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:21:27,982 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=139, granted=true.

2024-05-22 06:21:28,003 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=139.

2024-05-22 06:21:27,982 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=136, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:21:27,981 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=141, term=146], lastLogId=LogId [index=141, term=146].

2024-05-22 06:21:27,982 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=138, currTerm=137, granted=true, requestLastLogId=LogId [index=133, term=137], lastLogId=LogId [index=133, term=137].

2024-05-22 06:21:28,005 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:21:28,005 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:21:28,007 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=137, votedFor=nacos2:7848, cost time=25 ms

2024-05-22 06:21:28,009 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=147, currTerm=146.

2024-05-22 06:21:28,024 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=140, currTerm=140, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:21:28,024 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=137, currTerm=137.

2024-05-22 06:21:28,044 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=140, currTerm=140.

2024-05-22 06:21:28,044 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=138, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-22 06:21:28,044 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=147, votedFor=0.0.0.0:0, cost time=27 ms

2024-05-22 06:21:28,054 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:21:28,057 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=138, currTerm=138, granted=true, requestLastLogId=LogId [index=133, term=137], lastLogId=LogId [index=133, term=137].

2024-05-22 06:21:28,057 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:21:28,057 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=138, currTerm=138, because the leader nacos3:7848's lease is still valid.

2024-05-22 06:21:28,061 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=138, currTerm=138.

2024-05-22 06:21:28,063 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:21:28,064 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=138, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 06:21:28,067 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=140, votedFor=nacos2:7848, cost time=9 ms

2024-05-22 06:21:28,068 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=141, term=146], lastLogId=LogId [index=141, term=146].

2024-05-22 06:21:28,070 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:21:28,071 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 06:21:28,073 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:21:28,076 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=138, votedFor=nacos3:7848, cost time=13 ms

2024-05-22 06:21:28,079 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=147, votedFor=nacos3:7848, cost time=10 ms

2024-05-22 06:21:28,090 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:21:59,953 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=141, currTerm=140, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:22:00,610 INFO Node <naming_persistent_service_v2/nacos2:7848> term 138 start preVote.

2024-05-22 06:22:00,621 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=138, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:22:01,256 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=138, granted=false.

2024-05-22 06:22:04,418 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=138, granted=true.

2024-05-22 06:22:04,464 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=138.

2024-05-22 06:22:04,729 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=139, votedFor=nacos2:7848, cost time=200 ms

2024-05-22 06:22:05,850 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=139, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:22:05,929 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:22:06,021 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:22:07,200 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=148, currTerm=147, because the leader nacos3:7848's lease is still valid.

2024-05-22 06:22:07,217 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=139, currTerm=139, granted=false, requestLastLogId=LogId [index=134, term=138], lastLogId=LogId [index=135, term=139].

2024-05-22 06:22:10,832 WARN Node <naming_persistent_service_v2/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.997086625s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 06:22:12,716 INFO Node <naming_persistent_service/nacos2:7848> term 147 start preVote.

2024-05-22 06:22:11,744 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=139, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:22:13,126 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:22:13,409 ERROR Fail to run ConfigurationChangeDone, status: Status[EPERM<1008>: Leader stepped down].

2024-05-22 06:22:10,901 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.496646206s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 06:22:14,205 INFO Replicator Replicator [state=Probe, statInfo=<running=BLOCKING, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=134, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=-1, type=Follower] is going to quit

2024-05-22 06:22:12,733 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:22:14,500 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=137, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:22:14,513 INFO Node <naming_instance_metadata/nacos2:7848> term 137 start preVote.

2024-05-22 06:22:14,577 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=135, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=25, type=Follower] is going to quit

2024-05-22 06:22:16,671 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=138, currTerm=137, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:22:16,766 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=137, granted=true.

2024-05-22 06:22:16,612 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:16,674 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=142, term=147], lastLogId=LogId [index=142, term=147].

2024-05-22 06:22:16,792 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=137.

2024-05-22 06:22:17,022 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=137, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:22:17,093 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=147, granted=true.

2024-05-22 06:22:17,147 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=147.

2024-05-22 06:22:17,517 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 06:22:17,522 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=148, currTerm=148.

2024-05-22 06:22:17,714 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 06:22:17,744 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=138, votedFor=nacos2:7848, cost time=539 ms

2024-05-22 06:22:18,480 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.648819598s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 06:22:18,646 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:22:19,779 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=138, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:22:19,817 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:22:19,853 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=141, currTerm=140, granted=true, requestLastLogId=LogId [index=135, term=140], lastLogId=LogId [index=135, term=140].

2024-05-22 06:22:19,881 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:22:20,275 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=148, votedFor=nacos2:7848, cost time=2142 ms

2024-05-22 06:22:20,363 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:20,276 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:20,477 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=141, currTerm=140.

2024-05-22 06:22:20,520 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=140, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 06:22:21,024 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=141, votedFor=0.0.0.0:0, cost time=521 ms

2024-05-22 06:22:21,058 INFO Node <naming_persistent_service_v2/nacos2:7848> term 139 start preVote.

2024-05-22 06:22:21,173 INFO onLeaderStart: term=138.

2024-05-22 06:22:21,201 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=141, votedFor=nacos1:7848, cost time=106 ms

2024-05-22 06:22:21,237 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=139, granted=true.

2024-05-22 06:22:21,250 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=139.

2024-05-22 06:22:21,411 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=140, votedFor=nacos2:7848, cost time=130 ms

2024-05-22 06:22:21,960 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:22:21,986 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=140, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:22:22,263 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:22:22,521 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=141, currTerm=141.

2024-05-22 06:22:22,537 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:22:22,593 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 06:22:22,774 WARN Candidate node <naming_persistent_service/nacos2:7848> term 148 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 06:22:23,425 INFO Node <naming_persistent_service/nacos2:7848> term 148 start preVote.

2024-05-22 06:22:23,165 INFO onLeaderStart: term=140.

2024-05-22 06:22:23,242 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499702649s. [closed=[], committed=[remote_addr=nacos3/172.25.0.4:7848]]], groupId=naming_instance_metadata

2024-05-22 06:22:23,483 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999736088s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 06:22:24,313 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=149, currTerm=148, granted=true, requestLastLogId=LogId [index=142, term=147], lastLogId=LogId [index=142, term=147].

2024-05-22 06:22:26,751 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=148, granted=true.

2024-05-22 06:22:26,811 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499666633s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 06:22:26,921 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=148.

2024-05-22 06:22:27,903 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:22:28,284 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=140, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:22:28,311 INFO Replicator Replicator [state=Probe, statInfo=<running=APPENDING_ENTRIES, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=134, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=-1, type=Follower] is going to quit

2024-05-22 06:22:28,305 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:22:28,393 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=136, lastLogIncluded=0, lastLogIndex=136, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=26, type=Follower] is going to quit

2024-05-22 06:22:29,296 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=149, votedFor=nacos2:7848, cost time=1391 ms

2024-05-22 06:22:29,480 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=149, currTerm=149.

2024-05-22 06:22:29,586 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999854783s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 06:22:30,630 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:31,228 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=149, currTerm=149, granted=true, requestLastLogId=LogId [index=142, term=147], lastLogId=LogId [index=142, term=147].

2024-05-22 06:22:31,688 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,033 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=149, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:22:32,090 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:22:32,121 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,190 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,208 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:22:32,451 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,787 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=150, currTerm=149, granted=false, requestLastLogId=LogId [index=142, term=147], lastLogId=LogId [index=143, term=149].

2024-05-22 06:22:32,793 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=150, currTerm=149.

2024-05-22 06:22:32,801 ERROR Fail to run ConfigurationChangeDone, status: Status[EPERM<1008>: Leader stepped down].

2024-05-22 06:22:32,802 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 06:22:32,824 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,847 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,867 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=150, votedFor=0.0.0.0:0, cost time=65 ms

2024-05-22 06:22:32,875 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=26, type=Follower] is going to quit

2024-05-22 06:22:32,871 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=27, type=Follower] is going to quit

2024-05-22 06:22:32,892 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=27, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 06:22:32,905 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,921 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:32,945 WARN Truncating storage to lastIndexKept=142.

2024-05-22 06:22:33,095 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:33,178 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:22:33,246 WARN Replicator Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=27, type=Follower] id is null when timeout, maybe it's destroyed.

2024-05-22 06:22:34,335 INFO Node <naming_persistent_service_v2/nacos2:7848> term 140 start preVote.

2024-05-22 06:22:34,343 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=140, granted=false.

2024-05-22 06:22:34,345 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=140, granted=true.

2024-05-22 06:22:34,347 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=140.

2024-05-22 06:22:34,372 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=141, votedFor=nacos2:7848, cost time=22 ms

2024-05-22 06:22:34,402 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=141, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:22:34,405 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:22:34,408 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:22:34,412 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:22:34,430 INFO onLeaderStart: term=141.

2024-05-22 06:23:30,131 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-22 06:23:30,132 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-22 06:23:30,136 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_131.

2024-05-22 06:23:30,141 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 127 to 132, cost 0 ms.

2024-05-22 06:38:56,643 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:38:55,723 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=138, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:38:55,731 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=141, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:38:55,731 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:38:55,733 INFO Node <naming_persistent_service/nacos2:7848> term 150 start preVote.

2024-05-22 06:38:56,861 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=135, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=28, type=Follower] is going to quit

2024-05-22 06:38:56,861 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=24, type=Follower] is going to quit

2024-05-22 06:38:56,863 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=133, lastLogIncluded=0, lastLogIndex=133, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=23, type=Follower] is going to quit

2024-05-22 06:38:55,729 INFO Node <naming_service_metadata/nacos2:7848> term 141 start preVote.

2024-05-22 06:38:56,865 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,861 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:38:56,861 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:38:56,862 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=27, type=Follower] is going to quit

2024-05-22 06:38:56,869 INFO Node <naming_service_metadata/nacos2:7848> term 141 start preVote.

2024-05-22 06:38:56,902 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=142, currTerm=141, granted=true, requestLastLogId=LogId [index=137, term=141], lastLogId=LogId [index=137, term=141].

2024-05-22 06:38:56,865 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,880 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,887 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=139, currTerm=138, granted=true, requestLastLogId=LogId [index=133, term=138], lastLogId=LogId [index=133, term=138].

2024-05-22 06:38:56,904 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=142, currTerm=141, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:38:56,930 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=142, currTerm=141, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:38:56,904 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,906 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=139, currTerm=138, granted=true, requestLastLogId=LogId [index=133, term=138], lastLogId=LogId [index=133, term=138].

2024-05-22 06:38:56,944 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,923 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,944 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=139, currTerm=138.

2024-05-22 06:38:56,977 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:56,996 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=150, granted=false.

2024-05-22 06:38:56,997 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=141, granted=false.

2024-05-22 06:38:57,014 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=141, granted=false.

2024-05-22 06:38:57,014 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=141, granted=true.

2024-05-22 06:38:57,015 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=141.

2024-05-22 06:38:57,015 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=141, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:38:57,013 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=150, granted=true.

2024-05-22 06:38:57,021 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=150.

2024-05-22 06:38:57,014 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=139, votedFor=0.0.0.0:0, cost time=15 ms

2024-05-22 06:38:57,027 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=142, votedFor=nacos2:7848, cost time=11 ms

2024-05-22 06:38:57,014 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:57,028 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=142, currTerm=141.

2024-05-22 06:38:57,035 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=142, currTerm=142.

2024-05-22 06:38:57,042 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:38:57,050 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=139, votedFor=nacos3:7848, cost time=20 ms

2024-05-22 06:38:57,053 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=142, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 06:38:57,045 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=151, votedFor=nacos2:7848, cost time=22 ms

2024-05-22 06:38:57,056 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:57,067 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=151, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:38:57,069 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:38:57,069 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:38:57,071 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=142, votedFor=nacos1:7848, cost time=15 ms

2024-05-22 06:38:57,077 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:38:57,081 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:38:57,085 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=142, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:38:57,086 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:38:57,091 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:38:57,092 INFO onLeaderStart: term=151.

2024-05-22 06:38:57,100 INFO onLeaderStart: term=142.

2024-05-22 06:39:43,773 INFO Node <naming_instance_metadata/nacos2:7848> term 139 start preVote.

2024-05-22 06:39:43,790 INFO Node <naming_persistent_service_v2/nacos2:7848> term 142 start preVote.

2024-05-22 06:39:43,778 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:39:43,790 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:39:44,671 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=142, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:39:44,792 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=143, currTerm=142.

2024-05-22 06:39:44,846 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 06:39:45,387 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=18, type=Follower] is going to quit

2024-05-22 06:39:45,603 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=139, granted=false.

2024-05-22 06:39:45,603 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=144, term=151], lastLogId=LogId [index=144, term=151].

2024-05-22 06:39:45,701 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499386463s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 06:39:45,899 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=143, votedFor=0.0.0.0:0, cost time=1058 ms

2024-05-22 06:39:45,927 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=151, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:39:46,239 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=17, type=Follower] is going to quit

2024-05-22 06:39:46,665 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=18, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 06:39:46,712 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=137, lastLogIncluded=0, lastLogIndex=137, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=18, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send0,5,main].

2024-05-22 06:39:48,444 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=142, granted=false.

2024-05-22 06:39:48,522 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=142, granted=false.

2024-05-22 06:39:46,824 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=139, granted=true.

2024-05-22 06:39:49,031 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=139.

2024-05-22 06:39:49,108 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=140, currTerm=140.

2024-05-22 06:39:48,343 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=28, type=Follower] is going to quit

2024-05-22 06:39:48,398 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:39:48,464 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=143, votedFor=nacos3:7848, cost time=1691 ms

2024-05-22 06:39:48,489 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=29, type=Follower] is going to quit

2024-05-22 06:39:49,105 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=139, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:39:50,458 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:39:50,487 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=143, currTerm=143.

2024-05-22 06:39:50,693 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=29, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 06:39:50,861 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=144, currTerm=143, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:39:50,965 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=152, currTerm=151.

2024-05-22 06:39:51,299 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=143, currTerm=143, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:39:50,935 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:39:51,203 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:39:53,472 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=152, votedFor=0.0.0.0:0, cost time=2198 ms

2024-05-22 06:39:52,486 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=144, currTerm=143.

2024-05-22 06:39:53,119 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=140, votedFor=nacos2:7848, cost time=3202 ms

2024-05-22 06:39:54,451 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 06:39:53,724 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=29, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send4,5,main].

2024-05-22 06:39:56,108 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=152, votedFor=nacos1:7848, cost time=1851 ms

2024-05-22 06:39:53,968 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:39:54,139 INFO Node <naming_persistent_service_v2/nacos2:7848> term 142 start preVote.

2024-05-22 06:39:54,141 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:39:54,298 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=152, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 06:39:56,233 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=140, currTerm=140, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 06:39:56,693 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999887214s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 06:39:56,426 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:39:56,918 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=144, votedFor=0.0.0.0:0, cost time=2600 ms

2024-05-22 06:39:59,418 WARN Candidate node <naming_instance_metadata/nacos2:7848> term 140 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 06:40:00,402 INFO Node <naming_instance_metadata/nacos2:7848> term 140 start preVote.

2024-05-22 06:40:01,127 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=144, votedFor=nacos3:7848, cost time=891 ms

2024-05-22 06:40:01,166 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=144, currTerm=144, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:40:01,204 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:40:01,209 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:40:01,266 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=142, granted=true.

2024-05-22 06:40:01,268 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=142.

2024-05-22 06:40:01,272 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:40:01,326 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=140, granted=true.

2024-05-22 06:40:01,342 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=140.

2024-05-22 06:40:01,347 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=141, currTerm=141, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 06:40:01,484 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=143, votedFor=nacos2:7848, cost time=213 ms

2024-05-22 06:40:01,494 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:40:01,537 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:40:01,546 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=143, currTerm=143, granted=true, requestLastLogId=LogId [index=138, term=142], lastLogId=LogId [index=138, term=142].

2024-05-22 06:40:01,552 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=145, currTerm=144, granted=true, requestLastLogId=LogId [index=137, term=142], lastLogId=LogId [index=137, term=142].

2024-05-22 06:40:01,550 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:40:01,557 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=145, currTerm=144.

2024-05-22 06:40:01,602 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=141, votedFor=nacos2:7848, cost time=65 ms

2024-05-22 06:40:01,609 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=141, currTerm=141, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 06:40:01,638 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=141, currTerm=141.

2024-05-22 06:40:01,659 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=143, currTerm=143.

2024-05-22 06:40:01,669 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=145, votedFor=0.0.0.0:0, cost time=73 ms

2024-05-22 06:40:01,669 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:40:01,671 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=145, currTerm=145.

2024-05-22 06:40:01,674 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:40:01,699 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=141, currTerm=141.

2024-05-22 06:40:01,679 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:40:01,718 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=145, votedFor=nacos1:7848, cost time=26 ms

2024-05-22 06:40:01,734 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:40:01,826 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:40:01,887 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-22 06:40:01,891 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-22 06:40:01,900 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_140.

2024-05-22 06:40:01,916 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 139 to 141, cost 1 ms.

2024-05-22 06:40:02,255 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-22 06:40:02,256 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-22 06:40:02,264 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_132.

2024-05-22 06:40:02,277 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 129 to 133, cost 1 ms.

2024-05-22 06:40:02,923 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-22 06:40:02,926 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-22 06:40:02,941 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_130.

2024-05-22 06:40:02,965 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 127 to 131, cost 2 ms.

2024-05-22 06:40:06,611 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=142, currTerm=141, granted=true, requestLastLogId=LogId [index=134, term=139], lastLogId=LogId [index=134, term=139].

2024-05-22 06:40:06,622 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=142, currTerm=141.

2024-05-22 06:40:06,655 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=142, votedFor=0.0.0.0:0, cost time=31 ms

2024-05-22 06:40:06,680 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=142, votedFor=nacos3:7848, cost time=24 ms

2024-05-22 06:48:46,717 INFO Node <naming_service_metadata/nacos2:7848> term 145 start preVote.

2024-05-22 06:48:47,438 INFO Node <naming_service_metadata/nacos2:7848> term 145 start preVote.

2024-05-22 06:48:46,721 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 06:48:46,720 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:48:46,723 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 06:48:46,724 INFO Node <naming_persistent_service/nacos2:7848> term 152 start preVote.

2024-05-22 06:48:46,720 INFO Node <naming_instance_metadata/nacos2:7848> term 142 start preVote.

2024-05-22 06:48:47,505 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=153, currTerm=152, because the leader nacos1:7848's lease is still valid.

2024-05-22 06:48:47,582 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=144, currTerm=143, because the leader nacos3:7848's lease is still valid.

2024-05-22 06:48:47,554 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=145, granted=true.

2024-05-22 06:48:47,582 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=143, currTerm=142, because the leader nacos3:7848's lease is still valid.

2024-05-22 06:48:47,648 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=142, granted=false.

2024-05-22 06:48:47,645 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=145.

2024-05-22 06:48:47,654 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:48:47,643 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=152, granted=true.

2024-05-22 06:48:47,654 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=145, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:48:47,659 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=142, granted=true.

2024-05-22 06:48:47,676 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=142.

2024-05-22 06:48:47,668 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=146, votedFor=nacos2:7848, cost time=12 ms

2024-05-22 06:48:47,671 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=152.

2024-05-22 06:48:47,737 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:48:47,755 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=153, currTerm=153.

2024-05-22 06:48:47,759 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=143, votedFor=nacos2:7848, cost time=33 ms

2024-05-22 06:48:47,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=142, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:48:47,728 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=146, currTerm=146, granted=true, requestLastLogId=LogId [index=138, term=145], lastLogId=LogId [index=138, term=145].

2024-05-22 06:48:47,737 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 06:48:47,765 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:48:47,767 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 06:48:47,763 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=144, currTerm=143.

2024-05-22 06:48:47,766 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=153, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 06:48:47,773 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=146, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:48:47,776 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:48:47,778 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:48:47,775 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=143, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 06:48:47,784 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=143, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 06:48:47,784 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 06:48:47,786 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 06:48:47,787 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:48:47,790 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=144, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 06:48:47,791 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 06:48:47,796 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=144, votedFor=nacos1:7848, cost time=6 ms

2024-05-22 06:48:47,801 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 06:48:47,797 INFO onLeaderStart: term=143.

2024-05-22 06:48:47,824 INFO onLeaderStart: term=146.

2024-05-22 06:49:33,779 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.492087663s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-22 06:49:46,475 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499747350s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-22 06:49:48,490 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=143, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 06:49:49,731 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=136, lastLogIncluded=0, lastLogIndex=136, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=25, type=Follower] is going to quit

2024-05-22 06:49:49,553 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499836531s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-22 06:49:49,749 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 06:49:49,820 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499733676s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_instance_metadata

2024-05-22 06:49:50,203 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=139, term=146], lastLogId=LogId [index=139, term=146].

2024-05-22 06:49:50,264 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=136, lastLogIncluded=0, lastLogIndex=136, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=26, type=Follower] is going to quit

2024-05-22 06:49:50,514 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:49:50,546 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:49:50,811 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 06:49:50,818 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=147, currTerm=146.

2024-05-22 06:49:50,828 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 06:49:50,869 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=147, votedFor=0.0.0.0:0, cost time=42 ms

2024-05-22 06:49:50,871 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=19, type=Follower] is going to quit

2024-05-22 06:49:50,873 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=139, lastLogIncluded=0, lastLogIndex=139, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=20, type=Follower] is going to quit

2024-05-22 06:49:50,901 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=147, votedFor=nacos3:7848, cost time=25 ms

2024-05-22 06:49:52,834 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=144, currTerm=143, granted=true, requestLastLogId=LogId [index=136, term=143], lastLogId=LogId [index=136, term=143].

2024-05-22 06:49:52,855 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=144, currTerm=143.

2024-05-22 06:49:52,896 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=144, votedFor=0.0.0.0:0, cost time=30 ms

2024-05-22 06:49:52,920 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=144, votedFor=nacos1:7848, cost time=21 ms

2024-05-22 07:06:19,403 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 07:06:19,382 INFO Node <naming_service_metadata/nacos2:7848> term 147 start preVote.

2024-05-22 07:06:19,403 INFO Node <naming_persistent_service_v2/nacos2:7848> term 144 start preVote.

2024-05-22 07:06:19,401 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 07:06:19,401 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=153, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:06:19,400 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:06:19,401 INFO Node <naming_persistent_service/nacos2:7848> term 153 start preVote.

2024-05-22 07:06:19,400 INFO Node <naming_instance_metadata/nacos2:7848> term 144 start preVote.

2024-05-22 07:06:20,585 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-22 07:06:20,605 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=145, currTerm=144, because the leader nacos1:7848's lease is still valid.

2024-05-22 07:06:20,607 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_140.

2024-05-22 07:06:20,630 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_140.

2024-05-22 07:06:20,639 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_136.

2024-05-22 07:06:20,643 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=144, granted=false.

2024-05-22 07:06:20,659 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=153, granted=true.

2024-05-22 07:06:20,678 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=153.

2024-05-22 07:06:20,661 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=144, granted=true.

2024-05-22 07:06:20,679 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=144.

2024-05-22 07:06:20,683 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:06:20,667 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=147, granted=true.

2024-05-22 07:06:20,676 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=144, granted=true.

2024-05-22 07:06:20,685 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=154, currTerm=154, granted=true, requestLastLogId=LogId [index=146, term=153], lastLogId=LogId [index=146, term=153].

2024-05-22 07:06:20,687 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=147.

2024-05-22 07:06:20,692 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=147, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:06:20,685 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 132 to 137, cost 3 ms.

2024-05-22 07:06:20,694 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=144.

2024-05-22 07:06:20,695 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=144, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:06:20,704 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=145, votedFor=nacos2:7848, cost time=19 ms

2024-05-22 07:06:20,710 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=148, votedFor=nacos2:7848, cost time=18 ms

2024-05-22 07:06:20,711 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=145, currTerm=145, granted=true, requestLastLogId=LogId [index=137, term=144], lastLogId=LogId [index=137, term=144].

2024-05-22 07:06:20,711 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=145, votedFor=nacos2:7848, cost time=15 ms

2024-05-22 07:06:20,713 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=154, votedFor=nacos2:7848, cost time=21 ms

2024-05-22 07:06:20,715 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:06:20,720 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:06:20,723 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:06:20,726 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=145, currTerm=145.

2024-05-22 07:06:20,734 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=154, currTerm=154.

2024-05-22 07:06:20,737 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=148, currTerm=148.

2024-05-22 07:06:20,768 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=145, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:06:20,768 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:06:20,769 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:06:20,777 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=145, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:06:20,779 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:06:20,782 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:06:20,782 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=154, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:06:20,787 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:06:20,787 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:06:20,815 INFO onLeaderStart: term=145.

2024-05-22 07:06:20,817 INFO onLeaderStart: term=154.

2024-05-22 07:06:20,818 INFO onLeaderStart: term=145.

2024-05-22 07:06:20,820 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 07:06:20,839 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 07:06:20,842 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=148, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:06:20,843 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:06:20,844 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:06:20,862 INFO onLeaderStart: term=148.

2024-05-22 07:22:28,796 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=154, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:22:29,623 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:22:28,797 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=148, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:22:29,631 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=21, type=Follower] is going to quit

2024-05-22 07:22:29,638 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:22:28,797 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=145, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:22:28,796 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=145, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:22:29,628 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=31, type=Follower] is going to quit

2024-05-22 07:22:29,642 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=30, type=Follower] is going to quit

2024-05-22 07:22:29,638 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=22, type=Follower] is going to quit

2024-05-22 07:22:29,673 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:29,675 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=155, currTerm=154, granted=true, requestLastLogId=LogId [index=147, term=154], lastLogId=LogId [index=147, term=154].

2024-05-22 07:22:29,641 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=138, lastLogIncluded=0, lastLogIndex=138, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=28, type=Follower] is going to quit

2024-05-22 07:22:29,686 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=138, lastLogIncluded=0, lastLogIndex=138, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=27, type=Follower] is going to quit

2024-05-22 07:22:29,641 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=30, type=Follower] is going to quit

2024-05-22 07:22:29,787 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=141, lastLogIncluded=0, lastLogIndex=141, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=29, type=Follower] is going to quit

2024-05-22 07:22:29,641 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:22:29,794 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:29,642 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:22:29,651 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-22 07:22:30,036 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-22 07:22:29,655 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_147.

2024-05-22 07:22:29,655 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-22 07:22:29,674 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:29,675 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:29,935 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=141, term=145], lastLogId=LogId [index=141, term=145].

2024-05-22 07:22:29,937 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=138, term=145], lastLogId=LogId [index=138, term=145].

2024-05-22 07:22:30,089 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=138, term=145], lastLogId=LogId [index=138, term=145].

2024-05-22 07:22:30,043 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_139.

2024-05-22 07:22:30,093 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,043 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=155, currTerm=154.

2024-05-22 07:22:30,043 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_147.

2024-05-22 07:22:30,075 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=149, currTerm=148, granted=true, requestLastLogId=LogId [index=141, term=148], lastLogId=LogId [index=141, term=148].

2024-05-22 07:22:30,081 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-22 07:22:30,088 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=141, term=145], lastLogId=LogId [index=141, term=145].

2024-05-22 07:22:30,094 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=146, currTerm=145, granted=true, requestLastLogId=LogId [index=138, term=145], lastLogId=LogId [index=138, term=145].

2024-05-22 07:22:30,089 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,102 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_145.

2024-05-22 07:22:30,108 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=149, currTerm=148.

2024-05-22 07:22:30,104 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_134.

2024-05-22 07:22:30,105 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,105 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=146, currTerm=145.

2024-05-22 07:22:30,107 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=155, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 07:22:30,112 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 133 to 140, cost 2 ms.

2024-05-22 07:22:30,115 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 141 to 146, cost 1 ms.

2024-05-22 07:22:30,128 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=146, currTerm=145.

2024-05-22 07:22:30,129 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 131 to 135, cost 0 ms.

2024-05-22 07:22:30,131 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=149, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 07:22:30,137 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=146, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-22 07:22:30,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=146, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 07:22:30,142 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=155, votedFor=nacos1:7848, cost time=18 ms

2024-05-22 07:22:30,147 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=155, currTerm=155, granted=true, requestLastLogId=LogId [index=147, term=154], lastLogId=LogId [index=147, term=154].

2024-05-22 07:22:30,150 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=146, votedFor=nacos3:7848, cost time=11 ms

2024-05-22 07:22:30,151 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,145 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=149, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 07:22:30,155 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,147 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,151 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,161 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,155 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=146, votedFor=nacos3:7848, cost time=14 ms

2024-05-22 07:22:30,180 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=146, currTerm=146.

2024-05-22 07:22:30,158 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,190 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,190 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:30,200 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:22:33,743 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:22:33,743 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:22:33,744 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:22:33,745 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:40:01,862 INFO Node <naming_service_metadata/nacos2:7848> term 149 start preVote.

2024-05-22 07:40:01,862 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 07:40:01,862 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=146, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:40:01,862 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 07:40:01,912 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=146, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:40:01,862 INFO Node <naming_persistent_service/nacos2:7848> term 155 start preVote.

2024-05-22 07:40:01,862 INFO Node <naming_persistent_service_v2/nacos2:7848> term 146 start preVote.

2024-05-22 07:40:02,632 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=147, currTerm=146, granted=true, requestLastLogId=LogId [index=142, term=146], lastLogId=LogId [index=142, term=146].

2024-05-22 07:40:01,861 INFO Node <naming_instance_metadata/nacos2:7848> term 146 start preVote.

2024-05-22 07:40:02,646 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_142.

2024-05-22 07:40:02,665 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_142.

2024-05-22 07:40:02,670 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_140.

2024-05-22 07:40:02,857 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 137 to 141, cost 0 ms.

2024-05-22 07:40:02,872 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-22 07:40:02,879 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=146, granted=true.

2024-05-22 07:40:02,880 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=146.

2024-05-22 07:40:02,934 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=146, granted=true.

2024-05-22 07:40:02,943 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=146.

2024-05-22 07:40:02,944 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=147, votedFor=nacos2:7848, cost time=15 ms

2024-05-22 07:40:02,947 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=146, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:40:02,945 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=156, currTerm=155.

2024-05-22 07:40:02,953 WARN Node <naming_persistent_service_v2/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=146, currTerm=147.

2024-05-22 07:40:02,988 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=147, votedFor=nacos2:7848, cost time=38 ms

2024-05-22 07:40:02,989 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=156, votedFor=0.0.0.0:0, cost time=25 ms

2024-05-22 07:40:02,998 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=139, term=146], lastLogId=LogId [index=139, term=146].

2024-05-22 07:40:02,999 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos1:7848, term=155, currTerm=156.

2024-05-22 07:40:03,000 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=139, term=146], lastLogId=LogId [index=139, term=146].

2024-05-22 07:40:03,051 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=149, granted=true.

2024-05-22 07:40:03,053 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=149.

2024-05-22 07:40:03,032 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=147, currTerm=147, granted=true, requestLastLogId=LogId [index=142, term=146], lastLogId=LogId [index=142, term=146].

2024-05-22 07:40:03,053 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=147, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:40:03,055 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:40:03,057 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=147, currTerm=147.

2024-05-22 07:40:03,062 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:40:03,057 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=156, votedFor=nacos3:7848, cost time=7 ms

2024-05-22 07:40:03,058 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:40:03,064 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=155, currTerm=156.

2024-05-22 07:40:03,065 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=155, currTerm=156.

2024-05-22 07:40:03,065 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=150, votedFor=nacos2:7848, cost time=9 ms

2024-05-22 07:40:03,072 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:40:03,071 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:40:03,074 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=142, term=149], lastLogId=LogId [index=142, term=149].

2024-05-22 07:40:03,082 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=150, currTerm=150.

2024-05-22 07:40:03,080 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 07:40:03,081 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=147, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:40:03,087 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:40:03,087 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:40:03,088 INFO onLeaderStart: term=147.

2024-05-22 07:40:03,116 INFO onLeaderStart: term=147.

2024-05-22 07:40:03,118 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 07:40:03,130 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 07:40:06,843 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:40:06,844 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:40:06,846 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:40:06,848 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 07:56:32,675 INFO Node <naming_service_metadata/nacos2:7848> term 150 start preVote.

2024-05-22 07:56:33,409 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:56:33,404 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=147, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:56:33,404 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=147, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 07:56:33,855 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=31, type=Follower] is going to quit

2024-05-22 07:56:33,855 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=140, lastLogIncluded=0, lastLogIndex=140, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=30, type=Follower] is going to quit

2024-05-22 07:56:33,857 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=143, lastLogIncluded=0, lastLogIndex=143, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=32, type=Follower] is going to quit

2024-05-22 07:56:33,858 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=140, lastLogIncluded=0, lastLogIndex=140, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=31, type=Follower] is going to quit

2024-05-22 07:56:33,862 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:56:32,675 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 07:56:32,675 INFO Node <naming_persistent_service/nacos2:7848> term 156 start preVote.

2024-05-22 07:56:33,862 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 07:56:33,953 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-22 07:56:33,962 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-22 07:56:33,963 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_143.

2024-05-22 07:56:33,964 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=143, term=147], lastLogId=LogId [index=143, term=147].

2024-05-22 07:56:33,965 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_143.

2024-05-22 07:56:33,975 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_141.

2024-05-22 07:56:33,975 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_149.

2024-05-22 07:56:33,976 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_149.

2024-05-22 07:56:33,998 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_140.

2024-05-22 07:56:33,999 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_147.

2024-05-22 07:56:34,014 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 140 to 142, cost 4 ms.

2024-05-22 07:56:34,016 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=157, currTerm=156, granted=true, requestLastLogId=LogId [index=149, term=156], lastLogId=LogId [index=149, term=156].

2024-05-22 07:56:34,022 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_140.

2024-05-22 07:56:34,030 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-22 07:56:34,030 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=151, currTerm=150, because the leader nacos3:7848's lease is still valid.

2024-05-22 07:56:34,047 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=156, granted=true.

2024-05-22 07:56:34,049 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=156.

2024-05-22 07:56:34,065 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:56:34,072 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 146 to 148, cost 3 ms.

2024-05-22 07:56:34,048 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=148, currTerm=147, granted=true, requestLastLogId=LogId [index=140, term=147], lastLogId=LogId [index=140, term=147].

2024-05-22 07:56:34,064 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_138.

2024-05-22 07:56:34,064 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=150, granted=false.

2024-05-22 07:56:34,068 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:56:34,074 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=148, currTerm=147.

2024-05-22 07:56:34,075 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=157, votedFor=nacos2:7848, cost time=8 ms

2024-05-22 07:56:34,077 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=156, currTerm=157.

2024-05-22 07:56:34,084 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 135 to 139, cost 0 ms.

2024-05-22 07:56:34,086 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=150, granted=true.

2024-05-22 07:56:34,087 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=150.

2024-05-22 07:56:34,086 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 07:56:34,088 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 07:56:34,088 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=148, currTerm=147.

2024-05-22 07:56:34,089 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=148, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 07:56:34,108 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=151, votedFor=nacos2:7848, cost time=17 ms

2024-05-22 07:56:34,110 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=148, votedFor=0.0.0.0:0, cost time=19 ms

2024-05-22 07:56:34,116 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=148, votedFor=nacos3:7848, cost time=23 ms

2024-05-22 07:56:34,120 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=148, currTerm=148.

2024-05-22 07:56:34,140 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=148, votedFor=nacos3:7848, cost time=26 ms

2024-05-22 07:56:34,141 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=151, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:56:34,144 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:56:34,145 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:56:34,142 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=157, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 07:56:34,150 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 07:56:34,143 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 07:56:34,151 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 07:56:34,155 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=157, currTerm=157.

2024-05-22 07:56:34,169 INFO onLeaderStart: term=151.

2024-05-22 07:56:34,170 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=151, currTerm=151.

2024-05-22 07:56:34,176 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 07:56:34,178 INFO onLeaderStart: term=157.

2024-05-22 07:56:34,201 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 08:13:03,796 INFO Node <naming_persistent_service_v2/nacos2:7848> term 148 start preVote.

2024-05-22 08:13:03,871 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=148, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:13:03,801 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=148, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:13:03,861 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=157, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:13:04,589 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:13:03,822 INFO Node <naming_instance_metadata/nacos2:7848> term 148 start preVote.

2024-05-22 08:13:03,814 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=151, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:13:04,590 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=32, type=Follower] is going to quit

2024-05-22 08:13:04,607 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=33, type=Follower] is going to quit

2024-05-22 08:13:04,602 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=23, type=Follower] is going to quit

2024-05-22 08:13:04,603 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:13:04,614 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=144, lastLogIncluded=0, lastLogIndex=144, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=24, type=Follower] is going to quit

2024-05-22 08:13:04,627 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:13:04,631 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_144.

2024-05-22 08:13:04,632 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_144.

2024-05-22 08:13:04,636 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_142.

2024-05-22 08:13:04,698 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=144, term=151], lastLogId=LogId [index=144, term=151].

2024-05-22 08:13:04,701 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=150, term=157], lastLogId=LogId [index=150, term=157].

2024-05-22 08:13:04,786 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=149, currTerm=148, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:13:04,786 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:13:04,790 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=149, currTerm=148, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:13:04,827 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=148, granted=false.

2024-05-22 08:13:04,817 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=149, currTerm=148, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:13:04,819 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 141 to 143, cost 0 ms.

2024-05-22 08:13:04,835 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=149, currTerm=148, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:13:04,838 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=149, currTerm=148, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:13:04,865 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=148, granted=false.

2024-05-22 08:13:04,881 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=148, granted=true.

2024-05-22 08:13:04,885 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=148.

2024-05-22 08:13:04,890 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=148, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:13:04,892 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=152, currTerm=151.

2024-05-22 08:13:04,912 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:13:04,914 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:13:04,924 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=158, currTerm=157.

2024-05-22 08:13:04,931 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=149, currTerm=148.

2024-05-22 08:13:04,932 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=148, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:13:04,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=152, votedFor=0.0.0.0:0, cost time=18 ms

2024-05-22 08:13:04,929 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=149, votedFor=nacos2:7848, cost time=39 ms

2024-05-22 08:13:04,981 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=152, votedFor=nacos3:7848, cost time=13 ms

2024-05-22 08:13:04,985 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=158, votedFor=0.0.0.0:0, cost time=53 ms

2024-05-22 08:13:04,986 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:13:04,988 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=149, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-22 08:13:04,999 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=148, currTerm=149.

2024-05-22 08:13:05,009 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=158, votedFor=nacos3:7848, cost time=11 ms

2024-05-22 08:13:05,030 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=149, votedFor=nacos1:7848, cost time=29 ms

2024-05-22 08:13:05,060 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=149, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:13:05,064 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:13:05,065 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:13:05,115 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 08:13:05,127 INFO onLeaderStart: term=149.

2024-05-22 08:13:08,867 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 08:13:08,871 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 08:13:08,873 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 08:13:08,875 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 08:13:48,340 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.416977825s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 08:14:05,702 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499126355s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service_v2

2024-05-22 08:20:01,735 INFO Node <naming_service_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:20:01,735 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:20:01,748 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:20:01,747 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=149, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:20:02,642 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=33, type=Follower] is going to quit

2024-05-22 08:20:02,644 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=145, lastLogIncluded=0, lastLogIndex=145, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=34, type=Follower] is going to quit

2024-05-22 08:20:02,645 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=150, currTerm=149, granted=true, requestLastLogId=LogId [index=145, term=149], lastLogId=LogId [index=145, term=149].

2024-05-22 08:20:01,747 INFO Node <naming_persistent_service/nacos2:7848> term 158 start preVote.

2024-05-22 08:20:01,743 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=149, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:20:01,743 INFO Node <naming_instance_metadata/nacos2:7848> term 149 start preVote.

2024-05-22 08:20:02,649 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:20:02,672 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=159, currTerm=158, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:20:02,672 INFO Node <naming_instance_metadata/nacos2:7848> term 149 start preVote.

2024-05-22 08:20:02,674 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=150, currTerm=149, because the leader nacos1:7848's lease is still valid.

2024-05-22 08:20:02,675 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=150, currTerm=149, granted=true, requestLastLogId=LogId [index=145, term=149], lastLogId=LogId [index=145, term=149].

2024-05-22 08:20:02,711 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=152, granted=false.

2024-05-22 08:20:02,718 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=153, currTerm=152, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:20:02,713 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=150, currTerm=149.

2024-05-22 08:20:02,735 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=158, granted=false.

2024-05-22 08:20:02,778 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=150, votedFor=0.0.0.0:0, cost time=49 ms

2024-05-22 08:20:02,876 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=150, votedFor=nacos1:7848, cost time=29 ms

2024-05-22 08:20:02,881 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=150, currTerm=149.

2024-05-22 08:20:02,886 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=149, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:20:02,924 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=150, votedFor=0.0.0.0:0, cost time=38 ms

2024-05-22 08:20:02,939 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=150, currTerm=150, granted=true, requestLastLogId=LogId [index=145, term=149], lastLogId=LogId [index=145, term=149].

2024-05-22 08:20:03,004 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=152, granted=true.

2024-05-22 08:20:03,007 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=152.

2024-05-22 08:20:03,007 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=158, granted=true.

2024-05-22 08:20:03,008 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=158.

2024-05-22 08:20:03,010 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=150, votedFor=nacos3:7848, cost time=84 ms

2024-05-22 08:20:03,012 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:20:03,017 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=159, votedFor=nacos2:7848, cost time=7 ms

2024-05-22 08:20:03,020 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:20:03,006 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:20:03,012 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=149, currTerm=150.

2024-05-22 08:20:03,022 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=149, currTerm=150.

2024-05-22 08:20:03,023 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=149, currTerm=150.

2024-05-22 08:20:03,023 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=153, votedFor=nacos2:7848, cost time=8 ms

2024-05-22 08:20:03,027 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=149, currTerm=150.

2024-05-22 08:20:03,037 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=159, currTerm=159.

2024-05-22 08:20:03,044 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=153, currTerm=153.

2024-05-22 08:20:03,067 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=153, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:20:03,069 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:20:03,069 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:20:03,070 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:20:03,070 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:20:03,080 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:20:03,086 INFO onLeaderStart: term=159.

2024-05-22 08:20:03,098 INFO onLeaderStart: term=153.

2024-05-22 08:23:30,753 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=153, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:23:31,447 INFO Node <naming_instance_metadata/nacos2:7848> term 150 start preVote.

2024-05-22 08:23:31,447 INFO Node <naming_persistent_service_v2/nacos2:7848> term 150 start preVote.

2024-05-22 08:23:31,447 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:23:31,447 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:23:31,453 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:23:31,453 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=25, type=Follower] is going to quit

2024-05-22 08:23:31,739 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=146, lastLogIncluded=0, lastLogIndex=146, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=26, type=Follower] is going to quit

2024-05-22 08:23:31,457 INFO Node <naming_instance_metadata/nacos2:7848> term 150 start preVote.

2024-05-22 08:23:30,755 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:23:31,742 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=152, lastLogIncluded=0, lastLogIndex=152, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=34, type=Follower] is going to quit

2024-05-22 08:23:31,743 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=152, lastLogIncluded=0, lastLogIndex=152, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=35, type=Follower] is going to quit

2024-05-22 08:23:31,716 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=150, granted=false.

2024-05-22 08:23:31,748 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:23:31,755 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=151, currTerm=150, granted=true, requestLastLogId=LogId [index=143, term=150], lastLogId=LogId [index=143, term=150].

2024-05-22 08:23:31,758 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=152, term=159], lastLogId=LogId [index=152, term=159].

2024-05-22 08:23:31,760 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=152, term=159], lastLogId=LogId [index=152, term=159].

2024-05-22 08:23:31,760 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=152, term=159], lastLogId=LogId [index=152, term=159].

2024-05-22 08:23:31,763 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=150, granted=false.

2024-05-22 08:23:31,756 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,774 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,776 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,774 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,774 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,775 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=154, currTerm=153, granted=true, requestLastLogId=LogId [index=146, term=153], lastLogId=LogId [index=146, term=153].

2024-05-22 08:23:31,777 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,786 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=150, granted=true.

2024-05-22 08:23:31,786 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=150.

2024-05-22 08:23:31,791 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,792 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=160, currTerm=159.

2024-05-22 08:23:31,801 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=151, votedFor=nacos2:7848, cost time=11 ms

2024-05-22 08:23:31,803 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:23:31,806 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=151, currTerm=151.

2024-05-22 08:23:31,811 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:23:31,816 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=160, votedFor=0.0.0.0:0, cost time=22 ms

2024-05-22 08:23:31,816 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=154, currTerm=153.

2024-05-22 08:23:31,818 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:23:31,844 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=160, currTerm=160.

2024-05-22 08:23:31,855 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=154, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 08:23:31,859 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=160, votedFor=nacos1:7848, cost time=12 ms

2024-05-22 08:23:31,863 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,864 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,886 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,866 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=154, votedFor=nacos3:7848, cost time=9 ms

2024-05-22 08:23:31,940 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,942 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 08:23:31,943 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:23:31,941 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:26:33,858 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_146.

2024-05-22 08:26:33,858 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_146.

2024-05-22 08:26:33,861 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_143.

2024-05-22 08:26:33,864 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 142 to 144, cost 0 ms.

2024-05-22 08:26:33,920 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_153.

2024-05-22 08:26:33,921 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_153.

2024-05-22 08:26:33,924 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_149.

2024-05-22 08:26:33,929 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 148 to 150, cost 1 ms.

2024-05-22 08:26:33,945 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_144.

2024-05-22 08:26:33,945 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_144.

2024-05-22 08:26:33,947 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_140.

2024-05-22 08:26:33,951 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 139 to 141, cost 0 ms.

2024-05-22 08:42:05,920 INFO Node <naming_persistent_service_v2/nacos2:7848> term 150 start preVote.

2024-05-22 08:42:05,936 INFO Node <naming_instance_metadata/nacos2:7848> term 151 start preVote.

2024-05-22 08:42:05,938 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=151, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:42:05,937 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:42:06,673 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:42:06,672 INFO Node <naming_persistent_service/nacos2:7848> term 160 start preVote.

2024-05-22 08:42:06,673 INFO Node <naming_service_metadata/nacos2:7848> term 154 start preVote.

2024-05-22 08:42:06,673 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:42:06,719 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=152, currTerm=151, because the leader nacos1:7848's lease is still valid.

2024-05-22 08:42:06,768 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=151, currTerm=150, because the leader nacos1:7848's lease is still valid.

2024-05-22 08:42:06,769 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=155, currTerm=154, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:42:06,777 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=154, granted=false.

2024-05-22 08:42:06,794 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=151, granted=false.

2024-05-22 08:42:06,790 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=150, granted=true.

2024-05-22 08:42:06,795 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=160, granted=true.

2024-05-22 08:42:06,862 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=150.

2024-05-22 08:42:06,865 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=152, currTerm=151.

2024-05-22 08:42:06,863 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=160.

2024-05-22 08:42:06,865 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=155, currTerm=154.

2024-05-22 08:42:06,865 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:42:06,869 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=151, currTerm=151, granted=true, requestLastLogId=LogId [index=146, term=150], lastLogId=LogId [index=146, term=150].

2024-05-22 08:42:06,866 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=150, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:42:06,868 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=151, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:42:06,869 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=154, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:42:06,872 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:42:06,879 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=152, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 08:42:06,879 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=155, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 08:42:06,880 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=151, votedFor=nacos2:7848, cost time=11 ms

2024-05-22 08:42:06,883 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=161, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 08:42:06,885 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=151, currTerm=152.

2024-05-22 08:42:06,887 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:42:06,895 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=151, currTerm=151.

2024-05-22 08:42:06,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=152, votedFor=nacos3:7848, cost time=17 ms

2024-05-22 08:42:06,904 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=155, votedFor=nacos1:7848, cost time=18 ms

2024-05-22 08:42:06,909 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=154, currTerm=155.

2024-05-22 08:42:06,909 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=161, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:42:06,911 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:42:06,912 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:42:06,930 INFO onLeaderStart: term=161.

2024-05-22 08:42:06,935 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 08:42:35,591 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499706208s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_persistent_service

2024-05-22 08:42:39,211 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=161, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 08:42:42,218 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=154, lastLogIncluded=0, lastLogIndex=154, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=36, type=Follower] is going to quit

2024-05-22 08:42:42,219 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 08:42:42,438 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=154, lastLogIncluded=0, lastLogIndex=154, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=37, type=Follower] is going to quit

2024-05-22 08:42:43,460 INFO Node <naming_persistent_service_v2/nacos2:7848> term 151 start preVote.

2024-05-22 08:42:43,494 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=151, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:42:45,737 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-22 08:42:46,526 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=147, term=151], lastLogId=LogId [index=147, term=151].

2024-05-22 08:42:47,117 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=162, currTerm=161, granted=true, requestLastLogId=LogId [index=154, term=161], lastLogId=LogId [index=154, term=161].

2024-05-22 08:42:47,973 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=156, currTerm=155, because the leader nacos1:7848's lease is still valid.

2024-05-22 08:42:48,129 INFO Node <naming_persistent_service/nacos2:7848> term 161 start preVote.

2024-05-22 08:42:49,099 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:42:49,427 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=152, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:42:49,508 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:42:49,509 INFO Node <naming_service_metadata/nacos2:7848> term 155 start preVote.

2024-05-22 08:42:49,882 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:42:50,617 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-22 08:42:52,442 INFO Node <naming_persistent_service_v2/nacos2:7848> term 151 start preVote.

2024-05-22 08:42:55,222 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.981481168s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:42:53,426 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-22 08:42:55,117 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=162, votedFor=0.0.0.0:0, cost time=3494 ms

2024-05-22 08:42:55,005 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999739750s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:42:55,339 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:42:55,521 INFO Node <naming_service_metadata/nacos2:7848> term 155 start preVote.

2024-05-22 08:42:55,647 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: ClientCall was cancelled at or after deadline. [closed=[CANCELLED], committed=[remote_addr=nacos3/172.25.0.4:7848]]].

2024-05-22 08:42:56,777 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:42:56,443 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999927727s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:42:57,386 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999913028s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:42:57,556 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-22 08:42:56,707 INFO Node <naming_service_metadata/nacos2:7848> term 155 start preVote.

2024-05-22 08:42:57,163 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=162, votedFor=nacos3:7848, cost time=1415 ms

2024-05-22 08:42:58,427 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=147, term=151], lastLogId=LogId [index=147, term=151].

2024-05-22 08:42:58,826 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999887318s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:42:58,831 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999738907s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:00,383 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999768474s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:00,327 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=156, currTerm=155.

2024-05-22 08:43:01,668 INFO Node <naming_persistent_service_v2/nacos2:7848> term 151 start preVote.

2024-05-22 08:43:00,297 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.998021162s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:04,589 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:43:05,632 INFO Node <naming_instance_metadata/nacos2:7848> term 152 start preVote.

2024-05-22 08:43:07,681 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999655146s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:08,091 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999917016s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:00,326 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.534491894s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:01,663 INFO Node <naming_persistent_service/nacos2:7848> term 162 start preVote.

2024-05-22 08:43:01,783 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999889655s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:01,792 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999777101s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:07,720 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=151, granted=true, requestLastLogId=LogId [index=147, term=151], lastLogId=LogId [index=147, term=151].

2024-05-22 08:43:09,765 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999684913s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:08,103 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999753802s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:07,718 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999083437s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:09,564 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999872351s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:09,585 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.926736108s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 08:43:09,626 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=156, votedFor=0.0.0.0:0, cost time=7947 ms

2024-05-22 08:43:09,783 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=152, currTerm=151.

2024-05-22 08:43:09,773 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=154, term=161], lastLogId=LogId [index=154, term=161].

2024-05-22 08:43:09,875 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=155, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:43:09,973 INFO Node <naming_persistent_service/nacos2:7848> term 162 start preVote.

2024-05-22 08:43:10,096 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999782771s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 08:43:10,072 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=156, votedFor=nacos3:7848, cost time=136 ms

2024-05-22 08:43:10,105 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=154, term=161], lastLogId=LogId [index=154, term=161].

2024-05-22 08:43:10,137 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=152, votedFor=0.0.0.0:0, cost time=258 ms

2024-05-22 08:43:10,140 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=153, currTerm=152.

2024-05-22 08:43:10,164 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=162, granted=true.

2024-05-22 08:43:10,167 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=162.

2024-05-22 08:43:10,149 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=157, currTerm=156, granted=true, requestLastLogId=LogId [index=148, term=155], lastLogId=LogId [index=148, term=155].

2024-05-22 08:43:10,163 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=153, currTerm=152, granted=true, requestLastLogId=LogId [index=147, term=151], lastLogId=LogId [index=147, term=151].

2024-05-22 08:43:10,334 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=152, votedFor=nacos1:7848, cost time=116 ms

2024-05-22 08:43:10,344 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=152, currTerm=152, granted=true, requestLastLogId=LogId [index=147, term=151], lastLogId=LogId [index=147, term=151].

2024-05-22 08:43:10,378 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=153, votedFor=0.0.0.0:0, cost time=214 ms

2024-05-22 08:43:10,406 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=163, votedFor=nacos2:7848, cost time=224 ms

2024-05-22 08:43:10,421 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=153, currTerm=153, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-22 08:43:10,411 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=162, currTerm=163.

2024-05-22 08:43:10,438 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_148.

2024-05-22 08:43:10,454 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_148.

2024-05-22 08:43:10,441 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=163, currTerm=163.

2024-05-22 08:43:10,506 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=157, currTerm=156.

2024-05-22 08:43:10,514 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_144.

2024-05-22 08:43:10,551 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=153, currTerm=152.

2024-05-22 08:43:10,588 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=157, votedFor=0.0.0.0:0, cost time=81 ms

2024-05-22 08:43:10,600 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:43:10,598 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=153, votedFor=nacos1:7848, cost time=171 ms

2024-05-22 08:43:10,629 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=152, currTerm=153.

2024-05-22 08:43:10,630 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=152, currTerm=153.

2024-05-22 08:43:10,627 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:43:10,635 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:43:10,639 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=152, currTerm=153.

2024-05-22 08:43:10,646 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=154, currTerm=153, granted=true, requestLastLogId=LogId [index=145, term=152], lastLogId=LogId [index=145, term=152].

2024-05-22 08:43:10,662 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=152, currTerm=153.

2024-05-22 08:43:10,644 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 143 to 145, cost 6 ms.

2024-05-22 08:43:10,649 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=153, votedFor=0.0.0.0:0, cost time=92 ms

2024-05-22 08:43:10,657 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=157, votedFor=nacos3:7848, cost time=33 ms

2024-05-22 08:43:10,669 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=151, currTerm=153.

2024-05-22 08:43:10,763 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=153, votedFor=nacos1:7848, cost time=46 ms

2024-05-22 08:43:10,845 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=151, currTerm=153.

2024-05-22 08:43:10,901 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:43:10,922 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=154, currTerm=153.

2024-05-22 08:43:11,004 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=154, votedFor=0.0.0.0:0, cost time=70 ms

2024-05-22 08:43:11,063 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=154, votedFor=nacos1:7848, cost time=39 ms

2024-05-22 08:43:11,089 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 08:58:38,075 INFO Node <naming_service_metadata/nacos2:7848> term 157 start preVote.

2024-05-22 08:58:38,078 INFO Node <naming_instance_metadata/nacos2:7848> term 154 start preVote.

2024-05-22 08:58:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 08:58:38,078 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=157, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:58:38,077 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=163, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 08:58:38,076 INFO Node <naming_persistent_service/nacos2:7848> term 163 start preVote.

2024-05-22 08:58:39,124 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_148.

2024-05-22 08:58:39,241 INFO Node <naming_service_metadata/nacos2:7848> term 157 start preVote.

2024-05-22 08:58:39,381 INFO Node <naming_service_metadata/nacos2:7848> term 157 start preVote.

2024-05-22 08:58:39,381 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_148.

2024-05-22 08:58:39,383 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=154, granted=false.

2024-05-22 08:58:39,397 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=149, term=157], lastLogId=LogId [index=149, term=157].

2024-05-22 08:58:39,397 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=154, granted=true.

2024-05-22 08:58:39,403 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=154.

2024-05-22 08:58:39,398 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=154, currTerm=153, because the leader nacos1:7848's lease is still valid.

2024-05-22 08:58:39,406 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=164, currTerm=163, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:58:39,406 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=164, currTerm=163, because the leader nacos3:7848's lease is still valid.

2024-05-22 08:58:39,413 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=155, votedFor=nacos2:7848, cost time=9 ms

2024-05-22 08:58:39,424 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-22 08:58:39,445 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-22 08:58:39,399 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-22 08:58:39,455 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-22 08:58:39,401 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_146.

2024-05-22 08:58:39,404 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 08:58:39,467 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_153.

2024-05-22 08:58:39,430 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=149, term=157], lastLogId=LogId [index=149, term=157].

2024-05-22 08:58:39,451 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=155, currTerm=155, granted=true, requestLastLogId=LogId [index=146, term=154], lastLogId=LogId [index=146, term=154].

2024-05-22 08:58:39,473 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 150 to 154, cost 0 ms.

2024-05-22 08:58:39,454 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_144.

2024-05-22 08:58:39,471 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=157, granted=false.

2024-05-22 08:58:39,480 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=157, granted=false.

2024-05-22 08:58:39,482 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 144 to 147, cost 0 ms.

2024-05-22 08:58:39,483 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=163, granted=false.

2024-05-22 08:58:39,486 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=157, granted=true.

2024-05-22 08:58:39,486 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=157.

2024-05-22 08:58:39,495 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 141 to 145, cost 0 ms.

2024-05-22 08:58:39,504 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=158, votedFor=nacos2:7848, cost time=15 ms

2024-05-22 08:58:39,505 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=164, currTerm=163.

2024-05-22 08:58:39,506 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=155, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:58:39,511 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=163, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:58:39,509 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:58:39,511 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:58:39,514 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:58:39,520 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=164, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 08:58:39,526 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=164, votedFor=nacos1:7848, cost time=5 ms

2024-05-22 08:58:39,528 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=163, currTerm=164.

2024-05-22 08:58:39,530 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=154, currTerm=153.

2024-05-22 08:58:39,531 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=153, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 08:58:39,533 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:58:39,539 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=154, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 08:58:39,546 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 08:58:39,556 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=158, currTerm=158.

2024-05-22 08:58:39,556 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=154, votedFor=nacos3:7848, cost time=12 ms

2024-05-22 08:58:39,558 INFO onLeaderStart: term=155.

2024-05-22 08:58:39,564 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=158, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 08:58:39,568 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 08:58:39,569 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 08:58:39,585 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 08:58:39,586 INFO onLeaderStart: term=158.

2024-05-22 08:58:39,587 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 08:59:36,650 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499763917s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_instance_metadata

2024-05-22 08:59:40,501 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.499693299s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_service_metadata

2024-05-22 09:14:43,534 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=155, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:14:43,903 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=164, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:14:44,672 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=32, type=Follower] is going to quit

2024-05-22 09:14:44,677 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=147, lastLogIncluded=0, lastLogIndex=147, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=33, type=Follower] is going to quit

2024-05-22 09:14:43,902 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=154, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:14:43,901 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 09:14:43,894 INFO Node <naming_persistent_service_v2/nacos2:7848> term 154 start preVote.

2024-05-22 09:14:43,831 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 09:14:43,536 INFO Node <naming_persistent_service/nacos2:7848> term 164 start preVote.

2024-05-22 09:14:44,674 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-22 09:14:44,673 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:14:43,534 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=158, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:14:44,744 INFO Node <naming_persistent_service/nacos2:7848> term 164 start preVote.

2024-05-22 09:14:44,744 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-22 09:14:44,794 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=155, currTerm=154, granted=true, requestLastLogId=LogId [index=149, term=154], lastLogId=LogId [index=149, term=154].

2024-05-22 09:14:44,837 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_148.

2024-05-22 09:14:44,839 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:14:44,855 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 09:14:44,855 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=27, type=Follower] is going to quit

2024-05-22 09:14:44,881 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=165, currTerm=164, because the leader nacos1:7848's lease is still valid.

2024-05-22 09:14:44,881 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=147, term=155], lastLogId=LogId [index=147, term=155].

2024-05-22 09:14:44,891 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=150, lastLogIncluded=0, lastLogIndex=150, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=28, type=Follower] is going to quit

2024-05-22 09:14:44,916 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 145 to 149, cost 1 ms.

2024-05-22 09:14:44,883 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 09:14:44,897 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=155, granted=true, requestLastLogId=LogId [index=147, term=155], lastLogId=LogId [index=147, term=155].

2024-05-22 09:14:44,903 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=155, currTerm=154.

2024-05-22 09:14:44,919 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=159, currTerm=158, granted=true, requestLastLogId=LogId [index=150, term=158], lastLogId=LogId [index=150, term=158].

2024-05-22 09:14:44,945 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=164, granted=false.

2024-05-22 09:14:44,997 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=165, currTerm=164.

2024-05-22 09:14:44,997 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=164, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 09:14:44,967 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:44,982 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=156, currTerm=155.

2024-05-22 09:14:44,987 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 09:14:44,994 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=154, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 09:14:44,998 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=159, currTerm=158, granted=true, requestLastLogId=LogId [index=150, term=158], lastLogId=LogId [index=150, term=158].

2024-05-22 09:14:45,034 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=165, votedFor=0.0.0.0:0, cost time=32 ms

2024-05-22 09:14:45,070 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=156, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-22 09:14:45,039 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=155, votedFor=0.0.0.0:0, cost time=47 ms

2024-05-22 09:14:45,052 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 09:14:45,060 INFO The channel nacos1:7848 has successfully established.

2024-05-22 09:14:45,093 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:45,103 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:45,106 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=159, votedFor=0.0.0.0:0, cost time=37 ms

2024-05-22 09:14:45,129 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=159, currTerm=159.

2024-05-22 09:14:45,116 INFO The channel nacos3:7848 has successfully established.

2024-05-22 09:14:45,133 INFO Peer nacos3:7848 is connected.

2024-05-22 09:14:45,116 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=165, votedFor=nacos3:7848, cost time=46 ms

2024-05-22 09:14:45,134 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=164, currTerm=165.

2024-05-22 09:14:45,116 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 09:14:45,116 INFO Peer nacos1:7848 is connected.

2024-05-22 09:14:45,133 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=156, votedFor=nacos3:7848, cost time=16 ms

2024-05-22 09:14:45,133 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=155, votedFor=nacos1:7848, cost time=21 ms

2024-05-22 09:14:45,135 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=164, currTerm=165.

2024-05-22 09:14:45,142 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=154, currTerm=155.

2024-05-22 09:14:45,147 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=154, currTerm=155.

2024-05-22 09:14:45,142 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=159, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 09:14:45,148 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=164, currTerm=165.

2024-05-22 09:14:45,160 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=159, currTerm=159, granted=true, requestLastLogId=LogId [index=150, term=158], lastLogId=LogId [index=150, term=158].

2024-05-22 09:14:45,162 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=159, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 09:14:45,162 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:45,164 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:45,166 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:14:48,539 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 09:14:48,541 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 09:14:48,542 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 09:14:48,543 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 09:15:13,075 INFO Node <naming_instance_metadata/nacos2:7848> term 156 start preVote.

2024-05-22 09:15:14,076 INFO Node <naming_persistent_service/nacos2:7848> term 165 start preVote.

2024-05-22 09:15:14,089 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:15:14,257 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=156, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:15:15,647 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=157, currTerm=156.

2024-05-22 09:15:17,492 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=157, votedFor=0.0.0.0:0, cost time=1791 ms

2024-05-22 09:15:17,544 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=165, granted=true.

2024-05-22 09:15:17,782 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=157, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:18,012 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=165.

2024-05-22 09:15:18,146 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 09:15:18,075 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=156, currTerm=157.

2024-05-22 09:15:18,503 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=166, votedFor=nacos2:7848, cost time=311 ms

2024-05-22 09:15:19,741 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=157, votedFor=nacos1:7848, cost time=1269 ms

2024-05-22 09:15:20,101 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999752136s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:20,578 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999719385s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:23,584 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999442109s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:23,740 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999760367s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:23,839 INFO Node <naming_instance_metadata/nacos2:7848> term 157 start preVote.

2024-05-22 09:15:24,009 WARN Candidate node <naming_persistent_service/nacos2:7848> term 166 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 09:15:24,231 INFO Node <naming_persistent_service/nacos2:7848> term 166 start preVote.

2024-05-22 09:15:24,435 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:24,790 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=157, granted=true.

2024-05-22 09:15:24,864 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=157.

2024-05-22 09:15:24,847 INFO Node <naming_persistent_service_v2/nacos2:7848> term 155 start preVote.

2024-05-22 09:15:24,848 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=155, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:15:25,864 INFO Node <naming_service_metadata/nacos2:7848> term 159 start preVote.

2024-05-22 09:15:25,926 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=159, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:15:28,503 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=158, votedFor=nacos2:7848, cost time=2699 ms

2024-05-22 09:15:29,745 INFO Node <naming_persistent_service/nacos2:7848> term 166 start preVote.

2024-05-22 09:15:30,582 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999778470s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:30,890 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.998827266s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:31,054 WARN Candidate node <naming_instance_metadata/nacos2:7848> term 158 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 09:15:31,791 INFO Node <naming_instance_metadata/nacos2:7848> term 158 start preVote.

2024-05-22 09:15:31,686 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999117168s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:33,282 INFO Node <naming_persistent_service_v2/nacos2:7848> term 155 start preVote.

2024-05-22 09:15:33,494 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=158, currTerm=158.

2024-05-22 09:15:31,696 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999861455s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:37,557 INFO Node <naming_instance_metadata/nacos2:7848> term 158 start preVote.

2024-05-22 09:15:31,776 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.998692991s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:33,896 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=166, currTerm=166, granted=true, requestLastLogId=LogId [index=157, term=165], lastLogId=LogId [index=157, term=165].

2024-05-22 09:15:33,590 INFO Node <naming_service_metadata/nacos2:7848> term 159 start preVote.

2024-05-22 09:15:36,931 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=155, granted=true.

2024-05-22 09:15:38,877 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=159, granted=true.

2024-05-22 09:15:34,724 WARN Node <naming_instance_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999755990s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:38,883 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=155.

2024-05-22 09:15:39,460 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999750191s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:37,225 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999212083s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:37,260 WARN Node <naming_service_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999156000s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:37,329 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999576250s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:38,595 INFO Node <naming_persistent_service/nacos2:7848> term 166 start preVote.

2024-05-22 09:15:38,652 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999751537s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:38,603 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.598973651s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:38,908 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=159.

2024-05-22 09:15:39,535 WARN Node <naming_persistent_service_v2/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.149321632s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:39,568 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=150, term=155], lastLogId=LogId [index=150, term=155].

2024-05-22 09:15:40,163 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=157, term=165], lastLogId=LogId [index=157, term=165].

2024-05-22 09:15:44,472 INFO Node <naming_instance_metadata/nacos2:7848> term 158 start preVote.

2024-05-22 09:15:50,192 WARN Node <naming_service_metadata/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999759607s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:44,633 WARN Candidate node <naming_persistent_service_v2/nacos2:7848> term 156 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 09:15:48,838 INFO Node <naming_persistent_service/nacos2:7848> term 166 start preVote.

2024-05-22 09:15:50,190 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.965969244s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:50,205 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=159, currTerm=158, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:50,321 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=158, granted=true.

2024-05-22 09:15:50,323 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=158.

2024-05-22 09:15:50,218 WARN Node <naming_service_metadata/nacos2:7848> RequestVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after -2.237670763s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:50,222 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999711510s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:15:50,231 INFO Node <naming_persistent_service_v2/nacos2:7848> term 156 start preVote.

2024-05-22 09:15:50,231 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=160, votedFor=nacos2:7848, cost time=33 ms

2024-05-22 09:15:50,308 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=157, term=165], lastLogId=LogId [index=157, term=165].

2024-05-22 09:15:50,346 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=167, currTerm=166, granted=true, requestLastLogId=LogId [index=157, term=165], lastLogId=LogId [index=157, term=165].

2024-05-22 09:15:50,349 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=151, term=159], lastLogId=LogId [index=151, term=159].

2024-05-22 09:15:50,350 WARN Node <naming_service_metadata/nacos2:7848> raise term 160 when get lastLogId.

2024-05-22 09:15:50,369 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=161, currTerm=160, granted=true, requestLastLogId=LogId [index=151, term=159], lastLogId=LogId [index=151, term=159].

2024-05-22 09:15:50,470 WARN Candidate node <naming_service_metadata/nacos2:7848> term 160 steps down when election reaching vote timeout: fail to get quorum vote-granted.

2024-05-22 09:15:50,510 INFO Node <naming_service_metadata/nacos2:7848> term 160 start preVote.

2024-05-22 09:15:50,514 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=159, votedFor=nacos2:7848, cost time=163 ms

2024-05-22 09:15:50,534 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=160, currTerm=160.

2024-05-22 09:15:50,563 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=151, term=159], lastLogId=LogId [index=151, term=159].

2024-05-22 09:15:50,746 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=161, currTerm=160.

2024-05-22 09:15:50,585 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=156, votedFor=nacos2:7848, cost time=25 ms

2024-05-22 09:15:50,747 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=167, currTerm=166.

2024-05-22 09:15:50,780 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=159, currTerm=159, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:50,780 WARN Node <naming_persistent_service/nacos2:7848> PreVote to nacos1:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.999852604s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]].

2024-05-22 09:15:50,831 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_FOLLOWER.

2024-05-22 09:15:50,879 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=150, term=155], lastLogId=LogId [index=150, term=155].

2024-05-22 09:15:50,880 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=159, currTerm=159, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:50,886 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=161, votedFor=0.0.0.0:0, cost time=125 ms

2024-05-22 09:15:50,917 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=167, votedFor=0.0.0.0:0, cost time=55 ms

2024-05-22 09:15:50,947 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=166, currTerm=167.

2024-05-22 09:15:50,894 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:15:50,928 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=161, granted=true, requestLastLogId=LogId [index=151, term=159], lastLogId=LogId [index=151, term=159].

2024-05-22 09:15:50,935 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=156, currTerm=156, granted=true, requestLastLogId=LogId [index=150, term=155], lastLogId=LogId [index=150, term=155].

2024-05-22 09:15:50,973 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=159, currTerm=159, granted=true, requestLastLogId=LogId [index=148, term=156], lastLogId=LogId [index=148, term=156].

2024-05-22 09:15:50,986 WARN Node <naming_service_metadata/nacos2:7848> raise term 161 when get lastLogId.

2024-05-22 09:15:51,030 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=160, currTerm=161.

2024-05-22 09:15:50,997 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=156, granted=true.

2024-05-22 09:15:51,057 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=156.

2024-05-22 09:15:51,069 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=167, votedFor=nacos3:7848, cost time=111 ms

2024-05-22 09:15:51,095 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=167, currTerm=167.

2024-05-22 09:15:51,098 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=161, votedFor=nacos3:7848, cost time=52 ms

2024-05-22 09:15:51,101 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:15:51,104 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:15:51,106 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:15:51,117 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=157, votedFor=nacos2:7848, cost time=55 ms

2024-05-22 09:15:51,131 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=160, currTerm=161.

2024-05-22 09:15:51,193 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:15:51,214 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 09:15:51,223 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=166, currTerm=167.

2024-05-22 09:15:51,253 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=157, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:15:51,266 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:15:51,276 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:15:51,389 INFO onLeaderStart: term=159.

2024-05-22 09:15:51,500 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 09:15:51,602 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:15:51,611 INFO onLeaderStart: term=157.

2024-05-22 09:15:51,691 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:24:31,665 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=167, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:24:31,666 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:24:31,665 INFO Node <naming_persistent_service/nacos2:7848> term 167 start preVote.

2024-05-22 09:24:31,666 INFO Node <naming_service_metadata/nacos2:7848> term 161 start preVote.

2024-05-22 09:24:32,474 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=157, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:24:32,566 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=168, currTerm=167, granted=true, requestLastLogId=LogId [index=158, term=167], lastLogId=LogId [index=158, term=167].

2024-05-22 09:24:31,665 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:24:32,567 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:24:32,568 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=161, granted=false.

2024-05-22 09:24:32,568 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=151, lastLogIncluded=0, lastLogIndex=151, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=35, type=Follower] is going to quit

2024-05-22 09:24:32,589 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=151, lastLogIncluded=0, lastLogIndex=151, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=36, type=Follower] is going to quit

2024-05-22 09:24:32,570 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=168, currTerm=167.

2024-05-22 09:24:32,573 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=149, lastLogIncluded=0, lastLogIndex=149, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=35, type=Follower] is going to quit

2024-05-22 09:24:32,622 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=149, lastLogIncluded=0, lastLogIndex=149, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=34, type=Follower] is going to quit

2024-05-22 09:24:32,573 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:24:32,625 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=158, currTerm=157, granted=true, requestLastLogId=LogId [index=151, term=157], lastLogId=LogId [index=151, term=157].

2024-05-22 09:24:32,632 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=149, term=159], lastLogId=LogId [index=149, term=159].

2024-05-22 09:24:32,624 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:24:32,716 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=160, currTerm=159.

2024-05-22 09:24:32,724 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=160, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 09:24:32,725 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=149, term=159], lastLogId=LogId [index=149, term=159].

2024-05-22 09:24:32,734 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=158, currTerm=157.

2024-05-22 09:24:32,738 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=168, votedFor=0.0.0.0:0, cost time=145 ms

2024-05-22 09:24:32,739 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=160, votedFor=nacos1:7848, cost time=13 ms

2024-05-22 09:24:32,741 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=160, granted=true, requestLastLogId=LogId [index=149, term=159], lastLogId=LogId [index=149, term=159].

2024-05-22 09:24:32,742 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=167, currTerm=168.

2024-05-22 09:24:32,744 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=158, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 09:24:32,746 WARN Node <naming_persistent_service/nacos2:7848> ignore stale AppendEntriesRequest from nacos3:7848, term=167, currTerm=168.

2024-05-22 09:24:32,753 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=158, votedFor=nacos3:7848, cost time=8 ms

2024-05-22 09:24:32,753 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=167, currTerm=168.

2024-05-22 09:24:32,757 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:24:32,758 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=158, currTerm=158, granted=true, requestLastLogId=LogId [index=151, term=157], lastLogId=LogId [index=151, term=157].

2024-05-22 09:24:32,762 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=168, votedFor=nacos1:7848, cost time=8 ms

2024-05-22 09:24:32,771 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=161, granted=false.

2024-05-22 09:24:32,773 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=168, status=Status[EVOTEFORCANDIDATE<10010>: Raft node votes for some candidate, step down to restart election_timer.]].

2024-05-22 09:24:32,788 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=158, currTerm=158, granted=true, requestLastLogId=LogId [index=151, term=157], lastLogId=LogId [index=151, term=157].

2024-05-22 09:24:32,791 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=158, currTerm=158.

2024-05-22 09:24:32,792 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:24:32,807 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:25:12,668 INFO Node <naming_instance_metadata/nacos2:7848> term 160 start preVote.

2024-05-22 09:25:12,729 INFO Node <naming_persistent_service_v2/nacos2:7848> term 158 start preVote.

2024-05-22 09:25:12,677 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:25:12,730 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:25:12,816 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:25:12,725 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:25:12,724 INFO Node <naming_persistent_service/nacos2:7848> term 168 start preVote.

2024-05-22 09:25:12,715 INFO Node <naming_service_metadata/nacos2:7848> term 161 start preVote.

2024-05-22 09:25:16,328 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=160, granted=false.

2024-05-22 09:25:16,697 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=158, granted=false.

2024-05-22 09:25:16,958 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=161, granted=false.

2024-05-22 09:25:17,939 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=161, granted=false.

2024-05-22 09:25:18,830 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=158, granted=false.

2024-05-22 09:25:18,897 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=168, granted=false.

2024-05-22 09:25:19,936 WARN Node <naming_instance_metadata/nacos2:7848> PreVote to nacos3:7848 error: Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 4.848560311s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]].

2024-05-22 09:25:20,130 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=168, granted=false.

2024-05-22 09:42:09,207 INFO Node <naming_service_metadata/nacos2:7848> term 161 start preVote.

2024-05-22 09:42:09,999 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:42:09,982 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:42:09,982 INFO Node <naming_persistent_service/nacos2:7848> term 168 start preVote.

2024-05-22 09:42:09,983 INFO Node <naming_instance_metadata/nacos2:7848> term 160 start preVote.

2024-05-22 09:42:09,988 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 09:42:10,154 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-22 09:42:10,156 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-22 09:42:10,129 INFO Node <naming_persistent_service_v2/nacos2:7848> term 158 start preVote.

2024-05-22 09:42:10,129 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 09:42:10,146 INFO Node <naming_persistent_service/nacos2:7848> term 168 start preVote.

2024-05-22 09:42:10,188 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_152.

2024-05-22 09:42:10,219 INFO Node <naming_persistent_service_v2/nacos2:7848> term 158 start preVote.

2024-05-22 09:42:10,266 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_146.

2024-05-22 09:42:10,279 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_152.

2024-05-22 09:42:10,280 INFO Node <naming_service_metadata/nacos2:7848> term 161 start preVote.

2024-05-22 09:42:10,282 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-22 09:42:10,420 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-22 09:42:10,340 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_148.

2024-05-22 09:42:10,415 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 145 to 147, cost 2 ms.

2024-05-22 09:42:10,435 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=159, currTerm=158, because the leader nacos3:7848's lease is still valid.

2024-05-22 09:42:10,459 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_155.

2024-05-22 09:42:10,467 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 154 to 156, cost 0 ms.

2024-05-22 09:42:10,469 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=168, granted=true.

2024-05-22 09:42:10,471 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=168.

2024-05-22 09:42:10,473 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=168, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 09:42:10,474 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=160, granted=true.

2024-05-22 09:42:10,474 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=160.

2024-05-22 09:42:10,480 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=162, currTerm=161, because the leader nacos3:7848's lease is still valid.

2024-05-22 09:42:10,471 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos1:7848, term=158, granted=false.

2024-05-22 09:42:10,480 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 09:42:10,482 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=169, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 09:42:10,485 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=162, currTerm=161, because the leader nacos3:7848's lease is still valid.

2024-05-22 09:42:10,501 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=161, votedFor=nacos2:7848, cost time=24 ms

2024-05-22 09:42:10,504 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=161, granted=false.

2024-05-22 09:42:10,505 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=158, granted=true.

2024-05-22 09:42:10,546 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=158.

2024-05-22 09:42:10,554 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,554 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,506 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 147 to 149, cost 1 ms.

2024-05-22 09:42:10,524 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,545 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=161, granted=false.

2024-05-22 09:42:10,561 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=161, granted=true.

2024-05-22 09:42:10,562 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=161.

2024-05-22 09:42:10,546 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=161, currTerm=161, granted=true, requestLastLogId=LogId [index=150, term=160], lastLogId=LogId [index=150, term=160].

2024-05-22 09:42:10,563 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,557 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=158, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 09:42:10,569 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=161, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 09:42:10,561 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=169, currTerm=169, granted=true, requestLastLogId=LogId [index=159, term=168], lastLogId=LogId [index=159, term=168].

2024-05-22 09:42:10,572 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,573 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=162, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 09:42:10,573 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 09:42:10,567 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=161, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:42:10,575 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:42:10,577 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:42:10,577 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=162, currTerm=162.

2024-05-22 09:42:10,577 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=169, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:42:10,583 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=159, votedFor=nacos2:7848, cost time=26 ms

2024-05-22 09:42:10,588 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:42:10,589 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:42:10,591 INFO onLeaderStart: term=161.

2024-05-22 09:42:10,624 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=159, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:42:10,625 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:42:10,626 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=162, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 09:42:10,636 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:42:10,630 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 09:42:10,631 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:42:10,632 INFO onLeaderStart: term=169.

2024-05-22 09:42:10,642 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 09:42:10,646 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 09:42:10,648 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=159, currTerm=159.

2024-05-22 09:42:10,654 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:42:10,662 INFO onLeaderStart: term=159.

2024-05-22 09:42:10,669 INFO onLeaderStart: term=162.

2024-05-22 09:42:10,669 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 09:42:24,414 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.451226754s. [closed=[], open=[[remote_addr=nacos1/172.25.0.3:7848]]]], groupId=naming_persistent_service

2024-05-22 09:42:40,642 WARN Fail to issue RPC to nacos3:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:DEADLINE_EXCEEDED: deadline exceeded after 2.456423722s. [closed=[], open=[[remote_addr=nacos3/172.25.0.4:7848]]]], groupId=naming_service_metadata

2024-05-22 09:58:46,768 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=162, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:58:46,847 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:58:46,779 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=169, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:58:47,122 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=160, lastLogIncluded=0, lastLogIndex=160, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=38, type=Follower] is going to quit

2024-05-22 09:58:47,123 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=160, lastLogIncluded=0, lastLogIndex=160, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=39, type=Follower] is going to quit

2024-05-22 09:58:46,779 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=159, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:58:46,779 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=161, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 09:58:47,268 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=151, lastLogIncluded=0, lastLogIndex=151, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=36, type=Follower] is going to quit

2024-05-22 09:58:47,272 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=151, lastLogIncluded=0, lastLogIndex=151, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=37, type=Follower] is going to quit

2024-05-22 09:58:46,848 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=30, type=Follower] is going to quit

2024-05-22 09:58:47,122 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:58:47,156 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=38, type=Follower] is going to quit

2024-05-22 09:58:47,275 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=39, type=Follower] is going to quit

2024-05-22 09:58:47,159 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-22 09:58:47,215 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:58:47,270 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 09:58:47,220 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=170, currTerm=169, granted=true, requestLastLogId=LogId [index=160, term=169], lastLogId=LogId [index=160, term=169].

2024-05-22 09:58:47,382 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=170, currTerm=169, granted=true, requestLastLogId=LogId [index=160, term=169], lastLogId=LogId [index=160, term=169].

2024-05-22 09:58:47,273 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=162, currTerm=161, granted=true, requestLastLogId=LogId [index=151, term=161], lastLogId=LogId [index=151, term=161].

2024-05-22 09:58:47,274 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=31, type=Follower] is going to quit

2024-05-22 09:58:47,407 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,412 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,284 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=153, term=159], lastLogId=LogId [index=153, term=159].

2024-05-22 09:58:47,291 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,292 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,423 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,425 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,292 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,359 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-22 09:58:47,432 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,408 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=153, term=162], lastLogId=LogId [index=153, term=162].

2024-05-22 09:58:47,440 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=153, term=162], lastLogId=LogId [index=153, term=162].

2024-05-22 09:58:47,435 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,457 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=163, currTerm=162, granted=true, requestLastLogId=LogId [index=153, term=162], lastLogId=LogId [index=153, term=162].

2024-05-22 09:58:47,439 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_150.

2024-05-22 09:58:47,448 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=160, currTerm=159, granted=true, requestLastLogId=LogId [index=153, term=159], lastLogId=LogId [index=153, term=159].

2024-05-22 09:58:47,448 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-22 09:58:47,465 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,466 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,470 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,488 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,488 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 149 to 151, cost 0 ms.

2024-05-22 09:58:47,489 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=160, currTerm=159.

2024-05-22 09:58:47,491 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=162, votedFor=0.0.0.0:0, cost time=21 ms

2024-05-22 09:58:47,503 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=170, currTerm=169.

2024-05-22 09:58:47,506 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=163, currTerm=162.

2024-05-22 09:58:47,524 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=160, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 09:58:47,525 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,537 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=170, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-22 09:58:47,540 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=162, votedFor=nacos3:7848, cost time=21 ms

2024-05-22 09:58:47,548 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=163, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-22 09:58:47,549 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=170, currTerm=170.

2024-05-22 09:58:47,561 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=160, votedFor=nacos1:7848, cost time=29 ms

2024-05-22 09:58:47,584 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=170, votedFor=nacos1:7848, cost time=30 ms

2024-05-22 09:58:47,586 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,594 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=163, votedFor=nacos1:7848, cost time=43 ms

2024-05-22 09:58:47,607 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,607 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,608 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=163, currTerm=163.

2024-05-22 09:58:47,624 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 09:58:47,635 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 10:15:07,401 INFO Node <naming_service_metadata/nacos2:7848> term 163 start preVote.

2024-05-22 10:15:07,931 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-22 10:15:08,036 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-22 10:15:07,912 INFO Node <naming_persistent_service/nacos2:7848> term 170 start preVote.

2024-05-22 10:15:07,912 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=170, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 10:15:07,911 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 10:15:07,912 INFO Node <naming_instance_metadata/nacos2:7848> term 162 start preVote.

2024-05-22 10:15:07,723 INFO Node <naming_persistent_service_v2/nacos2:7848> term 160 start preVote.

2024-05-22 10:15:07,889 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 10:15:07,984 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_161.

2024-05-22 10:15:08,052 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_161.

2024-05-22 10:15:08,053 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_150.

2024-05-22 10:15:07,401 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=163, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 10:15:08,066 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_159.

2024-05-22 10:15:08,135 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 156 to 160, cost 1 ms.

2024-05-22 10:15:08,156 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=161, currTerm=160, because the leader nacos1:7848's lease is still valid.

2024-05-22 10:15:08,179 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=160, granted=true.

2024-05-22 10:15:08,180 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=160.

2024-05-22 10:15:08,156 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-22 10:15:08,188 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-22 10:15:08,159 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 147 to 151, cost 1 ms.

2024-05-22 10:15:08,198 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_152.

2024-05-22 10:15:08,187 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=160, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 10:15:08,219 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=161, votedFor=nacos2:7848, cost time=32 ms

2024-05-22 10:15:08,239 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=170, granted=false.

2024-05-22 10:15:08,243 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 149 to 153, cost 1 ms.

2024-05-22 10:15:08,248 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=163, granted=true.

2024-05-22 10:15:08,250 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=163.

2024-05-22 10:15:08,252 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=163, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 10:15:08,253 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=164, granted=true, requestLastLogId=LogId [index=154, term=163], lastLogId=LogId [index=154, term=163].

2024-05-22 10:15:08,256 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=164, granted=true, requestLastLogId=LogId [index=154, term=163], lastLogId=LogId [index=154, term=163].

2024-05-22 10:15:08,276 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=163, currTerm=162, because the leader nacos3:7848's lease is still valid.

2024-05-22 10:15:08,280 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=170, granted=true.

2024-05-22 10:15:08,281 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=170.

2024-05-22 10:15:08,283 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=170, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 10:15:08,286 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=164, votedFor=nacos2:7848, cost time=14 ms

2024-05-22 10:15:08,288 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 10:15:08,291 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=162, granted=false.

2024-05-22 10:15:08,319 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos3:7848, term=162, granted=true.

2024-05-22 10:15:08,320 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=162.

2024-05-22 10:15:08,321 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 10:15:08,489 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=163, votedFor=nacos2:7848, cost time=167 ms

2024-05-22 10:15:08,679 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=171, votedFor=nacos2:7848, cost time=385 ms

2024-05-22 10:15:08,767 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=161, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 10:15:08,778 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 10:15:08,786 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 10:15:08,814 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=171, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 10:15:08,816 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=163, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 10:15:08,823 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 10:15:08,884 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=164, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 10:15:08,923 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 10:15:08,908 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 10:15:08,953 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 10:15:08,973 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 10:15:08,975 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 10:15:09,131 INFO onLeaderStart: term=163.

2024-05-22 10:15:09,194 INFO onLeaderStart: term=164.

2024-05-22 10:15:09,194 INFO onLeaderStart: term=161.

2024-05-22 10:15:09,196 INFO onLeaderStart: term=171.

2024-05-22 10:15:09,222 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 10:15:09,225 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 10:15:09,228 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 10:15:09,229 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 10:15:09,232 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 10:15:12,430 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 10:15:12,432 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 10:15:12,434 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 10:15:12,443 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 10:28:46,050 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_155.

2024-05-22 10:28:46,051 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_155.

2024-05-22 10:28:46,056 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_153.

2024-05-22 10:28:46,072 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 151 to 154, cost 1 ms.

2024-05-22 10:28:52,562 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 10:28:52,566 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 10:28:52,567 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 10:28:52,568 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 10:45:07,923 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_153.

2024-05-22 10:45:07,924 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_162.

2024-05-22 10:45:07,924 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_153.

2024-05-22 10:45:07,925 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_162.

2024-05-22 10:45:07,927 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_152.

2024-05-22 10:45:07,931 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_161.

2024-05-22 10:45:07,939 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 151 to 153, cost 2 ms.

2024-05-22 10:45:07,941 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 160 to 162, cost 2 ms.

2024-05-22 10:45:08,060 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_155.

2024-05-22 10:45:08,061 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_155.

2024-05-22 10:45:08,063 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_154.

2024-05-22 10:45:08,069 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 153 to 155, cost 0 ms.

2024-05-22 10:45:09,260 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 10:45:13,288 INFO Connection disconnected: /172.25.0.3:35446

2024-05-22 10:58:45,987 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 154 to 156, cost 0 ms.

2024-05-22 11:15:07,903 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 153 to 154, cost 0 ms.

2024-05-22 11:15:07,903 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 162 to 163, cost 1 ms.

2024-05-22 11:15:08,056 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 155 to 156, cost 0 ms.

2024-05-22 11:28:45,979 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 11:45:07,941 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 1 ms.

2024-05-22 11:45:07,941 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 0 ms.

2024-05-22 11:45:08,094 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 0 ms.

2024-05-22 11:58:46,025 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 12:15:07,979 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 0 ms.

2024-05-22 12:15:07,979 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 0 ms.

2024-05-22 12:15:08,126 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 1 ms.

2024-05-22 12:28:46,042 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 1 ms.

2024-05-22 12:45:07,978 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 0 ms.

2024-05-22 12:45:07,978 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 0 ms.

2024-05-22 12:45:08,131 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 1 ms.

2024-05-22 12:58:45,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 13:15:07,929 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 0 ms.

2024-05-22 13:15:07,929 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 0 ms.

2024-05-22 13:15:08,082 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 0 ms.

2024-05-22 13:28:45,975 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 13:45:07,852 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 0 ms.

2024-05-22 13:45:07,852 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 0 ms.

2024-05-22 13:45:08,003 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 0 ms.

2024-05-22 13:58:45,854 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 14:10:21,104 WARN Node <naming_persistent_service_v2/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=161, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 14:10:21,134 WARN Node <naming_service_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=164, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 14:10:21,115 WARN Node <naming_persistent_service/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=171, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 14:10:21,115 WARN Node <naming_instance_metadata/nacos2:7848> steps down when alive nodes don't satisfy quorum, term=163, deadNodes=nacos3:7848,nacos1:7848, conf=nacos3:7848,nacos1:7848,nacos2:7848.

2024-05-22 14:10:22,550 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=39, type=Follower] is going to quit

2024-05-22 14:10:22,265 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 14:10:22,274 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=32, type=Follower] is going to quit

2024-05-22 14:10:22,565 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=33, type=Follower] is going to quit

2024-05-22 14:10:22,275 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 14:10:22,275 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=40, type=Follower] is going to quit

2024-05-22 14:10:22,586 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=155, lastLogIncluded=0, lastLogIndex=155, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=41, type=Follower] is going to quit

2024-05-22 14:10:22,551 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 14:10:22,551 INFO onLeaderStop: status=Status[ERAFTTIMEDOUT<10001>: Majority of the group dies: 2/3].

2024-05-22 14:10:22,548 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=162, lastLogIncluded=0, lastLogIndex=162, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=41, type=Follower] is going to quit

2024-05-22 14:10:22,622 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=162, lastLogIncluded=0, lastLogIndex=162, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=42, type=Follower] is going to quit

2024-05-22 14:10:22,562 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=153, lastLogIncluded=0, lastLogIndex=153, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=40, type=Follower] is going to quit

2024-05-22 14:10:22,625 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,605 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,612 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,633 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,643 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,644 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,680 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,680 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,681 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,696 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,698 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=155, term=164], lastLogId=LogId [index=155, term=164].

2024-05-22 14:10:22,696 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,699 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=165, currTerm=164, granted=true, requestLastLogId=LogId [index=155, term=164], lastLogId=LogId [index=155, term=164].

2024-05-22 14:10:22,698 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=172, currTerm=171, granted=true, requestLastLogId=LogId [index=162, term=171], lastLogId=LogId [index=162, term=171].

2024-05-22 14:10:22,720 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos3:7848, term=162, currTerm=161, granted=true, requestLastLogId=LogId [index=155, term=161], lastLogId=LogId [index=155, term=161].

2024-05-22 14:10:22,730 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=164, currTerm=163, granted=true, requestLastLogId=LogId [index=153, term=163], lastLogId=LogId [index=153, term=163].

2024-05-22 14:10:22,731 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,731 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,736 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,737 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=172, currTerm=171.

2024-05-22 14:10:22,744 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,751 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=172, votedFor=0.0.0.0:0, cost time=12 ms

2024-05-22 14:10:22,752 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=165, currTerm=164.

2024-05-22 14:10:22,754 ERROR handleRequest group_id: "naming_instance_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,761 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=164, currTerm=163.

2024-05-22 14:10:22,768 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=172, votedFor=nacos3:7848, cost time=15 ms

2024-05-22 14:10:22,775 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=165, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-22 14:10:22,777 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=162, currTerm=161.

2024-05-22 14:10:22,780 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=164, votedFor=0.0.0.0:0, cost time=17 ms

2024-05-22 14:10:22,784 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 14:10:22,791 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=165, votedFor=nacos3:7848, cost time=15 ms

2024-05-22 14:10:22,793 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=162, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 14:10:22,798 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=164, votedFor=nacos3:7848, cost time=17 ms

2024-05-22 14:10:22,798 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos1:7848, term=164, currTerm=164, granted=true, requestLastLogId=LogId [index=153, term=163], lastLogId=LogId [index=153, term=163].

2024-05-22 14:10:22,801 ERROR handleRequest group_id: "naming_service_metadata"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:10:22,808 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=162, votedFor=nacos3:7848, cost time=14 ms

2024-05-22 14:10:22,814 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=162, currTerm=162, granted=true, requestLastLogId=LogId [index=155, term=161], lastLogId=LogId [index=155, term=161].

2024-05-22 14:10:22,815 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 14:10:22,824 INFO The channel nacos1:7848 has successfully established.

2024-05-22 14:10:22,821 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=165, currTerm=165, because the leader nacos3:7848's lease is still valid.

2024-05-22 14:26:35,160 INFO Node <naming_persistent_service_v2/nacos2:7848> term 162 start preVote.

2024-05-22 14:26:35,450 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=172, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 14:26:35,450 INFO Node <naming_persistent_service/nacos2:7848> term 172 start preVote.

2024-05-22 14:26:35,458 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos3:7848.]].

2024-05-22 14:26:35,459 INFO Node <naming_instance_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=165, currTerm=164, because the leader nacos3:7848's lease is still valid.

2024-05-22 14:26:35,560 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=163, currTerm=162, because the leader nacos3:7848's lease is still valid.

2024-05-22 14:26:35,569 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-22 14:26:35,570 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-22 14:26:35,573 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-22 14:26:35,574 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-22 14:26:35,579 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_162.

2024-05-22 14:26:35,579 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-22 14:26:35,654 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-22 14:26:35,666 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=162, granted=true.

2024-05-22 14:26:35,667 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=162.

2024-05-22 14:26:35,618 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_153.

2024-05-22 14:26:35,620 INFO Node <naming_service_metadata/nacos2:7848> ignore PreVoteRequest from nacos1:7848, term=166, currTerm=165, because the leader nacos3:7848's lease is still valid.

2024-05-22 14:26:35,660 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 163, cost 0 ms.

2024-05-22 14:26:35,667 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos3:7848, term=172, granted=true.

2024-05-22 14:26:35,688 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=172.

2024-05-22 14:26:35,668 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=162, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 14:26:35,689 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=172, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 14:26:35,695 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_155.

2024-05-22 14:26:35,702 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 154, cost 3 ms.

2024-05-22 14:26:35,717 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=173, votedFor=nacos2:7848, cost time=27 ms

2024-05-22 14:26:35,718 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 14:26:35,719 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 156, cost 0 ms.

2024-05-22 14:26:35,723 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=163, votedFor=nacos2:7848, cost time=46 ms

2024-05-22 14:26:35,729 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=163, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 14:26:35,729 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=173, currTerm=173, granted=true, requestLastLogId=LogId [index=163, term=172], lastLogId=LogId [index=163, term=172].

2024-05-22 14:26:35,729 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=166, currTerm=165.

2024-05-22 14:26:35,747 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=165, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 14:26:35,739 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 14:26:35,742 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=165, currTerm=164.

2024-05-22 14:26:35,754 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos3:7848, term=164, status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.]].

2024-05-22 14:26:35,753 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=173, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 14:26:35,756 INFO Replicator [group: naming_persistent_service, peer: nacos3:7848, type: Follower] is started

2024-05-22 14:26:35,755 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=166, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 14:26:35,755 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 14:26:35,758 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 14:26:35,758 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=165, votedFor=0.0.0.0:0, cost time=4 ms

2024-05-22 14:26:35,765 WARN Node <naming_persistent_service/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 14:26:35,765 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=163, currTerm=163.

2024-05-22 14:26:35,769 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_LEADER.

2024-05-22 14:26:35,771 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=166, votedFor=nacos1:7848, cost time=12 ms

2024-05-22 14:26:35,773 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 14:26:35,781 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=165, votedFor=nacos1:7848, cost time=10 ms

2024-05-22 14:26:35,789 INFO onLeaderStart: term=163.

2024-05-22 14:26:35,792 INFO onLeaderStart: term=173.

2024-05-22 14:33:12,815 INFO Node <naming_instance_metadata/nacos2:7848> term 165 start preVote.

2024-05-22 14:33:12,998 INFO Node <naming_service_metadata/nacos2:7848> term 166 start preVote.

2024-05-22 14:33:13,057 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 14:33:13,089 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=166, status=Status[ERAFTTIMEDOUT<10001>: Lost connection from leader nacos1:7848.]].

2024-05-22 14:33:13,446 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=174, currTerm=173, granted=true, requestLastLogId=LogId [index=164, term=173], lastLogId=LogId [index=164, term=173].

2024-05-22 14:33:13,448 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteRequest from nacos1:7848, term=164, currTerm=163, granted=true, requestLastLogId=LogId [index=157, term=163], lastLogId=LogId [index=157, term=163].

2024-05-22 14:33:13,874 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=166, granted=true.

2024-05-22 14:33:13,922 INFO Node <naming_service_metadata/nacos2:7848> start vote and grant vote self, term=166.

2024-05-22 14:33:13,926 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=166, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 14:33:14,022 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteResponse from nacos1:7848, term=165, granted=true.

2024-05-22 14:33:14,024 INFO Node <naming_instance_metadata/nacos2:7848> start vote and grant vote self, term=165.

2024-05-22 14:33:14,026 INFO Node <naming_persistent_service_v2/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=164, currTerm=163, because the leader nacos2:7848's lease is still valid.

2024-05-22 14:33:13,926 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=167, currTerm=167, granted=true, requestLastLogId=LogId [index=157, term=166], lastLogId=LogId [index=157, term=166].

2024-05-22 14:33:14,364 INFO Node <naming_persistent_service/nacos2:7848> ignore PreVoteRequest from nacos3:7848, term=174, currTerm=173, because the leader nacos2:7848's lease is still valid.

2024-05-22 14:33:14,030 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=165, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 14:33:14,320 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=166, votedFor=nacos2:7848, cost time=295 ms

2024-05-22 14:33:14,514 WARN Node <naming_instance_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 14:33:14,336 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_157.

2024-05-22 14:33:14,520 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_157.

2024-05-22 14:33:14,404 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=167, votedFor=nacos2:7848, cost time=37 ms

2024-05-22 14:33:14,436 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=174, currTerm=173.

2024-05-22 14:33:14,517 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=166, currTerm=166, granted=true, requestLastLogId=LogId [index=155, term=165], lastLogId=LogId [index=155, term=165].

2024-05-22 14:33:14,523 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_155.

2024-05-22 14:33:14,546 INFO Node <naming_instance_metadata/nacos2:7848> become leader of group, term=166, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 14:33:14,562 INFO Replicator [group: naming_instance_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 14:33:14,571 INFO Replicator [group: naming_instance_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 14:33:14,537 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 14:33:14,544 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=174, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 14:33:14,579 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=164, lastLogIncluded=0, lastLogIndex=164, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service, waitId=44, type=Follower] is going to quit

2024-05-22 14:33:14,549 INFO Node <naming_persistent_service_v2/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=164, currTerm=163.

2024-05-22 14:33:14,557 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=157, lastLogIncluded=0, lastLogIndex=157, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=42, type=Follower] is going to quit

2024-05-22 14:33:14,559 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 14:33:14,576 WARN Node <naming_instance_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 14:33:14,584 INFO Node <naming_service_metadata/nacos2:7848> become leader of group, term=167, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 14:33:14,587 INFO Replicator [group: naming_service_metadata, peer: nacos3:7848, type: Follower] is started

2024-05-22 14:33:14,577 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 156, cost 0 ms.

2024-05-22 14:33:14,579 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=164, lastLogIncluded=0, lastLogIndex=164, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=43, type=Follower] is going to quit

2024-05-22 14:33:14,589 INFO Replicator [group: naming_service_metadata, peer: nacos1:7848, type: Follower] is started

2024-05-22 14:33:14,583 INFO onLeaderStop: status=Status[EHIGHERTERMRESPONSE<10008>: Raft node receives higher term RequestVoteRequest.].

2024-05-22 14:33:14,590 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:33:14,590 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:33:14,593 WARN Node <naming_service_metadata/nacos2:7848> received invalid RequestVoteResponse from nacos1:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 14:33:14,596 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=164, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 14:33:14,598 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=157, lastLogIncluded=0, lastLogIndex=157, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_persistent_service_v2, waitId=43, type=Follower] is going to quit

2024-05-22 14:33:14,600 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=157, lastLogIncluded=0, lastLogIndex=157, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=42, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 14:33:14,607 ERROR handleRequest group_id: "naming_persistent_service"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:33:14,614 WARN Fail to unlock with Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=157, lastLogIncluded=0, lastLogIndex=157, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service_v2, waitId=42, type=Follower], the lock is not held by current thread Thread[Append-Entries-Thread-Send7,5,main].

2024-05-22 14:33:14,616 ERROR handleRequest group_id: "naming_persistent_service_v2"
leader_id: "nacos2:7848"
 failed

java.lang.IllegalStateException: Not leader
	at com.alipay.sofa.jraft.core.NodeImpl.listPeers(NodeImpl.java:2966)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:58)
	at com.alipay.sofa.jraft.rpc.impl.cli.GetPeersRequestProcessor.processRequest0(GetPeersRequestProcessor.java:33)
	at com.alipay.sofa.jraft.rpc.impl.cli.BaseCliRequestProcessor.processRequest(BaseCliRequestProcessor.java:119)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:53)
	at com.alipay.sofa.jraft.rpc.RpcRequestProcessor.handleRequest(RpcRequestProcessor.java:35)
	at com.alipay.sofa.jraft.rpc.impl.GrpcServer.lambda$null$1(GrpcServer.java:194)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-05-22 14:33:14,619 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=174, votedFor=nacos1:7848, cost time=27 ms

2024-05-22 14:33:14,620 INFO onLeaderStart: term=166.

2024-05-22 14:33:14,627 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=164, votedFor=nacos1:7848, cost time=12 ms

2024-05-22 14:33:14,633 INFO onLeaderStart: term=167.

2024-05-22 14:56:34,475 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_156.

2024-05-22 14:56:34,477 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_156.

2024-05-22 14:56:34,478 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_165.

2024-05-22 14:56:34,480 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_165.

2024-05-22 14:56:34,482 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_154.

2024-05-22 14:56:34,483 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_163.

2024-05-22 14:56:34,495 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 163 to 164, cost 0 ms.

2024-05-22 14:56:34,498 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 154 to 155, cost 1 ms.

2024-05-22 14:56:35,204 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_158.

2024-05-22 14:56:35,205 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_158.

2024-05-22 14:56:35,206 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_156.

2024-05-22 14:56:35,210 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 156 to 157, cost 0 ms.

2024-05-22 15:03:12,776 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_158.

2024-05-22 15:03:12,777 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_158.

2024-05-22 15:03:12,780 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_157.

2024-05-22 15:03:12,791 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 156 to 158, cost 0 ms.

2024-05-22 15:03:14,336 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 15:03:14,356 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 15:03:14,481 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 15:03:14,533 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 15:03:18,071 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,083 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,091 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,099 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,523 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,524 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 15:03:18,979 INFO Destroyed peer request context for naming_service_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 15:03:18,982 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 15:03:18,984 INFO Destroyed peer request context for naming_instance_metadata/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 15:03:18,988 INFO Destroyed peer request context for naming_persistent_service_v2/PeerPair[nacos2:7848 -> nacos3:7848]

2024-05-22 15:26:34,403 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 155 to 157, cost 1 ms.

2024-05-22 15:26:34,403 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 164 to 166, cost 1 ms.

2024-05-22 15:26:35,150 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 157 to 159, cost 0 ms.

2024-05-22 15:33:12,710 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 158 to 159, cost 1 ms.

2024-05-22 15:56:34,496 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 2 ms.

2024-05-22 15:56:34,497 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 3 ms.

2024-05-22 15:56:35,238 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 0 ms.

2024-05-22 16:03:12,811 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 0 ms.

2024-05-22 16:26:34,517 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 1 ms.

2024-05-22 16:26:34,516 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 0 ms.

2024-05-22 16:26:35,261 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 1 ms.

2024-05-22 16:33:12,839 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 0 ms.

2024-05-22 16:56:34,428 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 1 ms.

2024-05-22 16:56:34,429 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 0 ms.

2024-05-22 16:56:35,172 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 1 ms.

2024-05-22 17:03:12,733 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 0 ms.

2024-05-22 17:26:34,397 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 17:26:34,397 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 0 ms.

2024-05-22 17:26:35,138 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 0 ms.

2024-05-22 17:33:12,701 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 0 ms.

2024-05-22 17:56:34,363 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 17:56:34,364 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 0 ms.

2024-05-22 17:56:35,107 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 0 ms.

2024-05-22 18:03:12,747 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 1 ms.

2024-05-22 18:26:34,469 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_instance_metadata/log from log index 157 to 157, cost 1 ms.

2024-05-22 18:26:34,470 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 1 ms.

2024-05-22 18:26:35,208 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log from log index 159 to 159, cost 0 ms.

2024-05-22 18:33:12,792 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_service_metadata/log from log index 159 to 159, cost 1 ms.

2024-05-22 18:44:38,235 INFO Node <naming_service_metadata/nacos2:7848> shutdown, currTerm=167 state=STATE_LEADER.

2024-05-22 18:44:38,240 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-22 18:44:38,240 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_service_metadata, waitId=34, type=Follower] is going to quit

2024-05-22 18:44:38,249 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=35, type=Follower] stops sending entries.

2024-05-22 18:44:38,256 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=167, votedFor=nacos2:7848, cost time=5 ms

2024-05-22 18:44:38,257 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=158, lastLogIncluded=0, lastLogIndex=158, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_service_metadata, waitId=35, type=Follower] is going to quit

2024-05-22 18:44:38,258 INFO Shutting down FSMCaller...

2024-05-22 18:44:38,260 INFO onShutdown.

2024-05-22 18:44:38,263 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=179, target=nacos3:7848}}.

2024-05-22 18:44:38,269 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,270 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,274 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=202, target=nacos1:7848}}.

2024-05-22 18:44:38,274 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,275 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,332 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@35efcb38[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 143].

2024-05-22 18:44:38,332 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,338 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,344 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,346 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_service_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,339 INFO The number of active nodes decrement to 3.

2024-05-22 18:44:38,344 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2ee57086[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 134282].

2024-05-22 18:44:38,351 INFO Node <naming_service_metadata/nacos2:7848> shutdown, currTerm=167 state=STATE_SHUTTING.

2024-05-22 18:44:38,354 INFO Stop the RaftGroupService successfully.

2024-05-22 18:44:38,354 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=174 state=STATE_FOLLOWER.

2024-05-22 18:44:38,356 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=174, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-22 18:44:38,365 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=174, votedFor=nacos1:7848, cost time=6 ms

2024-05-22 18:44:38,365 INFO Shutting down FSMCaller...

2024-05-22 18:44:38,369 INFO onShutdown.

2024-05-22 18:44:38,372 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=183, target=nacos3:7848}}.

2024-05-22 18:44:38,377 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,378 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,378 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=208, target=nacos1:7848}}.

2024-05-22 18:44:38,378 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,379 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,383 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 18:44:38,391 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 18:44:38,391 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 18:44:38,392 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 18:44:38,399 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=174 state=STATE_SHUTTING.

2024-05-22 18:44:38,400 INFO The number of active nodes decrement to 2.

2024-05-22 18:44:38,400 INFO Stop the RaftGroupService successfully.

2024-05-22 18:44:38,403 INFO Node <naming_instance_metadata/nacos2:7848> shutdown, currTerm=166 state=STATE_LEADER.

2024-05-22 18:44:38,412 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3b402d6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 75431].

2024-05-22 18:44:38,450 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=156, lastLogIncluded=0, lastLogIndex=156, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_instance_metadata, waitId=42, type=Follower] is going to quit

2024-05-22 18:44:38,453 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-22 18:44:38,457 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_service_metadata/log.

2024-05-22 18:44:38,459 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=156, lastLogIncluded=0, lastLogIndex=156, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=41, type=Follower] stops sending entries.

2024-05-22 18:44:38,459 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 18:44:38,506 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=166, votedFor=nacos2:7848, cost time=44 ms

2024-05-22 18:44:38,506 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=156, lastLogIncluded=0, lastLogIndex=156, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=41, type=Follower] is going to quit

2024-05-22 18:44:38,507 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=156, lastLogIncluded=0, lastLogIndex=156, lastTermIncluded=0>, peerId=nacos3:7848, groupId=naming_instance_metadata, waitId=41, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 18:44:38,507 INFO Shutting down FSMCaller...

2024-05-22 18:44:38,510 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=185, target=nacos3:7848}}.

2024-05-22 18:44:38,511 INFO onShutdown.

2024-05-22 18:44:38,512 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,513 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,520 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@557dfca8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 156].

2024-05-22 18:44:38,521 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=200, target=nacos1:7848}}.

2024-05-22 18:44:38,527 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,528 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,534 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,535 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,535 INFO The number of active nodes decrement to 1.

2024-05-22 18:44:38,535 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,536 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_instance_metadata/nacos2:7848>'}.

2024-05-22 18:44:38,540 INFO Node <naming_instance_metadata/nacos2:7848> shutdown, currTerm=166 state=STATE_SHUTTING.

2024-05-22 18:44:38,540 INFO Stop the RaftGroupService successfully.

2024-05-22 18:44:38,543 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@62c6efc3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 133935].

2024-05-22 18:44:38,543 INFO Node <naming_persistent_service_v2/nacos2:7848> shutdown, currTerm=164 state=STATE_FOLLOWER.

2024-05-22 18:44:38,548 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=164, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-22 18:44:38,555 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=164, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 18:44:38,555 INFO Shutting down FSMCaller...

2024-05-22 18:44:38,561 INFO onShutdown.

2024-05-22 18:44:38,562 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_instance_metadata/log.

2024-05-22 18:44:38,562 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=180, target=nacos3:7848}}.

2024-05-22 18:44:38,563 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,563 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,571 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=210, target=nacos1:7848}}.

2024-05-22 18:44:38,572 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,572 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,580 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@29d4d11c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 161].

2024-05-22 18:44:38,581 INFO The number of active nodes decrement to 0.

2024-05-22 18:44:38,587 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3e2cae44[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 11673].

2024-05-22 18:44:38,588 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7fb0d114[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 88974].

2024-05-22 18:44:38,592 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-22 18:44:38,606 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@585adc74[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 108].

2024-05-22 18:44:38,606 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-22 18:44:38,607 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@12265bca[Shutting down, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 150].

2024-05-22 18:44:38,613 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@58e2de51[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 43963].

2024-05-22 18:44:38,614 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-22 18:44:38,624 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@470466e4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 144].

2024-05-22 18:44:38,625 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service_v2/nacos2:7848>'}.

2024-05-22 18:44:38,627 INFO Node <naming_persistent_service_v2/nacos2:7848> shutdown, currTerm=164 state=STATE_SHUTTING.

2024-05-22 18:44:38,627 INFO Stop the RaftGroupService successfully.

2024-05-22 18:44:38,633 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=4, target=nacos3:7848}}.

2024-05-22 18:44:38,633 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,635 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,636 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=14, target=nacos2:7848}}.

2024-05-22 18:44:38,637 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service_v2/log.

2024-05-22 18:44:38,637 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,639 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,640 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos1:7848}}.

2024-05-22 18:44:38,640 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 18:44:38,641 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 18:44:38,641 INFO Connection disconnected: /172.25.0.5:59670

2024-05-22 18:44:38,655 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@162edbf8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 83629].

2024-05-22 23:25:18,776 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:25:19,034 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:25:19,708 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:25:19,711 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:25:19,712 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:25:19,715 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:25:19,720 INFO The number of active nodes increment to 1.

2024-05-22 23:25:20,044 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:25:20,055 INFO Starts FSMCaller successfully.

2024-05-22 23:25:20,070 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:25:20,145 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:25:20,146 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:25:20,161 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:25:20,163 INFO Node <naming_persistent_service/nacos2:7848> init, term=174, lastLogId=LogId [index=165, term=174], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:25:20,165 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:25:20,167 INFO Start the RaftGroupService successfully.

2024-05-22 23:25:20,374 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:20,567 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:20,568 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:20,568 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:20,569 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:25:20,570 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:20,606 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:25:21,029 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:25:21,030 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:25:21,162 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:25:21,168 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:25:21,187 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:25:21,187 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:25:22,286 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:22,293 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:22,294 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:23,328 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:23,334 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:23,334 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:23,335 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:23,337 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:24,358 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:24,362 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:24,363 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:25,183 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:25,188 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:25,188 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:25,189 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:25,222 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=175, currTerm=174, granted=true, requestLastLogId=LogId [index=165, term=174], lastLogId=LogId [index=165, term=174].

2024-05-22 23:25:25,236 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:25,236 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=175, currTerm=174.

2024-05-22 23:25:25,236 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:25,237 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:25,257 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=175, votedFor=0.0.0.0:0, cost time=20 ms

2024-05-22 23:25:25,263 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=175, votedFor=nacos1:7848, cost time=5 ms

2024-05-22 23:25:25,303 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:25:25,396 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:25,401 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:25,401 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:25,403 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:25,402 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:26,055 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=175.

2024-05-22 23:25:26,058 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=175, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 23:25:26,063 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:26,068 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:26,070 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:26,071 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 23:25:26,074 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:26,077 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:25:26,079 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:25:26,081 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:25:26,094 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:25:26,097 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:25:26,099 INFO Peer nacos1:7848 is connected.

2024-05-22 23:25:26,100 INFO Connection disconnected: /172.25.0.3:34486

2024-05-22 23:25:26,120 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[ENOENT<1012>: Peer id not found: nacos1:7848, group: naming_persistent_service].

2024-05-22 23:25:26,121 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=176, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 23:25:26,123 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=176 state=STATE_CANDIDATE.

2024-05-22 23:25:26,123 INFO Node <naming_persistent_service/nacos2:7848> received TimeoutNowRequest from nacos1:7848, term=175.

2024-05-22 23:25:26,131 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=176, votedFor=nacos2:7848, cost time=5 ms

2024-05-22 23:25:26,132 INFO Shutting down FSMCaller...

2024-05-22 23:25:26,134 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=23, target=nacos3:7848}}.

2024-05-22 23:25:26,134 INFO onShutdown.

2024-05-22 23:25:26,134 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:26,136 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:26,137 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=25, target=nacos1:7848}}.

2024-05-22 23:25:26,138 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:25:26,138 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:26,145 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@4091fad5[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:25:26,145 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@65a15628[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:26,147 INFO The number of active nodes decrement to 0.

2024-05-22 23:25:26,149 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7ebd19cc[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:25:26,149 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:26,149 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@13c8b75c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:26,150 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:26,151 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2e6a5539[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:26,151 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:26,152 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6e682c12[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:26,152 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:26,153 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=176 state=STATE_SHUTTING.

2024-05-22 23:25:26,157 INFO Stop the RaftGroupService successfully.

2024-05-22 23:25:26,157 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-22 23:25:26,158 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:26,158 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:25:26,158 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:26,160 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:25:26,161 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:25:26,161 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:26,164 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:25:26,164 INFO Connection disconnected: /172.25.0.2:39832

2024-05-22 23:25:26,165 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:25:26,166 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:26,174 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7a57a423[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:25:35,670 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:25:35,876 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:25:36,379 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:25:36,381 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:25:36,383 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:25:36,386 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:25:36,391 INFO The number of active nodes increment to 1.

2024-05-22 23:25:36,596 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:25:36,602 INFO Starts FSMCaller successfully.

2024-05-22 23:25:36,612 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:25:36,677 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:25:36,678 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:25:36,682 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:25:36,693 INFO Node <naming_persistent_service/nacos2:7848> init, term=176, lastLogId=LogId [index=166, term=175], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:25:36,697 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:25:36,698 INFO Start the RaftGroupService successfully.

2024-05-22 23:25:36,827 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:36,945 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:36,945 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:36,947 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:25:36,945 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:36,951 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:36,980 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:25:37,651 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:25:37,652 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:25:37,774 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:25:37,776 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:25:37,805 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:25:37,810 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:25:38,890 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:38,895 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:38,897 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:39,932 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:39,939 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:39,939 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:39,940 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:39,941 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:40,965 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:40,967 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:40,968 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:41,715 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:41,722 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:41,722 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:41,723 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:41,743 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:41,744 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:41,745 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:41,999 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:42,005 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:42,007 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:42,006 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:42,009 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:42,519 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=176, currTerm=176, granted=true, requestLastLogId=LogId [index=166, term=175], lastLogId=LogId [index=166, term=175].

2024-05-22 23:25:42,548 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=176 state=STATE_FOLLOWER.

2024-05-22 23:25:42,558 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=176, votedFor=nacos2:7848, cost time=7 ms

2024-05-22 23:25:42,559 INFO Shutting down FSMCaller...

2024-05-22 23:25:42,560 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@19b93fa8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,560 INFO onShutdown.

2024-05-22 23:25:42,561 INFO The number of active nodes decrement to 0.

2024-05-22 23:25:42,561 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1f010bf0[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,563 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@788890a9[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,564 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:42,564 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@40db2a24[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,565 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:42,565 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@10cf09e8[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,565 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:42,566 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@158f72f6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:42,566 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:42,567 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=176 state=STATE_SHUTTING.

2024-05-22 23:25:42,569 INFO Stop the RaftGroupService successfully.

2024-05-22 23:25:42,570 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:25:42,570 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:42,571 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:42,571 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:25:42,571 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:25:42,572 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:25:42,573 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:42,576 INFO Connection disconnected: /172.25.0.2:54356

2024-05-22 23:25:42,578 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:25:42,579 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:25:42,579 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:42,583 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7be6565c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:25:42,751 INFO Connection disconnected: /172.25.0.3:40362

2024-05-22 23:25:42,768 INFO Connection disconnected: /172.25.0.3:40352

2024-05-22 23:25:52,236 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:25:52,365 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:25:52,973 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:25:52,975 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:25:52,976 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:25:52,981 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:25:52,988 INFO The number of active nodes increment to 1.

2024-05-22 23:25:53,201 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:25:53,207 INFO Starts FSMCaller successfully.

2024-05-22 23:25:53,217 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:25:53,286 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:25:53,290 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:25:53,302 INFO Node <naming_persistent_service/nacos2:7848> init, term=176, lastLogId=LogId [index=166, term=175], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:25:53,305 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:25:53,306 INFO Start the RaftGroupService successfully.

2024-05-22 23:25:53,307 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:25:53,458 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:53,616 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:53,619 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:53,619 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:53,621 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:53,628 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:25:53,654 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:25:54,144 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:25:54,145 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:25:54,263 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:25:54,265 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:25:54,288 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:25:54,289 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:25:55,364 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:55,368 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:55,371 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:56,402 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:56,410 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:56,411 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:56,413 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:56,414 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:57,433 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:57,437 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:57,438 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:58,314 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:58,321 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:58,322 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:58,326 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:58,349 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:25:58,351 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:58,351 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:58,469 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:25:58,474 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:25:58,475 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:25:58,473 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:25:58,477 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:25:58,645 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=177, currTerm=176, granted=true, requestLastLogId=LogId [index=166, term=175], lastLogId=LogId [index=166, term=175].

2024-05-22 23:25:58,657 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=177, currTerm=176.

2024-05-22 23:25:58,665 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=177, votedFor=0.0.0.0:0, cost time=8 ms

2024-05-22 23:25:58,674 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=177, votedFor=nacos1:7848, cost time=6 ms

2024-05-22 23:25:58,715 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:25:59,096 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=177 state=STATE_FOLLOWER.

2024-05-22 23:25:59,097 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=177, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-22 23:25:59,115 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=177, votedFor=nacos1:7848, cost time=14 ms

2024-05-22 23:25:59,115 INFO Shutting down FSMCaller...

2024-05-22 23:25:59,116 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@1608bcbd[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:59,117 INFO onShutdown.

2024-05-22 23:25:59,118 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@29ca3d04[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:59,118 INFO The number of active nodes decrement to 0.

2024-05-22 23:25:59,122 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6010fbca[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:25:59,125 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:59,126 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@b2c5e07[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:59,126 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:59,126 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@5812f68b[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:59,127 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:59,127 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3eba96d6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:25:59,128 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:25:59,129 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=177 state=STATE_SHUTTING.

2024-05-22 23:25:59,130 INFO Stop the RaftGroupService successfully.

2024-05-22 23:25:59,130 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:25:59,131 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:25:59,131 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:59,134 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:25:59,135 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:25:59,135 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:25:59,135 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:59,142 INFO Connection disconnected: /172.25.0.2:38406

2024-05-22 23:25:59,148 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:25:59,148 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:25:59,149 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:25:59,163 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3326834a[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:25:59,272 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 23:25:59,286 INFO Connection disconnected: /172.25.0.3:55588

2024-05-22 23:26:09,066 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:26:09,255 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:26:09,758 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:26:09,759 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:26:09,761 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:26:09,764 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:26:09,771 INFO The number of active nodes increment to 1.

2024-05-22 23:26:09,994 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 1 ms.

2024-05-22 23:26:10,003 INFO Starts FSMCaller successfully.

2024-05-22 23:26:10,017 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:26:10,125 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:26:10,126 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:26:10,138 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:26:10,158 INFO Node <naming_persistent_service/nacos2:7848> init, term=177, lastLogId=LogId [index=167, term=177], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:26:10,164 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:26:10,164 INFO Start the RaftGroupService successfully.

2024-05-22 23:26:10,514 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:10,667 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:10,668 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:10,670 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:10,680 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:10,688 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:26:10,717 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:26:11,321 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:26:11,322 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:26:11,432 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:26:11,435 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:26:11,445 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:26:11,446 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:26:12,477 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:12,484 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:12,485 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:13,516 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:13,523 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:13,523 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:13,525 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:13,524 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:14,549 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:14,551 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:14,553 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:15,180 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:15,190 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:15,191 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:15,191 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:15,220 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:15,225 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:15,226 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:15,309 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=178, currTerm=177, granted=true, requestLastLogId=LogId [index=167, term=177], lastLogId=LogId [index=167, term=177].

2024-05-22 23:26:15,322 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=178, currTerm=177.

2024-05-22 23:26:15,332 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=178, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 23:26:15,338 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=178, votedFor=nacos1:7848, cost time=5 ms

2024-05-22 23:26:15,376 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:26:15,582 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:15,587 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:15,587 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:15,588 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:15,588 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:16,202 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=178.

2024-05-22 23:26:16,204 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=178, status=Status[ERAFTTIMEDOUT<10001>: A follower's leader_id is reset to NULL as it begins to request_vote.]].

2024-05-22 23:26:16,208 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:16,211 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:16,212 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:16,211 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:16,213 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:26:16,215 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:26:16,216 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:26:16,222 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:26:16,240 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:26:16,243 INFO Peer nacos1:7848 is connected.

2024-05-22 23:26:16,250 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 23:26:16,257 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=179, votedFor=nacos2:7848, cost time=5 ms

2024-05-22 23:26:16,259 INFO Node <naming_persistent_service/nacos2:7848> received TimeoutNowRequest from nacos1:7848, term=178.

2024-05-22 23:26:16,263 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos1:7848 error: Status[ENOENT<1012>: Peer id not found: nacos1:7848, group: naming_persistent_service].

2024-05-22 23:26:16,276 INFO Connection disconnected: /172.25.0.3:46004

2024-05-22 23:26:16,449 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=179 state=STATE_CANDIDATE.

2024-05-22 23:26:16,459 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=179, votedFor=nacos2:7848, cost time=7 ms

2024-05-22 23:26:16,459 INFO Shutting down FSMCaller...

2024-05-22 23:26:16,460 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=23, target=nacos3:7848}}.

2024-05-22 23:26:16,460 INFO onShutdown.

2024-05-22 23:26:16,462 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:16,463 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:16,464 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=25, target=nacos1:7848}}.

2024-05-22 23:26:16,464 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:26:16,464 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:16,470 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@73c41b87[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:26:16,470 INFO The number of active nodes decrement to 0.

2024-05-22 23:26:16,470 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@19e4fcac[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:16,473 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@31c41328[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:26:16,474 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:16,475 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@15810ee5[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:16,476 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:16,476 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@52c3cb31[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:16,477 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:16,478 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1074bcd4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:16,478 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:16,479 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=179 state=STATE_SHUTTING.

2024-05-22 23:26:16,480 INFO Stop the RaftGroupService successfully.

2024-05-22 23:26:16,481 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-22 23:26:16,482 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:26:16,482 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:16,483 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:16,483 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-22 23:26:16,484 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:26:16,484 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:16,485 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:26:16,487 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:26:16,487 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:16,487 INFO Connection disconnected: /172.25.0.2:56954

2024-05-22 23:26:16,495 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7332d1[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:26:27,166 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:26:27,325 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:26:28,112 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:26:28,114 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:26:28,116 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:26:28,121 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:26:28,129 INFO The number of active nodes increment to 1.

2024-05-22 23:26:28,472 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:26:28,481 INFO Starts FSMCaller successfully.

2024-05-22 23:26:28,500 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:26:28,638 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:26:28,641 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:26:28,645 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:26:28,683 INFO Node <naming_persistent_service/nacos2:7848> init, term=179, lastLogId=LogId [index=168, term=178], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:26:28,691 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:26:28,693 INFO Start the RaftGroupService successfully.

2024-05-22 23:26:29,133 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:29,346 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:29,349 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:29,350 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:29,353 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:26:29,356 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:29,428 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:26:30,258 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:26:30,259 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:26:30,435 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:26:30,436 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:26:30,447 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:26:30,448 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:26:31,492 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:31,507 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:31,509 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:32,563 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:32,570 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:32,570 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:32,571 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:32,572 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:33,600 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:33,602 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:33,602 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:33,713 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:33,724 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:33,724 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:33,725 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:33,755 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:33,757 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:33,760 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:33,963 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=179, currTerm=179, granted=true, requestLastLogId=LogId [index=168, term=178], lastLogId=LogId [index=168, term=178].

2024-05-22 23:26:34,574 INFO Node <naming_persistent_service/nacos2:7848> term 179 start preVote.

2024-05-22 23:26:34,577 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:34,579 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:34,579 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:34,580 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:34,580 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:26:34,582 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:26:34,584 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:26:34,592 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:26:34,611 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:26:34,614 INFO Peer nacos1:7848 is connected.

2024-05-22 23:26:34,636 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=179, granted=true.

2024-05-22 23:26:34,636 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=179.

2024-05-22 23:26:34,637 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:34,640 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:34,642 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:34,644 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:34,646 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:34,644 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:34,646 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:34,647 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:34,650 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-22 23:26:34,672 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=180, votedFor=nacos2:7848, cost time=21 ms

2024-05-22 23:26:34,681 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=180, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:26:34,691 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:34,693 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:34,694 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:34,694 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:34,695 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-22 23:26:34,695 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-22 23:26:34,696 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-22 23:26:34,699 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 23:26:34,711 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:26:34,774 INFO onLeaderStart: term=180.

2024-05-22 23:26:34,973 INFO Connection disconnected: /172.25.0.3:56996

2024-05-22 23:26:34,999 INFO Connection disconnected: /172.25.0.3:55392

2024-05-22 23:26:35,212 WARN Fail to issue RPC to nacos1:7848, consecutiveErrorTimes=1, error=Status[EINTERNAL<1004>: RPC exception:UNKNOWN], groupId=naming_persistent_service

2024-05-22 23:26:35,458 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=180 state=STATE_LEADER.

2024-05-22 23:26:35,460 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-22 23:26:35,474 WARN Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=169, lastLogIncluded=0, lastLogIndex=169, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-22 23:26:35,477 INFO Replicator Replicator [state=Probe, statInfo=<running=IDLE, firstLogIndex=169, lastLogIncluded=0, lastLogIndex=169, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-22 23:26:35,480 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=180, votedFor=nacos2:7848, cost time=11 ms

2024-05-22 23:26:35,483 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=169, lastLogIncluded=0, lastLogIndex=169, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 23:26:35,485 INFO Shutting down FSMCaller...

2024-05-22 23:26:35,486 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=29, target=nacos3:7848}}.

2024-05-22 23:26:35,488 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:35,489 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:35,491 INFO onShutdown.

2024-05-22 23:26:35,491 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=23, target=nacos1:7848}}.

2024-05-22 23:26:35,493 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:26:35,494 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:35,507 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@64193a49[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-22 23:26:35,508 INFO The number of active nodes decrement to 0.

2024-05-22 23:26:35,508 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@431771a3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:26:35,511 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4a8bc368[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:26:35,513 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:35,514 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4835655[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:35,514 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:35,516 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2de08067[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:35,517 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:35,518 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@5e5168ac[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:26:35,520 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:26:35,521 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=180 state=STATE_SHUTTING.

2024-05-22 23:26:35,522 INFO Stop the RaftGroupService successfully.

2024-05-22 23:26:35,523 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=27, target=nacos3:7848}}.

2024-05-22 23:26:35,524 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:35,525 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:35,526 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:26:35,526 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-22 23:26:35,527 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:26:35,528 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:35,530 INFO Connection disconnected: /172.25.0.2:35714

2024-05-22 23:26:35,531 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:26:35,532 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:26:35,532 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:35,539 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3bedc225[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:26:52,830 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:26:53,182 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:26:54,047 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:26:54,049 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:26:54,050 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:26:54,053 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:26:54,061 INFO The number of active nodes increment to 1.

2024-05-22 23:26:54,294 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 1 ms.

2024-05-22 23:26:54,304 INFO Starts FSMCaller successfully.

2024-05-22 23:26:54,317 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:26:54,406 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:26:54,407 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:26:54,416 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:26:54,450 INFO Node <naming_persistent_service/nacos2:7848> init, term=180, lastLogId=LogId [index=169, term=180], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:26:54,470 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:26:54,472 INFO Start the RaftGroupService successfully.

2024-05-22 23:26:54,922 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:55,171 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:55,181 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:55,186 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:55,187 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:55,189 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:26:55,412 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:26:56,198 ERROR Fail to connect nacos1:7848, remoting exception: java.util.concurrent.TimeoutException.

2024-05-22 23:26:56,199 ERROR Fail to connect peer nacos1:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:56,201 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:26:56,206 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:26:56,218 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:26:56,221 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:26:56,273 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:26:56,276 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:26:57,320 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:57,325 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:57,326 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:58,368 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:58,372 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:58,372 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:58,374 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:26:58,374 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:59,399 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:59,402 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:59,402 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:59,487 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:26:59,491 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:26:59,491 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:26:59,491 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:26:59,508 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:26:59,509 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:26:59,510 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:26:59,743 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=181, currTerm=180, granted=true, requestLastLogId=LogId [index=169, term=180], lastLogId=LogId [index=169, term=180].

2024-05-22 23:26:59,754 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=181, currTerm=180.

2024-05-22 23:26:59,765 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=181, votedFor=0.0.0.0:0, cost time=9 ms

2024-05-22 23:26:59,770 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=181, votedFor=nacos1:7848, cost time=4 ms

2024-05-22 23:26:59,815 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:27:00,427 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:00,432 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:00,433 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:00,432 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:00,435 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:00,787 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=181 state=STATE_FOLLOWER.

2024-05-22 23:27:00,789 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=181, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-22 23:27:00,795 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=181, votedFor=nacos1:7848, cost time=4 ms

2024-05-22 23:27:00,796 INFO Shutting down FSMCaller...

2024-05-22 23:27:00,797 INFO onShutdown.

2024-05-22 23:27:00,797 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@1a20270e[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:00,799 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@336f1079[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:00,800 INFO The number of active nodes decrement to 0.

2024-05-22 23:27:00,804 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@49d52338[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:27:00,810 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:00,811 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2f16c6b3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:00,811 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:00,812 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@34158c08[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:00,812 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:00,813 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3acd530d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:00,813 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:00,814 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=181 state=STATE_SHUTTING.

2024-05-22 23:27:00,814 INFO Stop the RaftGroupService successfully.

2024-05-22 23:27:00,821 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=21, target=nacos3:7848}}.

2024-05-22 23:27:00,822 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:00,822 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:00,825 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=11, target=nacos2:7848}}.

2024-05-22 23:27:00,826 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:27:00,828 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:00,826 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:27:00,830 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 23:27:00,837 INFO Connection disconnected: /172.25.0.2:57582

2024-05-22 23:27:00,839 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:27:00,840 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:27:00,841 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:00,857 INFO Connection disconnected: /172.25.0.3:35590

2024-05-22 23:27:00,868 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@684d704b[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 16].

2024-05-22 23:27:13,382 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:27:13,489 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:27:14,043 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:27:14,044 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:27:14,046 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:27:14,052 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:27:14,059 INFO The number of active nodes increment to 1.

2024-05-22 23:27:14,305 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:27:14,309 INFO Starts FSMCaller successfully.

2024-05-22 23:27:14,337 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:27:14,417 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:27:14,418 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:27:14,428 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:27:14,434 INFO Node <naming_persistent_service/nacos2:7848> init, term=181, lastLogId=LogId [index=170, term=181], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:27:14,437 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:27:14,438 INFO Start the RaftGroupService successfully.

2024-05-22 23:27:14,551 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:14,682 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:14,685 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:14,690 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:27:14,682 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:14,691 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:14,723 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:27:15,353 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:27:15,355 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:27:15,516 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:27:15,520 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:27:15,571 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:27:15,571 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:27:16,603 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:16,610 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:16,611 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:17,647 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:17,653 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:17,653 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:17,654 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:17,654 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:18,675 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:18,677 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:18,679 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:19,447 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:19,450 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:19,450 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:19,451 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:19,471 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:19,471 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:19,472 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:19,707 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:19,714 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:19,716 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:19,718 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:19,718 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:19,972 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos1:7848, term=182, currTerm=181, granted=true, requestLastLogId=LogId [index=170, term=181], lastLogId=LogId [index=170, term=181].

2024-05-22 23:27:20,011 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos1:7848, term=182, currTerm=181.

2024-05-22 23:27:20,036 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=0.0.0.0:0, cost time=24 ms

2024-05-22 23:27:20,047 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 23:27:20,158 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:27:20,446 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=182 state=STATE_FOLLOWER.

2024-05-22 23:27:20,448 INFO onStopFollowing: LeaderChangeContext [leaderId=nacos1:7848, term=182, status=Status[ESHUTDOWN<1007>: Raft node is going to quit.]].

2024-05-22 23:27:20,457 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 23:27:20,457 INFO Shutting down FSMCaller...

2024-05-22 23:27:20,461 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@73194df[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:20,462 INFO onShutdown.

2024-05-22 23:27:20,464 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3c9c0d96[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:20,465 INFO The number of active nodes decrement to 0.

2024-05-22 23:27:20,473 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@403c99e7[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:27:20,474 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:20,479 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@3a4621bd[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:20,481 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:20,482 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@31dadd46[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:20,482 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:20,487 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@4228dc22[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:20,488 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:20,490 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=182 state=STATE_SHUTTING.

2024-05-22 23:27:20,495 INFO Stop the RaftGroupService successfully.

2024-05-22 23:27:20,498 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:27:20,499 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:20,501 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:20,503 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:27:20,504 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:27:20,505 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:20,505 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:27:20,515 INFO Connection disconnected: /172.25.0.2:54492

2024-05-22 23:27:20,517 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:27:20,520 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:27:20,522 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:20,542 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@6c8a83eb[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:27:20,841 INFO Destroyed peer request context for naming_persistent_service/PeerPair[nacos2:7848 -> nacos1:7848]

2024-05-22 23:27:20,887 INFO Connection disconnected: /172.25.0.3:50286

2024-05-22 23:27:37,528 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:27:37,744 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:27:39,068 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:27:39,071 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:27:39,074 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:27:39,079 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:27:39,104 INFO The number of active nodes increment to 1.

2024-05-22 23:27:39,393 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 1 ms.

2024-05-22 23:27:39,406 INFO Starts FSMCaller successfully.

2024-05-22 23:27:39,422 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:27:39,488 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:27:39,491 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:27:39,498 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 1 ms.

2024-05-22 23:27:39,514 INFO Node <naming_persistent_service/nacos2:7848> init, term=182, lastLogId=LogId [index=171, term=182], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:27:39,519 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:27:39,519 INFO Start the RaftGroupService successfully.

2024-05-22 23:27:39,688 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:39,773 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:39,775 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:39,775 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:39,778 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:39,785 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:27:39,823 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:27:40,580 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:27:40,582 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:27:40,718 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:27:40,719 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:27:40,759 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:27:40,761 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:27:41,838 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:41,846 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:41,848 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:42,884 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:42,894 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:42,894 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:42,897 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:42,896 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:43,924 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:43,928 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:43,929 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:44,529 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:44,532 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:44,533 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:44,532 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:44,545 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:44,546 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:44,546 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:44,960 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:44,963 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:44,963 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:44,963 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:44,964 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:45,284 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=182 state=STATE_FOLLOWER.

2024-05-22 23:27:45,295 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=182, votedFor=nacos1:7848, cost time=7 ms

2024-05-22 23:27:45,296 INFO Shutting down FSMCaller...

2024-05-22 23:27:45,296 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@24ba9639[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,297 INFO onShutdown.

2024-05-22 23:27:45,297 INFO The number of active nodes decrement to 0.

2024-05-22 23:27:45,297 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@53f6fd09[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,299 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1074bcd4[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,301 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:45,302 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@6bffbc6d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,302 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:45,304 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1b84f475[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,305 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:45,305 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@568365e6[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:27:45,305 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:27:45,307 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=182 state=STATE_SHUTTING.

2024-05-22 23:27:45,309 INFO Stop the RaftGroupService successfully.

2024-05-22 23:27:45,309 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:27:45,310 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:45,310 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:45,311 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:27:45,311 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:27:45,312 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:27:45,312 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:45,316 INFO Connection disconnected: /172.25.0.2:49172

2024-05-22 23:27:45,317 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:27:45,318 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:27:45,318 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:27:45,347 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@6cdb2f29[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:27:55,955 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:27:56,086 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:27:56,643 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:27:56,645 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:27:56,646 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:27:56,649 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:27:56,653 INFO The number of active nodes increment to 1.

2024-05-22 23:27:56,868 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:27:56,879 INFO Starts FSMCaller successfully.

2024-05-22 23:27:56,890 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:27:56,955 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:27:56,958 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:27:56,959 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:27:56,971 INFO Node <naming_persistent_service/nacos2:7848> init, term=182, lastLogId=LogId [index=171, term=182], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:27:56,977 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:27:56,977 INFO Start the RaftGroupService successfully.

2024-05-22 23:27:57,125 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:27:57,200 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:27:57,201 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:27:57,200 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:27:57,204 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:27:57,205 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:27:57,219 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:27:57,594 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:27:57,596 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:27:57,864 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:27:57,866 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:27:57,893 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:27:57,895 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:27:58,972 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:27:58,976 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:27:58,978 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:00,003 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:00,007 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:00,007 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:00,008 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:00,008 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:01,028 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:01,030 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:01,030 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:01,981 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:01,986 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:01,986 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:01,987 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:02,003 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:02,005 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,005 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,034 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:02,038 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:02,038 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:02,039 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:02,039 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:02,269 INFO Node <naming_persistent_service/nacos2:7848> term 182 start preVote.

2024-05-22 23:28:02,275 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:02,280 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:02,282 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:02,280 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:02,283 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:28:02,286 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:28:02,288 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:28:02,296 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:28:02,299 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:28:02,301 INFO Peer nacos1:7848 is connected.

2024-05-22 23:28:02,325 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=182, granted=true.

2024-05-22 23:28:02,326 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=182.

2024-05-22 23:28:02,331 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:02,334 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,335 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,336 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-22 23:28:02,374 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=183, votedFor=nacos2:7848, cost time=38 ms

2024-05-22 23:28:02,388 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=183, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:28:02,396 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:02,398 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:02,398 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:02,398 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:02,400 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-22 23:28:02,400 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-22 23:28:02,401 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-22 23:28:02,405 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 23:28:02,414 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:28:02,467 INFO onLeaderStart: term=183.

2024-05-22 23:28:02,755 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=183 state=STATE_LEADER.

2024-05-22 23:28:02,759 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-22 23:28:02,767 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=172, lastLogIncluded=0, lastLogIndex=172, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-22 23:28:02,773 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=183, votedFor=nacos2:7848, cost time=7 ms

2024-05-22 23:28:02,774 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=172, lastLogIncluded=0, lastLogIndex=172, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-22 23:28:02,776 INFO Shutting down FSMCaller...

2024-05-22 23:28:02,777 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=28, target=nacos3:7848}}.

2024-05-22 23:28:02,778 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,778 INFO onShutdown.

2024-05-22 23:28:02,780 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,781 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=24, target=nacos1:7848}}.

2024-05-22 23:28:02,782 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,783 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,792 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@124917bd[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:02,793 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@330dee47[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-22 23:28:02,793 INFO The number of active nodes decrement to 0.

2024-05-22 23:28:02,794 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@79b05246[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:28:02,796 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:02,800 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@19bd9eb3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:02,801 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:02,805 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@1c51ffb3[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:02,807 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:02,807 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2840ebce[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:02,810 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:02,811 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=183 state=STATE_SHUTTING.

2024-05-22 23:28:02,813 INFO Stop the RaftGroupService successfully.

2024-05-22 23:28:02,814 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:28:02,815 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,816 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,817 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:28:02,818 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:28:02,818 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,819 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,821 INFO Connection disconnected: /172.25.0.2:55034

2024-05-22 23:28:02,823 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:28:02,823 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:02,824 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:02,830 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3d596cfe[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 17].

2024-05-22 23:28:16,473 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:28:16,821 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:28:18,054 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:28:18,056 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:28:18,057 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:28:18,068 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:28:18,080 INFO The number of active nodes increment to 1.

2024-05-22 23:28:18,703 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:28:18,723 INFO Starts FSMCaller successfully.

2024-05-22 23:28:18,753 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:28:18,920 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:28:18,920 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:28:18,931 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 0 ms.

2024-05-22 23:28:18,944 INFO Node <naming_persistent_service/nacos2:7848> init, term=183, lastLogId=LogId [index=172, term=183], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:28:18,950 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:28:18,950 INFO Start the RaftGroupService successfully.

2024-05-22 23:28:19,219 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:19,368 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:19,369 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:19,369 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:19,373 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:19,379 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:28:19,427 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:28:20,195 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:28:20,197 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:28:20,384 ERROR Fail to connect nacos1:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: DEADLINE_EXCEEDED: deadline exceeded after 0.982884342s. [closed=[], open=[[buffered_nanos=784156306, remote_addr=nacos1/172.25.0.3:7848]]].

2024-05-22 23:28:20,385 ERROR Fail to connect peer nacos1:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:20,388 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:28:20,389 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:28:20,436 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:28:20,438 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:28:21,615 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:21,620 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:21,620 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:22,658 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:22,664 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:22,664 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:22,665 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:22,666 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:23,687 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:23,692 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:23,693 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:23,971 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:23,976 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:23,977 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:23,977 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:23,996 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:23,998 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:23,999 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:24,155 INFO Node <naming_persistent_service/nacos2:7848> term 183 start preVote.

2024-05-22 23:28:24,161 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:24,164 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:24,165 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:24,164 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:24,166 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:28:24,168 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:28:24,170 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:28:24,178 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:28:24,181 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:28:24,184 INFO Peer nacos1:7848 is connected.

2024-05-22 23:28:24,211 WARN Node <naming_persistent_service/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term 184, expect=183.

2024-05-22 23:28:24,226 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=184, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-22 23:28:24,722 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:24,726 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:24,726 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:24,727 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:24,728 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:25,130 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=184 state=STATE_FOLLOWER.

2024-05-22 23:28:25,139 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=184, votedFor=0.0.0.0:0, cost time=6 ms

2024-05-22 23:28:25,140 INFO Shutting down FSMCaller...

2024-05-22 23:28:25,142 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=20, target=nacos3:7848}}.

2024-05-22 23:28:25,143 INFO onShutdown.

2024-05-22 23:28:25,143 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:25,144 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:25,145 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-22 23:28:25,145 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:25,145 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:25,153 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@51e0cd44[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:28:25,154 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7a1234bf[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:25,156 INFO The number of active nodes decrement to 0.

2024-05-22 23:28:25,159 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7caa30c6[Shutting down, pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:28:25,160 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:25,162 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2f62ea70[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:25,162 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:25,162 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@24ba9639[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:25,163 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:25,163 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@46d167ab[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:25,164 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:25,165 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=184 state=STATE_SHUTTING.

2024-05-22 23:28:25,166 INFO Stop the RaftGroupService successfully.

2024-05-22 23:28:25,166 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=26, target=nacos3:7848}}.

2024-05-22 23:28:25,167 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:25,167 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:25,168 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:28:25,168 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:28:25,169 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:28:25,170 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:25,198 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:28:25,198 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:25,198 INFO Connection disconnected: /172.25.0.2:39670

2024-05-22 23:28:25,203 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:25,216 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@3fc76935[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 16].

2024-05-22 23:28:41,796 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:28:42,097 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:28:43,082 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:28:43,084 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:28:43,085 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:28:43,092 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:28:43,102 INFO The number of active nodes increment to 1.

2024-05-22 23:28:43,516 INFO Starts FSMCaller successfully.

2024-05-22 23:28:43,533 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 0 to 166, cost 0 ms.

2024-05-22 23:28:43,537 INFO Loading snapshot, meta=last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"
.

2024-05-22 23:28:43,675 INFO Node <naming_persistent_service/nacos2:7848> onSnapshotLoadDone, last_included_index: 165
last_included_term: 174
peers: "nacos3:7848"
peers: "nacos1:7848"
peers: "nacos2:7848"


2024-05-22 23:28:43,681 INFO Node <naming_persistent_service/nacos2:7848> target priority value has changed from: 0, to: -1.

2024-05-22 23:28:43,682 INFO Truncated prefix logs in data path: /home/nacos/data/protocol/raft/naming_persistent_service/log from log index 166 to 166, cost 1 ms.

2024-05-22 23:28:43,715 INFO Node <naming_persistent_service/nacos2:7848> init, term=184, lastLogId=LogId [index=172, term=183], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:28:43,718 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:28:43,719 INFO Start the RaftGroupService successfully.

2024-05-22 23:28:44,140 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:44,326 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:44,327 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:44,327 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:44,328 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:44,330 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:28:44,369 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:28:45,193 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:28:45,196 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:28:45,338 ERROR Fail to connect nacos1:7848, remoting exception: java.util.concurrent.TimeoutException.

2024-05-22 23:28:45,339 ERROR Fail to connect peer nacos1:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:45,342 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:28:45,348 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:28:45,412 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:28:45,413 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:28:46,514 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:46,519 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:46,522 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:47,557 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:47,563 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:47,565 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:47,564 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:47,566 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:48,587 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:48,591 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:48,592 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:48,733 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:48,737 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:48,737 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:48,738 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:48,755 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:48,756 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:48,756 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,587 INFO Node <naming_persistent_service/nacos2:7848> term 184 start preVote.

2024-05-22 23:28:49,594 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:49,600 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:49,600 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:49,601 WARN Node <naming_persistent_service/nacos2:7848> channel init failed, address=nacos3:7848.

2024-05-22 23:28:49,602 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:49,606 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:28:49,608 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:28:49,614 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:28:49,615 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:28:49,618 INFO Peer nacos1:7848 is connected.

2024-05-22 23:28:49,627 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:49,637 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:49,637 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:49,639 ERROR Fail to connect peer nacos3:7848 to get leader for group naming_persistent_service.

2024-05-22 23:28:49,638 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:49,646 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteResponse from nacos1:7848, term=184, granted=true.

2024-05-22 23:28:49,647 INFO Node <naming_persistent_service/nacos2:7848> start vote and grant vote self, term=184.

2024-05-22 23:28:49,649 WARN Channel[nacos3:7848] in [INACTIVE] state 2 times, it has been removed from the pool.

2024-05-22 23:28:49,651 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,652 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,656 WARN Node <naming_persistent_service/nacos2:7848> RequestVote to nacos3:7848 error: Status[EINTERNAL<1004>: Check connection[nacos3:7848] fail and try to create new one].

2024-05-22 23:28:49,666 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=185, votedFor=nacos2:7848, cost time=10 ms

2024-05-22 23:28:49,692 INFO Node <naming_persistent_service/nacos2:7848> become leader of group, term=185, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:28:49,703 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:28:49,708 INFO The channel nacos3:7848 is in state: TRANSIENT_FAILURE.

2024-05-22 23:28:49,708 WARN There has been some transient failure on this channel nacos3:7848.

2024-05-22 23:28:49,708 ERROR Fail to connect nacos3:7848, remoting exception: java.util.concurrent.ExecutionException: io.grpc.StatusRuntimeException: UNAVAILABLE: Unable to resolve host nacos3.

2024-05-22 23:28:49,710 ERROR Fail to init sending channel to nacos3:7848, group: naming_persistent_service.

2024-05-22 23:28:49,710 ERROR Fail to start replicator to peer=nacos3:7848, replicatorType=Follower, groupId=naming_persistent_service.

2024-05-22 23:28:49,711 ERROR Fail to add a replicator, peer=nacos3:7848.

2024-05-22 23:28:49,714 INFO Replicator [group: naming_persistent_service, peer: nacos1:7848, type: Follower] is started

2024-05-22 23:28:49,724 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:28:49,810 INFO onLeaderStart: term=185.

2024-05-22 23:28:49,889 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=185 state=STATE_LEADER.

2024-05-22 23:28:49,890 INFO onLeaderStop: status=Status[ESHUTDOWN<1007>: Raft node is going to quit.].

2024-05-22 23:28:49,897 WARN Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] stops sending entries.

2024-05-22 23:28:49,903 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=185, votedFor=nacos2:7848, cost time=6 ms

2024-05-22 23:28:49,905 INFO Replicator Replicator [state=Replicate, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] is going to quit

2024-05-22 23:28:49,909 WARN ThreadId: Replicator [state=Destroyed, statInfo=<running=IDLE, firstLogIndex=173, lastLogIncluded=0, lastLogIndex=173, lastTermIncluded=0>, peerId=nacos1:7848, groupId=naming_persistent_service, waitId=1, type=Follower] already destroyed, ignore error code: 1001

2024-05-22 23:28:49,909 INFO Shutting down FSMCaller...

2024-05-22 23:28:49,910 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=28, target=nacos3:7848}}.

2024-05-22 23:28:49,911 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,911 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,911 INFO onShutdown.

2024-05-22 23:28:49,912 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=22, target=nacos1:7848}}.

2024-05-22 23:28:49,913 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,913 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,932 INFO ThreadPool is terminated: JRaft-Node-ScheduleThreadPool, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@36dcf05d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:49,935 INFO The number of active nodes decrement to 0.

2024-05-22 23:28:49,940 INFO ThreadPool is terminated: JRaft-Global-ElectionTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@77cb4c1b[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1].

2024-05-22 23:28:49,941 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@7800ca5d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 4].

2024-05-22 23:28:49,942 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-ElectionTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:49,947 INFO ThreadPool is terminated: JRaft-Global-VoteTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2c0d7d93[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:49,947 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=5000, name='JRaft-VoteTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:49,949 INFO ThreadPool is terminated: JRaft-Global-StepDownTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@7b56d24d[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:49,949 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=2500, name='JRaft-StepDownTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:49,951 INFO ThreadPool is terminated: JRaft-Global-SnapshotTimer, com.alipay.sofa.jraft.util.MetricScheduledThreadPoolExecutor@2ce45e7c[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0].

2024-05-22 23:28:49,952 INFO Destroy timer: RepeatedTimer{timeout=null, stopped=true, running=false, destroyed=true, invoking=false, timeoutMs=1800000, name='JRaft-SnapshotTimer-<naming_persistent_service/nacos2:7848>'}.

2024-05-22 23:28:49,954 INFO Node <naming_persistent_service/nacos2:7848> shutdown, currTerm=185 state=STATE_SHUTTING.

2024-05-22 23:28:49,954 INFO Stop the RaftGroupService successfully.

2024-05-22 23:28:49,956 INFO Shutdown managed channel: nacos3:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=26, target=nacos3:7848}}.

2024-05-22 23:28:49,959 INFO The channel nacos3:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,959 WARN This channel nacos3:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,960 INFO Shutdown managed channel: nacos2:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=10, target=nacos2:7848}}.

2024-05-22 23:28:49,960 INFO The channel nacos2:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,960 INFO DB destroyed, the db path is: /home/nacos/data/protocol/raft/naming_persistent_service/log.

2024-05-22 23:28:49,960 WARN This channel nacos2:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,963 INFO Connection disconnected: /172.25.0.2:37658

2024-05-22 23:28:49,965 INFO Shutdown managed channel: nacos1:7848, ManagedChannelOrphanWrapper{delegate=ManagedChannelImpl{logId=6, target=nacos1:7848}}.

2024-05-22 23:28:49,965 INFO The channel nacos1:7848 is in state: SHUTDOWN.

2024-05-22 23:28:49,965 WARN This channel nacos1:7848 has started shutting down. Any new RPCs should fail immediately.

2024-05-22 23:28:49,973 INFO ThreadPool is terminated: JRaft-RPC-Processor, com.alipay.sofa.jraft.util.MetricThreadPoolExecutor@1dff4935[Shutting down, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 16].

2024-05-22 23:29:26,547 INFO SPI service [com.alipay.sofa.jraft.JRaftServiceFactory - com.alipay.sofa.jraft.core.DefaultJRaftServiceFactory] loading.

2024-05-22 23:29:26,912 INFO SPI service [com.alipay.sofa.jraft.rpc.RaftRpcFactory - com.alipay.sofa.jraft.rpc.impl.GrpcRaftRpcFactory] loading.

2024-05-22 23:29:27,932 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeDescribeSignalHandler] loading.

2024-05-22 23:29:27,935 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.NodeMetricsSignalHandler] loading.

2024-05-22 23:29:27,940 INFO SPI service [com.alipay.sofa.jraft.util.JRaftSignalHandler - com.alipay.sofa.jraft.ThreadPoolMetricsSignalHandler] loading.

2024-05-22 23:29:27,948 INFO SPI service [com.alipay.sofa.jraft.util.timer.RaftTimerFactory - com.alipay.sofa.jraft.util.timer.DefaultRaftTimerFactory] loading.

2024-05-22 23:29:27,957 INFO The number of active nodes increment to 1.

2024-05-22 23:29:28,449 INFO Starts FSMCaller successfully.

2024-05-22 23:29:28,477 WARN No data for snapshot reader /home/nacos/data/protocol/raft/naming_persistent_service/snapshot.

2024-05-22 23:29:28,510 INFO Node <naming_persistent_service/nacos2:7848> init, term=0, lastLogId=LogId [index=0, term=0], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:29:28,516 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:29:28,516 INFO Start the RaftGroupService successfully.

2024-05-22 23:29:28,853 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:29:28,973 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 23:29:29,611 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 23:29:29,618 INFO The channel nacos3:7848 has successfully established.

2024-05-22 23:29:30,118 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:29:30,129 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:29:30,239 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:29:30,241 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:29:30,747 INFO Creating new channel to: nacos2:7848.

2024-05-22 23:29:30,749 INFO The channel nacos2:7848 is in state: CONNECTING.

2024-05-22 23:29:30,770 INFO The channel nacos2:7848 is in state: READY.

2024-05-22 23:29:30,774 INFO The channel nacos2:7848 has successfully established.

2024-05-22 23:29:33,772 INFO Node <naming_persistent_service/nacos2:7848> received PreVoteRequest from nacos3:7848, term=1, currTerm=0, granted=true, requestLastLogId=LogId [index=0, term=0], lastLogId=LogId [index=0, term=0].

2024-05-22 23:29:33,799 INFO Node <naming_persistent_service/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=1, currTerm=0.

2024-05-22 23:29:33,814 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=1, votedFor=0.0.0.0:0, cost time=13 ms

2024-05-22 23:29:33,820 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service/meta-data, term=1, votedFor=nacos3:7848, cost time=4 ms

2024-05-22 23:29:33,888 INFO -Djraft.recyclers.maxCapacityPerThread: 4096.

2024-05-22 23:29:42,905 INFO The number of active nodes increment to 2.

2024-05-22 23:29:43,101 INFO Starts FSMCaller successfully.

2024-05-22 23:29:43,112 WARN No data for snapshot reader /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot.

2024-05-22 23:29:43,126 INFO Node <naming_persistent_service_v2/nacos2:7848> init, term=0, lastLogId=LogId [index=0, term=0], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:29:43,132 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:29:43,132 INFO Start the RaftGroupService successfully.

2024-05-22 23:29:43,200 INFO The number of active nodes increment to 3.

2024-05-22 23:29:43,434 INFO Starts FSMCaller successfully.

2024-05-22 23:29:43,436 WARN No data for snapshot reader /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot.

2024-05-22 23:29:43,447 INFO Node <naming_instance_metadata/nacos2:7848> init, term=0, lastLogId=LogId [index=0, term=0], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:29:43,452 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:29:43,453 INFO Start the RaftGroupService successfully.

2024-05-22 23:29:43,477 INFO The number of active nodes increment to 4.

2024-05-22 23:29:43,668 INFO Starts FSMCaller successfully.

2024-05-22 23:29:43,669 WARN No data for snapshot reader /home/nacos/data/protocol/raft/naming_service_metadata/snapshot.

2024-05-22 23:29:43,675 INFO Node <naming_service_metadata/nacos2:7848> init, term=0, lastLogId=LogId [index=0, term=0], conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:29:43,677 WARN RPC server is not started in RaftGroupService.

2024-05-22 23:29:43,678 INFO Start the RaftGroupService successfully.

2024-05-22 23:29:48,312 INFO Node <naming_instance_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=1, currTerm=0, granted=true, requestLastLogId=LogId [index=0, term=0], lastLogId=LogId [index=0, term=0].

2024-05-22 23:29:48,352 INFO Node <naming_instance_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=1, currTerm=0.

2024-05-22 23:29:48,363 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=1, votedFor=0.0.0.0:0, cost time=11 ms

2024-05-22 23:29:48,368 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_instance_metadata/meta-data, term=1, votedFor=nacos3:7848, cost time=5 ms

2024-05-22 23:29:48,394 INFO Node <naming_persistent_service_v2/nacos2:7848> term 0 start preVote.

2024-05-22 23:29:48,399 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:29:48,401 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 23:29:48,417 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 23:29:48,421 INFO The channel nacos3:7848 has successfully established.

2024-05-22 23:29:48,435 INFO Peer nacos3:7848 is connected.

2024-05-22 23:29:48,454 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:29:48,459 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:29:48,467 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:29:48,471 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:29:48,472 INFO Peer nacos1:7848 is connected.

2024-05-22 23:29:48,494 INFO Node <naming_persistent_service_v2/nacos2:7848> received PreVoteResponse from nacos3:7848, term=0, granted=true.

2024-05-22 23:29:48,495 INFO Node <naming_persistent_service_v2/nacos2:7848> start vote and grant vote self, term=0.

2024-05-22 23:29:48,510 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_persistent_service_v2/meta-data, term=1, votedFor=nacos2:7848, cost time=7 ms

2024-05-22 23:29:48,522 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, state not in STATE_FOLLOWER but STATE_CANDIDATE.

2024-05-22 23:29:48,538 INFO Node <naming_persistent_service_v2/nacos2:7848> become leader of group, term=1, conf=nacos3:7848,nacos1:7848,nacos2:7848, oldConf=.

2024-05-22 23:29:48,592 INFO Replicator [group: naming_persistent_service_v2, peer: nacos3:7848, type: Follower] is started

2024-05-22 23:29:48,609 INFO Replicator [group: naming_persistent_service_v2, peer: nacos1:7848, type: Follower] is started

2024-05-22 23:29:48,624 WARN Node <naming_persistent_service_v2/nacos2:7848> received invalid RequestVoteResponse from nacos3:7848, state not in STATE_CANDIDATE but STATE_LEADER.

2024-05-22 23:29:48,675 INFO Node <naming_service_metadata/nacos2:7848> received PreVoteRequest from nacos3:7848, term=1, currTerm=0, granted=true, requestLastLogId=LogId [index=0, term=0], lastLogId=LogId [index=0, term=0].

2024-05-22 23:29:48,688 INFO Node <naming_service_metadata/nacos2:7848> term 0 start preVote.

2024-05-22 23:29:48,693 INFO onLeaderStart: term=1.

2024-05-22 23:29:48,695 INFO Creating new channel to: nacos3:7848.

2024-05-22 23:29:48,702 INFO The channel nacos3:7848 is in state: CONNECTING.

2024-05-22 23:29:48,729 INFO The channel nacos3:7848 is in state: READY.

2024-05-22 23:29:48,733 INFO The channel nacos3:7848 has successfully established.

2024-05-22 23:29:48,748 INFO Peer nacos3:7848 is connected.

2024-05-22 23:29:48,770 INFO Creating new channel to: nacos1:7848.

2024-05-22 23:29:48,780 INFO The channel nacos1:7848 is in state: CONNECTING.

2024-05-22 23:29:48,788 INFO The channel nacos1:7848 is in state: READY.

2024-05-22 23:29:48,789 INFO The channel nacos1:7848 has successfully established.

2024-05-22 23:29:48,793 INFO Peer nacos1:7848 is connected.

2024-05-22 23:29:48,822 INFO Node <naming_service_metadata/nacos2:7848> received RequestVoteRequest from nacos3:7848, term=1, currTerm=0.

2024-05-22 23:29:48,838 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=1, votedFor=0.0.0.0:0, cost time=16 ms

2024-05-22 23:29:48,859 INFO Save raft meta, path=/home/nacos/data/protocol/raft/naming_service_metadata/meta-data, term=1, votedFor=nacos3:7848, cost time=5 ms

2024-05-22 23:29:48,867 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos3:7848, term=0, currTerm=1.

2024-05-22 23:29:48,874 WARN Node <naming_service_metadata/nacos2:7848> received invalid PreVoteResponse from nacos1:7848, term=0, currTerm=1.

2024-05-22 23:47:21,409 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_1.

2024-05-22 23:47:21,410 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service_v2/snapshot/snapshot_1.

2024-05-22 23:51:57,128 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_1.

2024-05-22 23:51:57,129 INFO Renaming /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_service_metadata/snapshot/snapshot_1.

2024-05-22 23:53:15,871 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_1.

2024-05-22 23:53:15,873 INFO Renaming /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/temp to /home/nacos/data/protocol/raft/naming_instance_metadata/snapshot/snapshot_1.

2024-05-22 23:56:07,799 INFO Deleting snapshot /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_1.

2024-05-22 23:56:07,800 INFO Renaming /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/temp to /home/nacos/data/protocol/raft/naming_persistent_service/snapshot/snapshot_1.

2024-05-22 23:59:48,804 INFO The channel nacos1:7848 is in state: IDLE.

2024-05-22 23:59:48,864 INFO The channel nacos3:7848 is in state: IDLE.

2024-05-22 23:59:48,866 INFO The channel nacos1:7848 is in state: IDLE.

